[{"type":"js","data":"(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\n\n/* Package-scope variables */\nvar Sortable;\n\n(function(){\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                    //\n// packages/rubaxa_sortable/packages/rubaxa_sortable.js                                               //\n//                                                                                                    //\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                      //\n(function () {\n\n//////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                              //\n// packages/rubaxa:sortable/methods-server.js                                                   //\n//                                                                                              //\n//////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                //\n'use strict';                                                                                   // 1\n                                                                                                // 2\nSortable = {};                                                                                  // 3\nSortable.collections = [];  // array of collection names that the client is allowed to reorder  // 4\n                                                                                                // 5\nMeteor.methods({                                                                                // 6\n\t/**                                                                                            // 7\n\t * Update the sortField of documents with given ids in a collection, incrementing it by incDec // 8\n\t * @param {String} collectionName - name of the collection to update                           // 9\n\t * @param {String[]} ids - array of document ids                                               // 10\n\t * @param {String} orderField - the name of the order field, usually \"order\"                   // 11\n\t * @param {Number} incDec - pass 1 or -1                                                       // 12\n\t */                                                                                            // 13\n\t'rubaxa:sortable/collection-update': function (collectionName, ids, sortField, incDec) {       // 14\n\t\tcheck(collectionName, String);                                                                // 15\n\t\t// don't allow the client to modify just any collection                                       // 16\n\t\tif (!Sortable || !Array.isArray(Sortable.collections)) {                                      // 17\n\t\t\tthrow new Meteor.Error(500, 'Please define Sortable.collections');                           // 18\n\t\t}                                                                                             // 19\n\t\tif (Sortable.collections.indexOf(collectionName) === -1) {                                    // 20\n\t\t\tthrow new Meteor.Error(403, 'Collection <' + collectionName + '> is not Sortable. Please add it to Sortable.collections in server code.');\n\t\t}                                                                                             // 22\n                                                                                                // 23\n\t\tcheck(ids, [String]);                                                                         // 24\n\t\tcheck(sortField, String);                                                                     // 25\n\t\tcheck(incDec, Number);                                                                        // 26\n\t\tvar selector = {_id: {$in: ids}}, modifier = {$inc: {}};                                      // 27\n\t\tmodifier.$inc[sortField] = incDec;                                                            // 28\n\t\tMongo.Collection.get(collectionName).update(selector, modifier, {multi: true});               // 29\n\t}                                                                                              // 30\n});                                                                                             // 31\n                                                                                                // 32\n//////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"rubaxa:sortable\", {\n  Sortable: Sortable\n});\n\n})();\n","servePath":"/packages/rubaxa_sortable.js"}]