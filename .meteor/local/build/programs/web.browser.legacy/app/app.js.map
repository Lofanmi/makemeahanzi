{"version":3,"sources":["meteor://💻app/lib/external/convnet/1.1.0/convnet.js","meteor://💻app/lib/external/simplify/1.2.2/simplify.js","meteor://💻app/lib/external/voronoi/0.98/rhill-voronoi-core.js","meteor://💻app/lib/stroke_caps/fixStrokes.js","meteor://💻app/lib/stroke_caps/utils.js","meteor://💻app/lib/animation.js","meteor://💻app/lib/base.js","meteor://💻app/lib/cjklib.js","meteor://💻app/lib/classifier.js","meteor://💻app/lib/decomposition_util.js","meteor://💻app/lib/glyphs.js","meteor://💻app/lib/hungarian.js","meteor://💻app/lib/median_util.js","meteor://💻app/lib/net.js","meteor://💻app/lib/pinyin_util.js","meteor://💻app/lib/stroke_extractor.js","meteor://💻app/lib/svg.js","meteor://💻app/client/lib/abstract.js","meteor://💻app/client/lib/analysis.js","meteor://💻app/client/lib/bridges.js","meteor://💻app/client/lib/order.js","meteor://💻app/client/lib/path.js","meteor://💻app/client/lib/strokes.js","meteor://💻app/client/lib/verified.js","meteor://💻app/client/external/opentype/0.4.10/opentype.js","meteor://💻app/client/editor.js","meteor://💻app/client/helpers.js","meteor://💻app/client/metadata.js","meteor://💻app/client/modal.js","meteor://💻app/client/navbar.js"],"names":["convnetjs","REVISION","global","return_v","v_val","gaussRandom","u","Math","random","v","r","c","sqrt","log","randf","a","b","randi","floor","randn","mu","std","zeros","n","isNaN","ArrayBuffer","arr","Array","i","Float64Array","arrContains","elt","length","arrUnique","push","maxmin","w","maxv","minv","maxi","mini","dv","randperm","j","temp","array","q","weightedSample","lst","probs","p","cumprob","k","getopt","opt","field_name","default_value","Vol","sx","sy","depth","Object","prototype","toString","call","dw","scale","get","x","y","d","ix","set","add","get_grad","set_grad","add_grad","cloneAndZero","clone","V","addFrom","addFromScaled","setConst","toJSON","json","fromJSON","augment","crop","dx","dy","fliplr","W","W2","img_to_vol","img","convert_grayscale","canvas","document","createElement","width","height","ctx","getContext","drawImage","e","name","img_data","getImageData","data","H","pv","x1","ConvLayer","out_depth","filters","in_depth","in_sx","in_sy","stride","pad","l1_decay_mul","l2_decay_mul","out_sx","out_sy","layer_type","bias","bias_pref","biases","forward","is_training","in_act","A","V_sx","V_sy","xy_stride","f","ay","ax","fy","oy","fx","ox","fd","out_act","backward","chain_grad","ix1","ix2","getParamsAndGrads","response","params","grads","FullyConnLayer","num_neurons","num_inputs","Vw","wi","tfi","PoolLayer","switchx","switchy","winx","winy","InputLayer","SoftmaxLayer","as","amax","es","esum","exp","indicator","mul","RegressionLayer","loss","dim","yi","val","SVMLayer","yscore","margin","ReluLayer","V2","N","V2w","SigmoidLayer","v2wi","MaxoutLayer","group_size","switches","ai","a2","tanh","TanhLayer","DropoutLayer","drop_prob","dropped","LocalResponseNormalizationLayer","alpha","beta","console","S_cache_","n2","den","max","min","aa","pow","S","SB","SB2","aj","g","Net","options","layers","makeLayers","defs","type","desugar","new_defs","def","num_classes","activation","tensor","gs","prev","QuadTransformLayer","act","getCostLoss","layer_reponse","getPrediction","Lj","t","L","Trainer","net","learning_rate","l1_decay","l2_decay","batch_size","method","momentum","ro","eps","gsum","xsum","train","start","Date","getTime","end","fwd_time","cost_loss","l2_decay_loss","l1_decay_loss","bwd_time","pglist","pg","plen","abs","l1grad","l2grad","gij","gsumi","xsumi","softmax_loss","SGDTrainer","MagicNet","labels","train_ratio","num_folds","num_candidates","num_epochs","ensemble_size","batch_size_min","batch_size_max","l2_decay_min","l2_decay_max","learning_rate_min","learning_rate_max","momentum_min","momentum_max","neurons_min","neurons_max","folds","candidates","evaluated_candidates","unique_labels","iter","foldix","finish_fold_callback","finish_batch_callback","sampleFolds","sampleCandidates","num_train","train_ix","slice","test_ix","sampleCandidate","input_depth","layer_defs","nl","ni","dp","bs","l2","lr","mom","tp","trainer_def","trainer","cand","acc","accv","step","fold","dataix","l","lastiter","val_acc","evalValErrors","sort","vals","yhat","predict_soft","nv","xout","predict","stats","predicted_label","nets","dummy_candidate","onFinishFold","onFinishBatch","simplify","getSqDist","p1","p2","getSqSegDist","simplifyRadialDist","points","sqTolerance","prevPoint","newPoints","point","len","simplifyDPStep","first","last","simplified","maxSqDist","index","sqDist","simplifyDouglasPeucker","tolerance","highestQuality","undefined","define","amd","module","exports","Voronoi","vertices","edges","cells","toRecycle","beachsectionJunkyard","circleEventJunkyard","vertexJunkyard","edgeJunkyard","cellJunkyard","reset","beachline","RBTree","root","beachsection","getFirst","rbNext","circleEvents","firstCircleEvent","ε","invε","equalWithEpsilon","greaterThanWithEpsilon","greaterThanOrEqualWithEpsilon","lessThanWithEpsilon","lessThanOrEqualWithEpsilon","rbInsertSuccessor","node","successor","parent","rbPrevious","rbRight","rbLeft","rbParent","rbRed","grandpa","uncle","rbRotateLeft","rbRotateRight","rbRemoveNode","left","right","next","isRed","sibling","getLast","Diagram","site","Cell","halfedges","closeMe","init","createCell","cell","pop","prepareHalfedges","iHalfedge","edge","vb","va","splice","angle","getNeighborIds","neighbors","lSite","voronoiId","rSite","getBbox","xmin","Infinity","ymin","xmax","ymax","vx","vy","getStartpoint","pointIntersection","halfedge","p0","getEndpoint","Vertex","Edge","Halfedge","atan2","createHalfedge","createVertex","createEdge","setEdgeStartpoint","setEdgeEndpoint","createBorderEdge","vertex","Beachsection","createBeachsection","leftBreakPoint","arc","directrix","rfocx","rfocy","pby2","lArc","lfocx","lfocy","plby2","hl","aby2","rightBreakPoint","rArc","detachBeachsection","detachCircleEvent","removeBeachsection","circle","circleEvent","ycenter","previous","disappearingTransitions","abs_fn","unshift","nArcs","iArc","attachCircleEvent","addBeachsection","dxl","dxr","newArc","bx","by","cx","cy","hb","hc","CircleEvent","cSite","ha","predecessor","connectEdge","bbox","xl","xr","yt","yb","lx","ly","rx","ry","fm","fb","clipEdge","t0","t1","clipEdges","iEdge","closeCells","iCell","iLeft","nHalfedges","vz","lastBorderSegment","quantizeSites","sites","recycle","diagram","compute","startTime","concat","siteEvents","siteid","xsitex","xsitey","stopTime","execTime","require","distToPath","getCosSimAroundPoint","getLinesIntersectPoint","getOutlinePoints","extendPointOnLine","estimateTanPoints","roundPathPoints","ptEq","dist","CLIP_THRESH","LOWER_COS_SIM_THRESH","UPPER_COS_SIM_THRESH","Bridge","pointString","stroke","estTanPoints","outline","getClips","cosSim0","cosSim1","character","strokes","filter","dist0","dist1","map","clippingStroke","Clip","bridge","clippedBy","isDouble","canMerge","otherClip","mergeIntoDouble","middlePoint","replace","getNewStrokeTip","maxControlPoint","maxDistControl0","maxDistControl1","distControl0","distControl1","midDist0","midDist1","controlPoint0","controlPoint1","pString","round","Stroke","pathString","strokeNum","getBridges","pointStringParts","match","pointStringPart","fullPointStringRegex","RegExp","parts","split","num","parseFloat","fixPathString","bridges","clips","forEach","clip","lastClip","modifiedPathString","newTip","isModified","isDoubleClipped","find","Character","pathStrings","path","fixStrokesWithDetails","strokePathStrings","fixedStrokesInfo","modified","summary","hasDoubleClippedStroke","modifiedStrokes","fixStrokesOnce","corrected","fixStrokes","_toConsumableArray","module1","link","default","svgPathUtils","norm","vect","subtract","count","delta","svgPoint","at","l1p1","l1p2","l2p1","l2p2","x2","x3","x4","y1","y2","y3","y4","xNumerator","yNumerator","denominator","getPointIndex","pathOutline","dists","outlinePoint","indexOf","getIndexAtDelta","pointIndex","preIndex","postIndex","vect1","vect2","distance","mag","floats","fixedPathString","float","clipPoints","cpIndex0","cpIndex1","_createForOfIteratorHelperLoose","export","getAnimationData","kIdPrefix","kWidth","distance2","point1","point2","diff","getMedianLength","median","result","getMedianPath","join","medians","delay","speed","lengths","paths","animations","total_duration","offset","duration","fraction","animation_id","clip_id","keyframes","spacing","assert","getPWD","maybeRequire","Angle","Point","condition","message","error","Error","isNumber","Number","isFinite","Meteor","isServer","Npm","npmRequire","process","env","PWD","cwd","unique","seen","String","applyMapping","mapping","angle1","angle2","PI","penalty","dot","equal","key","midpoint","valid","_slicedToArray","cjklib","fs","CHARACTER_FIELDS","characters","gb2312","promise","radicals","primary_radical","index_to_radical_map","radical_to_index_map","radical_to_character_map","getCharacterData","field","traditional","getCJKLibRows","lines","line","entry","getFrequencyRows","getUnihanRows","parseUnicodeStr","str","fromCodePoint","parseInt","substr","readFile","filename","Promise","resolve","reject","filepath","$","code","fillDecompositions","decompositions","glyphs","all","then","rows","row","fillDefinitions","readings","fillFrequencies","fillKangxiIndex","getIndex","adotb","fillPinyin","fillStrokeCounts","dictionary_like_data","fillRadicalData","locale","hasOwnProperty","fillRadicalToCharacterMap","radical_equivalent_characters","fillVariants","variants","source","target","swap","_","fillGB2312","from","codepoint","codePointAt","keys","parseLocaleGlyphMap","cleanupCJKLibData","convert_astral_characters","radical_to_character","decomposition","primary","radical","startup","bind","radical_isolated_characters","frequencies","radical_stroke_counts","definition","frequency","kangxi_index","pinyin","catch","NEURAL_NET_TRAINED_FOR_STROKE_EXTRACTION","stroke_extractor","input","weight","trainedClassifier","features","softmax","combinedClassifier","handTunedClassifier","decomposition_util","ids_data","label","arity","ideograph_description_characters","UNKNOWN_COMPONENT","augmentTreeWithPathData","tree","children","parseSubtree","current","value","serializeSubtree","subtree","collectComponents","child","convertDecompositionToTree","convertTreeToDecomposition","getSubtree","Glyphs","Progress","defaultGlyph","metadata","stages","glyph","base","verified","Mongo","Collection","clearDependencies","stack","visited","dependencies","$regex","$ne","fetch","update","$in","$set","multi","findOne","getAll","getNext","clause","extend","$gt","getNextUnverified","getNextVerified","getPrevious","$lt","getPreviousUnverified","getPreviousVerified","loadAll","upsert","refresh","save","check","syncDefinitionAndPinyin","sentinel","remove","targets","total","complete","backup","_ensureIndex","methods","method_names","loadAllGlyphs","saveGlyphs","publish","Hungarian","fn","me","apply","arguments","cost_matrix","last_matched","ref","ref1","results","get_final_score","update_labels","find_root_and_slacks","cost","find_greedy_solution","reduce_cost_matrix","range","matched","x_label","len1","ref2","results1","y_label","x_match","y_match","len2","len3","max_cost","ref3","cur_x","cur_y","delta_x","delta_y","new_slack","next_y","slack","slack_x","x_in_tree","y_parent","original_matrix","Util","sum","median_util","svg","size","rise","num_to_match","voronoi","filterMedian","distances","position","total_so_far","findLongestShortestPath","adjacency","findPathFromFurthestNode","neighbor","candidate","findStrokeMedian","convertSVGPathToPaths","polygon","approximation","getPolygonApproximation","bounding_box","include","polygonContainsPoint","simple","normalizeForMatch","pinyin_util","vowel_to_tone","tokenSet","tokens","consonants","vowels","two_syllables","dropTones","append_number","option","toneless","numberedPinyinToTonePinyin","numbered","toLowerCase","tone","consonant","vowel","tonePinyinToNumberedPinyin","MAX_BRIDGE_DISTANCE","MIN_CORNER_ANGLE","MIN_CORNER_TANGENT_DISTANCE","REVERSAL_PENALTY","checkBridge","endpoints","classifier","corners","corner","matching","matchCorners","getFeatures","ins","out","trivial","angles","angle_penalty","distance_penalty","matrix","scoreCorners","reversed_score","Endpoint","indices","segments","tangents","threshold","control","addEdgeToAdjacency","extractStroke","endpoint_map","bridge_adjacency","extracted_indices","attempt_one","line_segments","self_intersecting","advance","index1","index2","endpoint","getIntersection","segment1","segment2","diff1","diff2","cross","s","indexToPoint","pushLineSegments","old_lines","selectBridge","indices1","indices2","intersection","reverse","result_length","new_key","cls","num_segments_on_path","extractStrokes","endpoint_position_map","xs","attempt","missed","getStrokes","stroke_paths","convertPathsToSVGPath","get2xArea","area","orientPaths","approximation_error","polygons","contains","should_reverse","segment","splitPath","terms","command","convertCommandsToPath","commands","num_points","crossings","AbstractStage","colors","Session","clearLaterStages","output1","output2","getStageOutput","adjusted","handleEvent","event","template","refreshUI","validate","_assertThisInitialized","_inheritsLoose","AnalysisStage","stage","etymology_fields","fixSubtreeChildrenLength","setSubtreeType","updateCharacterValue","text","forceRefresh","updateEtymology","expansion","endsWith","suffix","etymology","updateRadicalValue","initializeDecompositionTree","analysis","initializeRadical","components","included","initializeEtymology","phonetic_match","component","component_data","phonetic","semantic","doubleAlphabeticCharacters","test","guessPhoneticAndSemanticComponents","levenshtein","pairs","sorted","updateStatus","to_path","fill","Template","analysis_stage","events","window","getSelection","removeAllRanges","attr","hint","helpers","decomposition_data","etymology_data","compounds","compound","details","variant","traditionalEtymologyHack","inferred_etymology_from_simplified_form","missing","setTimeout","nonradicals","Tracker","autorun","subscribe","BridgesStage","bridgeKey","removeBridge","original","reduce","selected_point","handleClickOnBridge","handleClickOnPoint","without","color","OrderStage","Order","_collection","rad2","compound_bounds","augmentTreeWithBoundsData","bounds","child_bounds","buildStrokeOrder","collectComponentNodes","getAffineTransform","sdiff","tdiff","ratio","matchStrokes","normalize","sources","transform","missing_penalty","scoreStrokes","top_left_penalty","direction","maybeReverse","stroke1","stroke2","option1","option2","order","raw","JSON","stringify","element","stroke_index","old_index","new_index","onAllComponentsReady","nodes","onReverseStroke","onSort","elements","lighten","insert","background","order_stage","top","items","limit","_suppress_log","oldIndex","newIndex","found","PathStage","opentype","alternative","onGetPath","path_stage","load","font","charToGlyphIndex","unicode","StrokesStage","getStatusLine","actual","expected","actual_text","getStrokePaths","VerifiedStage","verified_stage","_typeof","self","o","argument","predicate","beginPath","moveTo","lineTo","cffStandardStrings","cffStandardEncoding","cffExpertEncoding","standardNames","DefaultEncoding","charCodeAt","unicodes","CmapEncoding","cmap","glyphIndexMap","CffEncoding","encoding","charset","charName","GlyphNames","post","version","names","numberOfGlyphs","glyphNameIndex","nameToGlyphIndex","glyphIndexToName","gid","addGlyphNames","tables","charCodes","glyphIndex","addUnicode","cffEncoding","glyphNames","sfnt","glyphset","Font","familyName","styleName","designer","designerURL","manufacturer","manufacturerURL","license","licenseURL","description","copyright","trademark","unitsPerEm","ascender","descender","supported","GlyphSet","hasChar","charToGlyph","stringToGlyphs","nameToGlyph","nametoGlyphIndex","getKerningValue","leftGlyph","rightGlyph","gposKerning","getGposKerningValue","kerningPairs","forEachGlyph","fontSize","callback","kerning","fontScale","advanceWidth","kerningValue","getPath","fullPath","Path","gX","gY","gFontSize","glyphPath","draw","drawPoints","drawMetrics","warnings","_this","assertStringAttribute","attrName","trim","toTables","fontToTable","toBuffer","sfntTable","bytes","encode","buffer","intArray","Uint8Array","download","fileName","requestFileSystem","webkitRequestFileSystem","TEMPORARY","byteLength","getFile","create","fileEntry","createWriter","writer","dataView","DataView","blob","Blob","write","addEventListener","location","href","toURL","err","getPathDefinition","_path","configurable","Glyph","bindConstructorValues","xMin","yMin","xMax","yMax","defineProperty","cmd","quadraticCurveTo","curveTo","closePath","getContours","contours","currentContour","pt","lastPointOfContour","getMetrics","xCoords","yCoords","metrics","leftSideBearing","rightSideBearing","drawCircles","PI_SQ","blueCircles","redCircles","fillStyle","lineWidth","strokeStyle","_glyph","isArray","loader","glyphLoader","ttfGlyphLoader","parseGlyph","buildPath","cffGlyphLoader","parseCFFCharstring","charstring","_font","parse","cff","glyf","gpos","head","hhea","hmtx","kern","loca","maxp","_name","os2","toArrayBuffer","arrayBuffer","loadFromFile","loadFromUrl","url","request","XMLHttpRequest","open","responseType","onload","status","statusText","send","parseBuffer","indexToLocFormat","hmtxOffset","glyfOffset","locaOffset","cffOffset","kernOffset","gposOffset","getFixed","outlinesFormat","getTag","numTables","getUShort","tag","getULong","numberOfHMetrics","numGlyphs","fontFamily","fontSubfamily","shortVersion","locaTable","isNode","loadFn","loadSync","readFileSync","_parse","getByte","getUint8","getCard8","getUint16","getCard16","getShort","getInt16","getUint32","decimal","fromCharCode","getInt8","getOffset","offSize","getBytes","startOffset","endOffset","bytesToString","typeOffsets","uShort","uLong","fixed","longDateTime","Parser","relativeOffset","parseByte","parseChar","parseCard8","parseUShort","parseCard16","parseSID","parseOffset16","parseShort","parseF2Dot14","parseULong","parseFixed","parseOffset16List","parseUShortList","offsets","parseString","string","parseTag","parseLongDateTime","parseVersion","major","minor","skip","amount","strokeWidth","bezierCurveTo","quadTo","close","pathOrCommands","toPathData","decimalPlaces","floatToString","toFixed","packValues","toSVG","sizeOf","Table","tableName","fields","optionKeys","sizeOfFunction","TABLE","table","equals","parseCFFIndex","conversionFn","objects","objectOffset","offsetSize","pos","parseFloatOperand","parser","eof","lookup","n1","parseOperand","b0","b1","b2","b3","b4","entriesToObject","entries","values","parseCFFDict","operands","op","getCFFString","strings","interpretDict","dict","meta","newDict","m","parseCFFHeader","header","formatMajor","formatMinor","TOP_DICT_META","PRIVATE_DICT_META","parseCFFTopDict","parseCFFPrivateDict","parseCFFCharset","nGlyphs","sid","format","parseCFFEncoding","enc","nCodes","nRanges","nLeft","c1x","c1y","c2x","c2y","nStems","haveWidth","defaultWidthX","newContour","parseStems","hasWidthArg","shift","nominalWidthX","codeIndex","subrCode","jpx","jpy","c3x","c3y","c4x","c4y","subrsBias","subrs","gsubrsBias","gsubrs","calcCFFSubroutineBias","parseCFFTable","nameIndex","topDictIndex","stringIndex","globalSubrIndex","topDictData","topDict","privateDictOffset","privateDict","subrOffset","subrIndex","charStringsIndex","charStrings","charString","encodeString","makeHeader","makeNameIndex","fontNames","makeDict","attrs","makeTopDict","makeTopDictIndex","topDicts","makeStringIndex","makeGlobalSubrIndex","makeCharsets","glyphName","glyphSID","glyphToOps","ops","_13","_23","dx1","dy1","dx2","dy2","makeCharStringsIndex","makePrivateDict","makePrivateDictIndex","privateDicts","makeCFFTable","fullName","weightName","fontMatrix","privateAttrs","postScriptName","charsets","privateDictIndex","private","make","parseCmapTable","platformId","encodingId","language","segCount","endCountParser","startCountParser","idDeltaParser","idRangeOffsetParser","glyphIndexOffset","endCount","startCount","idDelta","idRangeOffset","addSegment","addTerminatorSegment","makeCmapTable","segCountX2","searchRange","entrySelector","rangeShift","endCounts","startCounts","idDeltas","idRangeOffsets","glyphIds","glyphId","parseGlyphCoordinate","flag","previousValue","shortVectorBitMask","sameBitMask","numberOfContours","flags","endPointIndices","instructionLength","instructions","numberOfCoordinates","repeatCount","onCurve","px","py","isComposite","moreComponents","xScale","scale01","scale10","yScale","transformPoints","newPt","contour","firstPt","lastPt","curvePt","realFirstPoint","prevPt","midPt","componentGlyph","transformedPoints","parseGlyfTable","nextOffset","parseTaggedListTable","list","parseCoverageTable","coverage","begin","parseClassDefTable","startGlyph","glyphCount","classes","glyphID","rangeCount","startGlyphs","endGlyphs","classValues","parsePairPosSubTable","coverageOffset","valueFormat1","valueFormat2","value1","value2","sharedPairSets","pairSetCount","pairSet","pairSetOffsets","firstGlyph","pairSetOffset","sharedPairSet","pairValueCount","secondGlyph","classDef1Offset","classDef2Offset","class1Count","class2Count","getClass1","getClass2","kerningMatrix","kerningRow","covered","class1","class2","parseLookupTable","lookupType","lookupFlag","useMarkFilteringSet","subTableCount","subTableOffsets","markFilteringSet","subtables","parseGposTable","tableVersion","lookupListOffset","lookupCount","lookupTableOffsets","lookupListAbsoluteOffset","parseHeadTable","fontRevision","checkSumAdjustment","magicNumber","created","macStyle","lowestRecPPEM","fontDirectionHint","glyphDataFormat","makeHeadTable","parseHheaTable","lineGap","advanceWidthMax","minLeftSideBearing","minRightSideBearing","xMaxExtent","caretSlopeRise","caretSlopeRun","caretOffset","metricDataFormat","makeHheaTable","parseHmtxTable","numMetrics","makeHmtxTable","parseKernTable","subTableVersion","nPairs","leftIndex","rightIndex","parseLocaTable","parseFn","glyphOffsets","glyphOffset","parseMaxpTable","maxPoints","maxContours","maxCompositePoints","maxCompositeContours","maxZones","maxTwilightPoints","maxStorage","maxFunctionDefs","maxInstructionDefs","maxStackElements","maxSizeOfInstructions","maxComponentElements","maxComponentDepth","makeMaxpTable","nameTableNames","parseNameTable","stringOffset","unknownCount","platformID","encodingID","languageID","nameID","property","codePoints","langTagCount","makeNameRecord","addMacintoshNameRecord","recordID","stringBytes","STRING","records","addWindowsNameRecord","utf16Bytes","UTF16","makeNameTable","unicodeRanges","getUnicodeRange","parseOS2Table","xAvgCharWidth","usWeightClass","usWidthClass","fsType","ySubscriptXSize","ySubscriptYSize","ySubscriptXOffset","ySubscriptYOffset","ySuperscriptXSize","ySuperscriptYSize","ySuperscriptXOffset","ySuperscriptYOffset","yStrikeoutSize","yStrikeoutPosition","sFamilyClass","panose","ulUnicodeRange1","ulUnicodeRange2","ulUnicodeRange3","ulUnicodeRange4","achVendID","fsSelection","usFirstCharIndex","usLastCharIndex","sTypoAscender","sTypoDescender","sTypoLineGap","usWinAscent","usWinDescent","ulCodePageRange1","ulCodePageRange2","sxHeight","sCapHeight","usDefaultChar","usBreakChar","usMaxContent","makeOS2Table","parsePostTable","italicAngle","underlinePosition","underlineThickness","isFixedPitch","minMemType42","maxMemType42","minMemType1","maxMemType1","nameLength","makePostTable","log2","computeCheckSum","makeTableRecord","checkSum","makeSfntTable","highestPowerOf2","recordFields","tableFields","tableLength","tableRecord","r1","r2","metricsForChar","chars","notFoundMetrics","average","vs","fontToSfntTable","xMins","yMins","xMaxs","yMaxs","advanceWidths","leftSideBearings","rightSideBearings","firstCharIndex","lastCharIndex","globals","advanceWidthAvg","maxLeftSideBearing","headTable","hheaTable","maxpTable","os2Table","hmtxTable","cmapTable","nameTable","uniqueID","preferredFamily","preferredSubfamily","postTable","cffTable","checkSumAdjusted","LIMIT16","LIMIT32","decode","constant","BYTE","CHAR","CHARARRAY","USHORT","SHORT","UINT24","ULONG","LONG","FIXED","FWORD","UFWORD","LONGDATETIME","TAG","Card8","Card16","OffSize","SID","NUMBER","NUMBER16","NUMBER32","REAL","exec","epsilon","nibbles","ii","NAME","INDEX","dataSize","OBJECT","encodedOffsets","offsetEncoder","encodedOffset","DICT","OPERAND","OPERATOR","OP","wmm","WeakMap","CHARSTRING","has","encodingFunction","numBytes","LITERAL","types","last_glyph","last_json","changeGlyph","hash","encodeURIComponent","clearStageSessionKeys","startsWith","constructStage","from_construct_stage","output","isEqual","incrementStage","prefix","loadCharacter","decodeURIComponent","resetStage","bindings","D","editor","last_completed_stage","on","which","focus","Handlebars","registerHelper","selected","body","createRange","selectNodeContents","selection","addRange","trigger","preventDefault","stopPropagation","unknown","parseIntWithValidation","parsePinyin","validators","defaults","display","toUpperCase","separator","extra","rank","references","modal","percent","keyboard","navbar","progress"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAIA,SAAS,GAAGA,SAAS,IAAI;AAAEC,UAAQ,EAAE;AAAZ,CAA7B;;AACA,CAAC,UAASC,MAAT,EAAiB;AAChB,eADgB,CAGhB;;AACA,MAAIC,QAAQ,GAAG,KAAf;AACA,MAAIC,KAAK,GAAG,GAAZ;;AACA,MAAIC,WAAW,GAAG,YAAW;AAC3B,QAAGF,QAAH,EAAa;AACXA,cAAQ,GAAG,KAAX;AACA,aAAOC,KAAP;AACD;;AACD,QAAIE,CAAC,GAAG,IAAEC,IAAI,CAACC,MAAL,EAAF,GAAgB,CAAxB;AACA,QAAIC,CAAC,GAAG,IAAEF,IAAI,CAACC,MAAL,EAAF,GAAgB,CAAxB;AACA,QAAIE,CAAC,GAAGJ,CAAC,GAACA,CAAF,GAAMG,CAAC,GAACA,CAAhB;AACA,QAAGC,CAAC,IAAI,CAAL,IAAUA,CAAC,GAAG,CAAjB,EAAoB,OAAOL,WAAW,EAAlB;AACpB,QAAIM,CAAC,GAAGJ,IAAI,CAACK,IAAL,CAAU,CAAC,CAAD,GAAGL,IAAI,CAACM,GAAL,CAASH,CAAT,CAAH,GAAeA,CAAzB,CAAR;AACAN,SAAK,GAAGK,CAAC,GAACE,CAAV,CAV2B,CAUd;;AACbR,YAAQ,GAAG,IAAX;AACA,WAAOG,CAAC,GAACK,CAAT;AACD,GAbD;;AAcA,MAAIG,KAAK,GAAG,UAASC,CAAT,EAAYC,CAAZ,EAAe;AAAE,WAAOT,IAAI,CAACC,MAAL,MAAeQ,CAAC,GAACD,CAAjB,IAAoBA,CAA3B;AAA+B,GAA5D;;AACA,MAAIE,KAAK,GAAG,UAASF,CAAT,EAAYC,CAAZ,EAAe;AAAE,WAAOT,IAAI,CAACW,KAAL,CAAWX,IAAI,CAACC,MAAL,MAAeQ,CAAC,GAACD,CAAjB,IAAoBA,CAA/B,CAAP;AAA2C,GAAxE;;AACA,MAAII,KAAK,GAAG,UAASC,EAAT,EAAaC,GAAb,EAAiB;AAAE,WAAOD,EAAE,GAACf,WAAW,KAAGgB,GAAxB;AAA8B,GAA7D,CAtBgB,CAwBhB;;;AACA,MAAIC,KAAK,GAAG,UAASC,CAAT,EAAY;AACtB,QAAG,OAAOA,CAAP,KAAY,WAAZ,IAA2BC,KAAK,CAACD,CAAD,CAAnC,EAAwC;AAAE,aAAO,EAAP;AAAY;;AACtD,QAAG,OAAOE,WAAP,KAAuB,WAA1B,EAAuC;AACrC;AACA,UAAIC,GAAG,GAAG,IAAIC,KAAJ,CAAUJ,CAAV,CAAV;;AACA,WAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,CAAd,EAAgBK,CAAC,EAAjB,EAAqB;AAAEF,WAAG,CAACE,CAAD,CAAH,GAAQ,CAAR;AAAY;;AACnC,aAAOF,GAAP;AACD,KALD,MAKO;AACL,aAAO,IAAIG,YAAJ,CAAiBN,CAAjB,CAAP;AACD;AACF,GAVD;;AAYA,MAAIO,WAAW,GAAG,UAASJ,GAAT,EAAcK,GAAd,EAAmB;AACnC,SAAI,IAAIH,CAAC,GAAC,CAAN,EAAQL,CAAC,GAACG,GAAG,CAACM,MAAlB,EAAyBJ,CAAC,GAACL,CAA3B,EAA6BK,CAAC,EAA9B,EAAkC;AAChC,UAAGF,GAAG,CAACE,CAAD,CAAH,KAASG,GAAZ,EAAiB,OAAO,IAAP;AAClB;;AACD,WAAO,KAAP;AACD,GALD;;AAOA,MAAIE,SAAS,GAAG,UAASP,GAAT,EAAc;AAC5B,QAAIV,CAAC,GAAG,EAAR;;AACA,SAAI,IAAIY,CAAC,GAAC,CAAN,EAAQL,CAAC,GAACG,GAAG,CAACM,MAAlB,EAAyBJ,CAAC,GAACL,CAA3B,EAA6BK,CAAC,EAA9B,EAAkC;AAChC,UAAG,CAACE,WAAW,CAACd,CAAD,EAAIU,GAAG,CAACE,CAAD,CAAP,CAAf,EAA4B;AAC1BZ,SAAC,CAACkB,IAAF,CAAOR,GAAG,CAACE,CAAD,CAAV;AACD;AACF;;AACD,WAAOZ,CAAP;AACD,GARD,CA5CgB,CAsDhB;;;AACA,MAAImB,MAAM,GAAG,UAASC,CAAT,EAAY;AACvB,QAAGA,CAAC,CAACJ,MAAF,KAAa,CAAhB,EAAmB;AAAE,aAAO,EAAP;AAAY,KADV,CACW;;;AAClC,QAAIK,IAAI,GAAGD,CAAC,CAAC,CAAD,CAAZ;AACA,QAAIE,IAAI,GAAGF,CAAC,CAAC,CAAD,CAAZ;AACA,QAAIG,IAAI,GAAG,CAAX;AACA,QAAIC,IAAI,GAAG,CAAX;AACA,QAAIjB,CAAC,GAAGa,CAAC,CAACJ,MAAV;;AACA,SAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,CAAd,EAAgBK,CAAC,EAAjB,EAAqB;AACnB,UAAGQ,CAAC,CAACR,CAAD,CAAD,GAAOS,IAAV,EAAgB;AAAEA,YAAI,GAAGD,CAAC,CAACR,CAAD,CAAR;AAAaW,YAAI,GAAGX,CAAP;AAAW;;AAC1C,UAAGQ,CAAC,CAACR,CAAD,CAAD,GAAOU,IAAV,EAAgB;AAAEA,YAAI,GAAGF,CAAC,CAACR,CAAD,CAAR;AAAaY,YAAI,GAAGZ,CAAP;AAAW;AAC3C;;AACD,WAAO;AAACW,UAAI,EAAEA,IAAP;AAAaF,UAAI,EAAEA,IAAnB;AAAyBG,UAAI,EAAEA,IAA/B;AAAqCF,UAAI,EAAEA,IAA3C;AAAiDG,QAAE,EAACJ,IAAI,GAACC;AAAzD,KAAP;AACD,GAZD,CAvDgB,CAqEhB;;;AACA,MAAII,QAAQ,GAAG,UAASnB,CAAT,EAAY;AACzB,QAAIK,CAAC,GAAGL,CAAR;AAAA,QACIoB,CAAC,GAAG,CADR;AAAA,QAEIC,IAFJ;AAGA,QAAIC,KAAK,GAAG,EAAZ;;AACA,SAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACvB,CAAd,EAAgBuB,CAAC,EAAjB;AAAoBD,WAAK,CAACC,CAAD,CAAL,GAASA,CAAT;AAApB;;AACA,WAAOlB,CAAC,EAAR,EAAY;AACRe,OAAC,GAAGpC,IAAI,CAACW,KAAL,CAAWX,IAAI,CAACC,MAAL,MAAiBoB,CAAC,GAAC,CAAnB,CAAX,CAAJ;AACAgB,UAAI,GAAGC,KAAK,CAACjB,CAAD,CAAZ;AACAiB,WAAK,CAACjB,CAAD,CAAL,GAAWiB,KAAK,CAACF,CAAD,CAAhB;AACAE,WAAK,CAACF,CAAD,CAAL,GAAWC,IAAX;AACH;;AACD,WAAOC,KAAP;AACD,GAbD,CAtEgB,CAqFhB;AACA;;;AACA,MAAIE,cAAc,GAAG,UAASC,GAAT,EAAcC,KAAd,EAAqB;AACxC,QAAIC,CAAC,GAAGpC,KAAK,CAAC,CAAD,EAAI,GAAJ,CAAb;AACA,QAAIqC,OAAO,GAAG,GAAd;;AACA,SAAI,IAAIC,CAAC,GAAC,CAAN,EAAQ7B,CAAC,GAACyB,GAAG,CAAChB,MAAlB,EAAyBoB,CAAC,GAAC7B,CAA3B,EAA6B6B,CAAC,EAA9B,EAAkC;AAChCD,aAAO,IAAIF,KAAK,CAACG,CAAD,CAAhB;;AACA,UAAGF,CAAC,GAAGC,OAAP,EAAgB;AAAE,eAAOH,GAAG,CAACI,CAAD,CAAV;AAAgB;AACnC;AACF,GAPD,CAvFgB,CAgGhB;;;AACA,MAAIC,MAAM,GAAG,UAASC,GAAT,EAAcC,UAAd,EAA0BC,aAA1B,EAAyC;AACpD,WAAO,OAAOF,GAAG,CAACC,UAAD,CAAV,KAA2B,WAA3B,GAAyCD,GAAG,CAACC,UAAD,CAA5C,GAA2DC,aAAlE;AACD,GAFD;;AAIAtD,QAAM,CAACY,KAAP,GAAeA,KAAf;AACAZ,QAAM,CAACe,KAAP,GAAeA,KAAf;AACAf,QAAM,CAACiB,KAAP,GAAeA,KAAf;AACAjB,QAAM,CAACoB,KAAP,GAAeA,KAAf;AACApB,QAAM,CAACiC,MAAP,GAAgBA,MAAhB;AACAjC,QAAM,CAACwC,QAAP,GAAkBA,QAAlB;AACAxC,QAAM,CAAC6C,cAAP,GAAwBA,cAAxB;AACA7C,QAAM,CAAC+B,SAAP,GAAmBA,SAAnB;AACA/B,QAAM,CAAC4B,WAAP,GAAqBA,WAArB;AACA5B,QAAM,CAACmD,MAAP,GAAgBA,MAAhB;AAED,CAhHD,EAgHGrD,SAhHH;;AAiHA,CAAC,UAASE,MAAT,EAAiB;AAChB,eADgB,CAGhB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAIuD,GAAG,GAAG,UAASC,EAAT,EAAaC,EAAb,EAAiBC,KAAjB,EAAwBjD,CAAxB,EAA2B;AACnC;AACA,QAAGkD,MAAM,CAACC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BN,EAA/B,MAAuC,gBAA1C,EAA4D;AAC1D;AACA,WAAKA,EAAL,GAAU,CAAV;AACA,WAAKC,EAAL,GAAU,CAAV;AACA,WAAKC,KAAL,GAAaF,EAAE,CAAC1B,MAAhB,CAJ0D,CAK1D;AACA;;AACA,WAAKI,CAAL,GAASlC,MAAM,CAACoB,KAAP,CAAa,KAAKsC,KAAlB,CAAT;AACA,WAAKK,EAAL,GAAU/D,MAAM,CAACoB,KAAP,CAAa,KAAKsC,KAAlB,CAAV;;AACA,WAAI,IAAIhC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKgC,KAAnB,EAAyBhC,CAAC,EAA1B,EAA8B;AAC5B,aAAKQ,CAAL,CAAOR,CAAP,IAAY8B,EAAE,CAAC9B,CAAD,CAAd;AACD;AACF,KAZD,MAYO;AACL;AACA,WAAK8B,EAAL,GAAUA,EAAV;AACA,WAAKC,EAAL,GAAUA,EAAV;AACA,WAAKC,KAAL,GAAaA,KAAb;AACA,UAAIrC,CAAC,GAAGmC,EAAE,GAACC,EAAH,GAAMC,KAAd;AACA,WAAKxB,CAAL,GAASlC,MAAM,CAACoB,KAAP,CAAaC,CAAb,CAAT;AACA,WAAK0C,EAAL,GAAU/D,MAAM,CAACoB,KAAP,CAAaC,CAAb,CAAV;;AACA,UAAG,OAAOZ,CAAP,KAAa,WAAhB,EAA6B;AAC3B;AACA;AACA;AACA,YAAIuD,KAAK,GAAG3D,IAAI,CAACK,IAAL,CAAU,OAAK8C,EAAE,GAACC,EAAH,GAAMC,KAAX,CAAV,CAAZ;;AACA,aAAI,IAAIhC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,CAAd,EAAgBK,CAAC,EAAjB,EAAqB;AACnB,eAAKQ,CAAL,CAAOR,CAAP,IAAY1B,MAAM,CAACiB,KAAP,CAAa,GAAb,EAAkB+C,KAAlB,CAAZ;AACD;AACF,OARD,MAQO;AACL,aAAI,IAAItC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,CAAd,EAAgBK,CAAC,EAAjB,EAAqB;AACnB,eAAKQ,CAAL,CAAOR,CAAP,IAAYjB,CAAZ;AACD;AACF;AACF;AACF,GApCD;;AAsCA8C,KAAG,CAACK,SAAJ,GAAgB;AACdK,OAAG,EAAE,UAASC,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB;AACrB,UAAIC,EAAE,GAAC,CAAE,KAAKb,EAAL,GAAUW,CAAX,GAAcD,CAAf,IAAkB,KAAKR,KAAvB,GAA6BU,CAApC;AACA,aAAO,KAAKlC,CAAL,CAAOmC,EAAP,CAAP;AACD,KAJa;AAKdC,OAAG,EAAE,UAASJ,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB7D,CAAlB,EAAqB;AACxB,UAAI8D,EAAE,GAAC,CAAE,KAAKb,EAAL,GAAUW,CAAX,GAAcD,CAAf,IAAkB,KAAKR,KAAvB,GAA6BU,CAApC;AACA,WAAKlC,CAAL,CAAOmC,EAAP,IAAa9D,CAAb;AACD,KARa;AASdgE,OAAG,EAAE,UAASL,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB7D,CAAlB,EAAqB;AACxB,UAAI8D,EAAE,GAAC,CAAE,KAAKb,EAAL,GAAUW,CAAX,GAAcD,CAAf,IAAkB,KAAKR,KAAvB,GAA6BU,CAApC;AACA,WAAKlC,CAAL,CAAOmC,EAAP,KAAc9D,CAAd;AACD,KAZa;AAadiE,YAAQ,EAAE,UAASN,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB;AAC1B,UAAIC,EAAE,GAAG,CAAE,KAAKb,EAAL,GAAUW,CAAX,GAAcD,CAAf,IAAkB,KAAKR,KAAvB,GAA6BU,CAAtC;AACA,aAAO,KAAKL,EAAL,CAAQM,EAAR,CAAP;AACD,KAhBa;AAiBdI,YAAQ,EAAE,UAASP,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB7D,CAAlB,EAAqB;AAC7B,UAAI8D,EAAE,GAAG,CAAE,KAAKb,EAAL,GAAUW,CAAX,GAAcD,CAAf,IAAkB,KAAKR,KAAvB,GAA6BU,CAAtC;AACA,WAAKL,EAAL,CAAQM,EAAR,IAAc9D,CAAd;AACD,KApBa;AAqBdmE,YAAQ,EAAE,UAASR,CAAT,EAAYC,CAAZ,EAAeC,CAAf,EAAkB7D,CAAlB,EAAqB;AAC7B,UAAI8D,EAAE,GAAG,CAAE,KAAKb,EAAL,GAAUW,CAAX,GAAcD,CAAf,IAAkB,KAAKR,KAAvB,GAA6BU,CAAtC;AACA,WAAKL,EAAL,CAAQM,EAAR,KAAe9D,CAAf;AACD,KAxBa;AAyBdoE,gBAAY,EAAE,YAAW;AAAE,aAAO,IAAIpB,GAAJ,CAAQ,KAAKC,EAAb,EAAiB,KAAKC,EAAtB,EAA0B,KAAKC,KAA/B,EAAsC,GAAtC,CAAP;AAAkD,KAzB/D;AA0BdkB,SAAK,EAAE,YAAW;AAChB,UAAIC,CAAC,GAAG,IAAItB,GAAJ,CAAQ,KAAKC,EAAb,EAAiB,KAAKC,EAAtB,EAA0B,KAAKC,KAA/B,EAAsC,GAAtC,CAAR;AACA,UAAIrC,CAAC,GAAG,KAAKa,CAAL,CAAOJ,MAAf;;AACA,WAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,CAAd,EAAgBK,CAAC,EAAjB,EAAqB;AAAEmD,SAAC,CAAC3C,CAAF,CAAIR,CAAJ,IAAS,KAAKQ,CAAL,CAAOR,CAAP,CAAT;AAAqB;;AAC5C,aAAOmD,CAAP;AACD,KA/Ba;AAgCdC,WAAO,EAAE,UAASD,CAAT,EAAY;AAAE,WAAI,IAAI3B,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKhB,CAAL,CAAOJ,MAArB,EAA4BoB,CAAC,EAA7B,EAAiC;AAAE,aAAKhB,CAAL,CAAOgB,CAAP,KAAa2B,CAAC,CAAC3C,CAAF,CAAIgB,CAAJ,CAAb;AAAsB;AAAC,KAhCnE;AAiCd6B,iBAAa,EAAE,UAASF,CAAT,EAAYhE,CAAZ,EAAe;AAAE,WAAI,IAAIqC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKhB,CAAL,CAAOJ,MAArB,EAA4BoB,CAAC,EAA7B,EAAiC;AAAE,aAAKhB,CAAL,CAAOgB,CAAP,KAAarC,CAAC,GAACgE,CAAC,CAAC3C,CAAF,CAAIgB,CAAJ,CAAf;AAAwB;AAAC,KAjC9E;AAkCd8B,YAAQ,EAAE,UAASnE,CAAT,EAAY;AAAE,WAAI,IAAIqC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKhB,CAAL,CAAOJ,MAArB,EAA4BoB,CAAC,EAA7B,EAAiC;AAAE,aAAKhB,CAAL,CAAOgB,CAAP,IAAYrC,CAAZ;AAAgB;AAAC,KAlC9D;AAoCdoE,UAAM,EAAE,YAAW;AACjB;AACA,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC1B,EAAL,GAAU,KAAKA,EAAf;AACA0B,UAAI,CAACzB,EAAL,GAAU,KAAKA,EAAf;AACAyB,UAAI,CAACxB,KAAL,GAAa,KAAKA,KAAlB;AACAwB,UAAI,CAAChD,CAAL,GAAS,KAAKA,CAAd;AACA,aAAOgD,IAAP,CAPiB,CAQjB;AACD,KA7Ca;AA8CdC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK1B,EAAL,GAAU0B,IAAI,CAAC1B,EAAf;AACA,WAAKC,EAAL,GAAUyB,IAAI,CAACzB,EAAf;AACA,WAAKC,KAAL,GAAawB,IAAI,CAACxB,KAAlB;AAEA,UAAIrC,CAAC,GAAG,KAAKmC,EAAL,GAAQ,KAAKC,EAAb,GAAgB,KAAKC,KAA7B;AACA,WAAKxB,CAAL,GAASlC,MAAM,CAACoB,KAAP,CAAaC,CAAb,CAAT;AACA,WAAK0C,EAAL,GAAU/D,MAAM,CAACoB,KAAP,CAAaC,CAAb,CAAV,CAPuB,CAQvB;;AACA,WAAI,IAAIK,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACL,CAAd,EAAgBK,CAAC,EAAjB,EAAqB;AACnB,aAAKQ,CAAL,CAAOR,CAAP,IAAYwD,IAAI,CAAChD,CAAL,CAAOR,CAAP,CAAZ;AACD;AACF;AA1Da,GAAhB;AA6DA1B,QAAM,CAACuD,GAAP,GAAaA,GAAb;AACD,CA9GD,EA8GGzD,SA9GH;;AA+GA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;AACA;AACA;AACA;;AACA,MAAI6B,OAAO,GAAG,UAASP,CAAT,EAAYQ,IAAZ,EAAkBC,EAAlB,EAAsBC,EAAtB,EAA0BC,MAA1B,EAAkC;AAC9C;AACA,QAAG,OAAOA,MAAP,KAAiB,WAApB,EAAiC,IAAIA,MAAM,GAAG,KAAb;AACjC,QAAG,OAAOF,EAAP,KAAa,WAAhB,EAA6B,IAAIA,EAAE,GAAGtF,MAAM,CAACe,KAAP,CAAa,CAAb,EAAgB8D,CAAC,CAACrB,EAAF,GAAO6B,IAAvB,CAAT;AAC7B,QAAG,OAAOE,EAAP,KAAa,WAAhB,EAA6B,IAAIA,EAAE,GAAGvF,MAAM,CAACe,KAAP,CAAa,CAAb,EAAgB8D,CAAC,CAACpB,EAAF,GAAO4B,IAAvB,CAAT,CAJiB,CAM9C;;AACA,QAAII,CAAJ;;AACA,QAAGJ,IAAI,KAAKR,CAAC,CAACrB,EAAX,IAAiB8B,EAAE,KAAG,CAAtB,IAA2BC,EAAE,KAAG,CAAnC,EAAsC;AACpCE,OAAC,GAAG,IAAIlC,GAAJ,CAAQ8B,IAAR,EAAcA,IAAd,EAAoBR,CAAC,CAACnB,KAAtB,EAA6B,GAA7B,CAAJ;;AACA,WAAI,IAAIQ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACmB,IAAd,EAAmBnB,CAAC,EAApB,EAAwB;AACtB,aAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACkB,IAAd,EAAmBlB,CAAC,EAApB,EAAwB;AACtB,cAAGD,CAAC,GAACoB,EAAF,GAAK,CAAL,IAAUpB,CAAC,GAACoB,EAAF,IAAMT,CAAC,CAACrB,EAAlB,IAAwBW,CAAC,GAACoB,EAAF,GAAK,CAA7B,IAAkCpB,CAAC,GAACoB,EAAF,IAAMV,CAAC,CAACpB,EAA7C,EAAiD,SAD3B,CACqC;;AAC3D,eAAI,IAAIW,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACS,CAAC,CAACnB,KAAhB,EAAsBU,CAAC,EAAvB,EAA2B;AAC1BqB,aAAC,CAACnB,GAAF,CAAMJ,CAAN,EAAQC,CAAR,EAAUC,CAAV,EAAYS,CAAC,CAACZ,GAAF,CAAMC,CAAC,GAACoB,EAAR,EAAWnB,CAAC,GAACoB,EAAb,EAAgBnB,CAAhB,CAAZ,EAD0B,CACO;AACjC;AACF;AACF;AACF,KAVD,MAUO;AACLqB,OAAC,GAAGZ,CAAJ;AACD;;AAED,QAAGW,MAAH,EAAW;AACT;AACA,UAAIE,EAAE,GAAGD,CAAC,CAACd,YAAF,EAAT;;AACA,WAAI,IAAIT,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACuB,CAAC,CAACjC,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,aAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACsB,CAAC,CAAChC,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACqB,CAAC,CAAC/B,KAAhB,EAAsBU,CAAC,EAAvB,EAA2B;AAC1BsB,cAAE,CAACpB,GAAH,CAAOJ,CAAP,EAASC,CAAT,EAAWC,CAAX,EAAaqB,CAAC,CAACxB,GAAF,CAAMwB,CAAC,CAACjC,EAAF,GAAOU,CAAP,GAAW,CAAjB,EAAmBC,CAAnB,EAAqBC,CAArB,CAAb,EAD0B,CACa;AACvC;AACF;AACF;;AACDqB,OAAC,GAAGC,EAAJ,CAVS,CAUD;AACT;;AACD,WAAOD,CAAP;AACD,GAnCD,CATgB,CA8ChB;AACA;;;AACA,MAAIE,UAAU,GAAG,UAASC,GAAT,EAAcC,iBAAd,EAAiC;AAEhD,QAAG,OAAOA,iBAAP,KAA4B,WAA/B,EAA4C,IAAIA,iBAAiB,GAAG,KAAxB;AAE5C,QAAIC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAb;AACAF,UAAM,CAACG,KAAP,GAAeL,GAAG,CAACK,KAAnB;AACAH,UAAM,CAACI,MAAP,GAAgBN,GAAG,CAACM,MAApB;AACA,QAAIC,GAAG,GAAGL,MAAM,CAACM,UAAP,CAAkB,IAAlB,CAAV,CAPgD,CAShD;;AACA,QAAI;AACFD,SAAG,CAACE,SAAJ,CAAcT,GAAd,EAAmB,CAAnB,EAAsB,CAAtB;AACD,KAFD,CAEE,OAAOU,CAAP,EAAU;AACV,UAAIA,CAAC,CAACC,IAAF,KAAW,wBAAf,EAAyC;AACvC;AACA,eAAO,KAAP;AACD,OAHD,MAGO;AACL,cAAMD,CAAN;AACD;AACF;;AAED,QAAI;AACF,UAAIE,QAAQ,GAAGL,GAAG,CAACM,YAAJ,CAAiB,CAAjB,EAAoB,CAApB,EAAuBX,MAAM,CAACG,KAA9B,EAAqCH,MAAM,CAACI,MAA5C,CAAf;AACD,KAFD,CAEE,OAAOI,CAAP,EAAU;AACV,UAAGA,CAAC,CAACC,IAAF,KAAW,gBAAd,EAAgC;AAC9B,eAAO,KAAP,CAD8B,CAChB;AACf,OAFD,MAEO;AACL,cAAMD,CAAN;AACD;AACF,KA7B+C,CA+BhD;;;AACA,QAAItD,CAAC,GAAGwD,QAAQ,CAACE,IAAjB;AACA,QAAIjB,CAAC,GAAGG,GAAG,CAACK,KAAZ;AACA,QAAIU,CAAC,GAAGf,GAAG,CAACM,MAAZ;AACA,QAAIU,EAAE,GAAG,EAAT;;AACA,SAAI,IAAIlF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACsB,CAAC,CAAClB,MAAhB,EAAuBJ,CAAC,EAAxB,EAA4B;AAC1BkF,QAAE,CAAC5E,IAAH,CAAQgB,CAAC,CAACtB,CAAD,CAAD,GAAK,KAAL,GAAW,GAAnB,EAD0B,CACD;AAC1B;;AACD,QAAIwC,CAAC,GAAG,IAAIX,GAAJ,CAAQkC,CAAR,EAAWkB,CAAX,EAAc,CAAd,EAAiB,GAAjB,CAAR,CAvCgD,CAuCjB;;AAC/BzC,KAAC,CAAChC,CAAF,GAAM0E,EAAN;;AAEA,QAAGf,iBAAH,EAAsB;AACpB;AACA,UAAIgB,EAAE,GAAG,IAAItD,GAAJ,CAAQkC,CAAR,EAAWkB,CAAX,EAAc,CAAd,EAAiB,GAAjB,CAAT;;AACA,WAAI,IAAIjF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC+D,CAAd,EAAgB/D,CAAC,EAAjB,EAAqB;AACnB,aAAI,IAAIe,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACkE,CAAd,EAAgBlE,CAAC,EAAjB,EAAqB;AACnBoE,YAAE,CAACvC,GAAH,CAAO5C,CAAP,EAASe,CAAT,EAAW,CAAX,EAAayB,CAAC,CAACD,GAAF,CAAMvC,CAAN,EAAQe,CAAR,EAAU,CAAV,CAAb;AACD;AACF;;AACDyB,OAAC,GAAG2C,EAAJ;AACD;;AAED,WAAO3C,CAAP;AACD,GAtDD;;AAwDAlE,QAAM,CAACoF,OAAP,GAAiBA,OAAjB;AACApF,QAAM,CAAC2F,UAAP,GAAoBA,UAApB;AAED,CA3GD,EA2GG7F,SA3GH;;AA4GA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;AACA;AACA;AACA;AACA;;AACA,MAAIuD,SAAS,GAAG,UAAS1D,GAAT,EAAc;AAC5B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD4B,CAG5B;;AACA,SAAK2D,SAAL,GAAiB3D,GAAG,CAAC4D,OAArB;AACA,SAAKxD,EAAL,GAAUJ,GAAG,CAACI,EAAd,CAL4B,CAKV;;AAClB,SAAKyD,QAAL,GAAgB7D,GAAG,CAAC6D,QAApB;AACA,SAAKC,KAAL,GAAa9D,GAAG,CAAC8D,KAAjB;AACA,SAAKC,KAAL,GAAa/D,GAAG,CAAC+D,KAAjB,CAR4B,CAU5B;;AACA,SAAK1D,EAAL,GAAU,OAAOL,GAAG,CAACK,EAAX,KAAkB,WAAlB,GAAgCL,GAAG,CAACK,EAApC,GAAyC,KAAKD,EAAxD;AACA,SAAK4D,MAAL,GAAc,OAAOhE,GAAG,CAACgE,MAAX,KAAsB,WAAtB,GAAoChE,GAAG,CAACgE,MAAxC,GAAiD,CAA/D,CAZ4B,CAYsC;;AAClE,SAAKC,GAAL,GAAW,OAAOjE,GAAG,CAACiE,GAAX,KAAmB,WAAnB,GAAiCjE,GAAG,CAACiE,GAArC,GAA2C,CAAtD,CAb4B,CAa6B;;AACzD,SAAKC,YAAL,GAAoB,OAAOlE,GAAG,CAACkE,YAAX,KAA4B,WAA5B,GAA0ClE,GAAG,CAACkE,YAA9C,GAA6D,GAAjF;AACA,SAAKC,YAAL,GAAoB,OAAOnE,GAAG,CAACmE,YAAX,KAA4B,WAA5B,GAA0CnE,GAAG,CAACmE,YAA9C,GAA6D,GAAjF,CAf4B,CAiB5B;AACA;AACA;AACA;;AACA,SAAKC,MAAL,GAAcnH,IAAI,CAACW,KAAL,CAAW,CAAC,KAAKkG,KAAL,GAAa,KAAKG,GAAL,GAAW,CAAxB,GAA4B,KAAK7D,EAAlC,IAAwC,KAAK4D,MAA7C,GAAsD,CAAjE,CAAd;AACA,SAAKK,MAAL,GAAcpH,IAAI,CAACW,KAAL,CAAW,CAAC,KAAKmG,KAAL,GAAa,KAAKE,GAAL,GAAW,CAAxB,GAA4B,KAAK5D,EAAlC,IAAwC,KAAK2D,MAA7C,GAAsD,CAAjE,CAAd;AACA,SAAKM,UAAL,GAAkB,MAAlB,CAvB4B,CAyB5B;;AACA,QAAIC,IAAI,GAAG,OAAOvE,GAAG,CAACwE,SAAX,KAAyB,WAAzB,GAAuCxE,GAAG,CAACwE,SAA3C,GAAuD,GAAlE;AACA,SAAKZ,OAAL,GAAe,EAAf;;AACA,SAAI,IAAItF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAAE,WAAKsF,OAAL,CAAahF,IAAb,CAAkB,IAAIuB,GAAJ,CAAQ,KAAKC,EAAb,EAAiB,KAAKC,EAAtB,EAA0B,KAAKwD,QAA/B,CAAlB;AAA8D;;AAClG,SAAKY,MAAL,GAAc,IAAItE,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKwD,SAAnB,EAA8BY,IAA9B,CAAd;AACD,GA9BD;;AA+BAb,WAAS,CAAClD,SAAV,GAAsB;AACpBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC;AAEA,WAAKC,MAAL,GAAcnD,CAAd;AACA,UAAIoD,CAAC,GAAG,IAAI1E,GAAJ,CAAQ,KAAKiE,MAAL,GAAa,CAArB,EAAwB,KAAKC,MAAL,GAAa,CAArC,EAAwC,KAAKV,SAAL,GAAgB,CAAxD,EAA2D,GAA3D,CAAR;AAEA,UAAImB,IAAI,GAAGrD,CAAC,CAACrB,EAAF,GAAM,CAAjB;AACA,UAAI2E,IAAI,GAAGtD,CAAC,CAACpB,EAAF,GAAM,CAAjB;AACA,UAAI2E,SAAS,GAAG,KAAKhB,MAAL,GAAa,CAA7B;;AAEA,WAAI,IAAIhD,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK2C,SAAnB,EAA6B3C,CAAC,EAA9B,EAAkC;AAChC,YAAIiE,CAAC,GAAG,KAAKrB,OAAL,CAAa5C,CAAb,CAAR;AACA,YAAIF,CAAC,GAAG,CAAC,KAAKmD,GAAN,GAAW,CAAnB;AACA,YAAIlD,CAAC,GAAG,CAAC,KAAKkD,GAAN,GAAW,CAAnB;;AACA,aAAI,IAAIiB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKb,MAAtB,EAA8BtD,CAAC,IAAEiE,SAAH,EAAaE,EAAE,EAA7C,EAAiD;AAAG;AAClDpE,WAAC,GAAG,CAAC,KAAKmD,GAAN,GAAW,CAAf;;AACA,eAAI,IAAIkB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKf,MAAtB,EAA8BtD,CAAC,IAAEkE,SAAH,EAAaG,EAAE,EAA7C,EAAiD;AAAG;AAElD;AACA,gBAAI1H,CAAC,GAAG,GAAR;;AACA,iBAAI,IAAI2H,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACH,CAAC,CAAC5E,EAAlB,EAAqB+E,EAAE,EAAvB,EAA2B;AACzB,kBAAIC,EAAE,GAAGtE,CAAC,GAACqE,EAAX,CADyB,CACV;;AACf,mBAAI,IAAIE,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACL,CAAC,CAAC7E,EAAlB,EAAqBkF,EAAE,EAAvB,EAA2B;AACzB,oBAAIC,EAAE,GAAGzE,CAAC,GAACwE,EAAX;;AACA,oBAAGD,EAAE,IAAE,CAAJ,IAASA,EAAE,GAACN,IAAZ,IAAoBQ,EAAE,IAAE,CAAxB,IAA6BA,EAAE,GAACT,IAAnC,EAAyC;AACvC,uBAAI,IAAIU,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACP,CAAC,CAAC3E,KAAlB,EAAwBkF,EAAE,EAA1B,EAA8B;AAC5B;AACA/H,qBAAC,IAAIwH,CAAC,CAACnG,CAAF,CAAI,CAAEmG,CAAC,CAAC7E,EAAF,GAAOgF,EAAR,GAAYE,EAAb,IAAiBL,CAAC,CAAC3E,KAAnB,GAAyBkF,EAA7B,IAAmC/D,CAAC,CAAC3C,CAAF,CAAI,CAAEgG,IAAI,GAAGO,EAAR,GAAYE,EAAb,IAAiB9D,CAAC,CAACnB,KAAnB,GAAyBkF,EAA7B,CAAxC;AACD;AACF;AACF;AACF;;AACD/H,aAAC,IAAI,KAAKgH,MAAL,CAAY3F,CAAZ,CAAckC,CAAd,CAAL;AACA6D,aAAC,CAAC3D,GAAF,CAAMiE,EAAN,EAAUD,EAAV,EAAclE,CAAd,EAAiBvD,CAAjB;AACD;AACF;AACF;;AACD,WAAKgI,OAAL,GAAeZ,CAAf;AACA,aAAO,KAAKY,OAAZ;AACD,KAxCmB;AAyCpBC,YAAQ,EAAE,YAAW;AAEnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb;AACAnD,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAayD,CAAC,CAAC3C,CAAF,CAAIJ,MAAjB,CAAP,CAHmB,CAGc;;AAEjC,UAAIoG,IAAI,GAAGrD,CAAC,CAACrB,EAAF,GAAM,CAAjB;AACA,UAAI2E,IAAI,GAAGtD,CAAC,CAACpB,EAAF,GAAM,CAAjB;AACA,UAAI2E,SAAS,GAAG,KAAKhB,MAAL,GAAa,CAA7B;;AAEA,WAAI,IAAIhD,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK2C,SAAnB,EAA6B3C,CAAC,EAA9B,EAAkC;AAChC,YAAIiE,CAAC,GAAG,KAAKrB,OAAL,CAAa5C,CAAb,CAAR;AACA,YAAIF,CAAC,GAAG,CAAC,KAAKmD,GAAN,GAAW,CAAnB;AACA,YAAIlD,CAAC,GAAG,CAAC,KAAKkD,GAAN,GAAW,CAAnB;;AACA,aAAI,IAAIiB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKb,MAAtB,EAA8BtD,CAAC,IAAEiE,SAAH,EAAaE,EAAE,EAA7C,EAAiD;AAAG;AAClDpE,WAAC,GAAG,CAAC,KAAKmD,GAAN,GAAW,CAAf;;AACA,eAAI,IAAIkB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKf,MAAtB,EAA8BtD,CAAC,IAAEkE,SAAH,EAAaG,EAAE,EAA7C,EAAiD;AAAG;AAElD;AACA,gBAAIQ,UAAU,GAAG,KAAKF,OAAL,CAAarE,QAAb,CAAsB+D,EAAtB,EAAyBD,EAAzB,EAA4BlE,CAA5B,CAAjB,CAH+C,CAGE;;AACjD,iBAAI,IAAIoE,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACH,CAAC,CAAC5E,EAAlB,EAAqB+E,EAAE,EAAvB,EAA2B;AACzB,kBAAIC,EAAE,GAAGtE,CAAC,GAACqE,EAAX,CADyB,CACV;;AACf,mBAAI,IAAIE,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACL,CAAC,CAAC7E,EAAlB,EAAqBkF,EAAE,EAAvB,EAA2B;AACzB,oBAAIC,EAAE,GAAGzE,CAAC,GAACwE,EAAX;;AACA,oBAAGD,EAAE,IAAE,CAAJ,IAASA,EAAE,GAACN,IAAZ,IAAoBQ,EAAE,IAAE,CAAxB,IAA6BA,EAAE,GAACT,IAAnC,EAAyC;AACvC,uBAAI,IAAIU,EAAE,GAAC,CAAX,EAAaA,EAAE,GAACP,CAAC,CAAC3E,KAAlB,EAAwBkF,EAAE,EAA1B,EAA8B;AAC5B;AACA,wBAAII,GAAG,GAAG,CAAEd,IAAI,GAAGO,EAAR,GAAYE,EAAb,IAAiB9D,CAAC,CAACnB,KAAnB,GAAyBkF,EAAnC;AACA,wBAAIK,GAAG,GAAG,CAAEZ,CAAC,CAAC7E,EAAF,GAAOgF,EAAR,GAAYE,EAAb,IAAiBL,CAAC,CAAC3E,KAAnB,GAAyBkF,EAAnC;AACAP,qBAAC,CAACtE,EAAF,CAAKkF,GAAL,KAAapE,CAAC,CAAC3C,CAAF,CAAI8G,GAAJ,IAASD,UAAtB;AACAlE,qBAAC,CAACd,EAAF,CAAKiF,GAAL,KAAaX,CAAC,CAACnG,CAAF,CAAI+G,GAAJ,IAASF,UAAtB;AACD;AACF;AACF;AACF;;AACD,iBAAKlB,MAAL,CAAY9D,EAAZ,CAAeK,CAAf,KAAqB2E,UAArB;AACD;AACF;AACF;AACF,KA/EmB;AAgFpBG,qBAAiB,EAAE,YAAW;AAC5B,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAI,IAAIzH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChCyH,gBAAQ,CAACnH,IAAT,CAAc;AAACoH,gBAAM,EAAE,KAAKpC,OAAL,CAAatF,CAAb,EAAgBQ,CAAzB;AAA4BmH,eAAK,EAAE,KAAKrC,OAAL,CAAatF,CAAb,EAAgBqC,EAAnD;AAAuDwD,sBAAY,EAAE,KAAKA,YAA1E;AAAwFD,sBAAY,EAAE,KAAKA;AAA3G,SAAd;AACD;;AACD6B,cAAQ,CAACnH,IAAT,CAAc;AAACoH,cAAM,EAAE,KAAKvB,MAAL,CAAY3F,CAArB;AAAwBmH,aAAK,EAAE,KAAKxB,MAAL,CAAY9D,EAA3C;AAA+CuD,oBAAY,EAAE,GAA7D;AAAkEC,oBAAY,EAAE;AAAhF,OAAd;AACA,aAAO4B,QAAP;AACD,KAvFmB;AAwFpBlE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC1B,EAAL,GAAU,KAAKA,EAAf,CAFiB,CAEE;;AACnB0B,UAAI,CAACzB,EAAL,GAAU,KAAKA,EAAf;AACAyB,UAAI,CAACkC,MAAL,GAAc,KAAKA,MAAnB;AACAlC,UAAI,CAAC+B,QAAL,GAAgB,KAAKA,QAArB;AACA/B,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACoC,YAAL,GAAoB,KAAKA,YAAzB;AACApC,UAAI,CAACqC,YAAL,GAAoB,KAAKA,YAAzB;AACArC,UAAI,CAACmC,GAAL,GAAW,KAAKA,GAAhB;AACAnC,UAAI,CAAC8B,OAAL,GAAe,EAAf;;AACA,WAAI,IAAItF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKsF,OAAL,CAAalF,MAA3B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrCwD,YAAI,CAAC8B,OAAL,CAAahF,IAAb,CAAkB,KAAKgF,OAAL,CAAatF,CAAb,EAAgBuD,MAAhB,EAAlB;AACD;;AACDC,UAAI,CAAC2C,MAAL,GAAc,KAAKA,MAAL,CAAY5C,MAAZ,EAAd;AACA,aAAOC,IAAP;AACD,KA3GmB;AA4GpBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAKlE,EAAL,GAAU0B,IAAI,CAAC1B,EAAf,CALuB,CAKJ;;AACnB,WAAKC,EAAL,GAAUyB,IAAI,CAACzB,EAAf;AACA,WAAK2D,MAAL,GAAclC,IAAI,CAACkC,MAAnB;AACA,WAAKH,QAAL,GAAgB/B,IAAI,CAAC+B,QAArB,CARuB,CAQQ;;AAC/B,WAAKD,OAAL,GAAe,EAAf;AACA,WAAKM,YAAL,GAAoB,OAAOpC,IAAI,CAACoC,YAAZ,KAA6B,WAA7B,GAA2CpC,IAAI,CAACoC,YAAhD,GAA+D,GAAnF;AACA,WAAKC,YAAL,GAAoB,OAAOrC,IAAI,CAACqC,YAAZ,KAA6B,WAA7B,GAA2CrC,IAAI,CAACqC,YAAhD,GAA+D,GAAnF;AACA,WAAKF,GAAL,GAAW,OAAOnC,IAAI,CAACmC,GAAZ,KAAoB,WAApB,GAAkCnC,IAAI,CAACmC,GAAvC,GAA6C,CAAxD;;AACA,WAAI,IAAI3F,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACwD,IAAI,CAAC8B,OAAL,CAAalF,MAA3B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,YAAInB,CAAC,GAAG,IAAIgD,GAAJ,CAAQ,CAAR,EAAU,CAAV,EAAY,CAAZ,EAAc,CAAd,CAAR;AACAhD,SAAC,CAAC4E,QAAF,CAAWD,IAAI,CAAC8B,OAAL,CAAatF,CAAb,CAAX;AACA,aAAKsF,OAAL,CAAahF,IAAb,CAAkBzB,CAAlB;AACD;;AACD,WAAKsH,MAAL,GAAc,IAAItE,GAAJ,CAAQ,CAAR,EAAU,CAAV,EAAY,CAAZ,EAAc,CAAd,CAAd;AACA,WAAKsE,MAAL,CAAY1C,QAAZ,CAAqBD,IAAI,CAAC2C,MAA1B;AACD;AAhImB,GAAtB;;AAmIA,MAAIyB,cAAc,GAAG,UAASlG,GAAT,EAAc;AACjC,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CADiC,CAGjC;AACA;;AACA,SAAK2D,SAAL,GAAiB,OAAO3D,GAAG,CAACmG,WAAX,KAA2B,WAA3B,GAAyCnG,GAAG,CAACmG,WAA7C,GAA2DnG,GAAG,CAAC4D,OAAhF,CALiC,CAOjC;;AACA,SAAKM,YAAL,GAAoB,OAAOlE,GAAG,CAACkE,YAAX,KAA4B,WAA5B,GAA0ClE,GAAG,CAACkE,YAA9C,GAA6D,GAAjF;AACA,SAAKC,YAAL,GAAoB,OAAOnE,GAAG,CAACmE,YAAX,KAA4B,WAA5B,GAA0CnE,GAAG,CAACmE,YAA9C,GAA6D,GAAjF,CATiC,CAWjC;;AACA,SAAKiC,UAAL,GAAkBpG,GAAG,CAAC8D,KAAJ,GAAY9D,GAAG,CAAC+D,KAAhB,GAAwB/D,GAAG,CAAC6D,QAA9C;AACA,SAAKO,MAAL,GAAc,CAAd;AACA,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,UAAL,GAAkB,IAAlB,CAfiC,CAiBjC;;AACA,QAAIC,IAAI,GAAG,OAAOvE,GAAG,CAACwE,SAAX,KAAyB,WAAzB,GAAuCxE,GAAG,CAACwE,SAA3C,GAAuD,GAAlE;AACA,SAAKZ,OAAL,GAAe,EAAf;;AACA,SAAI,IAAItF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA8BrF,CAAC,EAA/B,EAAmC;AAAE,WAAKsF,OAAL,CAAahF,IAAb,CAAkB,IAAIuB,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKiG,UAAnB,CAAlB;AAAoD;;AACzF,SAAK3B,MAAL,GAAc,IAAItE,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKwD,SAAnB,EAA8BY,IAA9B,CAAd;AACD,GAtBD;;AAwBA2B,gBAAc,CAAC1F,SAAf,GAA2B;AACzBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,UAAIoD,CAAC,GAAG,IAAI1E,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKwD,SAAnB,EAA8B,GAA9B,CAAR;AACA,UAAI0C,EAAE,GAAG5E,CAAC,CAAC3C,CAAX;;AACA,WAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,YAAIb,CAAC,GAAG,GAAR;AACA,YAAI6I,EAAE,GAAG,KAAK1C,OAAL,CAAatF,CAAb,EAAgBQ,CAAzB;;AACA,aAAI,IAAIkC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKoF,UAAnB,EAA8BpF,CAAC,EAA/B,EAAmC;AACjCvD,WAAC,IAAI4I,EAAE,CAACrF,CAAD,CAAF,GAAQsF,EAAE,CAACtF,CAAD,CAAf,CADiC,CACb;AACrB;;AACDvD,SAAC,IAAI,KAAKgH,MAAL,CAAY3F,CAAZ,CAAcR,CAAd,CAAL;AACAuG,SAAC,CAAC/F,CAAF,CAAIR,CAAJ,IAASb,CAAT;AACD;;AACD,WAAKgI,OAAL,GAAeZ,CAAf;AACA,aAAO,KAAKY,OAAZ;AACD,KAhBwB;AAiBzBC,YAAQ,EAAE,YAAW;AACnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb;AACAnD,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAayD,CAAC,CAAC3C,CAAF,CAAIJ,MAAjB,CAAP,CAFmB,CAEc;AAEjC;;AACA,WAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,YAAIiI,GAAG,GAAG,KAAK3C,OAAL,CAAatF,CAAb,CAAV;AACA,YAAIqH,UAAU,GAAG,KAAKF,OAAL,CAAa9E,EAAb,CAAgBrC,CAAhB,CAAjB;;AACA,aAAI,IAAI0C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKoF,UAAnB,EAA8BpF,CAAC,EAA/B,EAAmC;AACjCS,WAAC,CAACd,EAAF,CAAKK,CAAL,KAAWuF,GAAG,CAACzH,CAAJ,CAAMkC,CAAN,IAAS2E,UAApB,CADiC,CACD;;AAChCY,aAAG,CAAC5F,EAAJ,CAAOK,CAAP,KAAaS,CAAC,CAAC3C,CAAF,CAAIkC,CAAJ,IAAO2E,UAApB,CAFiC,CAED;AACjC;;AACD,aAAKlB,MAAL,CAAY9D,EAAZ,CAAerC,CAAf,KAAqBqH,UAArB;AACD;AACF,KA/BwB;AAgCzBG,qBAAiB,EAAE,YAAW;AAC5B,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAI,IAAIzH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChCyH,gBAAQ,CAACnH,IAAT,CAAc;AAACoH,gBAAM,EAAE,KAAKpC,OAAL,CAAatF,CAAb,EAAgBQ,CAAzB;AAA4BmH,eAAK,EAAE,KAAKrC,OAAL,CAAatF,CAAb,EAAgBqC,EAAnD;AAAuDuD,sBAAY,EAAE,KAAKA,YAA1E;AAAwFC,sBAAY,EAAE,KAAKA;AAA3G,SAAd;AACD;;AACD4B,cAAQ,CAACnH,IAAT,CAAc;AAACoH,cAAM,EAAE,KAAKvB,MAAL,CAAY3F,CAArB;AAAwBmH,aAAK,EAAE,KAAKxB,MAAL,CAAY9D,EAA3C;AAA+CuD,oBAAY,EAAE,GAA7D;AAAkEC,oBAAY,EAAE;AAAhF,OAAd;AACA,aAAO4B,QAAP;AACD,KAvCwB;AAwCzBlE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACsE,UAAL,GAAkB,KAAKA,UAAvB;AACAtE,UAAI,CAACoC,YAAL,GAAoB,KAAKA,YAAzB;AACApC,UAAI,CAACqC,YAAL,GAAoB,KAAKA,YAAzB;AACArC,UAAI,CAAC8B,OAAL,GAAe,EAAf;;AACA,WAAI,IAAItF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKsF,OAAL,CAAalF,MAA3B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrCwD,YAAI,CAAC8B,OAAL,CAAahF,IAAb,CAAkB,KAAKgF,OAAL,CAAatF,CAAb,EAAgBuD,MAAhB,EAAlB;AACD;;AACDC,UAAI,CAAC2C,MAAL,GAAc,KAAKA,MAAL,CAAY5C,MAAZ,EAAd;AACA,aAAOC,IAAP;AACD,KAvDwB;AAwDzBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAK8B,UAAL,GAAkBtE,IAAI,CAACsE,UAAvB;AACA,WAAKlC,YAAL,GAAoB,OAAOpC,IAAI,CAACoC,YAAZ,KAA6B,WAA7B,GAA2CpC,IAAI,CAACoC,YAAhD,GAA+D,GAAnF;AACA,WAAKC,YAAL,GAAoB,OAAOrC,IAAI,CAACqC,YAAZ,KAA6B,WAA7B,GAA2CrC,IAAI,CAACqC,YAAhD,GAA+D,GAAnF;AACA,WAAKP,OAAL,GAAe,EAAf;;AACA,WAAI,IAAItF,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACwD,IAAI,CAAC8B,OAAL,CAAalF,MAA3B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,YAAInB,CAAC,GAAG,IAAIgD,GAAJ,CAAQ,CAAR,EAAU,CAAV,EAAY,CAAZ,EAAc,CAAd,CAAR;AACAhD,SAAC,CAAC4E,QAAF,CAAWD,IAAI,CAAC8B,OAAL,CAAatF,CAAb,CAAX;AACA,aAAKsF,OAAL,CAAahF,IAAb,CAAkBzB,CAAlB;AACD;;AACD,WAAKsH,MAAL,GAAc,IAAItE,GAAJ,CAAQ,CAAR,EAAU,CAAV,EAAY,CAAZ,EAAc,CAAd,CAAd;AACA,WAAKsE,MAAL,CAAY1C,QAAZ,CAAqBD,IAAI,CAAC2C,MAA1B;AACD;AAxEwB,GAA3B;AA2EA7H,QAAM,CAAC8G,SAAP,GAAmBA,SAAnB;AACA9G,QAAM,CAACsJ,cAAP,GAAwBA,cAAxB;AAED,CAlRD,EAkRGxJ,SAlRH;;AAmRA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;;AAEtB,MAAIqG,SAAS,GAAG,UAASxG,GAAT,EAAc;AAE5B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAF4B,CAI5B;;AACA,SAAKI,EAAL,GAAUJ,GAAG,CAACI,EAAd,CAL4B,CAKV;;AAClB,SAAKyD,QAAL,GAAgB7D,GAAG,CAAC6D,QAApB;AACA,SAAKC,KAAL,GAAa9D,GAAG,CAAC8D,KAAjB;AACA,SAAKC,KAAL,GAAa/D,GAAG,CAAC+D,KAAjB,CAR4B,CAU5B;;AACA,SAAK1D,EAAL,GAAU,OAAOL,GAAG,CAACK,EAAX,KAAkB,WAAlB,GAAgCL,GAAG,CAACK,EAApC,GAAyC,KAAKD,EAAxD;AACA,SAAK4D,MAAL,GAAc,OAAOhE,GAAG,CAACgE,MAAX,KAAsB,WAAtB,GAAoChE,GAAG,CAACgE,MAAxC,GAAiD,CAA/D;AACA,SAAKC,GAAL,GAAW,OAAOjE,GAAG,CAACiE,GAAX,KAAmB,WAAnB,GAAiCjE,GAAG,CAACiE,GAArC,GAA2C,CAAtD,CAb4B,CAa6B;AAEzD;;AACA,SAAKN,SAAL,GAAiB,KAAKE,QAAtB;AACA,SAAKO,MAAL,GAAcnH,IAAI,CAACW,KAAL,CAAW,CAAC,KAAKkG,KAAL,GAAa,KAAKG,GAAL,GAAW,CAAxB,GAA4B,KAAK7D,EAAlC,IAAwC,KAAK4D,MAA7C,GAAsD,CAAjE,CAAd;AACA,SAAKK,MAAL,GAAcpH,IAAI,CAACW,KAAL,CAAW,CAAC,KAAKmG,KAAL,GAAa,KAAKE,GAAL,GAAW,CAAxB,GAA4B,KAAK5D,EAAlC,IAAwC,KAAK2D,MAA7C,GAAsD,CAAjE,CAAd;AACA,SAAKM,UAAL,GAAkB,MAAlB,CAnB4B,CAoB5B;;AACA,SAAKmC,OAAL,GAAe7J,MAAM,CAACoB,KAAP,CAAa,KAAKoG,MAAL,GAAY,KAAKC,MAAjB,GAAwB,KAAKV,SAA1C,CAAf;AACA,SAAK+C,OAAL,GAAe9J,MAAM,CAACoB,KAAP,CAAa,KAAKoG,MAAL,GAAY,KAAKC,MAAjB,GAAwB,KAAKV,SAA1C,CAAf;AACD,GAvBD;;AAyBA6C,WAAS,CAAChG,SAAV,GAAsB;AACpBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AAEA,UAAIoD,CAAC,GAAG,IAAI1E,GAAJ,CAAQ,KAAKiE,MAAb,EAAqB,KAAKC,MAA1B,EAAkC,KAAKV,SAAvC,EAAkD,GAAlD,CAAR;AAEA,UAAI1F,CAAC,GAAC,CAAN,CALgC,CAKvB;;AACT,WAAI,IAAI+C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK2C,SAAnB,EAA6B3C,CAAC,EAA9B,EAAkC;AAChC,YAAIF,CAAC,GAAG,CAAC,KAAKmD,GAAd;AACA,YAAIlD,CAAC,GAAG,CAAC,KAAKkD,GAAd;;AACA,aAAI,IAAIkB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKf,MAAtB,EAA8BtD,CAAC,IAAE,KAAKkD,MAAR,EAAemB,EAAE,EAA/C,EAAmD;AACjDpE,WAAC,GAAG,CAAC,KAAKkD,GAAV;;AACA,eAAI,IAAIiB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKb,MAAtB,EAA8BtD,CAAC,IAAE,KAAKiD,MAAR,EAAekB,EAAE,EAA/C,EAAmD;AAEjD;AACA,gBAAIzH,CAAC,GAAG,CAAC,KAAT,CAHiD,CAGjC;;AAChB,gBAAIkJ,IAAI,GAAC,CAAC,CAAV;AAAA,gBAAYC,IAAI,GAAC,CAAC,CAAlB;;AACA,iBAAI,IAAItB,EAAE,GAAC,CAAX,EAAaA,EAAE,GAAC,KAAKlF,EAArB,EAAwBkF,EAAE,EAA1B,EAA8B;AAC5B,mBAAI,IAAIF,EAAE,GAAC,CAAX,EAAaA,EAAE,GAAC,KAAK/E,EAArB,EAAwB+E,EAAE,EAA1B,EAA8B;AAC5B,oBAAIC,EAAE,GAAGtE,CAAC,GAACqE,EAAX;AACA,oBAAIG,EAAE,GAAGzE,CAAC,GAACwE,EAAX;;AACA,oBAAGD,EAAE,IAAE,CAAJ,IAASA,EAAE,GAAC5D,CAAC,CAACpB,EAAd,IAAoBkF,EAAE,IAAE,CAAxB,IAA6BA,EAAE,GAAC9D,CAAC,CAACrB,EAArC,EAAyC;AACvC,sBAAIjD,CAAC,GAAGsE,CAAC,CAACZ,GAAF,CAAM0E,EAAN,EAAUF,EAAV,EAAcrE,CAAd,CAAR,CADuC,CAEvC;AACA;AACA;;AACA,sBAAG7D,CAAC,GAAGM,CAAP,EAAU;AAAEA,qBAAC,GAAGN,CAAJ;AAAOwJ,wBAAI,GAACpB,EAAL;AAASqB,wBAAI,GAACvB,EAAL;AAAS;AACtC;AACF;AACF;;AACD,iBAAKoB,OAAL,CAAaxI,CAAb,IAAkB0I,IAAlB;AACA,iBAAKD,OAAL,CAAazI,CAAb,IAAkB2I,IAAlB;AACA3I,aAAC;AACD4G,aAAC,CAAC3D,GAAF,CAAMiE,EAAN,EAAUD,EAAV,EAAclE,CAAd,EAAiBvD,CAAjB;AACD;AACF;AACF;;AACD,WAAKgI,OAAL,GAAeZ,CAAf;AACA,aAAO,KAAKY,OAAZ;AACD,KAvCmB;AAwCpBC,YAAQ,EAAE,YAAW;AACnB;AACA;AACA,UAAIjE,CAAC,GAAG,KAAKmD,MAAb;AACAnD,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAayD,CAAC,CAAC3C,CAAF,CAAIJ,MAAjB,CAAP,CAJmB,CAIc;;AACjC,UAAImG,CAAC,GAAG,KAAKY,OAAb,CALmB,CAKG;;AAEtB,UAAIxH,CAAC,GAAG,CAAR;;AACA,WAAI,IAAI+C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK2C,SAAnB,EAA6B3C,CAAC,EAA9B,EAAkC;AAChC,YAAIF,CAAC,GAAG,CAAC,KAAKmD,GAAd;AACA,YAAIlD,CAAC,GAAG,CAAC,KAAKkD,GAAd;;AACA,aAAI,IAAIkB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKf,MAAtB,EAA8BtD,CAAC,IAAE,KAAKkD,MAAR,EAAemB,EAAE,EAA/C,EAAmD;AACjDpE,WAAC,GAAG,CAAC,KAAKkD,GAAV;;AACA,eAAI,IAAIiB,EAAE,GAAC,CAAX,EAAcA,EAAE,GAAC,KAAKb,MAAtB,EAA8BtD,CAAC,IAAE,KAAKiD,MAAR,EAAekB,EAAE,EAA/C,EAAmD;AAEjD,gBAAIS,UAAU,GAAG,KAAKF,OAAL,CAAarE,QAAb,CAAsB+D,EAAtB,EAAyBD,EAAzB,EAA4BlE,CAA5B,CAAjB;AACAS,aAAC,CAACH,QAAF,CAAW,KAAKmF,OAAL,CAAaxI,CAAb,CAAX,EAA4B,KAAKyI,OAAL,CAAazI,CAAb,CAA5B,EAA6C+C,CAA7C,EAAgD2E,UAAhD;AACA1H,aAAC;AAEF;AACF;AACF;AACF,KA9DmB;AA+DpB6H,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAjEmB;AAkEpBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC1B,EAAL,GAAU,KAAKA,EAAf;AACA0B,UAAI,CAACzB,EAAL,GAAU,KAAKA,EAAf;AACAyB,UAAI,CAACkC,MAAL,GAAc,KAAKA,MAAnB;AACAlC,UAAI,CAAC+B,QAAL,GAAgB,KAAKA,QAArB;AACA/B,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACmC,GAAL,GAAW,KAAKA,GAAhB;AACA,aAAOnC,IAAP;AACD,KA9EmB;AA+EpBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAKlE,EAAL,GAAU0B,IAAI,CAAC1B,EAAf;AACA,WAAKC,EAAL,GAAUyB,IAAI,CAACzB,EAAf;AACA,WAAK2D,MAAL,GAAclC,IAAI,CAACkC,MAAnB;AACA,WAAKH,QAAL,GAAgB/B,IAAI,CAAC+B,QAArB;AACA,WAAKI,GAAL,GAAW,OAAOnC,IAAI,CAACmC,GAAZ,KAAoB,WAApB,GAAkCnC,IAAI,CAACmC,GAAvC,GAA6C,CAAxD,CATuB,CASoC;;AAC3D,WAAKwC,OAAL,GAAe7J,MAAM,CAACoB,KAAP,CAAa,KAAKoG,MAAL,GAAY,KAAKC,MAAjB,GAAwB,KAAKV,SAA1C,CAAf,CAVuB,CAU8C;;AACrE,WAAK+C,OAAL,GAAe9J,MAAM,CAACoB,KAAP,CAAa,KAAKoG,MAAL,GAAY,KAAKC,MAAjB,GAAwB,KAAKV,SAA1C,CAAf;AACD;AA3FmB,GAAtB;AA8FA/G,QAAM,CAAC4J,SAAP,GAAmBA,SAAnB;AAED,CA7HD,EA6HG9J,SA7HH;;AA+HA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;;AAEtB,MAAI0G,UAAU,GAAG,UAAS7G,GAAT,EAAc;AAC7B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD6B,CAG7B;;AACA,SAAKoE,MAAL,GAAc,OAAOpE,GAAG,CAACoE,MAAX,KAAsB,WAAtB,GAAoCpE,GAAG,CAACoE,MAAxC,GAAiDpE,GAAG,CAAC8D,KAAnE;AACA,SAAKO,MAAL,GAAc,OAAOrE,GAAG,CAACqE,MAAX,KAAsB,WAAtB,GAAoCrE,GAAG,CAACqE,MAAxC,GAAiDrE,GAAG,CAAC+D,KAAnE;AACA,SAAKJ,SAAL,GAAiB,OAAO3D,GAAG,CAAC2D,SAAX,KAAyB,WAAzB,GAAuC3D,GAAG,CAAC2D,SAA3C,GAAuD3D,GAAG,CAAC6D,QAA5E;AACA,SAAKS,UAAL,GAAkB,OAAlB;AACD,GARD;;AASAuC,YAAU,CAACrG,SAAX,GAAuB;AACrBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,WAAKgE,OAAL,GAAehE,CAAf;AACA,aAAO,KAAKgE,OAAZ,CAHgC,CAGX;AACtB,KALoB;AAMrBC,YAAQ,EAAE,YAAW,CAAG,CANH;AAOrBI,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAToB;AAUrBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOxC,IAAP;AACD,KAjBoB;AAkBrBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACD;AAvBoB,GAAvB;AA0BA1H,QAAM,CAACiK,UAAP,GAAoBA,UAApB;AACD,CAxCD,EAwCGnK,SAxCH;;AAyCA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;AACA,MAAI2G,YAAY,GAAG,UAAS9G,GAAT,EAAc;AAC/B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD+B,CAG/B;;AACA,SAAKoG,UAAL,GAAkBpG,GAAG,CAAC8D,KAAJ,GAAY9D,GAAG,CAAC+D,KAAhB,GAAwB/D,GAAG,CAAC6D,QAA9C;AACA,SAAKF,SAAL,GAAiB,KAAKyC,UAAtB;AACA,SAAKhC,MAAL,GAAc,CAAd;AACA,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,UAAL,GAAkB,SAAlB;AACD,GATD;;AAWAwC,cAAY,CAACtG,SAAb,GAAyB;AACvBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AAEA,UAAIoD,CAAC,GAAG,IAAI1E,GAAJ,CAAQ,CAAR,EAAW,CAAX,EAAc,KAAKwD,SAAnB,EAA8B,GAA9B,CAAR,CAHgC,CAKhC;;AACA,UAAIoD,EAAE,GAAGtF,CAAC,CAAC3C,CAAX;AACA,UAAIkI,IAAI,GAAGvF,CAAC,CAAC3C,CAAF,CAAI,CAAJ,CAAX;;AACA,WAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,YAAGyI,EAAE,CAACzI,CAAD,CAAF,GAAQ0I,IAAX,EAAiBA,IAAI,GAAGD,EAAE,CAACzI,CAAD,CAAT;AAClB,OAV+B,CAYhC;;;AACA,UAAI2I,EAAE,GAAGrK,MAAM,CAACoB,KAAP,CAAa,KAAK2F,SAAlB,CAAT;AACA,UAAIuD,IAAI,GAAG,GAAX;;AACA,WAAI,IAAI5I,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,YAAI4E,CAAC,GAAGjG,IAAI,CAACkK,GAAL,CAASJ,EAAE,CAACzI,CAAD,CAAF,GAAQ0I,IAAjB,CAAR;AACAE,YAAI,IAAIhE,CAAR;AACA+D,UAAE,CAAC3I,CAAD,CAAF,GAAQ4E,CAAR;AACD,OAnB+B,CAqBhC;;;AACA,WAAI,IAAI5E,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC2I,UAAE,CAAC3I,CAAD,CAAF,IAAS4I,IAAT;AACArC,SAAC,CAAC/F,CAAF,CAAIR,CAAJ,IAAS2I,EAAE,CAAC3I,CAAD,CAAX;AACD;;AAED,WAAK2I,EAAL,GAAUA,EAAV,CA3BgC,CA2BlB;;AACd,WAAKxB,OAAL,GAAeZ,CAAf;AACA,aAAO,KAAKY,OAAZ;AACD,KA/BsB;AAgCvBC,YAAQ,EAAE,UAAS3E,CAAT,EAAY;AAEpB;AACA,UAAID,CAAC,GAAG,KAAK8D,MAAb;AACA9D,OAAC,CAACH,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAa8C,CAAC,CAAChC,CAAF,CAAIJ,MAAjB,CAAP,CAJoB,CAIa;;AAEjC,WAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,YAAI8I,SAAS,GAAG9I,CAAC,KAAKyC,CAAN,GAAU,GAAV,GAAgB,GAAhC;AACA,YAAIsG,GAAG,GAAG,EAAED,SAAS,GAAG,KAAKH,EAAL,CAAQ3I,CAAR,CAAd,CAAV;AACAwC,SAAC,CAACH,EAAF,CAAKrC,CAAL,IAAU+I,GAAV;AACD,OAVmB,CAYpB;;;AACA,aAAO,CAACpK,IAAI,CAACM,GAAL,CAAS,KAAK0J,EAAL,CAAQlG,CAAR,CAAT,CAAR;AACD,KA9CsB;AA+CvB+E,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAjDsB;AAkDvBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACsE,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOtE,IAAP;AACD,KA1DsB;AA2DvBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAK8B,UAAL,GAAkBtE,IAAI,CAACsE,UAAvB;AACD;AAjEsB,GAAzB,CAxBgB,CA4FhB;AACA;AACA;;AACA,MAAIkB,eAAe,GAAG,UAAStH,GAAT,EAAc;AAClC,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CADkC,CAGlC;;AACA,SAAKoG,UAAL,GAAkBpG,GAAG,CAAC8D,KAAJ,GAAY9D,GAAG,CAAC+D,KAAhB,GAAwB/D,GAAG,CAAC6D,QAA9C;AACA,SAAKF,SAAL,GAAiB,KAAKyC,UAAtB;AACA,SAAKhC,MAAL,GAAc,CAAd;AACA,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,UAAL,GAAkB,YAAlB;AACD,GATD;;AAWAgD,iBAAe,CAAC9G,SAAhB,GAA4B;AAC1BkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,WAAKgE,OAAL,GAAehE,CAAf;AACA,aAAOA,CAAP,CAHgC,CAGtB;AACX,KALyB;AAM1B;AACAiE,YAAQ,EAAE,UAAS3E,CAAT,EAAY;AAEpB;AACA,UAAID,CAAC,GAAG,KAAK8D,MAAb;AACA9D,OAAC,CAACH,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAa8C,CAAC,CAAChC,CAAF,CAAIJ,MAAjB,CAAP,CAJoB,CAIa;;AACjC,UAAI6I,IAAI,GAAG,GAAX;;AACA,UAAGxG,CAAC,YAAY1C,KAAb,IAAsB0C,CAAC,YAAYxC,YAAtC,EAAoD;AAClD,aAAI,IAAID,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,cAAI6D,EAAE,GAAGrB,CAAC,CAAChC,CAAF,CAAIR,CAAJ,IAASyC,CAAC,CAACzC,CAAD,CAAnB;AACAwC,WAAC,CAACH,EAAF,CAAKrC,CAAL,IAAU6D,EAAV;AACAoF,cAAI,IAAI,IAAEpF,EAAF,GAAKA,EAAb;AACD;AACF,OAND,MAMO;AACL;AACA;AACA,YAAI7D,CAAC,GAAGyC,CAAC,CAACyG,GAAV;AACA,YAAIC,EAAE,GAAG1G,CAAC,CAAC2G,GAAX;AACA,YAAIvF,EAAE,GAAGrB,CAAC,CAAChC,CAAF,CAAIR,CAAJ,IAASmJ,EAAlB;AACA3G,SAAC,CAACH,EAAF,CAAKrC,CAAL,IAAU6D,EAAV;AACAoF,YAAI,IAAI,IAAEpF,EAAF,GAAKA,EAAb;AACD;;AACD,aAAOoF,IAAP;AACD,KA7ByB;AA8B1BzB,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAhCyB;AAiC1BjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACsE,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOtE,IAAP;AACD,KAzCyB;AA0C1BC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAK8B,UAAL,GAAkBtE,IAAI,CAACsE,UAAvB;AACD;AAhDyB,GAA5B;;AAmDA,MAAIuB,QAAQ,GAAG,UAAS3H,GAAT,EAAc;AAC3B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD2B,CAG3B;;AACA,SAAKoG,UAAL,GAAkBpG,GAAG,CAAC8D,KAAJ,GAAY9D,GAAG,CAAC+D,KAAhB,GAAwB/D,GAAG,CAAC6D,QAA9C;AACA,SAAKF,SAAL,GAAiB,KAAKyC,UAAtB;AACA,SAAKhC,MAAL,GAAc,CAAd;AACA,SAAKC,MAAL,GAAc,CAAd;AACA,SAAKC,UAAL,GAAkB,KAAlB;AACD,GATD;;AAWAqD,UAAQ,CAACnH,SAAT,GAAqB;AACnBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,WAAKgE,OAAL,GAAehE,CAAf,CAFgC,CAEd;;AAClB,aAAOA,CAAP;AACD,KALkB;AAMnBiE,YAAQ,EAAE,UAAS3E,CAAT,EAAY;AAEpB;AACA,UAAID,CAAC,GAAG,KAAK8D,MAAb;AACA9D,OAAC,CAACH,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAa8C,CAAC,CAAChC,CAAF,CAAIJ,MAAjB,CAAP,CAJoB,CAIa;;AAEjC,UAAIkJ,MAAM,GAAG9G,CAAC,CAAChC,CAAF,CAAIiC,CAAJ,CAAb,CANoB,CAMC;;AACrB,UAAI8G,MAAM,GAAG,GAAb;AACA,UAAIN,IAAI,GAAG,GAAX;;AACA,WAAI,IAAIjJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqF,SAAnB,EAA6BrF,CAAC,EAA9B,EAAkC;AAChC,YAAG,CAACsJ,MAAD,GAAU9G,CAAC,CAAChC,CAAF,CAAIR,CAAJ,CAAV,GAAmBuJ,MAAnB,GAA4B,CAA/B,EAAkC;AAChC;AACA;AACA;AACA;AACA;AACA/G,WAAC,CAACH,EAAF,CAAKrC,CAAL,KAAW,CAAX;AACAwC,WAAC,CAACH,EAAF,CAAKI,CAAL,KAAW,CAAX;AACAwG,cAAI,IAAI,CAACK,MAAD,GAAU9G,CAAC,CAAChC,CAAF,CAAIR,CAAJ,CAAV,GAAmBuJ,MAA3B;AACD;AACF;;AAED,aAAON,IAAP;AACD,KA7BkB;AA8BnBzB,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAhCkB;AAiCnBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACsE,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOtE,IAAP;AACD,KAzCkB;AA0CnBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAK8B,UAAL,GAAkBtE,IAAI,CAACsE,UAAvB;AACD;AAhDkB,GAArB;AAmDAxJ,QAAM,CAAC0K,eAAP,GAAyBA,eAAzB;AACA1K,QAAM,CAACkK,YAAP,GAAsBA,YAAtB;AACAlK,QAAM,CAAC+K,QAAP,GAAkBA,QAAlB;AAED,CA/ND,EA+NGjL,SA/NH;;AAiOA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;AACA;;AACA,MAAI2H,SAAS,GAAG,UAAS9H,GAAT,EAAc;AAC5B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD4B,CAG5B;;AACA,SAAKoE,MAAL,GAAcpE,GAAG,CAAC8D,KAAlB;AACA,SAAKO,MAAL,GAAcrE,GAAG,CAAC+D,KAAlB;AACA,SAAKJ,SAAL,GAAiB3D,GAAG,CAAC6D,QAArB;AACA,SAAKS,UAAL,GAAkB,MAAlB;AACD,GARD;;AASAwD,WAAS,CAACtH,SAAV,GAAsB;AACpBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,UAAIsG,EAAE,GAAGtG,CAAC,CAACD,KAAF,EAAT;AACA,UAAIwG,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;AACA,UAAIuJ,GAAG,GAAGF,EAAE,CAACjJ,CAAb;;AACA,WAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,YAAG2J,GAAG,CAAC3J,CAAD,CAAH,GAAS,CAAZ,EAAe2J,GAAG,CAAC3J,CAAD,CAAH,GAAS,CAAT,CADI,CACQ;AAC5B;;AACD,WAAKmH,OAAL,GAAesC,EAAf;AACA,aAAO,KAAKtC,OAAZ;AACD,KAXmB;AAYpBC,YAAQ,EAAE,YAAW;AACnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb,CADmB,CACE;;AACrB,UAAImD,EAAE,GAAG,KAAKtC,OAAd;AACA,UAAIuC,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;AACA+C,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAagK,CAAb,CAAP,CAJmB,CAIK;;AACxB,WAAI,IAAI1J,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,YAAGyJ,EAAE,CAACjJ,CAAH,CAAKR,CAAL,KAAW,CAAd,EAAiBmD,CAAC,CAACd,EAAF,CAAKrC,CAAL,IAAU,CAAV,CAAjB,CAA8B;AAA9B,aACKmD,CAAC,CAACd,EAAF,CAAKrC,CAAL,IAAUyJ,EAAE,CAACpH,EAAH,CAAMrC,CAAN,CAAV;AACN;AACF,KArBmB;AAsBpBwH,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAxBmB;AAyBpBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOxC,IAAP;AACD,KAhCmB;AAiCpBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACD;AAtCmB,GAAtB,CAhBgB,CAyDhB;AACA;AACA;;AACA,MAAI4D,YAAY,GAAG,UAASlI,GAAT,EAAc;AAC/B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD+B,CAG/B;;AACA,SAAKoE,MAAL,GAAcpE,GAAG,CAAC8D,KAAlB;AACA,SAAKO,MAAL,GAAcrE,GAAG,CAAC+D,KAAlB;AACA,SAAKJ,SAAL,GAAiB3D,GAAG,CAAC6D,QAArB;AACA,SAAKS,UAAL,GAAkB,SAAlB;AACD,GARD;;AASA4D,cAAY,CAAC1H,SAAb,GAAyB;AACvBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,UAAIsG,EAAE,GAAGtG,CAAC,CAACF,YAAF,EAAT;AACA,UAAIyG,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;AACA,UAAIuJ,GAAG,GAAGF,EAAE,CAACjJ,CAAb;AACA,UAAIuH,EAAE,GAAG5E,CAAC,CAAC3C,CAAX;;AACA,WAAI,IAAIR,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB2J,WAAG,CAAC3J,CAAD,CAAH,GAAS,OAAK,MAAIrB,IAAI,CAACkK,GAAL,CAAS,CAACd,EAAE,CAAC/H,CAAD,CAAZ,CAAT,CAAT;AACD;;AACD,WAAKmH,OAAL,GAAesC,EAAf;AACA,aAAO,KAAKtC,OAAZ;AACD,KAZsB;AAavBC,YAAQ,EAAE,YAAW;AACnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb,CADmB,CACE;;AACrB,UAAImD,EAAE,GAAG,KAAKtC,OAAd;AACA,UAAIuC,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;AACA+C,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAagK,CAAb,CAAP,CAJmB,CAIK;;AACxB,WAAI,IAAI1J,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,YAAI6J,IAAI,GAAGJ,EAAE,CAACjJ,CAAH,CAAKR,CAAL,CAAX;AACAmD,SAAC,CAACd,EAAF,CAAKrC,CAAL,IAAW6J,IAAI,IAAI,MAAMA,IAAV,CAAJ,GAAsBJ,EAAE,CAACpH,EAAH,CAAMrC,CAAN,CAAjC;AACD;AACF,KAtBsB;AAuBvBwH,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAzBsB;AA0BvBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOxC,IAAP;AACD,KAjCsB;AAkCvBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACD;AAvCsB,GAAzB,CArEgB,CA+GhB;AACA;AACA;AACA;;AACA,MAAI8D,WAAW,GAAG,UAASpI,GAAT,EAAc;AAC9B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD8B,CAG9B;;AACA,SAAKqI,UAAL,GAAkB,OAAOrI,GAAG,CAACqI,UAAX,KAA0B,WAA1B,GAAwCrI,GAAG,CAACqI,UAA5C,GAAyD,CAA3E,CAJ8B,CAM9B;;AACA,SAAKjE,MAAL,GAAcpE,GAAG,CAAC8D,KAAlB;AACA,SAAKO,MAAL,GAAcrE,GAAG,CAAC+D,KAAlB;AACA,SAAKJ,SAAL,GAAiB1G,IAAI,CAACW,KAAL,CAAWoC,GAAG,CAAC6D,QAAJ,GAAe,KAAKwE,UAA/B,CAAjB;AACA,SAAK/D,UAAL,GAAkB,QAAlB;AAEA,SAAKgE,QAAL,GAAgB1L,MAAM,CAACoB,KAAP,CAAa,KAAKoG,MAAL,GAAY,KAAKC,MAAjB,GAAwB,KAAKV,SAA1C,CAAhB,CAZ8B,CAYwC;AACvE,GAbD;;AAcAyE,aAAW,CAAC5H,SAAZ,GAAwB;AACtBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,UAAIuG,CAAC,GAAG,KAAKrE,SAAb;AACA,UAAIoE,EAAE,GAAG,IAAI5H,GAAJ,CAAQ,KAAKiE,MAAb,EAAqB,KAAKC,MAA1B,EAAkC,KAAKV,SAAvC,EAAkD,GAAlD,CAAT,CAHgC,CAKhC;AACA;AACA;;AACA,UAAG,KAAKS,MAAL,KAAgB,CAAhB,IAAqB,KAAKC,MAAL,KAAgB,CAAxC,EAA2C;AACzC,aAAI,IAAI/F,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,cAAI2C,EAAE,GAAG3C,CAAC,GAAG,KAAK+J,UAAlB,CADmB,CACW;;AAC9B,cAAI5K,CAAC,GAAGgE,CAAC,CAAC3C,CAAF,CAAImC,EAAJ,CAAR;AACA,cAAIsH,EAAE,GAAG,CAAT;;AACA,eAAI,IAAIlJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKgJ,UAAnB,EAA8BhJ,CAAC,EAA/B,EAAmC;AACjC,gBAAImJ,EAAE,GAAG/G,CAAC,CAAC3C,CAAF,CAAImC,EAAE,GAAC5B,CAAP,CAAT;;AACA,gBAAGmJ,EAAE,GAAG/K,CAAR,EAAW;AACTA,eAAC,GAAG+K,EAAJ;AACAD,gBAAE,GAAGlJ,CAAL;AACD;AACF;;AACD0I,YAAE,CAACjJ,CAAH,CAAKR,CAAL,IAAUb,CAAV;AACA,eAAK6K,QAAL,CAAchK,CAAd,IAAmB2C,EAAE,GAAGsH,EAAxB;AACD;AACF,OAfD,MAeO;AACL,YAAItK,CAAC,GAAC,CAAN,CADK,CACI;;AACT,aAAI,IAAI6C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACW,CAAC,CAACrB,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACU,CAAC,CAACpB,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,iBAAI,IAAIzC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,kBAAI2C,EAAE,GAAG3C,CAAC,GAAG,KAAK+J,UAAlB;AACA,kBAAI5K,CAAC,GAAGgE,CAAC,CAACZ,GAAF,CAAMC,CAAN,EAASC,CAAT,EAAYE,EAAZ,CAAR;AACA,kBAAIsH,EAAE,GAAG,CAAT;;AACA,mBAAI,IAAIlJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKgJ,UAAnB,EAA8BhJ,CAAC,EAA/B,EAAmC;AACjC,oBAAImJ,EAAE,GAAG/G,CAAC,CAACZ,GAAF,CAAMC,CAAN,EAASC,CAAT,EAAYE,EAAE,GAAC5B,CAAf,CAAT;;AACA,oBAAGmJ,EAAE,GAAG/K,CAAR,EAAW;AACTA,mBAAC,GAAG+K,EAAJ;AACAD,oBAAE,GAAGlJ,CAAL;AACD;AACF;;AACD0I,gBAAE,CAAC7G,GAAH,CAAOJ,CAAP,EAASC,CAAT,EAAWzC,CAAX,EAAab,CAAb;AACA,mBAAK6K,QAAL,CAAcrK,CAAd,IAAmBgD,EAAE,GAAGsH,EAAxB;AACAtK,eAAC;AACF;AACF;AACF;AAEF;;AACD,WAAKwH,OAAL,GAAesC,EAAf;AACA,aAAO,KAAKtC,OAAZ;AACD,KAjDqB;AAkDtBC,YAAQ,EAAE,YAAW;AACnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb,CADmB,CACE;;AACrB,UAAImD,EAAE,GAAG,KAAKtC,OAAd;AACA,UAAIuC,CAAC,GAAG,KAAKrE,SAAb;AACAlC,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAayD,CAAC,CAAC3C,CAAF,CAAIJ,MAAjB,CAAP,CAJmB,CAIc;AAEjC;;AACA,UAAG,KAAK0F,MAAL,KAAgB,CAAhB,IAAqB,KAAKC,MAAL,KAAgB,CAAxC,EAA2C;AACzC,aAAI,IAAI/F,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,cAAIqH,UAAU,GAAGoC,EAAE,CAACpH,EAAH,CAAMrC,CAAN,CAAjB;AACAmD,WAAC,CAACd,EAAF,CAAK,KAAK2H,QAAL,CAAchK,CAAd,CAAL,IAAyBqH,UAAzB;AACD;AACF,OALD,MAKO;AACL;AACA,YAAI1H,CAAC,GAAC,CAAN,CAFK,CAEI;;AACT,aAAI,IAAI6C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACiH,EAAE,CAAC3H,EAAjB,EAAoBU,CAAC,EAArB,EAAyB;AACvB,eAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACgH,EAAE,CAAC1H,EAAjB,EAAoBU,CAAC,EAArB,EAAyB;AACvB,iBAAI,IAAIzC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,kBAAIqH,UAAU,GAAGoC,EAAE,CAAC3G,QAAH,CAAYN,CAAZ,EAAcC,CAAd,EAAgBzC,CAAhB,CAAjB;AACAmD,eAAC,CAACJ,QAAF,CAAWP,CAAX,EAAaC,CAAb,EAAe,KAAKuH,QAAL,CAAcrK,CAAd,CAAf,EAAgC0H,UAAhC;AACA1H,eAAC;AACF;AACF;AACF;AACF;AACF,KA3EqB;AA4EtB6H,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KA9EqB;AA+EtBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAACuG,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOvG,IAAP;AACD,KAvFqB;AAwFtBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAK+D,UAAL,GAAkBvG,IAAI,CAACuG,UAAvB;AACA,WAAKC,QAAL,GAAgB1L,MAAM,CAACoB,KAAP,CAAa,KAAKqK,UAAlB,CAAhB;AACD;AA/FqB,GAAxB,CAjIgB,CAmOhB;;AACA,WAASI,IAAT,CAAc3H,CAAd,EAAiB;AACf,QAAIC,CAAC,GAAG9D,IAAI,CAACkK,GAAL,CAAS,IAAIrG,CAAb,CAAR;AACA,WAAO,CAACC,CAAC,GAAG,CAAL,KAAWA,CAAC,GAAG,CAAf,CAAP;AACD,GAvOe,CAwOhB;AACA;AACA;;;AACA,MAAI2H,SAAS,GAAG,UAAS1I,GAAT,EAAc;AAC5B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD4B,CAG5B;;AACA,SAAKoE,MAAL,GAAcpE,GAAG,CAAC8D,KAAlB;AACA,SAAKO,MAAL,GAAcrE,GAAG,CAAC+D,KAAlB;AACA,SAAKJ,SAAL,GAAiB3D,GAAG,CAAC6D,QAArB;AACA,SAAKS,UAAL,GAAkB,MAAlB;AACD,GARD;;AASAoE,WAAS,CAAClI,SAAV,GAAsB;AACpBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AACA,UAAIsG,EAAE,GAAGtG,CAAC,CAACF,YAAF,EAAT;AACA,UAAIyG,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;;AACA,WAAI,IAAIJ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnByJ,UAAE,CAACjJ,CAAH,CAAKR,CAAL,IAAUmK,IAAI,CAAChH,CAAC,CAAC3C,CAAF,CAAIR,CAAJ,CAAD,CAAd;AACD;;AACD,WAAKmH,OAAL,GAAesC,EAAf;AACA,aAAO,KAAKtC,OAAZ;AACD,KAVmB;AAWpBC,YAAQ,EAAE,YAAW;AACnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb,CADmB,CACE;;AACrB,UAAImD,EAAE,GAAG,KAAKtC,OAAd;AACA,UAAIuC,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;AACA+C,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAagK,CAAb,CAAP,CAJmB,CAIK;;AACxB,WAAI,IAAI1J,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,YAAI6J,IAAI,GAAGJ,EAAE,CAACjJ,CAAH,CAAKR,CAAL,CAAX;AACAmD,SAAC,CAACd,EAAF,CAAKrC,CAAL,IAAU,CAAC,MAAM6J,IAAI,GAAGA,IAAd,IAAsBJ,EAAE,CAACpH,EAAH,CAAMrC,CAAN,CAAhC;AACD;AACF,KApBmB;AAqBpBwH,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAvBmB;AAwBpBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOxC,IAAP;AACD,KA/BmB;AAgCpBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACD;AArCmB,GAAtB;AAwCA1H,QAAM,CAAC8L,SAAP,GAAmBA,SAAnB;AACA9L,QAAM,CAACwL,WAAP,GAAqBA,WAArB;AACAxL,QAAM,CAACkL,SAAP,GAAmBA,SAAnB;AACAlL,QAAM,CAACsL,YAAP,GAAsBA,YAAtB;AAED,CAjSD,EAiSGxL,SAjSH;;AAmSA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;AACA;AACA;AACA;AACA;;AACA,MAAIwI,YAAY,GAAG,UAAS3I,GAAT,EAAc;AAC/B,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CAD+B,CAG/B;;AACA,SAAKoE,MAAL,GAAcpE,GAAG,CAAC8D,KAAlB;AACA,SAAKO,MAAL,GAAcrE,GAAG,CAAC+D,KAAlB;AACA,SAAKJ,SAAL,GAAiB3D,GAAG,CAAC6D,QAArB;AACA,SAAKS,UAAL,GAAkB,SAAlB;AACA,SAAKsE,SAAL,GAAiB,OAAO5I,GAAG,CAAC4I,SAAX,KAAyB,WAAzB,GAAuC5I,GAAG,CAAC4I,SAA3C,GAAuD,GAAxE;AACA,SAAKC,OAAL,GAAejM,MAAM,CAACoB,KAAP,CAAa,KAAKoG,MAAL,GAAY,KAAKC,MAAjB,GAAwB,KAAKV,SAA1C,CAAf;AACD,GAVD;;AAWAgF,cAAY,CAACnI,SAAb,GAAyB;AACvBkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;;AACA,UAAG,OAAOkD,WAAP,KAAsB,WAAzB,EAAsC;AAAEA,mBAAW,GAAG,KAAd;AAAsB,OAF9B,CAE+B;;;AAC/D,UAAIoD,EAAE,GAAGtG,CAAC,CAACD,KAAF,EAAT;AACA,UAAIwG,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;;AACA,UAAGiG,WAAH,EAAgB;AACd;AACA,aAAI,IAAIrG,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,cAAGrB,IAAI,CAACC,MAAL,KAAc,KAAK0L,SAAtB,EAAiC;AAAEb,cAAE,CAACjJ,CAAH,CAAKR,CAAL,IAAQ,CAAR;AAAW,iBAAKuK,OAAL,CAAavK,CAAb,IAAkB,IAAlB;AAAyB,WAAvE,CAAwE;AAAxE,eACK;AAAC,iBAAKuK,OAAL,CAAavK,CAAb,IAAkB,KAAlB;AAAyB;AAChC;AACF,OAND,MAMO;AACL;AACA,aAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AAAEyJ,YAAE,CAACjJ,CAAH,CAAKR,CAAL,KAAS,KAAKsK,SAAd;AAA0B;AAClD;;AACD,WAAKnD,OAAL,GAAesC,EAAf;AACA,aAAO,KAAKtC,OAAZ,CAhBgC,CAgBX;AACtB,KAlBsB;AAmBvBC,YAAQ,EAAE,YAAW;AACnB,UAAIjE,CAAC,GAAG,KAAKmD,MAAb,CADmB,CACE;;AACrB,UAAIe,UAAU,GAAG,KAAKF,OAAtB;AACA,UAAIuC,CAAC,GAAGvG,CAAC,CAAC3C,CAAF,CAAIJ,MAAZ;AACA+C,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAagK,CAAb,CAAP,CAJmB,CAIK;;AACxB,WAAI,IAAI1J,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0J,CAAd,EAAgB1J,CAAC,EAAjB,EAAqB;AACnB,YAAG,CAAE,KAAKuK,OAAL,CAAavK,CAAb,CAAL,EAAuB;AACrBmD,WAAC,CAACd,EAAF,CAAKrC,CAAL,IAAUqH,UAAU,CAAChF,EAAX,CAAcrC,CAAd,CAAV,CADqB,CACO;AAC7B;AACF;AACF,KA7BsB;AA8BvBwH,qBAAiB,EAAE,YAAW;AAC5B,aAAO,EAAP;AACD,KAhCsB;AAiCvBjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACAxC,UAAI,CAAC8G,SAAL,GAAiB,KAAKA,SAAtB;AACA,aAAO9G,IAAP;AACD,KAzCsB;AA0CvBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6B,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKS,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKC,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACA,WAAKsE,SAAL,GAAiB9G,IAAI,CAAC8G,SAAtB;AACD;AAhDsB,GAAzB;AAoDAhM,QAAM,CAAC+L,YAAP,GAAsBA,YAAtB;AACD,CA1ED,EA0EGjM,SA1EH;;AA2EA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;AACA;;AACA,MAAI2I,+BAA+B,GAAG,UAAS9I,GAAT,EAAc;AAClD,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB,CADkD,CAGlD;;AACA,SAAKF,CAAL,GAASE,GAAG,CAACF,CAAb;AACA,SAAK7B,CAAL,GAAS+B,GAAG,CAAC/B,CAAb;AACA,SAAK8K,KAAL,GAAa/I,GAAG,CAAC+I,KAAjB;AACA,SAAKC,IAAL,GAAYhJ,GAAG,CAACgJ,IAAhB,CAPkD,CASlD;;AACA,SAAK5E,MAAL,GAAcpE,GAAG,CAAC8D,KAAlB;AACA,SAAKO,MAAL,GAAcrE,GAAG,CAAC+D,KAAlB;AACA,SAAKJ,SAAL,GAAiB3D,GAAG,CAAC6D,QAArB;AACA,SAAKS,UAAL,GAAkB,KAAlB,CAbkD,CAelD;;AACA,QAAG,KAAKrG,CAAL,GAAO,CAAP,KAAa,CAAhB,EAAmB;AAAEgL,aAAO,CAAC1L,GAAR,CAAY,uCAAZ;AAAuD;AAC7E,GAjBD;;AAkBAuL,iCAA+B,CAACtI,SAAhC,GAA4C;AAC1CkE,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,WAAKC,MAAL,GAAcnD,CAAd;AAEA,UAAIoD,CAAC,GAAGpD,CAAC,CAACF,YAAF,EAAR;AACA,WAAK2H,QAAL,GAAgBzH,CAAC,CAACF,YAAF,EAAhB;AACA,UAAI4H,EAAE,GAAGlM,IAAI,CAACW,KAAL,CAAW,KAAKK,CAAL,GAAO,CAAlB,CAAT;;AACA,WAAI,IAAI6C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACW,CAAC,CAACrB,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,aAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACU,CAAC,CAACpB,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,eAAI,IAAIzC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACmD,CAAC,CAACnB,KAAhB,EAAsBhC,CAAC,EAAvB,EAA2B;AAEzB,gBAAIiK,EAAE,GAAG9G,CAAC,CAACZ,GAAF,CAAMC,CAAN,EAAQC,CAAR,EAAUzC,CAAV,CAAT,CAFyB,CAIzB;;AACA,gBAAI8K,GAAG,GAAG,GAAV;;AACA,iBAAI,IAAI/J,CAAC,GAACpC,IAAI,CAACoM,GAAL,CAAS,CAAT,EAAW/K,CAAC,GAAC6K,EAAb,CAAV,EAA2B9J,CAAC,IAAEpC,IAAI,CAACqM,GAAL,CAAShL,CAAC,GAAC6K,EAAX,EAAc1H,CAAC,CAACnB,KAAF,GAAQ,CAAtB,CAA9B,EAAuDjB,CAAC,EAAxD,EAA4D;AAC1D,kBAAIkK,EAAE,GAAG9H,CAAC,CAACZ,GAAF,CAAMC,CAAN,EAAQC,CAAR,EAAU1B,CAAV,CAAT;AACA+J,iBAAG,IAAIG,EAAE,GAACA,EAAV;AACD;;AACDH,eAAG,IAAI,KAAKL,KAAL,GAAa,KAAK9K,CAAzB;AACAmL,eAAG,IAAI,KAAKtJ,CAAZ;AACA,iBAAKoJ,QAAL,CAAchI,GAAd,CAAkBJ,CAAlB,EAAoBC,CAApB,EAAsBzC,CAAtB,EAAwB8K,GAAxB,EAZyB,CAYK;;AAC9BA,eAAG,GAAGnM,IAAI,CAACuM,GAAL,CAASJ,GAAT,EAAc,KAAKJ,IAAnB,CAAN;AACAnE,aAAC,CAAC3D,GAAF,CAAMJ,CAAN,EAAQC,CAAR,EAAUzC,CAAV,EAAYiK,EAAE,GAACa,GAAf;AACD;AACF;AACF;;AAED,WAAK3D,OAAL,GAAeZ,CAAf;AACA,aAAO,KAAKY,OAAZ,CA5BgC,CA4BX;AACtB,KA9ByC;AA+B1CC,YAAQ,EAAE,YAAW;AACnB;AACA,UAAIjE,CAAC,GAAG,KAAKmD,MAAb,CAFmB,CAEE;;AACrBnD,OAAC,CAACd,EAAF,GAAO/D,MAAM,CAACoB,KAAP,CAAayD,CAAC,CAAC3C,CAAF,CAAIJ,MAAjB,CAAP,CAHmB,CAGc;;AACjC,UAAImG,CAAC,GAAG,KAAKY,OAAb,CAJmB,CAIG;;AAEtB,UAAI0D,EAAE,GAAGlM,IAAI,CAACW,KAAL,CAAW,KAAKK,CAAL,GAAO,CAAlB,CAAT;;AACA,WAAI,IAAI6C,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACW,CAAC,CAACrB,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,aAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACU,CAAC,CAACpB,EAAhB,EAAmBU,CAAC,EAApB,EAAwB;AACtB,eAAI,IAAIzC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACmD,CAAC,CAACnB,KAAhB,EAAsBhC,CAAC,EAAvB,EAA2B;AAEzB,gBAAIqH,UAAU,GAAG,KAAKF,OAAL,CAAarE,QAAb,CAAsBN,CAAtB,EAAwBC,CAAxB,EAA0BzC,CAA1B,CAAjB;AACA,gBAAImL,CAAC,GAAG,KAAKP,QAAL,CAAcrI,GAAd,CAAkBC,CAAlB,EAAoBC,CAApB,EAAsBzC,CAAtB,CAAR;AACA,gBAAIoL,EAAE,GAAGzM,IAAI,CAACuM,GAAL,CAASC,CAAT,EAAY,KAAKT,IAAjB,CAAT;AACA,gBAAIW,GAAG,GAAGD,EAAE,GAACA,EAAb,CALyB,CAOzB;;AACA,iBAAI,IAAIrK,CAAC,GAACpC,IAAI,CAACoM,GAAL,CAAS,CAAT,EAAW/K,CAAC,GAAC6K,EAAb,CAAV,EAA2B9J,CAAC,IAAEpC,IAAI,CAACqM,GAAL,CAAShL,CAAC,GAAC6K,EAAX,EAAc1H,CAAC,CAACnB,KAAF,GAAQ,CAAtB,CAA9B,EAAuDjB,CAAC,EAAxD,EAA4D;AAC1D,kBAAIuK,EAAE,GAAGnI,CAAC,CAACZ,GAAF,CAAMC,CAAN,EAAQC,CAAR,EAAU1B,CAAV,CAAT;AACA,kBAAIwK,CAAC,GAAG,CAACD,EAAD,GAAI,KAAKZ,IAAT,GAAc/L,IAAI,CAACuM,GAAL,CAASC,CAAT,EAAW,KAAKT,IAAL,GAAU,CAArB,CAAd,GAAsC,KAAKD,KAA3C,GAAiD,KAAK9K,CAAtD,GAAwD,CAAxD,GAA0D2L,EAAlE;AACA,kBAAGvK,CAAC,KAAGf,CAAP,EAAUuL,CAAC,IAAGH,EAAJ;AACVG,eAAC,IAAIF,GAAL;AACAE,eAAC,IAAIlE,UAAL;AACAlE,eAAC,CAACH,QAAF,CAAWR,CAAX,EAAaC,CAAb,EAAe1B,CAAf,EAAiBwK,CAAjB;AACD;AAEF;AACF;AACF;AACF,KA5DyC;AA6D1C/D,qBAAiB,EAAE,YAAW;AAAE,aAAO,EAAP;AAAY,KA7DF;AA8D1CjE,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAAChC,CAAL,GAAS,KAAKA,CAAd;AACAgC,UAAI,CAAC7D,CAAL,GAAS,KAAKA,CAAd;AACA6D,UAAI,CAACiH,KAAL,GAAa,KAAKA,KAAlB,CAJiB,CAIQ;;AACzBjH,UAAI,CAACkH,IAAL,GAAY,KAAKA,IAAjB;AACAlH,UAAI,CAACsC,MAAL,GAAc,KAAKA,MAAnB;AACAtC,UAAI,CAACuC,MAAL,GAAc,KAAKA,MAAnB;AACAvC,UAAI,CAAC6B,SAAL,GAAiB,KAAKA,SAAtB;AACA7B,UAAI,CAACwC,UAAL,GAAkB,KAAKA,UAAvB;AACA,aAAOxC,IAAP;AACD,KAzEyC;AA0E1CC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAKhC,CAAL,GAASgC,IAAI,CAAChC,CAAd;AACA,WAAK7B,CAAL,GAAS6D,IAAI,CAAC7D,CAAd;AACA,WAAK8K,KAAL,GAAajH,IAAI,CAACiH,KAAlB,CAHuB,CAGE;;AACzB,WAAKC,IAAL,GAAYlH,IAAI,CAACkH,IAAjB;AACA,WAAK5E,MAAL,GAActC,IAAI,CAACsC,MAAnB;AACA,WAAKC,MAAL,GAAcvC,IAAI,CAACuC,MAAnB;AACA,WAAKV,SAAL,GAAiB7B,IAAI,CAAC6B,SAAtB;AACA,WAAKW,UAAL,GAAkBxC,IAAI,CAACwC,UAAvB;AACD;AAnFyC,GAA5C;AAuFA1H,QAAM,CAACkM,+BAAP,GAAyCA,+BAAzC;AACD,CAjHD,EAiHGpM,SAjHH;;AAkHA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;AAEtB;AACA;;AACA,MAAI2J,GAAG,GAAG,UAASC,OAAT,EAAkB;AAC1B,SAAKC,MAAL,GAAc,EAAd;AACD,GAFD;;AAIAF,KAAG,CAACtJ,SAAJ,GAAgB;AAEd;AACAyJ,cAAU,EAAE,UAASC,IAAT,EAAe;AAEzB;AACA,UAAGA,IAAI,CAACxL,MAAL,GAAY,CAAf,EAAkB;AAACuK,eAAO,CAAC1L,GAAR,CAAY,wDAAZ;AAAuE;;AAC1F,UAAG2M,IAAI,CAAC,CAAD,CAAJ,CAAQC,IAAR,KAAiB,OAApB,EAA6B;AAAClB,eAAO,CAAC1L,GAAR,CAAY,6CAAZ;AAA4D,OAJjE,CAMzB;;;AACA,UAAI6M,OAAO,GAAG,YAAW;AACvB,YAAIC,QAAQ,GAAG,EAAf;;AACA,aAAI,IAAI/L,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC4L,IAAI,CAACxL,MAAnB,EAA0BJ,CAAC,EAA3B,EAA+B;AAC7B,cAAIgM,GAAG,GAAGJ,IAAI,CAAC5L,CAAD,CAAd;;AAEA,cAAGgM,GAAG,CAACH,IAAJ,KAAW,SAAX,IAAwBG,GAAG,CAACH,IAAJ,KAAW,KAAtC,EAA6C;AAC3C;AACA;AACAE,oBAAQ,CAACzL,IAAT,CAAc;AAACuL,kBAAI,EAAC,IAAN;AAAYhE,yBAAW,EAAEmE,GAAG,CAACC;AAA7B,aAAd;AACD;;AAED,cAAGD,GAAG,CAACH,IAAJ,KAAW,YAAd,EAA4B;AAC1B;AACA;AACAE,oBAAQ,CAACzL,IAAT,CAAc;AAACuL,kBAAI,EAAC,IAAN;AAAYhE,yBAAW,EAAEmE,GAAG,CAACnE;AAA7B,aAAd;AACD;;AAED,cAAG,CAACmE,GAAG,CAACH,IAAJ,KAAW,IAAX,IAAmBG,GAAG,CAACH,IAAJ,KAAW,MAA/B,KACI,OAAOG,GAAG,CAAC9F,SAAX,KAA0B,WADjC,EAC6C;AAC3C8F,eAAG,CAAC9F,SAAJ,GAAgB,GAAhB;;AACA,gBAAG,OAAO8F,GAAG,CAACE,UAAX,KAA0B,WAA1B,IAAyCF,GAAG,CAACE,UAAJ,KAAmB,MAA/D,EAAuE;AACrEF,iBAAG,CAAC9F,SAAJ,GAAgB,GAAhB,CADqE,CAChD;AACrB;AACA;AACD;AACF;;AAED,cAAG,OAAO8F,GAAG,CAACG,MAAX,KAAsB,WAAzB,EAAsC;AACpC;AACA;AACA,gBAAGH,GAAG,CAACG,MAAP,EAAe;AACbJ,sBAAQ,CAACzL,IAAT,CAAc;AAACuL,oBAAI,EAAE;AAAP,eAAd;AACD;AACF;;AAEDE,kBAAQ,CAACzL,IAAT,CAAc0L,GAAd;;AAEA,cAAG,OAAOA,GAAG,CAACE,UAAX,KAA0B,WAA7B,EAA0C;AACxC,gBAAGF,GAAG,CAACE,UAAJ,KAAiB,MAApB,EAA4B;AAAEH,sBAAQ,CAACzL,IAAT,CAAc;AAACuL,oBAAI,EAAC;AAAN,eAAd;AAA+B,aAA7D,MACK,IAAIG,GAAG,CAACE,UAAJ,KAAiB,SAArB,EAAgC;AAAEH,sBAAQ,CAACzL,IAAT,CAAc;AAACuL,oBAAI,EAAC;AAAN,eAAd;AAAkC,aAApE,MACA,IAAIG,GAAG,CAACE,UAAJ,KAAiB,MAArB,EAA6B;AAAEH,sBAAQ,CAACzL,IAAT,CAAc;AAACuL,oBAAI,EAAC;AAAN,eAAd;AAA+B,aAA9D,MACA,IAAIG,GAAG,CAACE,UAAJ,KAAiB,QAArB,EAA+B;AAClC;AACA,kBAAIE,EAAE,GAAGJ,GAAG,CAACjC,UAAJ,KAAmB,WAAnB,GAAiCiC,GAAG,CAACjC,UAArC,GAAkD,CAA3D;AACAgC,sBAAQ,CAACzL,IAAT,CAAc;AAACuL,oBAAI,EAAC,QAAN;AAAgB9B,0BAAU,EAACqC;AAA3B,eAAd;AACD,aAJI,MAKA;AAAEzB,qBAAO,CAAC1L,GAAR,CAAY,kCAAkC+M,GAAG,CAACE,UAAlD;AAAgE;AACxE;;AACD,cAAG,OAAOF,GAAG,CAAC1B,SAAX,KAAyB,WAAzB,IAAwC0B,GAAG,CAACH,IAAJ,KAAa,SAAxD,EAAmE;AACjEE,oBAAQ,CAACzL,IAAT,CAAc;AAACuL,kBAAI,EAAC,SAAN;AAAiBvB,uBAAS,EAAE0B,GAAG,CAAC1B;AAAhC,aAAd;AACD;AAEF;;AACD,eAAOyB,QAAP;AACD,OAtDD;;AAuDAH,UAAI,GAAGE,OAAO,CAACF,IAAD,CAAd,CA9DyB,CAgEzB;;AACA,WAAKF,MAAL,GAAc,EAAd;;AACA,WAAI,IAAI1L,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC4L,IAAI,CAACxL,MAAnB,EAA0BJ,CAAC,EAA3B,EAA+B;AAC7B,YAAIgM,GAAG,GAAGJ,IAAI,CAAC5L,CAAD,CAAd;;AACA,YAAGA,CAAC,GAAC,CAAL,EAAQ;AACN,cAAIqM,IAAI,GAAG,KAAKX,MAAL,CAAY1L,CAAC,GAAC,CAAd,CAAX;AACAgM,aAAG,CAACxG,KAAJ,GAAY6G,IAAI,CAACvG,MAAjB;AACAkG,aAAG,CAACvG,KAAJ,GAAY4G,IAAI,CAACtG,MAAjB;AACAiG,aAAG,CAACzG,QAAJ,GAAe8G,IAAI,CAAChH,SAApB;AACD;;AAED,gBAAO2G,GAAG,CAACH,IAAX;AACE,eAAK,IAAL;AAAW,iBAAKH,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACsJ,cAAX,CAA0BoE,GAA1B,CAAjB;AAAkD;;AAC7D,eAAK,KAAL;AAAY,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACkM,+BAAX,CAA2CwB,GAA3C,CAAjB;AAAmE;;AAC/E,eAAK,SAAL;AAAgB,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAAC+L,YAAX,CAAwB2B,GAAxB,CAAjB;AAAgD;;AAChE,eAAK,OAAL;AAAc,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACiK,UAAX,CAAsByD,GAAtB,CAAjB;AAA8C;;AAC5D,eAAK,SAAL;AAAgB,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACkK,YAAX,CAAwBwD,GAAxB,CAAjB;AAAgD;;AAChE,eAAK,YAAL;AAAmB,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAAC0K,eAAX,CAA2BgD,GAA3B,CAAjB;AAAmD;;AACtE,eAAK,MAAL;AAAa,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAAC8G,SAAX,CAAqB4G,GAArB,CAAjB;AAA6C;;AAC1D,eAAK,MAAL;AAAa,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAAC4J,SAAX,CAAqB8D,GAArB,CAAjB;AAA6C;;AAC1D,eAAK,MAAL;AAAa,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACkL,SAAX,CAAqBwC,GAArB,CAAjB;AAA6C;;AAC1D,eAAK,SAAL;AAAgB,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACsL,YAAX,CAAwBoC,GAAxB,CAAjB;AAAgD;;AAChE,eAAK,MAAL;AAAa,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAAC8L,SAAX,CAAqB4B,GAArB,CAAjB;AAA6C;;AAC1D,eAAK,QAAL;AAAe,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACwL,WAAX,CAAuBkC,GAAvB,CAAjB;AAA+C;;AAC9D,eAAK,eAAL;AAAsB,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAACgO,kBAAX,CAA8BN,GAA9B,CAAjB;AAAsD;;AAC5E,eAAK,KAAL;AAAY,iBAAKN,MAAL,CAAYpL,IAAZ,CAAiB,IAAIhC,MAAM,CAAC+K,QAAX,CAAoB2C,GAApB,CAAjB;AAA4C;;AACxD;AAASrB,mBAAO,CAAC1L,GAAR,CAAY,iCAAZ;AAfX;AAiBD;AACF,KAhGa;AAkGd;AACAmH,WAAO,EAAE,UAASjD,CAAT,EAAYkD,WAAZ,EAAyB;AAChC,UAAG,OAAOA,WAAP,KAAsB,WAAzB,EAAsCA,WAAW,GAAG,KAAd;AACtC,UAAIkG,GAAG,GAAG,KAAKb,MAAL,CAAY,CAAZ,EAAetF,OAAf,CAAuBjD,CAAvB,EAA0BkD,WAA1B,CAAV;;AACA,WAAI,IAAIrG,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK0L,MAAL,CAAYtL,MAA1B,EAAiCJ,CAAC,EAAlC,EAAsC;AACpCuM,WAAG,GAAG,KAAKb,MAAL,CAAY1L,CAAZ,EAAeoG,OAAf,CAAuBmG,GAAvB,EAA4BlG,WAA5B,CAAN;AACD;;AACD,aAAOkG,GAAP;AACD,KA1Ga;AA4GdC,eAAW,EAAE,UAASrJ,CAAT,EAAYV,CAAZ,EAAe;AAC1B,WAAK2D,OAAL,CAAajD,CAAb,EAAgB,KAAhB;AACA,UAAIuG,CAAC,GAAG,KAAKgC,MAAL,CAAYtL,MAApB;AACA,UAAI6I,IAAI,GAAG,KAAKyC,MAAL,CAAYhC,CAAC,GAAC,CAAd,EAAiBtC,QAAjB,CAA0B3E,CAA1B,CAAX;AACA,aAAOwG,IAAP;AACD,KAjHa;AAmHd;AACA7B,YAAQ,EAAE,UAAS3E,CAAT,EAAY;AACpB,UAAIiH,CAAC,GAAG,KAAKgC,MAAL,CAAYtL,MAApB;AACA,UAAI6I,IAAI,GAAG,KAAKyC,MAAL,CAAYhC,CAAC,GAAC,CAAd,EAAiBtC,QAAjB,CAA0B3E,CAA1B,CAAX,CAFoB,CAEqB;;AACzC,WAAI,IAAIzC,CAAC,GAAC0J,CAAC,GAAC,CAAZ,EAAc1J,CAAC,IAAE,CAAjB,EAAmBA,CAAC,EAApB,EAAwB;AAAE;AACxB,aAAK0L,MAAL,CAAY1L,CAAZ,EAAeoH,QAAf;AACD;;AACD,aAAO6B,IAAP;AACD,KA3Ha;AA4HdzB,qBAAiB,EAAE,YAAW;AAC5B;AACA,UAAIC,QAAQ,GAAG,EAAf;;AACA,WAAI,IAAIzH,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK0L,MAAL,CAAYtL,MAA1B,EAAiCJ,CAAC,EAAlC,EAAsC;AACpC,YAAIyM,aAAa,GAAG,KAAKf,MAAL,CAAY1L,CAAZ,EAAewH,iBAAf,EAApB;;AACA,aAAI,IAAIzG,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0L,aAAa,CAACrM,MAA5B,EAAmCW,CAAC,EAApC,EAAwC;AACtC0G,kBAAQ,CAACnH,IAAT,CAAcmM,aAAa,CAAC1L,CAAD,CAA3B;AACD;AACF;;AACD,aAAO0G,QAAP;AACD,KAtIa;AAuIdiF,iBAAa,EAAE,YAAW;AACxB,UAAIvB,CAAC,GAAG,KAAKO,MAAL,CAAY,KAAKA,MAAL,CAAYtL,MAAZ,GAAmB,CAA/B,CAAR,CADwB,CACmB;;AAC3C,UAAIkB,CAAC,GAAG6J,CAAC,CAAChE,OAAF,CAAU3G,CAAlB;AACA,UAAIC,IAAI,GAAGa,CAAC,CAAC,CAAD,CAAZ;AACA,UAAIX,IAAI,GAAG,CAAX;;AACA,WAAI,IAAIX,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACsB,CAAC,CAAClB,MAAhB,EAAuBJ,CAAC,EAAxB,EAA4B;AAC1B,YAAGsB,CAAC,CAACtB,CAAD,CAAD,GAAOS,IAAV,EAAgB;AAAEA,cAAI,GAAGa,CAAC,CAACtB,CAAD,CAAR;AAAaW,cAAI,GAAGX,CAAP;AAAU;AAC1C;;AACD,aAAOW,IAAP;AACD,KAhJa;AAiJd4C,UAAM,EAAE,YAAW;AACjB,UAAIC,IAAI,GAAG,EAAX;AACAA,UAAI,CAACkI,MAAL,GAAc,EAAd;;AACA,WAAI,IAAI1L,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAK0L,MAAL,CAAYtL,MAA1B,EAAiCJ,CAAC,EAAlC,EAAsC;AACpCwD,YAAI,CAACkI,MAAL,CAAYpL,IAAZ,CAAiB,KAAKoL,MAAL,CAAY1L,CAAZ,EAAeuD,MAAf,EAAjB;AACD;;AACD,aAAOC,IAAP;AACD,KAxJa;AAyJdC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAKkI,MAAL,GAAc,EAAd;;AACA,WAAI,IAAI1L,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACwD,IAAI,CAACkI,MAAL,CAAYtL,MAA1B,EAAiCJ,CAAC,EAAlC,EAAsC;AACpC,YAAI2M,EAAE,GAAGnJ,IAAI,CAACkI,MAAL,CAAY1L,CAAZ,CAAT;AACA,YAAI4M,CAAC,GAAGD,EAAE,CAAC3G,UAAX;AACA,YAAI6G,CAAJ;;AACA,YAAGD,CAAC,KAAG,OAAP,EAAgB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACiK,UAAX,EAAJ;AAA8B;;AAChD,YAAGqE,CAAC,KAAG,MAAP,EAAe;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACkL,SAAX,EAAJ;AAA6B;;AAC9C,YAAGoD,CAAC,KAAG,SAAP,EAAkB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACsL,YAAX,EAAJ;AAAgC;;AACpD,YAAGgD,CAAC,KAAG,MAAP,EAAe;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAAC8L,SAAX,EAAJ;AAA6B;;AAC9C,YAAGwC,CAAC,KAAG,SAAP,EAAkB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAAC+L,YAAX,EAAJ;AAAgC;;AACpD,YAAGuC,CAAC,KAAG,MAAP,EAAe;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAAC8G,SAAX,EAAJ;AAA6B;;AAC9C,YAAGwH,CAAC,KAAG,MAAP,EAAe;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAAC4J,SAAX,EAAJ;AAA6B;;AAC9C,YAAG0E,CAAC,KAAG,KAAP,EAAc;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACkM,+BAAX,EAAJ;AAAmD;;AACnE,YAAGoC,CAAC,KAAG,SAAP,EAAkB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACkK,YAAX,EAAJ;AAAgC;;AACpD,YAAGoE,CAAC,KAAG,YAAP,EAAqB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAAC0K,eAAX,EAAJ;AAAmC;;AAC1D,YAAG4D,CAAC,KAAG,IAAP,EAAa;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACsJ,cAAX,EAAJ;AAAkC;;AACjD,YAAGgF,CAAC,KAAG,QAAP,EAAiB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACwL,WAAX,EAAJ;AAA+B;;AAClD,YAAG8C,CAAC,KAAG,eAAP,EAAwB;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAACgO,kBAAX,EAAJ;AAAsC;;AAChE,YAAGM,CAAC,KAAG,KAAP,EAAc;AAAEC,WAAC,GAAG,IAAIvO,MAAM,CAAC+K,QAAX,EAAJ;AAA4B;;AAC5CwD,SAAC,CAACpJ,QAAF,CAAWkJ,EAAX;AACA,aAAKjB,MAAL,CAAYpL,IAAZ,CAAiBuM,CAAjB;AACD;AACF;AAhLa,GAAhB;AAoLAvO,QAAM,CAACkN,GAAP,GAAaA,GAAb;AACD,CA/LD,EA+LGpN,SA/LH;;AAgMA,CAAC,UAASE,MAAT,EAAiB;AAChB;;AACA,MAAIuD,GAAG,GAAGvD,MAAM,CAACuD,GAAjB,CAFgB,CAEM;;AAEtB,MAAIiL,OAAO,GAAG,UAASC,GAAT,EAActB,OAAd,EAAuB;AAEnC,SAAKsB,GAAL,GAAWA,GAAX;AAEA,QAAItB,OAAO,GAAGA,OAAO,IAAI,EAAzB;AACA,SAAKuB,aAAL,GAAqB,OAAOvB,OAAO,CAACuB,aAAf,KAAiC,WAAjC,GAA+CvB,OAAO,CAACuB,aAAvD,GAAuE,IAA5F;AACA,SAAKC,QAAL,GAAgB,OAAOxB,OAAO,CAACwB,QAAf,KAA4B,WAA5B,GAA0CxB,OAAO,CAACwB,QAAlD,GAA6D,GAA7E;AACA,SAAKC,QAAL,GAAgB,OAAOzB,OAAO,CAACyB,QAAf,KAA4B,WAA5B,GAA0CzB,OAAO,CAACyB,QAAlD,GAA6D,GAA7E;AACA,SAAKC,UAAL,GAAkB,OAAO1B,OAAO,CAAC0B,UAAf,KAA8B,WAA9B,GAA4C1B,OAAO,CAAC0B,UAApD,GAAiE,CAAnF;AACA,SAAKC,MAAL,GAAc,OAAO3B,OAAO,CAAC2B,MAAf,KAA0B,WAA1B,GAAwC3B,OAAO,CAAC2B,MAAhD,GAAyD,KAAvE,CATmC,CAS2C;;AAE9E,SAAKC,QAAL,GAAgB,OAAO5B,OAAO,CAAC4B,QAAf,KAA4B,WAA5B,GAA0C5B,OAAO,CAAC4B,QAAlD,GAA6D,GAA7E;AACA,SAAKC,EAAL,GAAU,OAAO7B,OAAO,CAAC6B,EAAf,KAAsB,WAAtB,GAAoC7B,OAAO,CAAC6B,EAA5C,GAAiD,IAA3D,CAZmC,CAY8B;;AACjE,SAAKC,GAAL,GAAW,OAAO9B,OAAO,CAAC8B,GAAf,KAAuB,WAAvB,GAAqC9B,OAAO,CAAC8B,GAA7C,GAAmD,IAA9D,CAbmC,CAaiC;;AAEpE,SAAK/L,CAAL,GAAS,CAAT,CAfmC,CAevB;;AACZ,SAAKgM,IAAL,GAAY,EAAZ,CAhBmC,CAgBnB;;AAChB,SAAKC,IAAL,GAAY,EAAZ,CAjBmC,CAiBnB;AACjB,GAlBD;;AAoBAX,SAAO,CAAC5K,SAAR,GAAoB;AAClBwL,SAAK,EAAE,UAASlL,CAAT,EAAYC,CAAZ,EAAe;AAEpB,UAAIkL,KAAK,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAZ;AACA,WAAKd,GAAL,CAAS3G,OAAT,CAAiB5D,CAAjB,EAAoB,IAApB,EAHoB,CAGO;;AAC3B,UAAIsL,GAAG,GAAG,IAAIF,IAAJ,GAAWC,OAAX,EAAV;AACA,UAAIE,QAAQ,GAAGD,GAAG,GAAGH,KAArB;AAEA,UAAIA,KAAK,GAAG,IAAIC,IAAJ,GAAWC,OAAX,EAAZ;AACA,UAAIG,SAAS,GAAG,KAAKjB,GAAL,CAAS3F,QAAT,CAAkB3E,CAAlB,CAAhB;AACA,UAAIwL,aAAa,GAAG,GAApB;AACA,UAAIC,aAAa,GAAG,GAApB;AACA,UAAIJ,GAAG,GAAG,IAAIF,IAAJ,GAAWC,OAAX,EAAV;AACA,UAAIM,QAAQ,GAAGL,GAAG,GAAGH,KAArB;AAEA,WAAKnM,CAAL;;AACA,UAAG,KAAKA,CAAL,GAAS,KAAK2L,UAAd,KAA6B,CAAhC,EAAmC;AAEjC,YAAIiB,MAAM,GAAG,KAAKrB,GAAL,CAASvF,iBAAT,EAAb,CAFiC,CAIjC;;AACA,YAAG,KAAKgG,IAAL,CAAUpN,MAAV,KAAqB,CAArB,KAA2B,KAAKgN,MAAL,KAAgB,KAAhB,IAAyB,KAAKC,QAAL,GAAgB,GAApE,CAAH,EAA6E;AAC3E;AACA;AACA;AACA;AACA,eAAI,IAAIrN,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACoO,MAAM,CAAChO,MAArB,EAA4BJ,CAAC,EAA7B,EAAiC;AAC/B,iBAAKwN,IAAL,CAAUlN,IAAV,CAAehC,MAAM,CAACoB,KAAP,CAAa0O,MAAM,CAACpO,CAAD,CAAN,CAAU0H,MAAV,CAAiBtH,MAA9B,CAAf;;AACA,gBAAG,KAAKgN,MAAL,KAAgB,UAAnB,EAA+B;AAC7B,mBAAKK,IAAL,CAAUnN,IAAV,CAAehC,MAAM,CAACoB,KAAP,CAAa0O,MAAM,CAACpO,CAAD,CAAN,CAAU0H,MAAV,CAAiBtH,MAA9B,CAAf;AACD,aAFD,MAEO;AACL,mBAAKqN,IAAL,CAAUnN,IAAV,CAAe,EAAf,EADK,CACe;AACrB;AACF;AACF,SAlBgC,CAoBjC;;;AACA,aAAI,IAAIN,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACoO,MAAM,CAAChO,MAArB,EAA4BJ,CAAC,EAA7B,EAAiC;AAC/B,cAAIqO,EAAE,GAAGD,MAAM,CAACpO,CAAD,CAAf,CAD+B,CACX;;AACpB,cAAIsB,CAAC,GAAG+M,EAAE,CAAC3G,MAAX;AACA,cAAI6D,CAAC,GAAG8C,EAAE,CAAC1G,KAAX,CAH+B,CAK/B;;AACA,cAAI9B,YAAY,GAAG,OAAOwI,EAAE,CAACxI,YAAV,KAA2B,WAA3B,GAAyCwI,EAAE,CAACxI,YAA5C,GAA2D,GAA9E;AACA,cAAID,YAAY,GAAG,OAAOyI,EAAE,CAACzI,YAAV,KAA2B,WAA3B,GAAyCyI,EAAE,CAACzI,YAA5C,GAA2D,GAA9E;AACA,cAAIsH,QAAQ,GAAG,KAAKA,QAAL,GAAgBrH,YAA/B;AACA,cAAIoH,QAAQ,GAAG,KAAKA,QAAL,GAAgBrH,YAA/B;AAEA,cAAI0I,IAAI,GAAGhN,CAAC,CAAClB,MAAb;;AACA,eAAI,IAAIW,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACuN,IAAd,EAAmBvN,CAAC,EAApB,EAAwB;AACtBkN,yBAAa,IAAIf,QAAQ,GAAC5L,CAAC,CAACP,CAAD,CAAV,GAAcO,CAAC,CAACP,CAAD,CAAf,GAAmB,CAApC,CADsB,CACiB;;AACvCmN,yBAAa,IAAIjB,QAAQ,GAACtO,IAAI,CAAC4P,GAAL,CAASjN,CAAC,CAACP,CAAD,CAAV,CAA1B;AACA,gBAAIyN,MAAM,GAAGvB,QAAQ,IAAI3L,CAAC,CAACP,CAAD,CAAD,GAAO,CAAP,GAAW,CAAX,GAAe,CAAC,CAApB,CAArB;AACA,gBAAI0N,MAAM,GAAGvB,QAAQ,GAAI5L,CAAC,CAACP,CAAD,CAA1B;AAEA,gBAAI2N,GAAG,GAAG,CAACD,MAAM,GAAGD,MAAT,GAAkBjD,CAAC,CAACxK,CAAD,CAApB,IAA2B,KAAKoM,UAA1C,CANsB,CAMgC;;AAEtD,gBAAIwB,KAAK,GAAG,KAAKnB,IAAL,CAAUxN,CAAV,CAAZ;AACA,gBAAI4O,KAAK,GAAG,KAAKnB,IAAL,CAAUzN,CAAV,CAAZ;;AACA,gBAAG,KAAKoN,MAAL,KAAgB,SAAnB,EAA8B;AAC5B;AACAuB,mBAAK,CAAC5N,CAAD,CAAL,GAAW4N,KAAK,CAAC5N,CAAD,CAAL,GAAW2N,GAAG,GAAGA,GAA5B;AACA,kBAAI9K,EAAE,GAAG,CAAE,KAAKoJ,aAAP,GAAuBrO,IAAI,CAACK,IAAL,CAAU2P,KAAK,CAAC5N,CAAD,CAAL,GAAW,KAAKwM,GAA1B,CAAvB,GAAwDmB,GAAjE;AACApN,eAAC,CAACP,CAAD,CAAD,IAAQ6C,EAAR;AACD,aALD,MAKO,IAAG,KAAKwJ,MAAL,KAAgB,YAAnB,EAAiC;AACtC;AACA;AACA;AACAuB,mBAAK,CAAC5N,CAAD,CAAL,GAAW,KAAKuM,EAAL,GAAUqB,KAAK,CAAC5N,CAAD,CAAf,GAAqB,CAAC,IAAE,KAAKuM,EAAR,IAAcoB,GAAd,GAAoBA,GAApD;AACA,kBAAI9K,EAAE,GAAG,CAAE,KAAKoJ,aAAP,GAAuBrO,IAAI,CAACK,IAAL,CAAU2P,KAAK,CAAC5N,CAAD,CAAL,GAAW,KAAKwM,GAA1B,CAAvB,GAAwDmB,GAAjE,CALsC,CAKgC;;AACtEpN,eAAC,CAACP,CAAD,CAAD,IAAQ6C,EAAR;AACD,aAPM,MAOA,IAAG,KAAKwJ,MAAL,KAAgB,UAAnB,EAA+B;AACpC;AACAuB,mBAAK,CAAC5N,CAAD,CAAL,GAAW,KAAKuM,EAAL,GAAUqB,KAAK,CAAC5N,CAAD,CAAf,GAAqB,CAAC,IAAE,KAAKuM,EAAR,IAAcoB,GAAd,GAAoBA,GAApD;AACA,kBAAI9K,EAAE,GAAG,CAAEjF,IAAI,CAACK,IAAL,CAAU,CAAC4P,KAAK,CAAC7N,CAAD,CAAL,GAAW,KAAKwM,GAAjB,KAAuBoB,KAAK,CAAC5N,CAAD,CAAL,GAAW,KAAKwM,GAAvC,CAAV,CAAF,GAA2DmB,GAApE;AACAE,mBAAK,CAAC7N,CAAD,CAAL,GAAW,KAAKuM,EAAL,GAAUsB,KAAK,CAAC7N,CAAD,CAAf,GAAqB,CAAC,IAAE,KAAKuM,EAAR,IAAc1J,EAAd,GAAmBA,EAAnD,CAJoC,CAImB;;AACvDtC,eAAC,CAACP,CAAD,CAAD,IAAQ6C,EAAR;AACD,aANM,MAMA;AACL;AACA,kBAAG,KAAKyJ,QAAL,GAAgB,GAAnB,EAAwB;AACtB;AACA,oBAAIzJ,EAAE,GAAG,KAAKyJ,QAAL,GAAgBsB,KAAK,CAAC5N,CAAD,CAArB,GAA2B,KAAKiM,aAAL,GAAqB0B,GAAzD,CAFsB,CAEwC;;AAC9DC,qBAAK,CAAC5N,CAAD,CAAL,GAAW6C,EAAX,CAHsB,CAGP;;AACftC,iBAAC,CAACP,CAAD,CAAD,IAAQ6C,EAAR,CAJsB,CAIV;AACb,eALD,MAKO;AACL;AACAtC,iBAAC,CAACP,CAAD,CAAD,IAAS,CAAE,KAAKiM,aAAP,GAAuB0B,GAAhC;AACD;AACF;;AACDnD,aAAC,CAACxK,CAAD,CAAD,GAAO,GAAP,CAxCsB,CAwCV;AACb;AACF;AACF,OA3FmB,CA6FpB;AACA;AACA;AACA;;;AACA,aAAO;AAACgN,gBAAQ,EAAEA,QAAX;AAAqBI,gBAAQ,EAAEA,QAA/B;AACCF,qBAAa,EAAEA,aADhB;AAC+BC,qBAAa,EAAEA,aAD9C;AAECF,iBAAS,EAAEA,SAFZ;AAEuBa,oBAAY,EAAEb,SAFrC;AAGC/E,YAAI,EAAE+E,SAAS,GAAGE,aAAZ,GAA4BD;AAHnC,OAAP;AAID;AAtGiB,GAApB;AAyGA3P,QAAM,CAACwO,OAAP,GAAiBA,OAAjB;AACAxO,QAAM,CAACwQ,UAAP,GAAoBhC,OAApB,CAlIgB,CAkIa;AAC9B,CAnID,EAmIG1O,SAnIH;;AAqIA,CAAC,UAASE,MAAT,EAAiB;AAChB,eADgB,CAGhB;;AACA,MAAIY,KAAK,GAAGZ,MAAM,CAACY,KAAnB;AACA,MAAIG,KAAK,GAAGf,MAAM,CAACe,KAAnB;AACA,MAAImM,GAAG,GAAGlN,MAAM,CAACkN,GAAjB;AACA,MAAIsB,OAAO,GAAGxO,MAAM,CAACwO,OAArB;AACA,MAAIvM,MAAM,GAAGjC,MAAM,CAACiC,MAApB;AACA,MAAIO,QAAQ,GAAGxC,MAAM,CAACwC,QAAtB;AACA,MAAIK,cAAc,GAAG7C,MAAM,CAAC6C,cAA5B;AACA,MAAIM,MAAM,GAAGnD,MAAM,CAACmD,MAApB;AACA,MAAIpB,SAAS,GAAG/B,MAAM,CAAC+B,SAAvB;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AACE,MAAI0O,QAAQ,GAAG,UAAS/J,IAAT,EAAegK,MAAf,EAAuBtN,GAAvB,EAA4B;AACzC,QAAIA,GAAG,GAAGA,GAAG,IAAI,EAAjB;;AACA,QAAG,OAAOsD,IAAP,KAAgB,WAAnB,EAAgC;AAAEA,UAAI,GAAG,EAAP;AAAY;;AAC9C,QAAG,OAAOgK,MAAP,KAAkB,WAArB,EAAkC;AAAEA,YAAM,GAAG,EAAT;AAAc,KAHT,CAKzC;;;AACA,SAAKhK,IAAL,GAAYA,IAAZ,CANyC,CAMvB;;AAClB,SAAKgK,MAAL,GAAcA,MAAd,CAPyC,CASzC;;AACA,SAAKC,WAAL,GAAmBxN,MAAM,CAACC,GAAD,EAAM,aAAN,EAAqB,GAArB,CAAzB;AACA,SAAKwN,SAAL,GAAiBzN,MAAM,CAACC,GAAD,EAAM,WAAN,EAAmB,EAAnB,CAAvB;AACA,SAAKyN,cAAL,GAAsB1N,MAAM,CAACC,GAAD,EAAM,gBAAN,EAAwB,EAAxB,CAA5B,CAZyC,CAYgB;AACzD;AACA;;AACA,SAAK0N,UAAL,GAAkB3N,MAAM,CAACC,GAAD,EAAM,YAAN,EAAoB,EAApB,CAAxB,CAfyC,CAgBzC;;AACA,SAAK2N,aAAL,GAAqB5N,MAAM,CAACC,GAAD,EAAM,eAAN,EAAuB,EAAvB,CAA3B,CAjByC,CAmBzC;;AACA,SAAK4N,cAAL,GAAsB7N,MAAM,CAACC,GAAD,EAAM,gBAAN,EAAwB,EAAxB,CAA5B;AACA,SAAK6N,cAAL,GAAsB9N,MAAM,CAACC,GAAD,EAAM,gBAAN,EAAwB,GAAxB,CAA5B;AACA,SAAK8N,YAAL,GAAoB/N,MAAM,CAACC,GAAD,EAAM,cAAN,EAAsB,CAAC,CAAvB,CAA1B;AACA,SAAK+N,YAAL,GAAoBhO,MAAM,CAACC,GAAD,EAAM,cAAN,EAAsB,CAAtB,CAA1B;AACA,SAAKgO,iBAAL,GAAyBjO,MAAM,CAACC,GAAD,EAAM,mBAAN,EAA2B,CAAC,CAA5B,CAA/B;AACA,SAAKiO,iBAAL,GAAyBlO,MAAM,CAACC,GAAD,EAAM,mBAAN,EAA2B,CAA3B,CAA/B;AACA,SAAKkO,YAAL,GAAoBnO,MAAM,CAACC,GAAD,EAAM,cAAN,EAAsB,GAAtB,CAA1B;AACA,SAAKmO,YAAL,GAAoBpO,MAAM,CAACC,GAAD,EAAM,cAAN,EAAsB,GAAtB,CAA1B;AACA,SAAKoO,WAAL,GAAmBrO,MAAM,CAACC,GAAD,EAAM,aAAN,EAAqB,CAArB,CAAzB;AACA,SAAKqO,WAAL,GAAmBtO,MAAM,CAACC,GAAD,EAAM,aAAN,EAAqB,EAArB,CAAzB,CA7ByC,CA+BzC;;AACA,SAAKsO,KAAL,GAAa,EAAb,CAhCyC,CAgCxB;;AACjB,SAAKC,UAAL,GAAkB,EAAlB,CAjCyC,CAiCnB;;AACtB,SAAKC,oBAAL,GAA4B,EAA5B,CAlCyC,CAkCT;;AAChC,SAAKC,aAAL,GAAqB9P,SAAS,CAAC2O,MAAD,CAA9B;AACA,SAAKoB,IAAL,GAAY,CAAZ,CApCyC,CAoC1B;;AACf,SAAKC,MAAL,GAAc,CAAd,CArCyC,CAqCxB;AAEjB;;AACA,SAAKC,oBAAL,GAA4B,IAA5B;AACA,SAAKC,qBAAL,GAA6B,IAA7B,CAzCyC,CA2CzC;;AACA,QAAG,KAAKvL,IAAL,CAAU5E,MAAV,GAAmB,CAAtB,EAAyB;AACvB,WAAKoQ,WAAL;AACA,WAAKC,gBAAL;AACD;AACF,GAhDD;;AAkDA1B,UAAQ,CAAC7M,SAAT,GAAqB;AAEnB;AACAsO,eAAW,EAAE,YAAW;AACtB,UAAI9G,CAAC,GAAG,KAAK1E,IAAL,CAAU5E,MAAlB;AACA,UAAIsQ,SAAS,GAAG/R,IAAI,CAACW,KAAL,CAAW,KAAK2P,WAAL,GAAmBvF,CAA9B,CAAhB;AACA,WAAKsG,KAAL,GAAa,EAAb,CAHsB,CAGL;;AACjB,WAAI,IAAIhQ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKkP,SAAnB,EAA6BlP,CAAC,EAA9B,EAAkC;AAChC,YAAIsB,CAAC,GAAGR,QAAQ,CAAC4I,CAAD,CAAhB;AACA,aAAKsG,KAAL,CAAW1P,IAAX,CAAgB;AAACqQ,kBAAQ,EAAErP,CAAC,CAACsP,KAAF,CAAQ,CAAR,EAAWF,SAAX,CAAX;AAAkCG,iBAAO,EAAEvP,CAAC,CAACsP,KAAF,CAAQF,SAAR,EAAmBhH,CAAnB;AAA3C,SAAhB;AACD;AACF,KAXkB;AAanB;AACAoH,mBAAe,EAAE,YAAW;AAC1B,UAAIC,WAAW,GAAG,KAAK/L,IAAL,CAAU,CAAV,EAAaxE,CAAb,CAAeJ,MAAjC;AACA,UAAI6L,WAAW,GAAG,KAAKkE,aAAL,CAAmB/P,MAArC,CAF0B,CAI1B;;AACA,UAAI4Q,UAAU,GAAG,EAAjB;AACAA,gBAAU,CAAC1Q,IAAX,CAAgB;AAACuL,YAAI,EAAC,OAAN;AAAe/F,cAAM,EAAC,CAAtB;AAAyBC,cAAM,EAAC,CAAhC;AAAmCV,iBAAS,EAAE0L;AAA9C,OAAhB;AACA,UAAIE,EAAE,GAAG9P,cAAc,CAAC,CAAC,CAAD,EAAG,CAAH,EAAK,CAAL,EAAO,CAAP,CAAD,EAAY,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,CAAZ,CAAvB,CAP0B,CAOgC;;AAC1D,WAAI,IAAID,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC+P,EAAd,EAAiB/P,CAAC,EAAlB,EAAsB;AACpB,YAAIgQ,EAAE,GAAG7R,KAAK,CAAC,KAAKyQ,WAAN,EAAmB,KAAKC,WAAxB,CAAd;AACA,YAAIxD,GAAG,GAAG,CAAC,MAAD,EAAQ,QAAR,EAAiB,MAAjB,EAAyBlN,KAAK,CAAC,CAAD,EAAG,CAAH,CAA9B,CAAV;;AACA,YAAGH,KAAK,CAAC,CAAD,EAAG,CAAH,CAAL,GAAW,GAAd,EAAmB;AACjB,cAAIiS,EAAE,GAAGxS,IAAI,CAACC,MAAL,EAAT;AACAoS,oBAAU,CAAC1Q,IAAX,CAAgB;AAACuL,gBAAI,EAAC,IAAN;AAAYhE,uBAAW,EAAEqJ,EAAzB;AAA6BhF,sBAAU,EAAEK,GAAzC;AAA8CjC,qBAAS,EAAE6G;AAAzD,WAAhB;AACD,SAHD,MAGO;AACLH,oBAAU,CAAC1Q,IAAX,CAAgB;AAACuL,gBAAI,EAAC,IAAN;AAAYhE,uBAAW,EAAEqJ,EAAzB;AAA6BhF,sBAAU,EAAEK;AAAzC,WAAhB;AACD;AACF;;AACDyE,gBAAU,CAAC1Q,IAAX,CAAgB;AAACuL,YAAI,EAAC,SAAN;AAAiBI,mBAAW,EAAEA;AAA9B,OAAhB;AACA,UAAIc,GAAG,GAAG,IAAIvB,GAAJ,EAAV;AACAuB,SAAG,CAACpB,UAAJ,CAAeqF,UAAf,EApB0B,CAsB1B;;AACA,UAAII,EAAE,GAAG/R,KAAK,CAAC,KAAKiQ,cAAN,EAAsB,KAAKC,cAA3B,CAAd,CAvB0B,CAuBgC;;AAC1D,UAAI8B,EAAE,GAAG1S,IAAI,CAACuM,GAAL,CAAS,EAAT,EAAahM,KAAK,CAAC,KAAKsQ,YAAN,EAAoB,KAAKC,YAAzB,CAAlB,CAAT,CAxB0B,CAwB0C;;AACpE,UAAI6B,EAAE,GAAG3S,IAAI,CAACuM,GAAL,CAAS,EAAT,EAAahM,KAAK,CAAC,KAAKwQ,iBAAN,EAAyB,KAAKC,iBAA9B,CAAlB,CAAT,CAzB0B,CAyBoD;;AAC9E,UAAI4B,GAAG,GAAGrS,KAAK,CAAC,KAAK0Q,YAAN,EAAoB,KAAKC,YAAzB,CAAf,CA1B0B,CA0B6B;;AACvD,UAAI2B,EAAE,GAAGtS,KAAK,CAAC,CAAD,EAAG,CAAH,CAAd,CA3B0B,CA2BL;;AACrB,UAAIuS,WAAJ;;AACA,UAAGD,EAAE,GAAC,IAAN,EAAY;AACVC,mBAAW,GAAG;AAACrE,gBAAM,EAAC,UAAR;AAAoBD,oBAAU,EAACiE,EAA/B;AAAmClE,kBAAQ,EAACmE;AAA5C,SAAd;AACD,OAFD,MAEO,IAAGG,EAAE,GAAC,IAAN,EAAY;AACjBC,mBAAW,GAAG;AAACrE,gBAAM,EAAC,SAAR;AAAmBJ,uBAAa,EAAEsE,EAAlC;AAAsCnE,oBAAU,EAACiE,EAAjD;AAAqDlE,kBAAQ,EAACmE;AAA9D,SAAd;AACD,OAFM,MAEA;AACLI,mBAAW,GAAG;AAACrE,gBAAM,EAAC,KAAR;AAAeJ,uBAAa,EAAEsE,EAA9B;AAAkCjE,kBAAQ,EAAEkE,GAA5C;AAAiDpE,oBAAU,EAACiE,EAA5D;AAAgElE,kBAAQ,EAACmE;AAAzE,SAAd;AACD;;AAED,UAAIK,OAAO,GAAG,IAAI5E,OAAJ,CAAYC,GAAZ,EAAiB0E,WAAjB,CAAd;AAEA,UAAIE,IAAI,GAAG,EAAX;AACAA,UAAI,CAACC,GAAL,GAAW,EAAX;AACAD,UAAI,CAACE,IAAL,GAAY,CAAZ,CAzC0B,CAyCX;;AACfF,UAAI,CAACX,UAAL,GAAkBA,UAAlB;AACAW,UAAI,CAACF,WAAL,GAAmBA,WAAnB;AACAE,UAAI,CAAC5E,GAAL,GAAWA,GAAX;AACA4E,UAAI,CAACD,OAAL,GAAeA,OAAf;AACA,aAAOC,IAAP;AACD,KA7DkB;AA+DnB;AACAlB,oBAAgB,EAAE,YAAW;AAC3B,WAAKR,UAAL,GAAkB,EAAlB,CAD2B,CACL;;AACtB,WAAI,IAAIjQ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKmP,cAAnB,EAAkCnP,CAAC,EAAnC,EAAuC;AACrC,YAAI2R,IAAI,GAAG,KAAKb,eAAL,EAAX;AACA,aAAKb,UAAL,CAAgB3P,IAAhB,CAAqBqR,IAArB;AACD;AACF,KAtEkB;AAwEnBG,QAAI,EAAE,YAAW;AAEf;AACA,WAAK1B,IAAL,GAHe,CAKf;;AACA,UAAI2B,IAAI,GAAG,KAAK/B,KAAL,CAAW,KAAKK,MAAhB,CAAX,CANe,CAMqB;;AACpC,UAAI2B,MAAM,GAAGD,IAAI,CAACpB,QAAL,CAActR,KAAK,CAAC,CAAD,EAAI0S,IAAI,CAACpB,QAAL,CAAcvQ,MAAlB,CAAnB,CAAb;;AACA,WAAI,IAAIoB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKyO,UAAL,CAAgB7P,MAA9B,EAAqCoB,CAAC,EAAtC,EAA0C;AACxC,YAAIgB,CAAC,GAAG,KAAKwC,IAAL,CAAUgN,MAAV,CAAR;AACA,YAAIC,CAAC,GAAG,KAAKjD,MAAL,CAAYgD,MAAZ,CAAR;AACA,aAAK/B,UAAL,CAAgBzO,CAAhB,EAAmBkQ,OAAnB,CAA2BhE,KAA3B,CAAiClL,CAAjC,EAAoCyP,CAApC;AACD,OAZc,CAcf;;;AACA,UAAIC,QAAQ,GAAG,KAAK9C,UAAL,GAAkB2C,IAAI,CAACpB,QAAL,CAAcvQ,MAA/C;;AACA,UAAG,KAAKgQ,IAAL,IAAa8B,QAAhB,EAA0B;AACxB;AACA;AACA,YAAIC,OAAO,GAAG,KAAKC,aAAL,EAAd;;AACA,aAAI,IAAI5Q,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKyO,UAAL,CAAgB7P,MAA9B,EAAqCoB,CAAC,EAAtC,EAA0C;AACxC,cAAIzC,CAAC,GAAG,KAAKkR,UAAL,CAAgBzO,CAAhB,CAAR;AACAzC,WAAC,CAAC6S,GAAF,CAAMtR,IAAN,CAAW6R,OAAO,CAAC3Q,CAAD,CAAlB;AACAzC,WAAC,CAAC8S,IAAF,IAAUM,OAAO,CAAC3Q,CAAD,CAAjB;AACD;;AACD,aAAK4O,IAAL,GAAY,CAAZ,CATwB,CAST;;AACf,aAAKC,MAAL,GAVwB,CAUT;;AAEf,YAAG,KAAKC,oBAAL,KAA8B,IAAjC,EAAuC;AACrC,eAAKA,oBAAL;AACD;;AAED,YAAG,KAAKD,MAAL,IAAe,KAAKL,KAAL,CAAW5P,MAA7B,EAAqC;AACnC;AACA;AACA,eAAI,IAAIoB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKyO,UAAL,CAAgB7P,MAA9B,EAAqCoB,CAAC,EAAtC,EAA0C;AACxC,iBAAK0O,oBAAL,CAA0B5P,IAA1B,CAA+B,KAAK2P,UAAL,CAAgBzO,CAAhB,CAA/B;AACD,WALkC,CAMnC;;;AACA,eAAK0O,oBAAL,CAA0BmC,IAA1B,CAA+B,UAASlT,CAAT,EAAYC,CAAZ,EAAe;AAC5C,mBAAQD,CAAC,CAAC0S,IAAF,GAAS1S,CAAC,CAACyS,GAAF,CAAMxR,MAAhB,GACChB,CAAC,CAACyS,IAAF,GAASzS,CAAC,CAACwS,GAAF,CAAMxR,MADhB,GAEA,CAAC,CAFD,GAEK,CAFZ;AAGD,WAJD,EAPmC,CAYnC;AACA;AACA;;AACA,cAAG,KAAK8P,oBAAL,CAA0B9P,MAA1B,GAAmC,IAAI,KAAKiP,aAA/C,EAA8D;AAC5D,iBAAKa,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BU,KAA1B,CAAgC,CAAhC,EAAmC,IAAI,KAAKvB,aAA5C,CAA5B;AACD;;AACD,cAAG,KAAKkB,qBAAL,KAA+B,IAAlC,EAAwC;AACtC,iBAAKA,qBAAL;AACD;;AACD,eAAKE,gBAAL,GArBmC,CAqBV;;AACzB,eAAKJ,MAAL,GAAc,CAAd,CAtBmC,CAsBlB;AAClB,SAvBD,MAuBO;AACL;AACA,eAAI,IAAI7O,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKyO,UAAL,CAAgB7P,MAA9B,EAAqCoB,CAAC,EAAtC,EAA0C;AACxC,gBAAIzC,CAAC,GAAG,KAAKkR,UAAL,CAAgBzO,CAAhB,CAAR;AACA,gBAAIuL,GAAG,GAAG,IAAIvB,GAAJ,EAAV;AACAuB,eAAG,CAACpB,UAAJ,CAAe5M,CAAC,CAACiS,UAAjB;AACA,gBAAIU,OAAO,GAAG,IAAI5E,OAAJ,CAAYC,GAAZ,EAAiBhO,CAAC,CAAC0S,WAAnB,CAAd;AACA1S,aAAC,CAACgO,GAAF,GAAQA,GAAR;AACAhO,aAAC,CAAC2S,OAAF,GAAYA,OAAZ;AACD;AACF;AACF;AACF,KA3IkB;AA6InBU,iBAAa,EAAE,YAAW;AACxB;AACA;AACA,UAAIE,IAAI,GAAG,EAAX;AACA,UAAIP,IAAI,GAAG,KAAK/B,KAAL,CAAW,KAAKK,MAAhB,CAAX,CAJwB,CAIY;;AACpC,WAAI,IAAI7O,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKyO,UAAL,CAAgB7P,MAA9B,EAAqCoB,CAAC,EAAtC,EAA0C;AACxC,YAAIuL,GAAG,GAAG,KAAKkD,UAAL,CAAgBzO,CAAhB,EAAmBuL,GAA7B;AACA,YAAIlO,CAAC,GAAG,GAAR;;AACA,aAAI,IAAIqC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC6Q,IAAI,CAAClB,OAAL,CAAazQ,MAA3B,EAAkCc,CAAC,EAAnC,EAAuC;AACrC,cAAIsB,CAAC,GAAG,KAAKwC,IAAL,CAAU+M,IAAI,CAAClB,OAAL,CAAa3P,CAAb,CAAV,CAAR;AACA,cAAI+Q,CAAC,GAAG,KAAKjD,MAAL,CAAY+C,IAAI,CAAClB,OAAL,CAAa3P,CAAb,CAAZ,CAAR;AACA6L,aAAG,CAAC3G,OAAJ,CAAY5D,CAAZ;AACA,cAAI+P,IAAI,GAAGxF,GAAG,CAACL,aAAJ,EAAX;AACA7N,WAAC,IAAK0T,IAAI,KAAKN,CAAT,GAAa,GAAb,GAAmB,GAAzB,CALqC,CAKN;AAChC;;AACDpT,SAAC,IAAIkT,IAAI,CAAClB,OAAL,CAAazQ,MAAlB,CAVwC,CAUd;;AAC1BkS,YAAI,CAAChS,IAAL,CAAUzB,CAAV;AACD;;AACD,aAAOyT,IAAP;AACD,KAhKkB;AAkKnB;AACA;AACA;AACAE,gBAAY,EAAE,UAASxN,IAAT,EAAe;AAC3B;AACA;AACA,UAAIyN,EAAE,GAAG9T,IAAI,CAACqM,GAAL,CAAS,KAAKqE,aAAd,EAA6B,KAAKa,oBAAL,CAA0B9P,MAAvD,CAAT;;AACA,UAAGqS,EAAE,KAAK,CAAV,EAAa;AAAE,eAAO,IAAIrU,SAAS,CAACyD,GAAd,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,CAAtB,CAAP;AAAkC,OAJtB,CAIuB;;;AAClD,UAAI6Q,IAAJ,EAAU/S,CAAV;;AACA,WAAI,IAAIoB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC0R,EAAd,EAAiB1R,CAAC,EAAlB,EAAsB;AACpB,YAAIgM,GAAG,GAAG,KAAKmD,oBAAL,CAA0BnP,CAA1B,EAA6BgM,GAAvC;AACA,YAAIvK,CAAC,GAAGuK,GAAG,CAAC3G,OAAJ,CAAYpB,IAAZ,CAAR;;AACA,YAAGjE,CAAC,KAAG,CAAP,EAAU;AACR2R,cAAI,GAAGlQ,CAAP;AACA7C,WAAC,GAAG6C,CAAC,CAAChC,CAAF,CAAIJ,MAAR;AACD,SAHD,MAGO;AACL;AACA,eAAI,IAAIsC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC/C,CAAd,EAAgB+C,CAAC,EAAjB,EAAqB;AACnBgQ,gBAAI,CAAClS,CAAL,CAAOkC,CAAP,KAAaF,CAAC,CAAChC,CAAF,CAAIkC,CAAJ,CAAb;AACD;AACF;AACF,OAlB0B,CAmB3B;;;AACA,WAAI,IAAIA,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC/C,CAAd,EAAgB+C,CAAC,EAAjB,EAAqB;AACnBgQ,YAAI,CAAClS,CAAL,CAAOkC,CAAP,KAAa/C,CAAb;AACD;;AACD,aAAO+S,IAAP;AACD,KA7LkB;AA+LnBC,WAAO,EAAE,UAAS3N,IAAT,EAAe;AACtB,UAAI0N,IAAI,GAAG,KAAKF,YAAL,CAAkBxN,IAAlB,CAAX;;AACA,UAAG0N,IAAI,CAAClS,CAAL,CAAOJ,MAAP,KAAkB,CAArB,EAAwB;AACtB,YAAIwS,KAAK,GAAGrS,MAAM,CAACmS,IAAI,CAAClS,CAAN,CAAlB;AACA,YAAIqS,eAAe,GAAGD,KAAK,CAACjS,IAA5B;AACD,OAHD,MAGO;AACL,YAAIkS,eAAe,GAAG,CAAC,CAAvB,CADK,CACqB;AAC3B;;AACD,aAAOA,eAAP;AAED,KAzMkB;AA2MnBtP,UAAM,EAAE,YAAW;AACjB;AACA,UAAIkP,EAAE,GAAG9T,IAAI,CAACqM,GAAL,CAAS,KAAKqE,aAAd,EAA6B,KAAKa,oBAAL,CAA0B9P,MAAvD,CAAT;AACA,UAAIoD,IAAI,GAAG,EAAX;AACAA,UAAI,CAACsP,IAAL,GAAY,EAAZ;;AACA,WAAI,IAAI9S,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACyS,EAAd,EAAiBzS,CAAC,EAAlB,EAAsB;AACpBwD,YAAI,CAACsP,IAAL,CAAUxS,IAAV,CAAe,KAAK4P,oBAAL,CAA0BlQ,CAA1B,EAA6B+M,GAA7B,CAAiCxJ,MAAjC,EAAf;AACD;;AACD,aAAOC,IAAP;AACD,KApNkB;AAsNnBC,YAAQ,EAAE,UAASD,IAAT,EAAe;AACvB,WAAK6L,aAAL,GAAqB7L,IAAI,CAACsP,IAAL,CAAU1S,MAA/B;AACA,WAAK8P,oBAAL,GAA4B,EAA5B;;AACA,WAAI,IAAIlQ,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC,KAAKqP,aAAnB,EAAiCrP,CAAC,EAAlC,EAAsC;AACpC,YAAI+M,GAAG,GAAG,IAAIvB,GAAJ,EAAV;AACAuB,WAAG,CAACtJ,QAAJ,CAAaD,IAAI,CAACsP,IAAL,CAAU9S,CAAV,CAAb;AACA,YAAI+S,eAAe,GAAG,EAAtB;AACAA,uBAAe,CAAChG,GAAhB,GAAsBA,GAAtB;AACA,aAAKmD,oBAAL,CAA0B5P,IAA1B,CAA+ByS,eAA/B;AACD;AACF,KAhOkB;AAkOnB;AACA;AACAC,gBAAY,EAAE,UAASrM,CAAT,EAAY;AAAE,WAAK2J,oBAAL,GAA4B3J,CAA5B;AAAgC,KApOzC;AAqOnB;AACAsM,iBAAa,EAAE,UAAStM,CAAT,EAAY;AAAE,WAAK4J,qBAAL,GAA6B5J,CAA7B;AAAiC;AAtO3C,GAArB;AA0OArI,QAAM,CAACyQ,QAAP,GAAkBA,QAAlB;AACD,CAnTD,EAmTG3Q,SAnTH;;AAoTA,KAAKA,SAAL,GAAiBA,SAAjB,C;;;;;;;;;;;;AClkEA;AACA;AACA;AACA;AACA;AAEA,OAAK8U,QAAL,GAAiB,YAAY;AAAE,iBAAF,CAE7B;AACA;AAEA;;AACA,aAASC,SAAT,CAAmBC,EAAnB,EAAuBC,EAAvB,EAA2B;AAEvB,UAAIzP,EAAE,GAAGwP,EAAE,CAAC5Q,CAAH,GAAO6Q,EAAE,CAAC7Q,CAAnB;AAAA,UACIqB,EAAE,GAAGuP,EAAE,CAAC3Q,CAAH,GAAO4Q,EAAE,CAAC5Q,CADnB;AAGA,aAAOmB,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAtB;AACH,KAZ4B,CAc7B;;;AACA,aAASyP,YAAT,CAAsBhS,CAAtB,EAAyB8R,EAAzB,EAA6BC,EAA7B,EAAiC;AAE7B,UAAI7Q,CAAC,GAAG4Q,EAAE,CAAC5Q,CAAX;AAAA,UACIC,CAAC,GAAG2Q,EAAE,CAAC3Q,CADX;AAAA,UAEImB,EAAE,GAAGyP,EAAE,CAAC7Q,CAAH,GAAOA,CAFhB;AAAA,UAGIqB,EAAE,GAAGwP,EAAE,CAAC5Q,CAAH,GAAOA,CAHhB;;AAKA,UAAImB,EAAE,KAAK,CAAP,IAAYC,EAAE,KAAK,CAAvB,EAA0B;AAEtB,YAAI+I,CAAC,GAAG,CAAC,CAACtL,CAAC,CAACkB,CAAF,GAAMA,CAAP,IAAYoB,EAAZ,GAAiB,CAACtC,CAAC,CAACmB,CAAF,GAAMA,CAAP,IAAYoB,EAA9B,KAAqCD,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAApD,CAAR;;AAEA,YAAI+I,CAAC,GAAG,CAAR,EAAW;AACPpK,WAAC,GAAG6Q,EAAE,CAAC7Q,CAAP;AACAC,WAAC,GAAG4Q,EAAE,CAAC5Q,CAAP;AAEH,SAJD,MAIO,IAAImK,CAAC,GAAG,CAAR,EAAW;AACdpK,WAAC,IAAIoB,EAAE,GAAGgJ,CAAV;AACAnK,WAAC,IAAIoB,EAAE,GAAG+I,CAAV;AACH;AACJ;;AAEDhJ,QAAE,GAAGtC,CAAC,CAACkB,CAAF,GAAMA,CAAX;AACAqB,QAAE,GAAGvC,CAAC,CAACmB,CAAF,GAAMA,CAAX;AAEA,aAAOmB,EAAE,GAAGA,EAAL,GAAUC,EAAE,GAAGA,EAAtB;AACH,KAxC4B,CAyC7B;AAEA;;;AACA,aAAS0P,kBAAT,CAA4BC,MAA5B,EAAoCC,WAApC,EAAiD;AAE7C,UAAIC,SAAS,GAAGF,MAAM,CAAC,CAAD,CAAtB;AAAA,UACIG,SAAS,GAAG,CAACD,SAAD,CADhB;AAAA,UAEIE,KAFJ;;AAIA,WAAK,IAAI5T,CAAC,GAAG,CAAR,EAAW6T,GAAG,GAAGL,MAAM,CAACpT,MAA7B,EAAqCJ,CAAC,GAAG6T,GAAzC,EAA8C7T,CAAC,EAA/C,EAAmD;AAC/C4T,aAAK,GAAGJ,MAAM,CAACxT,CAAD,CAAd;;AAEA,YAAImT,SAAS,CAACS,KAAD,EAAQF,SAAR,CAAT,GAA8BD,WAAlC,EAA+C;AAC3CE,mBAAS,CAACrT,IAAV,CAAesT,KAAf;AACAF,mBAAS,GAAGE,KAAZ;AACH;AACJ;;AAED,UAAIF,SAAS,KAAKE,KAAlB,EAAyBD,SAAS,CAACrT,IAAV,CAAesT,KAAf;AAEzB,aAAOD,SAAP;AACH;;AAED,aAASG,cAAT,CAAwBN,MAAxB,EAAgCO,KAAhC,EAAuCC,IAAvC,EAA6CP,WAA7C,EAA0DQ,UAA1D,EAAsE;AAClE,UAAIC,SAAS,GAAGT,WAAhB;AAAA,UACIU,KADJ;;AAGA,WAAK,IAAInU,CAAC,GAAG+T,KAAK,GAAG,CAArB,EAAwB/T,CAAC,GAAGgU,IAA5B,EAAkChU,CAAC,EAAnC,EAAuC;AACnC,YAAIoU,MAAM,GAAGd,YAAY,CAACE,MAAM,CAACxT,CAAD,CAAP,EAAYwT,MAAM,CAACO,KAAD,CAAlB,EAA2BP,MAAM,CAACQ,IAAD,CAAjC,CAAzB;;AAEA,YAAII,MAAM,GAAGF,SAAb,EAAwB;AACpBC,eAAK,GAAGnU,CAAR;AACAkU,mBAAS,GAAGE,MAAZ;AACH;AACJ;;AAED,UAAIF,SAAS,GAAGT,WAAhB,EAA6B;AACzB,YAAIU,KAAK,GAAGJ,KAAR,GAAgB,CAApB,EAAuBD,cAAc,CAACN,MAAD,EAASO,KAAT,EAAgBI,KAAhB,EAAuBV,WAAvB,EAAoCQ,UAApC,CAAd;AACvBA,kBAAU,CAAC3T,IAAX,CAAgBkT,MAAM,CAACW,KAAD,CAAtB;AACA,YAAIH,IAAI,GAAGG,KAAP,GAAe,CAAnB,EAAsBL,cAAc,CAACN,MAAD,EAASW,KAAT,EAAgBH,IAAhB,EAAsBP,WAAtB,EAAmCQ,UAAnC,CAAd;AACzB;AACJ,KAlF4B,CAoF7B;;;AACA,aAASI,sBAAT,CAAgCb,MAAhC,EAAwCC,WAAxC,EAAqD;AACjD,UAAIO,IAAI,GAAGR,MAAM,CAACpT,MAAP,GAAgB,CAA3B;AAEA,UAAI6T,UAAU,GAAG,CAACT,MAAM,CAAC,CAAD,CAAP,CAAjB;AACAM,oBAAc,CAACN,MAAD,EAAS,CAAT,EAAYQ,IAAZ,EAAkBP,WAAlB,EAA+BQ,UAA/B,CAAd;AACAA,gBAAU,CAAC3T,IAAX,CAAgBkT,MAAM,CAACQ,IAAD,CAAtB;AAEA,aAAOC,UAAP;AACH,KA7F4B,CA+F7B;;;AACA,aAASf,QAAT,CAAkBM,MAAlB,EAA0Bc,SAA1B,EAAqCC,cAArC,EAAqD;AAEjD,UAAIf,MAAM,CAACpT,MAAP,IAAiB,CAArB,EAAwB,OAAOoT,MAAP;AAExB,UAAIC,WAAW,GAAGa,SAAS,KAAKE,SAAd,GAA0BF,SAAS,GAAGA,SAAtC,GAAkD,CAApE;AAEAd,YAAM,GAAGe,cAAc,GAAGf,MAAH,GAAYD,kBAAkB,CAACC,MAAD,EAASC,WAAT,CAArD;AACAD,YAAM,GAAGa,sBAAsB,CAACb,MAAD,EAASC,WAAT,CAA/B;AAEA,aAAOD,MAAP;AACH,KA1G4B,CA4G7B;;;AACA,QAAI,OAAOiB,MAAP,KAAkB,UAAlB,IAAgCA,MAAM,CAACC,GAA3C,EAAgDD,MAAM,CAAC,YAAW;AAAE,aAAOvB,QAAP;AAAkB,KAAhC,CAAN,CAAhD,KACK,IAAI,OAAOyB,MAAP,KAAkB,WAAtB,EAAmCA,MAAM,CAACC,OAAP,GAAiB1B,QAAjB,CAAnC,KACA,OAAOA,QAAP;AAEJ,GAjHe,EAAhB;;;;;;;;;;;;;ACNA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AAEA;AAEA,WAAS2B,OAAT,GAAmB;AACf,SAAKC,QAAL,GAAgB,IAAhB;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,KAAL,GAAa,IAAb;AACA,SAAKC,SAAL,GAAiB,IAAjB;AACA,SAAKC,oBAAL,GAA4B,EAA5B;AACA,SAAKC,mBAAL,GAA2B,EAA3B;AACA,SAAKC,cAAL,GAAsB,EAAtB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACA,SAAKC,YAAL,GAAoB,EAApB;AACC,G,CAEL;;;AAEAT,SAAO,CAAC3S,SAAR,CAAkBqT,KAAlB,GAA0B,YAAW;AACjC,QAAI,CAAC,KAAKC,SAAV,EAAqB;AACjB,WAAKA,SAAL,GAAiB,IAAI,KAAKC,MAAT,EAAjB;AACC,KAH4B,CAIjC;;;AACA,QAAI,KAAKD,SAAL,CAAeE,IAAnB,EAAyB;AACrB,UAAIC,YAAY,GAAG,KAAKH,SAAL,CAAeI,QAAf,CAAwB,KAAKJ,SAAL,CAAeE,IAAvC,CAAnB;;AACA,aAAOC,YAAP,EAAqB;AACjB,aAAKT,oBAAL,CAA0B5U,IAA1B,CAA+BqV,YAA/B,EADiB,CAC6B;;AAC9CA,oBAAY,GAAGA,YAAY,CAACE,MAA5B;AACC;AACJ;;AACL,SAAKL,SAAL,CAAeE,IAAf,GAAsB,IAAtB;;AACA,QAAI,CAAC,KAAKI,YAAV,EAAwB;AACpB,WAAKA,YAAL,GAAoB,IAAI,KAAKL,MAAT,EAApB;AACC;;AACL,SAAKK,YAAL,CAAkBJ,IAAlB,GAAyB,KAAKK,gBAAL,GAAwB,IAAjD;AACA,SAAKjB,QAAL,GAAgB,EAAhB;AACA,SAAKC,KAAL,GAAa,EAAb;AACA,SAAKC,KAAL,GAAa,EAAb;AACC,GApBL;;AAsBAH,SAAO,CAAC3S,SAAR,CAAkBlD,IAAlB,GAAyBL,IAAI,CAACK,IAA9B;AACA6V,SAAO,CAAC3S,SAAR,CAAkBqM,GAAlB,GAAwB5P,IAAI,CAAC4P,GAA7B;AACAsG,SAAO,CAAC3S,SAAR,CAAkB8T,CAAlB,GAAsBnB,OAAO,CAACmB,CAAR,GAAY,IAAlC;AACAnB,SAAO,CAAC3S,SAAR,CAAkB+T,IAAlB,GAAyBpB,OAAO,CAACoB,IAAR,GAAe,MAAMpB,OAAO,CAACmB,CAAtD;;AACAnB,SAAO,CAAC3S,SAAR,CAAkBgU,gBAAlB,GAAqC,UAAS/W,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAO,KAAKmP,GAAL,CAASpP,CAAC,GAACC,CAAX,IAAc,IAArB;AAA2B,GAA9E;;AACAyV,SAAO,CAAC3S,SAAR,CAAkBiU,sBAAlB,GAA2C,UAAShX,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAOD,CAAC,GAACC,CAAF,GAAI,IAAX;AAAiB,GAA1E;;AACAyV,SAAO,CAAC3S,SAAR,CAAkBkU,6BAAlB,GAAkD,UAASjX,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAOA,CAAC,GAACD,CAAF,GAAI,IAAX;AAAiB,GAAjF;;AACA0V,SAAO,CAAC3S,SAAR,CAAkBmU,mBAAlB,GAAwC,UAASlX,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAOA,CAAC,GAACD,CAAF,GAAI,IAAX;AAAiB,GAAvE;;AACA0V,SAAO,CAAC3S,SAAR,CAAkBoU,0BAAlB,GAA+C,UAASnX,CAAT,EAAWC,CAAX,EAAa;AAAC,WAAOD,CAAC,GAACC,CAAF,GAAI,IAAX;AAAiB,GAA9E,C,CAEA;AACA;AACA;;;AAEAyV,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,GAA2B,YAAW;AAClC,SAAKC,IAAL,GAAY,IAAZ;AACC,GAFL;;AAIAb,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,CAAyBvT,SAAzB,CAAmCqU,iBAAnC,GAAuD,UAASC,IAAT,EAAeC,SAAf,EAA0B;AAC7E,QAAIC,MAAJ;;AACA,QAAIF,IAAJ,EAAU;AACN;AACAC,eAAS,CAACE,UAAV,GAAuBH,IAAvB;AACAC,eAAS,CAACZ,MAAV,GAAmBW,IAAI,CAACX,MAAxB;;AACA,UAAIW,IAAI,CAACX,MAAT,EAAiB;AACbW,YAAI,CAACX,MAAL,CAAYc,UAAZ,GAAyBF,SAAzB;AACC;;AACLD,UAAI,CAACX,MAAL,GAAcY,SAAd,CAPM,CAQN;;AACA,UAAID,IAAI,CAACI,OAAT,EAAkB;AACd;AACAJ,YAAI,GAAGA,IAAI,CAACI,OAAZ;;AACA,eAAOJ,IAAI,CAACK,MAAZ,EAAoB;AAACL,cAAI,GAAGA,IAAI,CAACK,MAAZ;AAAoB;;AACzCL,YAAI,CAACK,MAAL,GAAcJ,SAAd;AACC,OALL,MAMK;AACDD,YAAI,CAACI,OAAL,GAAeH,SAAf;AACC;;AACLC,YAAM,GAAGF,IAAT;AACC,KAnBL,CAoBA;AACA;AArBA,SAsBK,IAAI,KAAKd,IAAT,EAAe;AAChBc,UAAI,GAAG,KAAKZ,QAAL,CAAc,KAAKF,IAAnB,CAAP,CADgB,CAEhB;;AACAe,eAAS,CAACE,UAAV,GAAuB,IAAvB;AACAF,eAAS,CAACZ,MAAV,GAAmBW,IAAnB;AACAA,UAAI,CAACG,UAAL,GAAkBF,SAAlB,CALgB,CAMhB;;AACAD,UAAI,CAACK,MAAL,GAAcJ,SAAd;AACAC,YAAM,GAAGF,IAAT;AACC,KATA,MAUA;AACD;AACAC,eAAS,CAACE,UAAV,GAAuBF,SAAS,CAACZ,MAAV,GAAmB,IAA1C,CAFC,CAGD;;AACA,WAAKH,IAAL,GAAYe,SAAZ;AACAC,YAAM,GAAG,IAAT;AACC;;AACLD,aAAS,CAACI,MAAV,GAAmBJ,SAAS,CAACG,OAAV,GAAoB,IAAvC;AACAH,aAAS,CAACK,QAAV,GAAqBJ,MAArB;AACAD,aAAS,CAACM,KAAV,GAAkB,IAAlB,CA3C6E,CA4C7E;AACA;AACA;;AACA,QAAIC,OAAJ,EAAaC,KAAb;AACAT,QAAI,GAAGC,SAAP;;AACA,WAAOC,MAAM,IAAIA,MAAM,CAACK,KAAxB,EAA+B;AAC3BC,aAAO,GAAGN,MAAM,CAACI,QAAjB;;AACA,UAAIJ,MAAM,KAAKM,OAAO,CAACH,MAAvB,EAA+B;AAC3BI,aAAK,GAAGD,OAAO,CAACJ,OAAhB;;AACA,YAAIK,KAAK,IAAIA,KAAK,CAACF,KAAnB,EAA0B;AACtBL,gBAAM,CAACK,KAAP,GAAeE,KAAK,CAACF,KAAN,GAAc,KAA7B;AACAC,iBAAO,CAACD,KAAR,GAAgB,IAAhB;AACAP,cAAI,GAAGQ,OAAP;AACC,SAJL,MAKK;AACD,cAAIR,IAAI,KAAKE,MAAM,CAACE,OAApB,EAA6B;AACzB,iBAAKM,YAAL,CAAkBR,MAAlB;AACAF,gBAAI,GAAGE,MAAP;AACAA,kBAAM,GAAGF,IAAI,CAACM,QAAd;AACC;;AACLJ,gBAAM,CAACK,KAAP,GAAe,KAAf;AACAC,iBAAO,CAACD,KAAR,GAAgB,IAAhB;AACA,eAAKI,aAAL,CAAmBH,OAAnB;AACC;AACJ,OAjBL,MAkBK;AACDC,aAAK,GAAGD,OAAO,CAACH,MAAhB;;AACA,YAAII,KAAK,IAAIA,KAAK,CAACF,KAAnB,EAA0B;AACtBL,gBAAM,CAACK,KAAP,GAAeE,KAAK,CAACF,KAAN,GAAc,KAA7B;AACAC,iBAAO,CAACD,KAAR,GAAgB,IAAhB;AACAP,cAAI,GAAGQ,OAAP;AACC,SAJL,MAKK;AACD,cAAIR,IAAI,KAAKE,MAAM,CAACG,MAApB,EAA4B;AACxB,iBAAKM,aAAL,CAAmBT,MAAnB;AACAF,gBAAI,GAAGE,MAAP;AACAA,kBAAM,GAAGF,IAAI,CAACM,QAAd;AACC;;AACLJ,gBAAM,CAACK,KAAP,GAAe,KAAf;AACAC,iBAAO,CAACD,KAAR,GAAgB,IAAhB;AACA,eAAKG,YAAL,CAAkBF,OAAlB;AACC;AACJ;;AACLN,YAAM,GAAGF,IAAI,CAACM,QAAd;AACC;;AACL,SAAKpB,IAAL,CAAUqB,KAAV,GAAkB,KAAlB;AACC,GA1FL;;AA4FAlC,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,CAAyBvT,SAAzB,CAAmCkV,YAAnC,GAAkD,UAASZ,IAAT,EAAe;AAC7D;AACA,QAAIA,IAAI,CAACX,MAAT,EAAiB;AACbW,UAAI,CAACX,MAAL,CAAYc,UAAZ,GAAyBH,IAAI,CAACG,UAA9B;AACC;;AACL,QAAIH,IAAI,CAACG,UAAT,EAAqB;AACjBH,UAAI,CAACG,UAAL,CAAgBd,MAAhB,GAAyBW,IAAI,CAACX,MAA9B;AACC;;AACLW,QAAI,CAACX,MAAL,GAAcW,IAAI,CAACG,UAAL,GAAkB,IAAhC,CAR6D,CAS7D;;AACA,QAAID,MAAM,GAAGF,IAAI,CAACM,QAAlB;AAAA,QACIO,IAAI,GAAGb,IAAI,CAACK,MADhB;AAAA,QAEIS,KAAK,GAAGd,IAAI,CAACI,OAFjB;AAAA,QAGIW,IAHJ;;AAIA,QAAI,CAACF,IAAL,EAAW;AACPE,UAAI,GAAGD,KAAP;AACC,KAFL,MAGK,IAAI,CAACA,KAAL,EAAY;AACbC,UAAI,GAAGF,IAAP;AACC,KAFA,MAGA;AACDE,UAAI,GAAG,KAAK3B,QAAL,CAAc0B,KAAd,CAAP;AACC;;AACL,QAAIZ,MAAJ,EAAY;AACR,UAAIA,MAAM,CAACG,MAAP,KAAkBL,IAAtB,EAA4B;AACxBE,cAAM,CAACG,MAAP,GAAgBU,IAAhB;AACC,OAFL,MAGK;AACDb,cAAM,CAACE,OAAP,GAAiBW,IAAjB;AACC;AACJ,KAPL,MAQK;AACD,WAAK7B,IAAL,GAAY6B,IAAZ;AACC,KAjCwD,CAkC7D;;;AACA,QAAIC,KAAJ;;AACA,QAAIH,IAAI,IAAIC,KAAZ,EAAmB;AACfE,WAAK,GAAGD,IAAI,CAACR,KAAb;AACAQ,UAAI,CAACR,KAAL,GAAaP,IAAI,CAACO,KAAlB;AACAQ,UAAI,CAACV,MAAL,GAAcQ,IAAd;AACAA,UAAI,CAACP,QAAL,GAAgBS,IAAhB;;AACA,UAAIA,IAAI,KAAKD,KAAb,EAAoB;AAChBZ,cAAM,GAAGa,IAAI,CAACT,QAAd;AACAS,YAAI,CAACT,QAAL,GAAgBN,IAAI,CAACM,QAArB;AACAN,YAAI,GAAGe,IAAI,CAACX,OAAZ;AACAF,cAAM,CAACG,MAAP,GAAgBL,IAAhB;AACAe,YAAI,CAACX,OAAL,GAAeU,KAAf;AACAA,aAAK,CAACR,QAAN,GAAiBS,IAAjB;AACC,OAPL,MAQK;AACDA,YAAI,CAACT,QAAL,GAAgBJ,MAAhB;AACAA,cAAM,GAAGa,IAAT;AACAf,YAAI,GAAGe,IAAI,CAACX,OAAZ;AACC;AACJ,KAlBL,MAmBK;AACDY,WAAK,GAAGhB,IAAI,CAACO,KAAb;AACAP,UAAI,GAAGe,IAAP;AACC,KA1DwD,CA2D7D;AACA;;;AACA,QAAIf,IAAJ,EAAU;AACNA,UAAI,CAACM,QAAL,GAAgBJ,MAAhB;AACC,KA/DwD,CAgE7D;;;AACA,QAAIc,KAAJ,EAAW;AAAC;AAAQ;;AACpB,QAAIhB,IAAI,IAAIA,IAAI,CAACO,KAAjB,EAAwB;AACpBP,UAAI,CAACO,KAAL,GAAa,KAAb;AACA;AACC,KArEwD,CAsE7D;;;AACA,QAAIU,OAAJ;;AACA,OAAG;AACC,UAAIjB,IAAI,KAAK,KAAKd,IAAlB,EAAwB;AACpB;AACC;;AACL,UAAIc,IAAI,KAAKE,MAAM,CAACG,MAApB,EAA4B;AACxBY,eAAO,GAAGf,MAAM,CAACE,OAAjB;;AACA,YAAIa,OAAO,CAACV,KAAZ,EAAmB;AACfU,iBAAO,CAACV,KAAR,GAAgB,KAAhB;AACAL,gBAAM,CAACK,KAAP,GAAe,IAAf;AACA,eAAKG,YAAL,CAAkBR,MAAlB;AACAe,iBAAO,GAAGf,MAAM,CAACE,OAAjB;AACC;;AACL,YAAKa,OAAO,CAACZ,MAAR,IAAkBY,OAAO,CAACZ,MAAR,CAAeE,KAAlC,IAA6CU,OAAO,CAACb,OAAR,IAAmBa,OAAO,CAACb,OAAR,CAAgBG,KAApF,EAA4F;AACxF,cAAI,CAACU,OAAO,CAACb,OAAT,IAAoB,CAACa,OAAO,CAACb,OAAR,CAAgBG,KAAzC,EAAgD;AAC5CU,mBAAO,CAACZ,MAAR,CAAeE,KAAf,GAAuB,KAAvB;AACAU,mBAAO,CAACV,KAAR,GAAgB,IAAhB;AACA,iBAAKI,aAAL,CAAmBM,OAAnB;AACAA,mBAAO,GAAGf,MAAM,CAACE,OAAjB;AACC;;AACLa,iBAAO,CAACV,KAAR,GAAgBL,MAAM,CAACK,KAAvB;AACAL,gBAAM,CAACK,KAAP,GAAeU,OAAO,CAACb,OAAR,CAAgBG,KAAhB,GAAwB,KAAvC;AACA,eAAKG,YAAL,CAAkBR,MAAlB;AACAF,cAAI,GAAG,KAAKd,IAAZ;AACA;AACC;AACJ,OArBL,MAsBK;AACD+B,eAAO,GAAGf,MAAM,CAACG,MAAjB;;AACA,YAAIY,OAAO,CAACV,KAAZ,EAAmB;AACfU,iBAAO,CAACV,KAAR,GAAgB,KAAhB;AACAL,gBAAM,CAACK,KAAP,GAAe,IAAf;AACA,eAAKI,aAAL,CAAmBT,MAAnB;AACAe,iBAAO,GAAGf,MAAM,CAACG,MAAjB;AACC;;AACL,YAAKY,OAAO,CAACZ,MAAR,IAAkBY,OAAO,CAACZ,MAAR,CAAeE,KAAlC,IAA6CU,OAAO,CAACb,OAAR,IAAmBa,OAAO,CAACb,OAAR,CAAgBG,KAApF,EAA4F;AACxF,cAAI,CAACU,OAAO,CAACZ,MAAT,IAAmB,CAACY,OAAO,CAACZ,MAAR,CAAeE,KAAvC,EAA8C;AAC1CU,mBAAO,CAACb,OAAR,CAAgBG,KAAhB,GAAwB,KAAxB;AACAU,mBAAO,CAACV,KAAR,GAAgB,IAAhB;AACA,iBAAKG,YAAL,CAAkBO,OAAlB;AACAA,mBAAO,GAAGf,MAAM,CAACG,MAAjB;AACC;;AACLY,iBAAO,CAACV,KAAR,GAAgBL,MAAM,CAACK,KAAvB;AACAL,gBAAM,CAACK,KAAP,GAAeU,OAAO,CAACZ,MAAR,CAAeE,KAAf,GAAuB,KAAtC;AACA,eAAKI,aAAL,CAAmBT,MAAnB;AACAF,cAAI,GAAG,KAAKd,IAAZ;AACA;AACC;AACJ;;AACL+B,aAAO,CAACV,KAAR,GAAgB,IAAhB;AACAP,UAAI,GAAGE,MAAP;AACAA,YAAM,GAAGA,MAAM,CAACI,QAAhB;AACH,KAnDD,QAmDS,CAACN,IAAI,CAACO,KAnDf;;AAoDA,QAAIP,IAAJ,EAAU;AAACA,UAAI,CAACO,KAAL,GAAa,KAAb;AAAoB;AAC9B,GA7HL;;AA+HAlC,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,CAAyBvT,SAAzB,CAAmCgV,YAAnC,GAAkD,UAASV,IAAT,EAAe;AAC7D,QAAIlV,CAAC,GAAGkV,IAAR;AAAA,QACItV,CAAC,GAAGsV,IAAI,CAACI,OADb;AAAA,QACsB;AAClBF,UAAM,GAAGpV,CAAC,CAACwV,QAFf;;AAGA,QAAIJ,MAAJ,EAAY;AACR,UAAIA,MAAM,CAACG,MAAP,KAAkBvV,CAAtB,EAAyB;AACrBoV,cAAM,CAACG,MAAP,GAAgB3V,CAAhB;AACC,OAFL,MAGK;AACDwV,cAAM,CAACE,OAAP,GAAiB1V,CAAjB;AACC;AACJ,KAPL,MAQK;AACD,WAAKwU,IAAL,GAAYxU,CAAZ;AACC;;AACLA,KAAC,CAAC4V,QAAF,GAAaJ,MAAb;AACApV,KAAC,CAACwV,QAAF,GAAa5V,CAAb;AACAI,KAAC,CAACsV,OAAF,GAAY1V,CAAC,CAAC2V,MAAd;;AACA,QAAIvV,CAAC,CAACsV,OAAN,EAAe;AACXtV,OAAC,CAACsV,OAAF,CAAUE,QAAV,GAAqBxV,CAArB;AACC;;AACLJ,KAAC,CAAC2V,MAAF,GAAWvV,CAAX;AACC,GAtBL;;AAwBAuT,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,CAAyBvT,SAAzB,CAAmCiV,aAAnC,GAAmD,UAASX,IAAT,EAAe;AAC9D,QAAIlV,CAAC,GAAGkV,IAAR;AAAA,QACItV,CAAC,GAAGsV,IAAI,CAACK,MADb;AAAA,QACqB;AACjBH,UAAM,GAAGpV,CAAC,CAACwV,QAFf;;AAGA,QAAIJ,MAAJ,EAAY;AACR,UAAIA,MAAM,CAACG,MAAP,KAAkBvV,CAAtB,EAAyB;AACrBoV,cAAM,CAACG,MAAP,GAAgB3V,CAAhB;AACC,OAFL,MAGK;AACDwV,cAAM,CAACE,OAAP,GAAiB1V,CAAjB;AACC;AACJ,KAPL,MAQK;AACD,WAAKwU,IAAL,GAAYxU,CAAZ;AACC;;AACLA,KAAC,CAAC4V,QAAF,GAAaJ,MAAb;AACApV,KAAC,CAACwV,QAAF,GAAa5V,CAAb;AACAI,KAAC,CAACuV,MAAF,GAAW3V,CAAC,CAAC0V,OAAb;;AACA,QAAItV,CAAC,CAACuV,MAAN,EAAc;AACVvV,OAAC,CAACuV,MAAF,CAASC,QAAT,GAAoBxV,CAApB;AACC;;AACLJ,KAAC,CAAC0V,OAAF,GAAYtV,CAAZ;AACC,GAtBL;;AAwBAuT,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,CAAyBvT,SAAzB,CAAmC0T,QAAnC,GAA8C,UAASY,IAAT,EAAe;AACzD,WAAOA,IAAI,CAACK,MAAZ,EAAoB;AAChBL,UAAI,GAAGA,IAAI,CAACK,MAAZ;AACC;;AACL,WAAOL,IAAP;AACC,GALL;;AAOA3B,SAAO,CAAC3S,SAAR,CAAkBuT,MAAlB,CAAyBvT,SAAzB,CAAmCwV,OAAnC,GAA6C,UAASlB,IAAT,EAAe;AACxD,WAAOA,IAAI,CAACI,OAAZ,EAAqB;AACjBJ,UAAI,GAAGA,IAAI,CAACI,OAAZ;AACC;;AACL,WAAOJ,IAAP;AACC,GALL,C,CAOA;AACA;;;AAEA3B,SAAO,CAAC3S,SAAR,CAAkByV,OAAlB,GAA4B,UAASC,IAAT,EAAe;AACvC,SAAKA,IAAL,GAAYA,IAAZ;AACC,GAFL,C,CAIA;AACA;;;AAEA/C,SAAO,CAAC3S,SAAR,CAAkB2V,IAAlB,GAAyB,UAASD,IAAT,EAAe;AACpC,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKE,SAAL,GAAiB,EAAjB;AACA,SAAKC,OAAL,GAAe,KAAf;AACC,GAJL;;AAMAlD,SAAO,CAAC3S,SAAR,CAAkB2V,IAAlB,CAAuB3V,SAAvB,CAAiC8V,IAAjC,GAAwC,UAASJ,IAAT,EAAe;AACnD,SAAKA,IAAL,GAAYA,IAAZ;AACA,SAAKE,SAAL,GAAiB,EAAjB;AACA,SAAKC,OAAL,GAAe,KAAf;AACA,WAAO,IAAP;AACC,GALL;;AAOAlD,SAAO,CAAC3S,SAAR,CAAkB+V,UAAlB,GAA+B,UAASL,IAAT,EAAe;AAC1C,QAAIM,IAAI,GAAG,KAAK5C,YAAL,CAAkB6C,GAAlB,EAAX;;AACA,QAAKD,IAAL,EAAY;AACR,aAAOA,IAAI,CAACF,IAAL,CAAUJ,IAAV,CAAP;AACC;;AACL,WAAO,IAAI,KAAKC,IAAT,CAAcD,IAAd,CAAP;AACC,GANL;;AAQA/C,SAAO,CAAC3S,SAAR,CAAkB2V,IAAlB,CAAuB3V,SAAvB,CAAiCkW,gBAAjC,GAAoD,YAAW;AAC3D,QAAIN,SAAS,GAAG,KAAKA,SAArB;AAAA,QACIO,SAAS,GAAGP,SAAS,CAAC1X,MAD1B;AAAA,QAEIkY,IAFJ,CAD2D,CAI3D;AACA;AACA;;AACA,WAAOD,SAAS,EAAhB,EAAoB;AAChBC,UAAI,GAAGR,SAAS,CAACO,SAAD,CAAT,CAAqBC,IAA5B;;AACA,UAAI,CAACA,IAAI,CAACC,EAAN,IAAY,CAACD,IAAI,CAACE,EAAtB,EAA0B;AACtBV,iBAAS,CAACW,MAAV,CAAiBJ,SAAjB,EAA2B,CAA3B;AACC;AACJ,KAZsD,CAc3D;AACA;AACA;AACA;AACA;;;AACAP,aAAS,CAACzF,IAAV,CAAe,UAASlT,CAAT,EAAWC,CAAX,EAAa;AAAC,aAAOA,CAAC,CAACsZ,KAAF,GAAQvZ,CAAC,CAACuZ,KAAjB;AAAwB,KAArD;AACA,WAAOZ,SAAS,CAAC1X,MAAjB;AACC,GArBL,C,CAuBA;;;AACAyU,SAAO,CAAC3S,SAAR,CAAkB2V,IAAlB,CAAuB3V,SAAvB,CAAiCyW,cAAjC,GAAkD,YAAW;AACzD,QAAIC,SAAS,GAAG,EAAhB;AAAA,QACIP,SAAS,GAAG,KAAKP,SAAL,CAAe1X,MAD/B;AAAA,QAEIkY,IAFJ;;AAGA,WAAOD,SAAS,EAAhB,EAAmB;AACfC,UAAI,GAAG,KAAKR,SAAL,CAAeO,SAAf,EAA0BC,IAAjC;;AACA,UAAIA,IAAI,CAACO,KAAL,KAAe,IAAf,IAAuBP,IAAI,CAACO,KAAL,CAAWC,SAAX,IAAwB,KAAKlB,IAAL,CAAUkB,SAA7D,EAAwE;AACpEF,iBAAS,CAACtY,IAAV,CAAegY,IAAI,CAACO,KAAL,CAAWC,SAA1B;AACC,OAFL,MAGK,IAAIR,IAAI,CAACS,KAAL,KAAe,IAAf,IAAuBT,IAAI,CAACS,KAAL,CAAWD,SAAX,IAAwB,KAAKlB,IAAL,CAAUkB,SAA7D,EAAuE;AACxEF,iBAAS,CAACtY,IAAV,CAAegY,IAAI,CAACS,KAAL,CAAWD,SAA1B;AACC;AACJ;;AACL,WAAOF,SAAP;AACC,GAdL,C,CAgBA;AACA;;;AACA/D,SAAO,CAAC3S,SAAR,CAAkB2V,IAAlB,CAAuB3V,SAAvB,CAAiC8W,OAAjC,GAA2C,YAAW;AAClD,QAAIlB,SAAS,GAAG,KAAKA,SAArB;AAAA,QACIO,SAAS,GAAGP,SAAS,CAAC1X,MAD1B;AAAA,QAEI6Y,IAAI,GAAGC,QAFX;AAAA,QAGIC,IAAI,GAAGD,QAHX;AAAA,QAIIE,IAAI,GAAG,CAACF,QAJZ;AAAA,QAKIG,IAAI,GAAG,CAACH,QALZ;AAAA,QAMIra,CANJ;AAAA,QAMOya,EANP;AAAA,QAMWC,EANX;;AAOA,WAAOlB,SAAS,EAAhB,EAAoB;AAChBxZ,OAAC,GAAGiZ,SAAS,CAACO,SAAD,CAAT,CAAqBmB,aAArB,EAAJ;AACAF,QAAE,GAAGza,CAAC,CAAC2D,CAAP;AACA+W,QAAE,GAAG1a,CAAC,CAAC4D,CAAP;;AACA,UAAI6W,EAAE,GAAGL,IAAT,EAAe;AAACA,YAAI,GAAGK,EAAP;AAAW;;AAC3B,UAAIC,EAAE,GAAGJ,IAAT,EAAe;AAACA,YAAI,GAAGI,EAAP;AAAW;;AAC3B,UAAID,EAAE,GAAGF,IAAT,EAAe;AAACA,YAAI,GAAGE,EAAP;AAAW;;AAC3B,UAAIC,EAAE,GAAGF,IAAT,EAAe;AAACA,YAAI,GAAGE,EAAP;AAAW,OAPX,CAQhB;AACA;;AACC;;AACL,WAAO;AACH/W,OAAC,EAAEyW,IADA;AAEHxW,OAAC,EAAE0W,IAFA;AAGH5U,WAAK,EAAE6U,IAAI,GAACH,IAHT;AAIHzU,YAAM,EAAE6U,IAAI,GAACF;AAJV,KAAP;AAMC,GAzBL,C,CA2BA;AACA;AACA;AACA;AACA;;;AACAtE,SAAO,CAAC3S,SAAR,CAAkB2V,IAAlB,CAAuB3V,SAAvB,CAAiCuX,iBAAjC,GAAqD,UAASjX,CAAT,EAAYC,CAAZ,EAAe;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAIqV,SAAS,GAAG,KAAKA,SAArB;AAAA,QACIO,SAAS,GAAGP,SAAS,CAAC1X,MAD1B;AAAA,QAEIsZ,QAFJ;AAAA,QAGIC,EAHJ;AAAA,QAGQvG,EAHR;AAAA,QAGYtU,CAHZ;;AAIA,WAAOuZ,SAAS,EAAhB,EAAoB;AAChBqB,cAAQ,GAAG5B,SAAS,CAACO,SAAD,CAApB;AACAsB,QAAE,GAAGD,QAAQ,CAACF,aAAT,EAAL;AACApG,QAAE,GAAGsG,QAAQ,CAACE,WAAT,EAAL;AACA9a,OAAC,GAAG,CAAC2D,CAAC,GAACkX,EAAE,CAAClX,CAAN,KAAU2Q,EAAE,CAAC5Q,CAAH,GAAKmX,EAAE,CAACnX,CAAlB,IAAqB,CAACA,CAAC,GAACmX,EAAE,CAACnX,CAAN,KAAU4Q,EAAE,CAAC3Q,CAAH,GAAKkX,EAAE,CAAClX,CAAlB,CAAzB;;AACA,UAAI,CAAC3D,CAAL,EAAQ;AACJ,eAAO,CAAP;AACC;;AACL,UAAIA,CAAC,GAAG,CAAR,EAAW;AACP,eAAO,CAAC,CAAR;AACC;AACJ;;AACL,WAAO,CAAP;AACC,GA9BL,C,CAgCA;AACA;AACA;;;AAEA+V,SAAO,CAAC3S,SAAR,CAAkB2X,MAAlB,GAA2B,UAASrX,CAAT,EAAYC,CAAZ,EAAe;AACtC,SAAKD,CAAL,GAASA,CAAT;AACA,SAAKC,CAAL,GAASA,CAAT;AACC,GAHL;;AAKAoS,SAAO,CAAC3S,SAAR,CAAkB4X,IAAlB,GAAyB,UAASjB,KAAT,EAAgBE,KAAhB,EAAuB;AAC5C,SAAKF,KAAL,GAAaA,KAAb;AACA,SAAKE,KAAL,GAAaA,KAAb;AACA,SAAKP,EAAL,GAAU,KAAKD,EAAL,GAAU,IAApB;AACC,GAJL;;AAMA1D,SAAO,CAAC3S,SAAR,CAAkB6X,QAAlB,GAA6B,UAASzB,IAAT,EAAeO,KAAf,EAAsBE,KAAtB,EAA6B;AACtD,SAAKnB,IAAL,GAAYiB,KAAZ;AACA,SAAKP,IAAL,GAAYA,IAAZ,CAFsD,CAGtD;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,QAAIS,KAAJ,EAAW;AACP,WAAKL,KAAL,GAAa/Z,IAAI,CAACqb,KAAL,CAAWjB,KAAK,CAACtW,CAAN,GAAQoW,KAAK,CAACpW,CAAzB,EAA4BsW,KAAK,CAACvW,CAAN,GAAQqW,KAAK,CAACrW,CAA1C,CAAb;AACC,KAFL,MAGK;AACD,UAAIgW,EAAE,GAAGF,IAAI,CAACE,EAAd;AAAA,UACID,EAAE,GAAGD,IAAI,CAACC,EADd,CADC,CAGD;AACA;;AACA,WAAKG,KAAL,GAAaJ,IAAI,CAACO,KAAL,KAAeA,KAAf,GACTla,IAAI,CAACqb,KAAL,CAAWzB,EAAE,CAAC/V,CAAH,GAAKgW,EAAE,CAAChW,CAAnB,EAAsBgW,EAAE,CAAC/V,CAAH,GAAK8V,EAAE,CAAC9V,CAA9B,CADS,GAET9D,IAAI,CAACqb,KAAL,CAAWxB,EAAE,CAAChW,CAAH,GAAK+V,EAAE,CAAC/V,CAAnB,EAAsB+V,EAAE,CAAC9V,CAAH,GAAK+V,EAAE,CAAC/V,CAA9B,CAFJ;AAGC;AACJ,GAtBL;;AAwBAoS,SAAO,CAAC3S,SAAR,CAAkB+X,cAAlB,GAAmC,UAAS3B,IAAT,EAAeO,KAAf,EAAsBE,KAAtB,EAA6B;AAC5D,WAAO,IAAI,KAAKgB,QAAT,CAAkBzB,IAAlB,EAAwBO,KAAxB,EAA+BE,KAA/B,CAAP;AACC,GAFL;;AAIAlE,SAAO,CAAC3S,SAAR,CAAkB6X,QAAlB,CAA2B7X,SAA3B,CAAqCsX,aAArC,GAAqD,YAAW;AAC5D,WAAO,KAAKlB,IAAL,CAAUO,KAAV,KAAoB,KAAKjB,IAAzB,GAAgC,KAAKU,IAAL,CAAUE,EAA1C,GAA+C,KAAKF,IAAL,CAAUC,EAAhE;AACC,GAFL;;AAIA1D,SAAO,CAAC3S,SAAR,CAAkB6X,QAAlB,CAA2B7X,SAA3B,CAAqC0X,WAArC,GAAmD,YAAW;AAC1D,WAAO,KAAKtB,IAAL,CAAUO,KAAV,KAAoB,KAAKjB,IAAzB,GAAgC,KAAKU,IAAL,CAAUC,EAA1C,GAA+C,KAAKD,IAAL,CAAUE,EAAhE;AACC,GAFL,C,CAMA;;;AAEA3D,SAAO,CAAC3S,SAAR,CAAkBgY,YAAlB,GAAiC,UAAS1X,CAAT,EAAYC,CAAZ,EAAe;AAC5C,QAAI5D,CAAC,GAAG,KAAKuW,cAAL,CAAoB+C,GAApB,EAAR;;AACA,QAAK,CAACtZ,CAAN,EAAU;AACNA,OAAC,GAAG,IAAI,KAAKgb,MAAT,CAAgBrX,CAAhB,EAAmBC,CAAnB,CAAJ;AACC,KAFL,MAGK;AACD5D,OAAC,CAAC2D,CAAF,GAAMA,CAAN;AACA3D,OAAC,CAAC4D,CAAF,GAAMA,CAAN;AACC;;AACL,SAAKqS,QAAL,CAAcxU,IAAd,CAAmBzB,CAAnB;AACA,WAAOA,CAAP;AACC,GAXL,C,CAaA;AACA;AACA;;;AAEAgW,SAAO,CAAC3S,SAAR,CAAkBiY,UAAlB,GAA+B,UAAStB,KAAT,EAAgBE,KAAhB,EAAuBP,EAAvB,EAA2BD,EAA3B,EAA+B;AAC1D,QAAID,IAAI,GAAG,KAAKjD,YAAL,CAAkB8C,GAAlB,EAAX;;AACA,QAAK,CAACG,IAAN,EAAa;AACTA,UAAI,GAAG,IAAI,KAAKwB,IAAT,CAAcjB,KAAd,EAAqBE,KAArB,CAAP;AACC,KAFL,MAGK;AACDT,UAAI,CAACO,KAAL,GAAaA,KAAb;AACAP,UAAI,CAACS,KAAL,GAAaA,KAAb;AACAT,UAAI,CAACE,EAAL,GAAUF,IAAI,CAACC,EAAL,GAAU,IAApB;AACC;;AAEL,SAAKxD,KAAL,CAAWzU,IAAX,CAAgBgY,IAAhB;;AACA,QAAIE,EAAJ,EAAQ;AACJ,WAAK4B,iBAAL,CAAuB9B,IAAvB,EAA6BO,KAA7B,EAAoCE,KAApC,EAA2CP,EAA3C;AACC;;AACL,QAAID,EAAJ,EAAQ;AACJ,WAAK8B,eAAL,CAAqB/B,IAArB,EAA2BO,KAA3B,EAAkCE,KAAlC,EAAyCR,EAAzC;AACC;;AACL,SAAKvD,KAAL,CAAW6D,KAAK,CAACC,SAAjB,EAA4BhB,SAA5B,CAAsCxX,IAAtC,CAA2C,KAAK2Z,cAAL,CAAoB3B,IAApB,EAA0BO,KAA1B,EAAiCE,KAAjC,CAA3C;AACA,SAAK/D,KAAL,CAAW+D,KAAK,CAACD,SAAjB,EAA4BhB,SAA5B,CAAsCxX,IAAtC,CAA2C,KAAK2Z,cAAL,CAAoB3B,IAApB,EAA0BS,KAA1B,EAAiCF,KAAjC,CAA3C;AACA,WAAOP,IAAP;AACC,GArBL;;AAuBAzD,SAAO,CAAC3S,SAAR,CAAkBoY,gBAAlB,GAAqC,UAASzB,KAAT,EAAgBL,EAAhB,EAAoBD,EAApB,EAAwB;AACzD,QAAID,IAAI,GAAG,KAAKjD,YAAL,CAAkB8C,GAAlB,EAAX;;AACA,QAAK,CAACG,IAAN,EAAa;AACTA,UAAI,GAAG,IAAI,KAAKwB,IAAT,CAAcjB,KAAd,EAAqB,IAArB,CAAP;AACC,KAFL,MAGK;AACDP,UAAI,CAACO,KAAL,GAAaA,KAAb;AACAP,UAAI,CAACS,KAAL,GAAa,IAAb;AACC;;AACLT,QAAI,CAACE,EAAL,GAAUA,EAAV;AACAF,QAAI,CAACC,EAAL,GAAUA,EAAV;AACA,SAAKxD,KAAL,CAAWzU,IAAX,CAAgBgY,IAAhB;AACA,WAAOA,IAAP;AACC,GAbL;;AAeAzD,SAAO,CAAC3S,SAAR,CAAkBkY,iBAAlB,GAAsC,UAAS9B,IAAT,EAAeO,KAAf,EAAsBE,KAAtB,EAA6BwB,MAA7B,EAAqC;AACvE,QAAI,CAACjC,IAAI,CAACE,EAAN,IAAY,CAACF,IAAI,CAACC,EAAtB,EAA0B;AACtBD,UAAI,CAACE,EAAL,GAAU+B,MAAV;AACAjC,UAAI,CAACO,KAAL,GAAaA,KAAb;AACAP,UAAI,CAACS,KAAL,GAAaA,KAAb;AACC,KAJL,MAKK,IAAIT,IAAI,CAACO,KAAL,KAAeE,KAAnB,EAA0B;AAC3BT,UAAI,CAACC,EAAL,GAAUgC,MAAV;AACC,KAFA,MAGA;AACDjC,UAAI,CAACE,EAAL,GAAU+B,MAAV;AACC;AACJ,GAZL;;AAcA1F,SAAO,CAAC3S,SAAR,CAAkBmY,eAAlB,GAAoC,UAAS/B,IAAT,EAAeO,KAAf,EAAsBE,KAAtB,EAA6BwB,MAA7B,EAAqC;AACrE,SAAKH,iBAAL,CAAuB9B,IAAvB,EAA6BS,KAA7B,EAAoCF,KAApC,EAA2C0B,MAA3C;AACC,GAFL,C,CAIA;AACA;AAEA;AACA;;;AACA1F,SAAO,CAAC3S,SAAR,CAAkBsY,YAAlB,GAAiC,YAAW,CACvC,CADL,C,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA3F,SAAO,CAAC3S,SAAR,CAAkBuY,kBAAlB,GAAuC,UAAS7C,IAAT,EAAe;AAClD,QAAIjC,YAAY,GAAG,KAAKT,oBAAL,CAA0BiD,GAA1B,EAAnB;;AACA,QAAI,CAACxC,YAAL,EAAmB;AACfA,kBAAY,GAAG,IAAI,KAAK6E,YAAT,EAAf;AACC;;AACL7E,gBAAY,CAACiC,IAAb,GAAoBA,IAApB;AACA,WAAOjC,YAAP;AACC,GAPL,C,CASA;AACA;;;AACAd,SAAO,CAAC3S,SAAR,CAAkBwY,cAAlB,GAAmC,UAASC,GAAT,EAAcC,SAAd,EAAyB;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA,QAAIhD,IAAI,GAAG+C,GAAG,CAAC/C,IAAf;AAAA,QACIiD,KAAK,GAAGjD,IAAI,CAACpV,CADjB;AAAA,QAEIsY,KAAK,GAAGlD,IAAI,CAACnV,CAFjB;AAAA,QAGIsY,IAAI,GAAGD,KAAK,GAACF,SAHjB,CAnCwD,CAuCxD;;AACA,QAAI,CAACG,IAAL,EAAW;AACP,aAAOF,KAAP;AACC;;AACL,QAAIG,IAAI,GAAGL,GAAG,CAAChE,UAAf;;AACA,QAAI,CAACqE,IAAL,EAAW;AACP,aAAO,CAAC9B,QAAR;AACC;;AACLtB,QAAI,GAAGoD,IAAI,CAACpD,IAAZ;AACA,QAAIqD,KAAK,GAAGrD,IAAI,CAACpV,CAAjB;AAAA,QACI0Y,KAAK,GAAGtD,IAAI,CAACnV,CADjB;AAAA,QAEI0Y,KAAK,GAAGD,KAAK,GAACN,SAFlB,CAhDwD,CAmDxD;;AACA,QAAI,CAACO,KAAL,EAAY;AACR,aAAOF,KAAP;AACC;;AACL,QAAIG,EAAE,GAAGH,KAAK,GAACJ,KAAf;AAAA,QACIQ,IAAI,GAAG,IAAEN,IAAF,GAAO,IAAEI,KADpB;AAAA,QAEI/b,CAAC,GAAGgc,EAAE,GAACD,KAFX;;AAGA,QAAIE,IAAJ,EAAU;AACN,aAAO,CAAC,CAACjc,CAAD,GAAG,KAAKJ,IAAL,CAAUI,CAAC,GAACA,CAAF,GAAI,IAAEic,IAAF,IAAQD,EAAE,GAACA,EAAH,IAAO,CAAC,CAAD,GAAGD,KAAV,IAAiBD,KAAjB,GAAuBC,KAAK,GAAC,CAA7B,GAA+BL,KAA/B,GAAqCC,IAAI,GAAC,CAAlD,CAAd,CAAJ,IAAyEM,IAAzE,GAA8ER,KAArF;AACC,KA5DmD,CA6DxD;;;AACA,WAAO,CAACA,KAAK,GAACI,KAAP,IAAc,CAArB;AACC,GA/DL,C,CAiEA;AACA;;;AACApG,SAAO,CAAC3S,SAAR,CAAkBoZ,eAAlB,GAAoC,UAASX,GAAT,EAAcC,SAAd,EAAyB;AACzD,QAAIW,IAAI,GAAGZ,GAAG,CAAC9E,MAAf;;AACA,QAAI0F,IAAJ,EAAU;AACN,aAAO,KAAKb,cAAL,CAAoBa,IAApB,EAA0BX,SAA1B,CAAP;AACC;;AACL,QAAIhD,IAAI,GAAG+C,GAAG,CAAC/C,IAAf;AACA,WAAOA,IAAI,CAACnV,CAAL,KAAWmY,SAAX,GAAuBhD,IAAI,CAACpV,CAA5B,GAAgC0W,QAAvC;AACC,GAPL;;AASArE,SAAO,CAAC3S,SAAR,CAAkBsZ,kBAAlB,GAAuC,UAAS7F,YAAT,EAAuB;AAC1D,SAAK8F,iBAAL,CAAuB9F,YAAvB,EAD0D,CACpB;;AACtC,SAAKH,SAAL,CAAe4B,YAAf,CAA4BzB,YAA5B,EAF0D,CAEf;;AAC3C,SAAKT,oBAAL,CAA0B5U,IAA1B,CAA+BqV,YAA/B,EAH0D,CAGZ;AAC7C,GAJL;;AAMAd,SAAO,CAAC3S,SAAR,CAAkBwZ,kBAAlB,GAAuC,UAAS/F,YAAT,EAAuB;AAC1D,QAAIgG,MAAM,GAAGhG,YAAY,CAACiG,WAA1B;AAAA,QACIpZ,CAAC,GAAGmZ,MAAM,CAACnZ,CADf;AAAA,QAEIC,CAAC,GAAGkZ,MAAM,CAACE,OAFf;AAAA,QAGItB,MAAM,GAAG,KAAKL,YAAL,CAAkB1X,CAAlB,EAAqBC,CAArB,CAHb;AAAA,QAIIqZ,QAAQ,GAAGnG,YAAY,CAACgB,UAJ5B;AAAA,QAKIY,IAAI,GAAG5B,YAAY,CAACE,MALxB;AAAA,QAMIkG,uBAAuB,GAAG,CAACpG,YAAD,CAN9B;AAAA,QAOIqG,MAAM,GAAGrd,IAAI,CAAC4P,GAPlB,CAD0D,CAU1D;;AACA,SAAKiN,kBAAL,CAAwB7F,YAAxB,EAX0D,CAa1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AACA,QAAIqF,IAAI,GAAGc,QAAX;;AACA,WAAOd,IAAI,CAACY,WAAL,IAAoBI,MAAM,CAACxZ,CAAC,GAACwY,IAAI,CAACY,WAAL,CAAiBpZ,CAApB,CAAN,GAA6B,IAAjD,IAAyDwZ,MAAM,CAACvZ,CAAC,GAACuY,IAAI,CAACY,WAAL,CAAiBC,OAApB,CAAN,GAAmC,IAAnG,EAAyG;AACrGC,cAAQ,GAAGd,IAAI,CAACrE,UAAhB;AACAoF,6BAAuB,CAACE,OAAxB,CAAgCjB,IAAhC;AACA,WAAKQ,kBAAL,CAAwBR,IAAxB,EAHqG,CAGtE;;AAC/BA,UAAI,GAAGc,QAAP;AACC,KA7BqD,CA8B1D;AACA;AACA;AACA;;;AACAC,2BAAuB,CAACE,OAAxB,CAAgCjB,IAAhC;AACA,SAAKS,iBAAL,CAAuBT,IAAvB,EAnC0D,CAqC1D;;AACA,QAAIO,IAAI,GAAGhE,IAAX;;AACA,WAAOgE,IAAI,CAACK,WAAL,IAAoBI,MAAM,CAACxZ,CAAC,GAAC+Y,IAAI,CAACK,WAAL,CAAiBpZ,CAApB,CAAN,GAA6B,IAAjD,IAAyDwZ,MAAM,CAACvZ,CAAC,GAAC8Y,IAAI,CAACK,WAAL,CAAiBC,OAApB,CAAN,GAAmC,IAAnG,EAAyG;AACrGtE,UAAI,GAAGgE,IAAI,CAAC1F,MAAZ;AACAkG,6BAAuB,CAACzb,IAAxB,CAA6Bib,IAA7B;AACA,WAAKC,kBAAL,CAAwBD,IAAxB,EAHqG,CAGtE;;AAC/BA,UAAI,GAAGhE,IAAP;AACC,KA5CqD,CA6C1D;AACA;AACA;;;AACAwE,2BAAuB,CAACzb,IAAxB,CAA6Bib,IAA7B;AACA,SAAKE,iBAAL,CAAuBF,IAAvB,EAjD0D,CAmD1D;AACA;;AACA,QAAIW,KAAK,GAAGH,uBAAuB,CAAC3b,MAApC;AAAA,QACI+b,IADJ;;AAEA,SAAKA,IAAI,GAAC,CAAV,EAAaA,IAAI,GAACD,KAAlB,EAAyBC,IAAI,EAA7B,EAAiC;AAC7BZ,UAAI,GAAGQ,uBAAuB,CAACI,IAAD,CAA9B;AACAnB,UAAI,GAAGe,uBAAuB,CAACI,IAAI,GAAC,CAAN,CAA9B;AACA,WAAK/B,iBAAL,CAAuBmB,IAAI,CAACjD,IAA5B,EAAkC0C,IAAI,CAACpD,IAAvC,EAA6C2D,IAAI,CAAC3D,IAAlD,EAAwD2C,MAAxD;AACC,KA3DqD,CA6D1D;AACA;AACA;AACA;AACA;;;AACAS,QAAI,GAAGe,uBAAuB,CAAC,CAAD,CAA9B;AACAR,QAAI,GAAGQ,uBAAuB,CAACG,KAAK,GAAC,CAAP,CAA9B;AACAX,QAAI,CAACjD,IAAL,GAAY,KAAK6B,UAAL,CAAgBa,IAAI,CAACpD,IAArB,EAA2B2D,IAAI,CAAC3D,IAAhC,EAAsCpD,SAAtC,EAAiD+F,MAAjD,CAAZ,CApE0D,CAsE1D;AACA;;AACA,SAAK6B,iBAAL,CAAuBpB,IAAvB;AACA,SAAKoB,iBAAL,CAAuBb,IAAvB;AACC,GA1EL;;AA4EA1G,SAAO,CAAC3S,SAAR,CAAkBma,eAAlB,GAAoC,UAASzE,IAAT,EAAe;AAC/C,QAAIpV,CAAC,GAAGoV,IAAI,CAACpV,CAAb;AAAA,QACIoY,SAAS,GAAGhD,IAAI,CAACnV,CADrB,CAD+C,CAI/C;AACA;AACA;AACA;;AACA,QAAIuY,IAAJ;AAAA,QAAUO,IAAV;AAAA,QACIe,GADJ;AAAA,QACSC,GADT;AAAA,QAEI/F,IAAI,GAAG,KAAKhB,SAAL,CAAeE,IAF1B;;AAIA,WAAOc,IAAP,EAAa;AACT8F,SAAG,GAAG,KAAK5B,cAAL,CAAoBlE,IAApB,EAAyBoE,SAAzB,IAAoCpY,CAA1C,CADS,CAET;;AACA,UAAI8Z,GAAG,GAAG,IAAV,EAAgB;AACZ;AACA;AACA;AACA;AACA;AACA9F,YAAI,GAAGA,IAAI,CAACK,MAAZ;AACC,OAPL,MAQK;AACD0F,WAAG,GAAG/Z,CAAC,GAAC,KAAK8Y,eAAL,CAAqB9E,IAArB,EAA0BoE,SAA1B,CAAR,CADC,CAED;;AACA,YAAI2B,GAAG,GAAG,IAAV,EAAgB;AACZ,cAAI,CAAC/F,IAAI,CAACI,OAAV,EAAmB;AACfoE,gBAAI,GAAGxE,IAAP;AACA;AACC;;AACLA,cAAI,GAAGA,IAAI,CAACI,OAAZ;AACC,SANL,MAOK;AACD;AACA,cAAI0F,GAAG,GAAG,CAAC,IAAX,EAAiB;AACbtB,gBAAI,GAAGxE,IAAI,CAACG,UAAZ;AACA4E,gBAAI,GAAG/E,IAAP;AACC,WAHL,CAIA;AAJA,eAKK,IAAI+F,GAAG,GAAG,CAAC,IAAX,EAAiB;AAClBvB,gBAAI,GAAGxE,IAAP;AACA+E,gBAAI,GAAG/E,IAAI,CAACX,MAAZ;AACC,WAHA,CAIL;AAJK,eAKA;AACDmF,gBAAI,GAAGO,IAAI,GAAG/E,IAAd;AACC;;AACL;AACC;AACJ;AACJ,KAnD0C,CAoD/C;AACA;AAEA;;;AACA,QAAIgG,MAAM,GAAG,KAAK/B,kBAAL,CAAwB7C,IAAxB,CAAb;AACA,SAAKpC,SAAL,CAAee,iBAAf,CAAiCyE,IAAjC,EAAuCwB,MAAvC,EAzD+C,CA2D/C;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,QAAI,CAACxB,IAAD,IAAS,CAACO,IAAd,EAAoB;AAChB;AACC,KAvE0C,CAyE/C;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAIP,IAAI,KAAKO,IAAb,EAAmB;AACf;AACA,WAAKE,iBAAL,CAAuBT,IAAvB,EAFe,CAIf;;AACAO,UAAI,GAAG,KAAKd,kBAAL,CAAwBO,IAAI,CAACpD,IAA7B,CAAP;AACA,WAAKpC,SAAL,CAAee,iBAAf,CAAiCiG,MAAjC,EAAyCjB,IAAzC,EANe,CAQf;AACA;;AACAiB,YAAM,CAAClE,IAAP,GAAciD,IAAI,CAACjD,IAAL,GAAY,KAAK6B,UAAL,CAAgBa,IAAI,CAACpD,IAArB,EAA2B4E,MAAM,CAAC5E,IAAlC,CAA1B,CAVe,CAYf;AACA;AACA;;AACA,WAAKwE,iBAAL,CAAuBpB,IAAvB;AACA,WAAKoB,iBAAL,CAAuBb,IAAvB;AACA;AACC,KAlG0C,CAoG/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAIP,IAAI,IAAI,CAACO,IAAb,EAAmB;AACfiB,YAAM,CAAClE,IAAP,GAAc,KAAK6B,UAAL,CAAgBa,IAAI,CAACpD,IAArB,EAA0B4E,MAAM,CAAC5E,IAAjC,CAAd;AACA;AACC,KAhH0C,CAkH/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAIoD,IAAI,KAAKO,IAAb,EAAmB;AACf;AACA,WAAKE,iBAAL,CAAuBT,IAAvB;AACA,WAAKS,iBAAL,CAAuBF,IAAvB,EAHe,CAKf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,UAAI1C,KAAK,GAAGmC,IAAI,CAACpD,IAAjB;AAAA,UACI/Q,EAAE,GAAGgS,KAAK,CAACrW,CADf;AAAA,UAEIoE,EAAE,GAAGiS,KAAK,CAACpW,CAFf;AAAA,UAGIga,EAAE,GAAC7E,IAAI,CAACpV,CAAL,GAAOqE,EAHd;AAAA,UAII6V,EAAE,GAAC9E,IAAI,CAACnV,CAAL,GAAOmE,EAJd;AAAA,UAKImS,KAAK,GAAGwC,IAAI,CAAC3D,IALjB;AAAA,UAMI+E,EAAE,GAAC5D,KAAK,CAACvW,CAAN,GAAQqE,EANf;AAAA,UAOI+V,EAAE,GAAC7D,KAAK,CAACtW,CAAN,GAAQmE,EAPf;AAAA,UAQIlE,CAAC,GAAC,KAAG+Z,EAAE,GAACG,EAAH,GAAMF,EAAE,GAACC,EAAZ,CARN;AAAA,UASIE,EAAE,GAACJ,EAAE,GAACA,EAAH,GAAMC,EAAE,GAACA,EAThB;AAAA,UAUII,EAAE,GAACH,EAAE,GAACA,EAAH,GAAMC,EAAE,GAACA,EAVhB;AAAA,UAWIrC,MAAM,GAAG,KAAKL,YAAL,CAAkB,CAAC0C,EAAE,GAACC,EAAH,GAAMH,EAAE,GAACI,EAAV,IAAcpa,CAAd,GAAgBmE,EAAlC,EAAsC,CAAC4V,EAAE,GAACK,EAAH,GAAMH,EAAE,GAACE,EAAV,IAAcna,CAAd,GAAgBkE,EAAtD,CAXb,CAbe,CA0Bf;;AACA,WAAKwT,iBAAL,CAAuBmB,IAAI,CAACjD,IAA5B,EAAkCO,KAAlC,EAAyCE,KAAzC,EAAgDwB,MAAhD,EA3Be,CA6Bf;;AACAiC,YAAM,CAAClE,IAAP,GAAc,KAAK6B,UAAL,CAAgBtB,KAAhB,EAAuBjB,IAAvB,EAA6BpD,SAA7B,EAAwC+F,MAAxC,CAAd;AACAgB,UAAI,CAACjD,IAAL,GAAY,KAAK6B,UAAL,CAAgBvC,IAAhB,EAAsBmB,KAAtB,EAA6BvE,SAA7B,EAAwC+F,MAAxC,CAAZ,CA/Be,CAiCf;AACA;;AACA,WAAK6B,iBAAL,CAAuBpB,IAAvB;AACA,WAAKoB,iBAAL,CAAuBb,IAAvB;AACA;AACC;AACJ,GA3KL,C,CA6KA;AACA;AAEA;AACA;;;AACA1G,SAAO,CAAC3S,SAAR,CAAkB6a,WAAlB,GAAgC,YAAW;AACvC;AACA,SAAKpC,GAAL,GAAW,IAAX;AACA,SAAK9D,MAAL,GAAc,IAAd;AACA,SAAKhB,MAAL,GAAc,IAAd;AACA,SAAKiB,QAAL,GAAgB,IAAhB;AACA,SAAKH,UAAL,GAAkB,IAAlB;AACA,SAAKI,KAAL,GAAa,KAAb;AACA,SAAKH,OAAL,GAAe,IAAf;AACA,SAAKgB,IAAL,GAAY,IAAZ;AACA,SAAKpV,CAAL,GAAS,KAAKC,CAAL,GAAS,KAAKoZ,OAAL,GAAe,CAAjC;AACC,GAXL;;AAaAhH,SAAO,CAAC3S,SAAR,CAAkBka,iBAAlB,GAAsC,UAASzB,GAAT,EAAc;AAChD,QAAIK,IAAI,GAAGL,GAAG,CAAChE,UAAf;AAAA,QACI4E,IAAI,GAAGZ,GAAG,CAAC9E,MADf;;AAEA,QAAI,CAACmF,IAAD,IAAS,CAACO,IAAd,EAAoB;AAAC;AAAQ,KAHmB,CAGlB;;;AAC9B,QAAI1C,KAAK,GAAGmC,IAAI,CAACpD,IAAjB;AAAA,QACIoF,KAAK,GAAGrC,GAAG,CAAC/C,IADhB;AAAA,QAEImB,KAAK,GAAGwC,IAAI,CAAC3D,IAFjB,CAJgD,CAQhD;AACA;;AACA,QAAIiB,KAAK,KAAGE,KAAZ,EAAmB;AAAC;AAAQ,KAVoB,CAYhD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,QAAI0D,EAAE,GAAGO,KAAK,CAACxa,CAAf;AAAA,QACIka,EAAE,GAAGM,KAAK,CAACva,CADf;AAAA,QAEIoE,EAAE,GAAGgS,KAAK,CAACrW,CAAN,GAAQia,EAFjB;AAAA,QAGI7V,EAAE,GAAGiS,KAAK,CAACpW,CAAN,GAAQia,EAHjB;AAAA,QAIIC,EAAE,GAAG5D,KAAK,CAACvW,CAAN,GAAQia,EAJjB;AAAA,QAKIG,EAAE,GAAG7D,KAAK,CAACtW,CAAN,GAAQia,EALjB,CAtBgD,CA6BhD;AACA;AACA;AACA;AACA;AACA;;AACA,QAAIha,CAAC,GAAG,KAAGmE,EAAE,GAAC+V,EAAH,GAAMhW,EAAE,GAAC+V,EAAZ,CAAR;;AACA,QAAIja,CAAC,IAAI,CAAC,KAAV,EAAgB;AAAC;AAAQ;;AAEzB,QAAIua,EAAE,GAAGpW,EAAE,GAACA,EAAH,GAAMD,EAAE,GAACA,EAAlB;AAAA,QACIkW,EAAE,GAAGH,EAAE,GAACA,EAAH,GAAMC,EAAE,GAACA,EADlB;AAAA,QAEIpa,CAAC,GAAG,CAACoa,EAAE,GAACK,EAAH,GAAMrW,EAAE,GAACkW,EAAV,IAAcpa,CAFtB;AAAA,QAGID,CAAC,GAAG,CAACoE,EAAE,GAACiW,EAAH,GAAMH,EAAE,GAACM,EAAV,IAAcva,CAHtB;AAAA,QAIImZ,OAAO,GAAGpZ,CAAC,GAACia,EAJhB,CAtCgD,CA4ChD;AACA;AAEA;;AACA,QAAId,WAAW,GAAG,KAAKzG,mBAAL,CAAyBgD,GAAzB,EAAlB;;AACA,QAAI,CAACyD,WAAL,EAAkB;AACdA,iBAAW,GAAG,IAAI,KAAKmB,WAAT,EAAd;AACC;;AACLnB,eAAW,CAACjB,GAAZ,GAAkBA,GAAlB;AACAiB,eAAW,CAAChE,IAAZ,GAAmBoF,KAAnB;AACApB,eAAW,CAACpZ,CAAZ,GAAgBA,CAAC,GAACia,EAAlB;AACAb,eAAW,CAACnZ,CAAZ,GAAgBoZ,OAAO,GAAC,KAAK7c,IAAL,CAAUwD,CAAC,GAACA,CAAF,GAAIC,CAAC,GAACA,CAAhB,CAAxB,CAvDgD,CAuDJ;;AAC5CmZ,eAAW,CAACC,OAAZ,GAAsBA,OAAtB;AACAlB,OAAG,CAACiB,WAAJ,GAAkBA,WAAlB,CAzDgD,CA2DhD;AACA;;AACA,QAAIsB,WAAW,GAAG,IAAlB;AAAA,QACI1G,IAAI,GAAG,KAAKV,YAAL,CAAkBJ,IAD7B;;AAEA,WAAOc,IAAP,EAAa;AACT,UAAIoF,WAAW,CAACnZ,CAAZ,GAAgB+T,IAAI,CAAC/T,CAArB,IAA2BmZ,WAAW,CAACnZ,CAAZ,KAAkB+T,IAAI,CAAC/T,CAAvB,IAA4BmZ,WAAW,CAACpZ,CAAZ,IAAiBgU,IAAI,CAAChU,CAAjF,EAAqF;AACjF,YAAIgU,IAAI,CAACK,MAAT,EAAiB;AACbL,cAAI,GAAGA,IAAI,CAACK,MAAZ;AACC,SAFL,MAGK;AACDqG,qBAAW,GAAG1G,IAAI,CAACG,UAAnB;AACA;AACC;AACJ,OARL,MASK;AACD,YAAIH,IAAI,CAACI,OAAT,EAAkB;AACdJ,cAAI,GAAGA,IAAI,CAACI,OAAZ;AACC,SAFL,MAGK;AACDsG,qBAAW,GAAG1G,IAAd;AACA;AACC;AACJ;AACJ;;AACL,SAAKV,YAAL,CAAkBS,iBAAlB,CAAoC2G,WAApC,EAAiDtB,WAAjD;;AACA,QAAI,CAACsB,WAAL,EAAkB;AACd,WAAKnH,gBAAL,GAAwB6F,WAAxB;AACC;AACJ,GAvFL;;AAyFA/G,SAAO,CAAC3S,SAAR,CAAkBuZ,iBAAlB,GAAsC,UAASd,GAAT,EAAc;AAChD,QAAIiB,WAAW,GAAGjB,GAAG,CAACiB,WAAtB;;AACA,QAAIA,WAAJ,EAAiB;AACb,UAAI,CAACA,WAAW,CAACjF,UAAjB,EAA6B;AACzB,aAAKZ,gBAAL,GAAwB6F,WAAW,CAAC/F,MAApC;AACC;;AACL,WAAKC,YAAL,CAAkBsB,YAAlB,CAA+BwE,WAA/B,EAJa,CAIgC;;AAC7C,WAAKzG,mBAAL,CAAyB7U,IAAzB,CAA8Bsb,WAA9B;AACAjB,SAAG,CAACiB,WAAJ,GAAkB,IAAlB;AACC;AACJ,GAVL,C,CAYA;AACA;AAEA;AACA;AACA;AACA;AACA;;;AACA/G,SAAO,CAAC3S,SAAR,CAAkBib,WAAlB,GAAgC,UAAS7E,IAAT,EAAe8E,IAAf,EAAqB;AACjD;AACA,QAAI7E,EAAE,GAAGD,IAAI,CAACC,EAAd;;AACA,QAAI,CAAC,CAACA,EAAN,EAAU;AAAC,aAAO,IAAP;AAAa,KAHyB,CAKjD;;;AACA,QAAIC,EAAE,GAAGF,IAAI,CAACE,EAAd;AAAA,QACI6E,EAAE,GAAGD,IAAI,CAACC,EADd;AAAA,QAEIC,EAAE,GAAGF,IAAI,CAACE,EAFd;AAAA,QAGIC,EAAE,GAAGH,IAAI,CAACG,EAHd;AAAA,QAIIC,EAAE,GAAGJ,IAAI,CAACI,EAJd;AAAA,QAKI3E,KAAK,GAAGP,IAAI,CAACO,KALjB;AAAA,QAMIE,KAAK,GAAGT,IAAI,CAACS,KANjB;AAAA,QAOI0E,EAAE,GAAG5E,KAAK,CAACrW,CAPf;AAAA,QAQIkb,EAAE,GAAG7E,KAAK,CAACpW,CARf;AAAA,QASIkb,EAAE,GAAG5E,KAAK,CAACvW,CATf;AAAA,QAUIob,EAAE,GAAG7E,KAAK,CAACtW,CAVf;AAAA,QAWIuE,EAAE,GAAG,CAACyW,EAAE,GAACE,EAAJ,IAAQ,CAXjB;AAAA,QAYI7W,EAAE,GAAG,CAAC4W,EAAE,GAACE,EAAJ,IAAQ,CAZjB;AAAA,QAaIC,EAbJ;AAAA,QAaQC,EAbR,CANiD,CAqBjD;AACA;AACA;;AACA,SAAK9I,KAAL,CAAW6D,KAAK,CAACC,SAAjB,EAA4Bf,OAA5B,GAAsC,IAAtC;AACA,SAAK/C,KAAL,CAAW+D,KAAK,CAACD,SAAjB,EAA4Bf,OAA5B,GAAsC,IAAtC,CAzBiD,CA2BjD;;AACA,QAAI6F,EAAE,KAAKF,EAAX,EAAe;AACXG,QAAE,GAAG,CAACJ,EAAE,GAACE,EAAJ,KAASC,EAAE,GAACF,EAAZ,CAAL;AACAI,QAAE,GAAGhX,EAAE,GAAC+W,EAAE,GAAC7W,EAAX;AACC,KA/B4C,CAiCjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;AACA,QAAI6W,EAAE,KAAKrJ,SAAX,EAAsB;AAClB;AACA,UAAIxN,EAAE,GAAGqW,EAAL,IAAWrW,EAAE,IAAIsW,EAArB,EAAyB;AAAC,eAAO,KAAP;AAAc,OAFtB,CAGlB;;;AACA,UAAIG,EAAE,GAAGE,EAAT,EAAa;AACT,YAAI,CAACnF,EAAD,IAAOA,EAAE,CAAC/V,CAAH,GAAO8a,EAAlB,EAAsB;AAClB/E,YAAE,GAAG,KAAK0B,YAAL,CAAkBlT,EAAlB,EAAsBuW,EAAtB,CAAL;AACC,SAFL,MAGK,IAAI/E,EAAE,CAAC/V,CAAH,IAAQ+a,EAAZ,EAAgB;AACjB,iBAAO,KAAP;AACC;;AACLjF,UAAE,GAAG,KAAK2B,YAAL,CAAkBlT,EAAlB,EAAsBwW,EAAtB,CAAL;AACC,OARL,CASA;AATA,WAUK;AACD,YAAI,CAAChF,EAAD,IAAOA,EAAE,CAAC/V,CAAH,GAAO+a,EAAlB,EAAsB;AAClBhF,YAAE,GAAG,KAAK0B,YAAL,CAAkBlT,EAAlB,EAAsBwW,EAAtB,CAAL;AACC,SAFL,MAGK,IAAIhF,EAAE,CAAC/V,CAAH,GAAO8a,EAAX,EAAe;AAChB,iBAAO,KAAP;AACC;;AACLhF,UAAE,GAAG,KAAK2B,YAAL,CAAkBlT,EAAlB,EAAsBuW,EAAtB,CAAL;AACC;AACJ,KAvBL,CAwBA;AACA;AAzBA,SA0BK,IAAIM,EAAE,GAAG,CAAC,CAAN,IAAWA,EAAE,GAAG,CAApB,EAAuB;AACxB;AACA,UAAIJ,EAAE,GAAGE,EAAT,EAAa;AACT,YAAI,CAACnF,EAAD,IAAOA,EAAE,CAAC/V,CAAH,GAAO8a,EAAlB,EAAsB;AAClB/E,YAAE,GAAG,KAAK0B,YAAL,CAAkB,CAACqD,EAAE,GAACO,EAAJ,IAAQD,EAA1B,EAA8BN,EAA9B,CAAL;AACC,SAFL,MAGK,IAAI/E,EAAE,CAAC/V,CAAH,IAAQ+a,EAAZ,EAAgB;AACjB,iBAAO,KAAP;AACC;;AACLjF,UAAE,GAAG,KAAK2B,YAAL,CAAkB,CAACsD,EAAE,GAACM,EAAJ,IAAQD,EAA1B,EAA8BL,EAA9B,CAAL;AACC,OARL,CASA;AATA,WAUK;AACD,YAAI,CAAChF,EAAD,IAAOA,EAAE,CAAC/V,CAAH,GAAO+a,EAAlB,EAAsB;AAClBhF,YAAE,GAAG,KAAK0B,YAAL,CAAkB,CAACsD,EAAE,GAACM,EAAJ,IAAQD,EAA1B,EAA8BL,EAA9B,CAAL;AACC,SAFL,MAGK,IAAIhF,EAAE,CAAC/V,CAAH,GAAO8a,EAAX,EAAe;AAChB,iBAAO,KAAP;AACC;;AACLhF,UAAE,GAAG,KAAK2B,YAAL,CAAkB,CAACqD,EAAE,GAACO,EAAJ,IAAQD,EAA1B,EAA8BN,EAA9B,CAAL;AACC;AACJ,KArBA,CAsBL;AACA;AAvBK,SAwBA;AACD;AACA,UAAIG,EAAE,GAAGE,EAAT,EAAa;AACT,YAAI,CAACpF,EAAD,IAAOA,EAAE,CAAChW,CAAH,GAAO6a,EAAlB,EAAsB;AAClB7E,YAAE,GAAG,KAAK0B,YAAL,CAAkBmD,EAAlB,EAAsBQ,EAAE,GAACR,EAAH,GAAMS,EAA5B,CAAL;AACC,SAFL,MAGK,IAAItF,EAAE,CAAChW,CAAH,IAAQ8a,EAAZ,EAAgB;AACjB,iBAAO,KAAP;AACC;;AACL/E,UAAE,GAAG,KAAK2B,YAAL,CAAkBoD,EAAlB,EAAsBO,EAAE,GAACP,EAAH,GAAMQ,EAA5B,CAAL;AACC,OARL,CASA;AATA,WAUK;AACD,YAAI,CAACtF,EAAD,IAAOA,EAAE,CAAChW,CAAH,GAAO8a,EAAlB,EAAsB;AAClB9E,YAAE,GAAG,KAAK0B,YAAL,CAAkBoD,EAAlB,EAAsBO,EAAE,GAACP,EAAH,GAAMQ,EAA5B,CAAL;AACC,SAFL,MAGK,IAAItF,EAAE,CAAChW,CAAH,GAAO6a,EAAX,EAAe;AAChB,iBAAO,KAAP;AACC;;AACL9E,UAAE,GAAG,KAAK2B,YAAL,CAAkBmD,EAAlB,EAAsBQ,EAAE,GAACR,EAAH,GAAMS,EAA5B,CAAL;AACC;AACJ;;AACLxF,QAAI,CAACE,EAAL,GAAUA,EAAV;AACAF,QAAI,CAACC,EAAL,GAAUA,EAAV;AAEA,WAAO,IAAP;AACC,GAnIL,C,CAqIA;AACA;AACA;AACA;AACA;;;AACA1D,SAAO,CAAC3S,SAAR,CAAkB6b,QAAlB,GAA6B,UAASzF,IAAT,EAAe8E,IAAf,EAAqB;AAC9C,QAAIvW,EAAE,GAAGyR,IAAI,CAACE,EAAL,CAAQhW,CAAjB;AAAA,QACIoE,EAAE,GAAG0R,IAAI,CAACE,EAAL,CAAQ/V,CADjB;AAAA,QAEIga,EAAE,GAAGnE,IAAI,CAACC,EAAL,CAAQ/V,CAFjB;AAAA,QAGIka,EAAE,GAAGpE,IAAI,CAACC,EAAL,CAAQ9V,CAHjB;AAAA,QAIIub,EAAE,GAAG,CAJT;AAAA,QAKIC,EAAE,GAAG,CALT;AAAA,QAMIra,EAAE,GAAG6Y,EAAE,GAAC5V,EANZ;AAAA,QAOIhD,EAAE,GAAG6Y,EAAE,GAAC9V,EAPZ,CAD8C,CAS9C;;AACA,QAAI1F,CAAC,GAAG2F,EAAE,GAACuW,IAAI,CAACC,EAAhB;;AACA,QAAIzZ,EAAE,KAAG,CAAL,IAAU1C,CAAC,GAAC,CAAhB,EAAmB;AAAC,aAAO,KAAP;AAAc;;AAClC,QAAIpC,CAAC,GAAG,CAACoC,CAAD,GAAG0C,EAAX;;AACA,QAAIA,EAAE,GAAC,CAAP,EAAU;AACN,UAAI9E,CAAC,GAACkf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAIlf,CAAC,GAACmf,EAAN,EAAU;AAACA,UAAE,GAACnf,CAAH;AAAM;AAChB,KAHL,MAIK,IAAI8E,EAAE,GAAC,CAAP,EAAU;AACX,UAAI9E,CAAC,GAACmf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAInf,CAAC,GAACkf,EAAN,EAAU;AAACA,UAAE,GAAClf,CAAH;AAAM;AAChB,KApByC,CAqB9C;;;AACAoC,KAAC,GAAGkc,IAAI,CAACE,EAAL,GAAQzW,EAAZ;;AACA,QAAIjD,EAAE,KAAG,CAAL,IAAU1C,CAAC,GAAC,CAAhB,EAAmB;AAAC,aAAO,KAAP;AAAc;;AAClCpC,KAAC,GAAGoC,CAAC,GAAC0C,EAAN;;AACA,QAAIA,EAAE,GAAC,CAAP,EAAU;AACN,UAAI9E,CAAC,GAACmf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAInf,CAAC,GAACkf,EAAN,EAAU;AAACA,UAAE,GAAClf,CAAH;AAAM;AAChB,KAHL,MAIK,IAAI8E,EAAE,GAAC,CAAP,EAAU;AACX,UAAI9E,CAAC,GAACkf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAIlf,CAAC,GAACmf,EAAN,EAAU;AAACA,UAAE,GAACnf,CAAH;AAAM;AAChB,KAhCyC,CAiC9C;;;AACAoC,KAAC,GAAG0F,EAAE,GAACwW,IAAI,CAACG,EAAZ;;AACA,QAAI1Z,EAAE,KAAG,CAAL,IAAU3C,CAAC,GAAC,CAAhB,EAAmB;AAAC,aAAO,KAAP;AAAc;;AAClCpC,KAAC,GAAG,CAACoC,CAAD,GAAG2C,EAAP;;AACA,QAAIA,EAAE,GAAC,CAAP,EAAU;AACN,UAAI/E,CAAC,GAACkf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAIlf,CAAC,GAACmf,EAAN,EAAU;AAACA,UAAE,GAACnf,CAAH;AAAM;AAChB,KAHL,MAIK,IAAI+E,EAAE,GAAC,CAAP,EAAU;AACX,UAAI/E,CAAC,GAACmf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAInf,CAAC,GAACkf,EAAN,EAAU;AAACA,UAAE,GAAClf,CAAH;AAAM;AAChB,KA5CyC,CA6C9C;;;AACAoC,KAAC,GAAGkc,IAAI,CAACI,EAAL,GAAQ5W,EAAZ;;AACA,QAAI/C,EAAE,KAAG,CAAL,IAAU3C,CAAC,GAAC,CAAhB,EAAmB;AAAC,aAAO,KAAP;AAAc;;AAClCpC,KAAC,GAAGoC,CAAC,GAAC2C,EAAN;;AACA,QAAIA,EAAE,GAAC,CAAP,EAAU;AACN,UAAI/E,CAAC,GAACmf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAInf,CAAC,GAACkf,EAAN,EAAU;AAACA,UAAE,GAAClf,CAAH;AAAM;AAChB,KAHL,MAIK,IAAI+E,EAAE,GAAC,CAAP,EAAU;AACX,UAAI/E,CAAC,GAACkf,EAAN,EAAU;AAAC,eAAO,KAAP;AAAc;;AACzB,UAAIlf,CAAC,GAACmf,EAAN,EAAU;AAACA,UAAE,GAACnf,CAAH;AAAM;AAChB,KAxDyC,CA0D9C;AAEA;AACA;AACA;AACA;;;AACA,QAAIkf,EAAE,GAAG,CAAT,EAAY;AACR1F,UAAI,CAACE,EAAL,GAAU,KAAK0B,YAAL,CAAkBrT,EAAE,GAACmX,EAAE,GAACpa,EAAxB,EAA4BgD,EAAE,GAACoX,EAAE,GAACna,EAAlC,CAAV;AACC,KAlEyC,CAoE9C;AACA;AACA;AACA;;;AACA,QAAIoa,EAAE,GAAG,CAAT,EAAY;AACR3F,UAAI,CAACC,EAAL,GAAU,KAAK2B,YAAL,CAAkBrT,EAAE,GAACoX,EAAE,GAACra,EAAxB,EAA4BgD,EAAE,GAACqX,EAAE,GAACpa,EAAlC,CAAV;AACC,KA1EyC,CA4E9C;AACA;;;AACA,QAAKma,EAAE,GAAG,CAAL,IAAUC,EAAE,GAAG,CAApB,EAAwB;AACpB,WAAKjJ,KAAL,CAAWsD,IAAI,CAACO,KAAL,CAAWC,SAAtB,EAAiCf,OAAjC,GAA2C,IAA3C;AACA,WAAK/C,KAAL,CAAWsD,IAAI,CAACS,KAAL,CAAWD,SAAtB,EAAiCf,OAAjC,GAA2C,IAA3C;AACH;;AAED,WAAO,IAAP;AACC,GApFL,C,CAsFA;;;AACAlD,SAAO,CAAC3S,SAAR,CAAkBgc,SAAlB,GAA8B,UAASd,IAAT,EAAe;AACzC;AACA;AACA,QAAIrI,KAAK,GAAG,KAAKA,KAAjB;AAAA,QACIoJ,KAAK,GAAGpJ,KAAK,CAAC3U,MADlB;AAAA,QAEIkY,IAFJ;AAAA,QAGI0D,MAAM,GAAGrd,IAAI,CAAC4P,GAHlB,CAHyC,CAQzC;;AACA,WAAO4P,KAAK,EAAZ,EAAgB;AACZ7F,UAAI,GAAGvD,KAAK,CAACoJ,KAAD,CAAZ,CADY,CAEZ;AACA;AACA;;AACA,UAAI,CAAC,KAAKhB,WAAL,CAAiB7E,IAAjB,EAAuB8E,IAAvB,CAAD,IACA,CAAC,KAAKW,QAAL,CAAczF,IAAd,EAAoB8E,IAApB,CADD,IAECpB,MAAM,CAAC1D,IAAI,CAACE,EAAL,CAAQhW,CAAR,GAAU8V,IAAI,CAACC,EAAL,CAAQ/V,CAAnB,CAAN,GAA4B,IAA5B,IAAoCwZ,MAAM,CAAC1D,IAAI,CAACE,EAAL,CAAQ/V,CAAR,GAAU6V,IAAI,CAACC,EAAL,CAAQ9V,CAAnB,CAAN,GAA4B,IAFrE,EAE4E;AACxE6V,YAAI,CAACE,EAAL,GAAUF,IAAI,CAACC,EAAL,GAAU,IAApB;AACAxD,aAAK,CAAC0D,MAAN,CAAa0F,KAAb,EAAmB,CAAnB;AACC;AACJ;AACJ,GArBL,C,CAuBA;AACA;AACA;AACA;;;AACAtJ,SAAO,CAAC3S,SAAR,CAAkBkc,UAAlB,GAA+B,UAAShB,IAAT,EAAe;AAC1C,QAAIC,EAAE,GAAGD,IAAI,CAACC,EAAd;AAAA,QACIC,EAAE,GAAGF,IAAI,CAACE,EADd;AAAA,QAEIC,EAAE,GAAGH,IAAI,CAACG,EAFd;AAAA,QAGIC,EAAE,GAAGJ,IAAI,CAACI,EAHd;AAAA,QAIIxI,KAAK,GAAG,KAAKA,KAJjB;AAAA,QAKIqJ,KAAK,GAAGrJ,KAAK,CAAC5U,MALlB;AAAA,QAMI8X,IANJ;AAAA,QAOIoG,KAPJ;AAAA,QAQIxG,SARJ;AAAA,QAQeyG,UARf;AAAA,QASIjG,IATJ;AAAA,QAUIE,EAVJ;AAAA,QAUQD,EAVR;AAAA,QAUYiG,EAVZ;AAAA,QAWIC,iBAXJ;AAAA,QAYIzC,MAAM,GAAGrd,IAAI,CAAC4P,GAZlB;;AAcA,WAAO8P,KAAK,EAAZ,EAAgB;AACZnG,UAAI,GAAGlD,KAAK,CAACqJ,KAAD,CAAZ,CADY,CAEZ;AACA;;AACA,UAAI,CAACnG,IAAI,CAACE,gBAAL,EAAL,EAA8B;AAC1B;AACC;;AACL,UAAI,CAACF,IAAI,CAACH,OAAV,EAAmB;AACf;AACC,OATO,CAUZ;AACA;AACA;;;AACAD,eAAS,GAAGI,IAAI,CAACJ,SAAjB;AACAyG,gBAAU,GAAGzG,SAAS,CAAC1X,MAAvB,CAdY,CAeZ;AACA;AAEA;;AACAke,WAAK,GAAG,CAAR;;AACA,aAAOA,KAAK,GAAGC,UAAf,EAA2B;AACvB/F,UAAE,GAAGV,SAAS,CAACwG,KAAD,CAAT,CAAiB1E,WAAjB,EAAL;AACA4E,UAAE,GAAG1G,SAAS,CAAC,CAACwG,KAAK,GAAC,CAAP,IAAYC,UAAb,CAAT,CAAkC/E,aAAlC,EAAL,CAFuB,CAGvB;AACA;;AACA,YAAIwC,MAAM,CAACxD,EAAE,CAAChW,CAAH,GAAKgc,EAAE,CAAChc,CAAT,CAAN,IAAmB,IAAnB,IAA2BwZ,MAAM,CAACxD,EAAE,CAAC/V,CAAH,GAAK+b,EAAE,CAAC/b,CAAT,CAAN,IAAmB,IAAlD,EAAwD;AAEpD;AACA;AACA;AAEA;AACA,kBAAQ,IAAR;AAEI;AACA,iBAAK,KAAKyT,gBAAL,CAAsBsC,EAAE,CAAChW,CAAzB,EAA2B6a,EAA3B,KAAkC,KAAKhH,mBAAL,CAAyBmC,EAAE,CAAC/V,CAA5B,EAA8B+a,EAA9B,CAAvC;AACIiB,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAChc,CAAzB,EAA2B6a,EAA3B,CAApB;AACA9E,gBAAE,GAAG,KAAK2B,YAAL,CAAkBmD,EAAlB,EAAsBoB,iBAAiB,GAAGD,EAAE,CAAC/b,CAAN,GAAU+a,EAAjD,CAAL;AACAlF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnCjG,gBAAE,GAAGD,EAAL;AACA;AAEJ;;AACA,iBAAK,KAAKrC,gBAAL,CAAsBsC,EAAE,CAAC/V,CAAzB,EAA2B+a,EAA3B,KAAkC,KAAKnH,mBAAL,CAAyBmC,EAAE,CAAChW,CAA5B,EAA8B8a,EAA9B,CAAvC;AACImB,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAC/b,CAAzB,EAA2B+a,EAA3B,CAApB;AACAjF,gBAAE,GAAG,KAAK2B,YAAL,CAAkBuE,iBAAiB,GAAGD,EAAE,CAAChc,CAAN,GAAU8a,EAA7C,EAAiDE,EAAjD,CAAL;AACAlF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnCjG,gBAAE,GAAGD,EAAL;AACA;AAEJ;;AACA,iBAAK,KAAKrC,gBAAL,CAAsBsC,EAAE,CAAChW,CAAzB,EAA2B8a,EAA3B,KAAkC,KAAKnH,sBAAL,CAA4BqC,EAAE,CAAC/V,CAA/B,EAAiC8a,EAAjC,CAAvC;AACIkB,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAChc,CAAzB,EAA2B8a,EAA3B,CAApB;AACA/E,gBAAE,GAAG,KAAK2B,YAAL,CAAkBoD,EAAlB,EAAsBmB,iBAAiB,GAAGD,EAAE,CAAC/b,CAAN,GAAU8a,EAAjD,CAAL;AACAjF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnCjG,gBAAE,GAAGD,EAAL;AACA;AAEJ;;AACA,iBAAK,KAAKrC,gBAAL,CAAsBsC,EAAE,CAAC/V,CAAzB,EAA2B8a,EAA3B,KAAkC,KAAKpH,sBAAL,CAA4BqC,EAAE,CAAChW,CAA/B,EAAiC6a,EAAjC,CAAvC;AACIoB,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAC/b,CAAzB,EAA2B8a,EAA3B,CAApB;AACAhF,gBAAE,GAAG,KAAK2B,YAAL,CAAkBuE,iBAAiB,GAAGD,EAAE,CAAChc,CAAN,GAAU6a,EAA7C,EAAiDE,EAAjD,CAAL;AACAjF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnCjG,gBAAE,GAAGD,EAAL,CARJ,CASI;AAEA;;AACAkG,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAChc,CAAzB,EAA2B6a,EAA3B,CAApB;AACA9E,gBAAE,GAAG,KAAK2B,YAAL,CAAkBmD,EAAlB,EAAsBoB,iBAAiB,GAAGD,EAAE,CAAC/b,CAAN,GAAU+a,EAAjD,CAAL;AACAlF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnCjG,gBAAE,GAAGD,EAAL,CAnBJ,CAoBI;AAEA;;AACAkG,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAC/b,CAAzB,EAA2B+a,EAA3B,CAApB;AACAjF,gBAAE,GAAG,KAAK2B,YAAL,CAAkBuE,iBAAiB,GAAGD,EAAE,CAAChc,CAAN,GAAU8a,EAA7C,EAAiDE,EAAjD,CAAL;AACAlF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnCjG,gBAAE,GAAGD,EAAL,CA9BJ,CA+BI;AAEA;;AACAkG,+BAAiB,GAAG,KAAKvI,gBAAL,CAAsBsI,EAAE,CAAChc,CAAzB,EAA2B8a,EAA3B,CAApB;AACA/E,gBAAE,GAAG,KAAK2B,YAAL,CAAkBoD,EAAlB,EAAsBmB,iBAAiB,GAAGD,EAAE,CAAC/b,CAAN,GAAU8a,EAAjD,CAAL;AACAjF,kBAAI,GAAG,KAAKgC,gBAAL,CAAsBpC,IAAI,CAACN,IAA3B,EAAiCY,EAAjC,EAAqCD,EAArC,CAAP;AACA+F,mBAAK;AACLxG,uBAAS,CAACW,MAAV,CAAiB6F,KAAjB,EAAwB,CAAxB,EAA2B,KAAKrE,cAAL,CAAoB3B,IAApB,EAA0BJ,IAAI,CAACN,IAA/B,EAAqC,IAArC,CAA3B;AACA2G,wBAAU;;AACV,kBAAKE,iBAAL,EAAyB;AAAE;AAAQ;;AACnC;;AAEJ;AACI,oBAAM,6CAAN;AAnFR;AAqFC;;AACLH,aAAK;AACJ;;AACLpG,UAAI,CAACH,OAAL,GAAe,KAAf;AACC;AACJ,GAzIL,C,CA2IA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEAlD,SAAO,CAAC3S,SAAR,CAAkBwc,aAAlB,GAAkC,UAASC,KAAT,EAAgB;AAC9C,QAAI3I,CAAC,GAAG,KAAKA,CAAb;AAAA,QACIrW,CAAC,GAAGgf,KAAK,CAACve,MADd;AAAA,QAEIwX,IAFJ;;AAGA,WAAQjY,CAAC,EAAT,EAAc;AACViY,UAAI,GAAG+G,KAAK,CAAChf,CAAD,CAAZ;AACAiY,UAAI,CAACpV,CAAL,GAAS7D,IAAI,CAACW,KAAL,CAAWsY,IAAI,CAACpV,CAAL,GAASwT,CAApB,IAAyBA,CAAlC;AACA4B,UAAI,CAACnV,CAAL,GAAS9D,IAAI,CAACW,KAAL,CAAWsY,IAAI,CAACnV,CAAL,GAASuT,CAApB,IAAyBA,CAAlC;AACC;AACJ,GATL,C,CAWA;AACA;AACA;AACA;AACA;;;AAEAnB,SAAO,CAAC3S,SAAR,CAAkB0c,OAAlB,GAA4B,UAASC,OAAT,EAAkB;AAC1C,QAAKA,OAAL,EAAe;AACX,UAAKA,OAAO,YAAY,KAAKlH,OAA7B,EAAuC;AACnC,aAAK1C,SAAL,GAAiB4J,OAAjB;AACC,OAFL,MAGK;AACD,cAAM,mDAAN;AACC;AACJ;AACJ,GATL,C,CAWA;AACA;AAEA;AACA;AACA;AACA;;;AAEAhK,SAAO,CAAC3S,SAAR,CAAkB4c,OAAlB,GAA4B,UAASH,KAAT,EAAgBvB,IAAhB,EAAsB;AAC9C;AACA,QAAI2B,SAAS,GAAG,IAAInR,IAAJ,EAAhB,CAF8C,CAI9C;;AACA,SAAK2H,KAAL,GAL8C,CAO9C;AACA;;AACA,QAAK,KAAKN,SAAV,EAAsB;AAClB,WAAKG,cAAL,GAAsB,KAAKA,cAAL,CAAoB4J,MAApB,CAA2B,KAAK/J,SAAL,CAAeH,QAA1C,CAAtB;AACA,WAAKO,YAAL,GAAoB,KAAKA,YAAL,CAAkB2J,MAAlB,CAAyB,KAAK/J,SAAL,CAAeF,KAAxC,CAApB;AACA,WAAKO,YAAL,GAAoB,KAAKA,YAAL,CAAkB0J,MAAlB,CAAyB,KAAK/J,SAAL,CAAeD,KAAxC,CAApB;AACA,WAAKC,SAAL,GAAiB,IAAjB;AACC,KAdyC,CAgB9C;;;AACA,QAAIgK,UAAU,GAAGN,KAAK,CAAC/N,KAAN,CAAY,CAAZ,CAAjB;AACAqO,cAAU,CAAC5M,IAAX,CAAgB,UAASlT,CAAT,EAAWC,CAAX,EAAa;AACzB,UAAIN,CAAC,GAAGM,CAAC,CAACqD,CAAF,GAAMtD,CAAC,CAACsD,CAAhB;;AACA,UAAI3D,CAAJ,EAAO;AAAC,eAAOA,CAAP;AAAU;;AAClB,aAAOM,CAAC,CAACoD,CAAF,GAAMrD,CAAC,CAACqD,CAAf;AACC,KAJL,EAlB8C,CAwB9C;;AACA,QAAIoV,IAAI,GAAGqH,UAAU,CAAC9G,GAAX,EAAX;AAAA,QACI+G,MAAM,GAAG,CADb;AAAA,QAEIC,MAFJ;AAAA,QAEY;AACRC,UAHJ;AAAA,QAIIpK,KAAK,GAAG,KAAKA,KAJjB;AAAA,QAKI2G,MALJ,CAzB8C,CAgC9C;;AACA,aAAS;AACL;AACA;AACA;AACAA,YAAM,GAAG,KAAK5F,gBAAd,CAJK,CAML;;AACA,UAAI6B,IAAI,KAAK,CAAC+D,MAAD,IAAW/D,IAAI,CAACnV,CAAL,GAASkZ,MAAM,CAAClZ,CAA3B,IAAiCmV,IAAI,CAACnV,CAAL,KAAWkZ,MAAM,CAAClZ,CAAlB,IAAuBmV,IAAI,CAACpV,CAAL,GAASmZ,MAAM,CAACnZ,CAA7E,CAAR,EAA0F;AACtF;AACA,YAAIoV,IAAI,CAACpV,CAAL,KAAW2c,MAAX,IAAqBvH,IAAI,CAACnV,CAAL,KAAW2c,MAApC,EAA4C;AACxC;AACApK,eAAK,CAACkK,MAAD,CAAL,GAAgB,KAAKjH,UAAL,CAAgBL,IAAhB,CAAhB;AACAA,cAAI,CAACkB,SAAL,GAAiBoG,MAAM,EAAvB,CAHwC,CAIxC;;AACA,eAAK7C,eAAL,CAAqBzE,IAArB,EALwC,CAMxC;;AACAwH,gBAAM,GAAGxH,IAAI,CAACnV,CAAd;AACA0c,gBAAM,GAAGvH,IAAI,CAACpV,CAAd;AACC;;AACLoV,YAAI,GAAGqH,UAAU,CAAC9G,GAAX,EAAP;AACC,OAbL,CAeA;AAfA,WAgBK,IAAIwD,MAAJ,EAAY;AACb,aAAKD,kBAAL,CAAwBC,MAAM,CAAChB,GAA/B;AACC,OAFA,CAIL;AAJK,WAKA;AACD;AACC;AACJ,KAhEyC,CAkE9C;AACA;AACA;AACA;AACA;;;AACA,SAAKuD,SAAL,CAAed,IAAf,EAvE8C,CAyE9C;;AACA,SAAKgB,UAAL,CAAgBhB,IAAhB,EA1E8C,CA4E9C;;AACA,QAAIiC,QAAQ,GAAG,IAAIzR,IAAJ,EAAf,CA7E8C,CA+E9C;;AACA,QAAIiR,OAAO,GAAG,IAAI,KAAKlH,OAAT,EAAd;AACAkH,WAAO,CAAC7J,KAAR,GAAgB,KAAKA,KAArB;AACA6J,WAAO,CAAC9J,KAAR,GAAgB,KAAKA,KAArB;AACA8J,WAAO,CAAC/J,QAAR,GAAmB,KAAKA,QAAxB;AACA+J,WAAO,CAACS,QAAR,GAAmBD,QAAQ,CAACxR,OAAT,KAAmBkR,SAAS,CAAClR,OAAV,EAAtC,CApF8C,CAsF9C;;AACA,SAAK0H,KAAL;AAEA,WAAOsJ,OAAP;AACC,GA1FL;AA4FA;;;AAEA,MAAK,OAAOlK,MAAP,KAAkB,WAAvB,EAAqC;AACjCA,UAAM,CAACC,OAAP,GAAiBC,OAAjB;AACH;;AACD,OAAKA,OAAL,GAAeA,OAAf;;;;;;;;;;;;;AC5rDA,iBAUI0K,OAAO,CAAC,SAAD,CAVX;AAAA,MACEC,UADF,YACEA,UADF;AAAA,MAEEC,oBAFF,YAEEA,oBAFF;AAAA,MAGEC,sBAHF,YAGEA,sBAHF;AAAA,MAIEC,gBAJF,YAIEA,gBAJF;AAAA,MAKEC,iBALF,YAKEA,iBALF;AAAA,MAMEC,iBANF,YAMEA,iBANF;AAAA,MAOEC,eAPF,YAOEA,eAPF;AAAA,MAQEC,IARF,YAQEA,IARF;AAAA,MASEC,IATF,YASEA,IATF;;AAaAC,aAAW,GAAG,CAAd;AACAC,sBAAoB,GAAG,IAAvB;AACAC,sBAAoB,GAAG,IAAvB,C,CAEA;AACA;AACA;;MACMC,M;AACJ,oBAAY5M,MAAZ,EAAoB6M,WAApB,EAAiCC,MAAjC,EAAyC;AACvC,WAAK9M,MAAL,GAAcA,MAAd;AACA,WAAK6M,WAAL,GAAmBA,WAAnB;AACA,WAAKC,MAAL,GAAcA,MAAd;AACA,WAAKC,YAAL,GAAoBV,iBAAiB,CAACS,MAAM,CAACE,OAAR,EAAiBhN,MAAjB,CAArC;AACD;;;;WAEDiN,Q;AAAA,0BAAW;AAAA;;AACT;AACA,YAAIT,IAAI,CAAC,KAAKxM,MAAL,CAAY,CAAZ,CAAD,EAAiB,KAAKA,MAAL,CAAY,CAAZ,CAAjB,CAAJ,GAAuC,GAA3C,EAAgD,OAAO,EAAP;AAChD,YAAMkN,OAAO,GAAGjB,oBAAoB,CAAC,KAAKjM,MAAL,CAAY,CAAZ,CAAD,EAAiB,KAAK8M,MAAL,CAAYE,OAA7B,CAApC;AACA,YAAMG,OAAO,GAAGlB,oBAAoB,CAAC,KAAKjM,MAAL,CAAY,CAAZ,CAAD,EAAiB,KAAK8M,MAAL,CAAYE,OAA7B,CAApC,CAJS,CAKT;;AACA,YAAI7hB,IAAI,CAACqM,GAAL,CAAS0V,OAAT,EAAkBC,OAAlB,IAA6BT,oBAA7B,IAAqDvhB,IAAI,CAACoM,GAAL,CAAS2V,OAAT,EAAkBC,OAAlB,IAA6BR,oBAAtF,EAA4G;AAC1G,iBAAO,EAAP;AACD;;AACD,eAAO,KAAKG,MAAL,CAAYM,SAAZ,CAAsBC,OAAtB,CAA8BC,MAA9B,CAAqC,UAAAR,MAAM,EAAI;AACpD,cAAIA,MAAM,KAAK,KAAI,CAACA,MAApB,EAA4B,OAAO,KAAP;AAC5B,cAAMS,KAAK,GAAGvB,UAAU,CAAC,KAAI,CAAChM,MAAL,CAAY,CAAZ,CAAD,EAAiB8M,MAAM,CAACE,OAAxB,CAAxB;AACA,cAAMQ,KAAK,GAAGxB,UAAU,CAAC,KAAI,CAAChM,MAAL,CAAY,CAAZ,CAAD,EAAiB8M,MAAM,CAACE,OAAxB,CAAxB;AACA,iBAAOO,KAAK,IAAId,WAAT,IAAwBe,KAAK,IAAIf,WAAxC;AACD,SALM,EAKJgB,GALI,CAKA,UAAAC,cAAc;AAAA,iBAAI,IAAIC,IAAJ,CAAS,KAAT,EAAeD,cAAf,CAAJ;AAAA,SALd,CAAP;AAMD;;;;;;;;MAGGC,I;AACJ,kBAAYC,MAAZ,EAAoBF,cAApB,EAAoC;AAClC,WAAK1N,MAAL,GAAc4N,MAAM,CAAC5N,MAArB;AACA,WAAK+M,YAAL,GAAoBa,MAAM,CAACb,YAA3B;AACA,WAAKF,WAAL,GAAmBe,MAAM,CAACf,WAA1B;AACA,WAAKgB,SAAL,GAAiB,CAACH,cAAD,CAAjB;AACA,WAAKI,QAAL,GAAgB,KAAhB;AACD;;;;YAEDC,Q;AAAA,wBAASC,SAAT,EAAoB;AAClB,eAAOzB,IAAI,CAAC,KAAKvM,MAAL,CAAY,CAAZ,CAAD,EAAiBgO,SAAS,CAAChO,MAAV,CAAiB,CAAjB,CAAjB,CAAX;AACD;;;;;YAEDiO,e;AAAA,+BAAgBD,SAAhB,EAA2B;AACzB,aAAKF,QAAL,GAAgB,IAAhB;AACA,aAAKD,SAAL,GAAiB,KAAKA,SAAL,CAAerC,MAAf,CAAsBwC,SAAS,CAACH,SAAhC,CAAjB;AACA,aAAKK,WAAL,GAAmBF,SAAS,CAAChO,MAAV,CAAiB,CAAjB,CAAnB;AACA,aAAKA,MAAL,CAAY,CAAZ,IAAiBgO,SAAS,CAAChO,MAAV,CAAiB,CAAjB,CAAjB;AACA,aAAK+M,YAAL,CAAkB,CAAlB,IAAuBiB,SAAS,CAACjB,YAAV,CAAuB,CAAvB,CAAvB;AACA,aAAKF,WAAL,IAAoBmB,SAAS,CAACnB,WAAV,CAAsBsB,OAAtB,CAA8B,KAA9B,EAAqC,IAArC,CAApB;AACD;;;;;YAEDC,e;AAAA,iCAAkB;AAChB,YAAMC,eAAe,GAAGnC,sBAAsB,CAC5C,KAAKa,YAAL,CAAkB,CAAlB,CAD4C,EAE5C,KAAK/M,MAAL,CAAY,CAAZ,CAF4C,EAG5C,KAAK+M,YAAL,CAAkB,CAAlB,CAH4C,EAI5C,KAAK/M,MAAL,CAAY,CAAZ,CAJ4C,CAA9C;AAOA,YAAMsO,eAAe,GAAG9B,IAAI,CAAC6B,eAAD,EAAkB,KAAKrO,MAAL,CAAY,CAAZ,CAAlB,CAA5B;AACA,YAAMuO,eAAe,GAAG/B,IAAI,CAAC6B,eAAD,EAAkB,KAAKrO,MAAL,CAAY,CAAZ,CAAlB,CAA5B;AACA,YAAIwO,YAAY,GAAGrjB,IAAI,CAACqM,GAAL,CAAS8W,eAAT,EAA0B,EAA1B,CAAnB;AACA,YAAIG,YAAY,GAAGtjB,IAAI,CAACqM,GAAL,CAAS+W,eAAT,EAA0B,EAA1B,CAAnB,CAXgB,CAahB;;AACA,YAAIniB,KAAK,CAACoiB,YAAD,CAAT,EAAyBA,YAAY,GAAG,EAAf;AACzB,YAAIpiB,KAAK,CAACqiB,YAAD,CAAT,EAAyBA,YAAY,GAAG,EAAf;;AAEzB,YAAI,KAAKX,QAAT,EAAmB;AACjB,cAAMY,QAAQ,GAAGlC,IAAI,CAAC,KAAK0B,WAAN,EAAmB,KAAKlO,MAAL,CAAY,CAAZ,CAAnB,CAArB;AACA,cAAM2O,QAAQ,GAAGnC,IAAI,CAAC,KAAK0B,WAAN,EAAmB,KAAKlO,MAAL,CAAY,CAAZ,CAAnB,CAArB;AACAwO,sBAAY,GAAGrjB,IAAI,CAACoM,GAAL,CAASmX,QAAQ,GAAG,GAApB,EAAyBF,YAAzB,CAAf;AACAC,sBAAY,GAAGtjB,IAAI,CAACoM,GAAL,CAASoX,QAAQ,GAAG,GAApB,EAAyBF,YAAzB,CAAf;AACD;;AAED,YAAMG,aAAa,GAAGxC,iBAAiB,CAAC,KAAKW,YAAL,CAAkB,CAAlB,CAAD,EAAuB,KAAK/M,MAAL,CAAY,CAAZ,CAAvB,EAAuCwO,YAAvC,CAAvC;AACA,YAAMK,aAAa,GAAGzC,iBAAiB,CAAC,KAAKW,YAAL,CAAkB,CAAlB,CAAD,EAAuB,KAAK/M,MAAL,CAAY,CAAZ,CAAvB,EAAuCyO,YAAvC,CAAvC;;AAEA,YAAMK,OAAO,GAAG,UAAA1O,KAAK;AAAA,iBAAOjV,IAAI,CAAC4jB,KAAL,CAAW3O,KAAK,CAACpR,CAAjB,CAAP,SAA8B7D,IAAI,CAAC4jB,KAAL,CAAW3O,KAAK,CAACnR,CAAjB,CAA9B;AAAA,SAArB;;AAEA,eAAU6f,OAAO,CAAC,KAAK9O,MAAL,CAAY,CAAZ,CAAD,CAAjB,WAAuC8O,OAAO,CAACF,aAAD,CAA9C,SAAiEE,OAAO,CAACD,aAAD,CAAxE,SAA2FC,OAAO,CAAC,KAAK9O,MAAL,CAAY,CAAZ,CAAD,CAAlG;AACD;;;;;;;;MAGGgP,M;AACJ,oBAAYC,UAAZ,EAAwB7B,SAAxB,EAAmC8B,SAAnC,EAA8C;AAC5C,WAAKD,UAAL,GAAkBA,UAAlB;AACA,WAAKjC,OAAL,GAAeb,gBAAgB,CAAC8C,UAAD,CAA/B;AACA,WAAK7B,SAAL,GAAiBA,SAAjB;AACA,WAAK8B,SAAL,GAAiBA,SAAjB;AACD;;;;YAEDC,U;AAAA,4BAAa;AAAA;;AACX,YAAMC,gBAAgB,GAAG,KAAKH,UAAL,CAAgBI,KAAhB,CAAsB,qCAAtB,CAAzB;AACA,YAAI,CAACD,gBAAL,EAAuB,OAAO,EAAP;AACvB,eAAOA,gBAAgB,CAAC3B,GAAjB,CAAqB,UAAA6B,eAAe,EAAI;AAC7C,cAAMC,oBAAoB,GAAG,IAAIC,MAAJ,CAAcF,eAAd,4CAA7B;;AACA,cAAMzC,WAAW,GAAG,MAAI,CAACoC,UAAL,CAAgBI,KAAhB,CAAsBE,oBAAtB,EAA4C,CAA5C,CAApB;;AACA,cAAME,KAAK,GAAG5C,WAAW,CAAC6C,KAAZ,CAAkB,SAAlB,EAA6BjC,GAA7B,CAAiC,UAAAkC,GAAG;AAAA,mBAAIC,UAAU,CAACD,GAAD,CAAd;AAAA,WAApC,CAAd;AACA,cAAM3P,MAAM,GAAG,CAAC;AAAChR,aAAC,EAAEygB,KAAK,CAAC,CAAD,CAAT;AAAcxgB,aAAC,EAAEwgB,KAAK,CAAC,CAAD;AAAtB,WAAD,EAA6B;AAACzgB,aAAC,EAAEygB,KAAK,CAAC,CAAD,CAAT;AAAcxgB,aAAC,EAAEwgB,KAAK,CAAC,CAAD;AAAtB,WAA7B,CAAf;AACA,iBAAO,IAAI7C,MAAJ,CAAW5M,MAAX,EAAmB6M,WAAnB,EAAgC,MAAhC,CAAP;AACD,SANM,CAAP;AAOD;;;;;YAEDgD,a;AAAA,+BAAgB;AACd,YAAMC,OAAO,GAAG,KAAKX,UAAL,EAAhB;AACA,YAAIY,KAAK,GAAG,EAAZ;AACAD,eAAO,CAACE,OAAR,CAAgB,UAAApC,MAAM,EAAI;AACxBA,gBAAM,CAACX,QAAP,GAAkB+C,OAAlB,CAA0B,UAAAC,IAAI,EAAI;AAChC,gBAAMC,QAAQ,GAAGH,KAAK,CAACA,KAAK,CAACnjB,MAAN,GAAe,CAAhB,CAAtB;;AACA,gBAAIsjB,QAAQ,IAAIA,QAAQ,CAACnC,QAAT,CAAkBkC,IAAlB,CAAhB,EAAyC;AACvCC,sBAAQ,CAACjC,eAAT,CAAyBgC,IAAzB;AACD,aAFD,MAEO;AACLF,mBAAK,CAACjjB,IAAN,CAAWmjB,IAAX;AACD;AACF,WAPD;AAQD,SATD;AAWA,YAAIE,kBAAkB,GAAG,KAAKlB,UAA9B;AACAc,aAAK,CAACC,OAAN,CAAc,UAAAC,IAAI,EAAI;AACpB,cAAMG,MAAM,GAAGH,IAAI,CAAC7B,eAAL,EAAf;AACA+B,4BAAkB,GAAG7D,eAAe,CAAC6D,kBAAkB,CAAChC,OAAnB,CAA2B8B,IAAI,CAACpD,WAAhC,EAA6CuD,MAA7C,CAAD,CAApC;AACD,SAHD;AAKA,eAAO;AACLC,oBAAU,EAAEN,KAAK,CAACnjB,MAAN,GAAe,CADtB;AAEL0jB,yBAAe,EAAE,CAAC,CAACP,KAAK,CAACQ,IAAN,CAAW,UAAAN,IAAI;AAAA,mBAAIA,IAAI,CAACnC,QAAT;AAAA,WAAf,CAFd;AAGLmB,oBAAU,EAAEkB,kBAHP;AAILjB,mBAAS,EAAE,KAAKA;AAJX,SAAP;AAMD;;;;;;;;MAGGsB,S;AACJ,uBAAYC,WAAZ,EAAyB;AAAA;;AACvB,WAAKpD,OAAL,GAAeoD,WAAW,CAAChD,GAAZ,CAAgB,UAACiD,IAAD,EAAOlkB,CAAP;AAAA,eAAa,IAAIwiB,MAAJ,CAAW0B,IAAX,EAAiB,MAAjB,EAAuBlkB,CAAvB,CAAb;AAAA,OAAhB,CAAf;AACD;;;;;AAGH,MAAMmkB,qBAAqB,GAAG,UAACC,iBAAD,EAAuB;AACnD,QAAMxD,SAAS,GAAG,IAAIoD,SAAJ,CAAcI,iBAAd,CAAlB;AACA,QAAMC,gBAAgB,GAAGzD,SAAS,CAACC,OAAV,CAAkBI,GAAlB,CAAsB,UAAAX,MAAM;AAAA,aAAIA,MAAM,CAAC+C,aAAP,EAAJ;AAAA,KAA5B,CAAzB;AAEA,WAAO;AACLiB,cAAQ,EAAE,CAAC,CAACD,gBAAgB,CAACN,IAAjB,CAAsB,UAAAQ,OAAO;AAAA,eAAIA,OAAO,CAACV,UAAZ;AAAA,OAA7B,CADP;AAELW,4BAAsB,EAAE,CAAC,CAACH,gBAAgB,CAACN,IAAjB,CAAsB,UAAAQ,OAAO;AAAA,eAAIA,OAAO,CAACT,eAAZ;AAAA,OAA7B,CAFrB;AAGLW,qBAAe,EAAEJ,gBAAgB,CAACvD,MAAjB,CAAwB,UAAAyD,OAAO;AAAA,eAAIA,OAAO,CAACV,UAAZ;AAAA,OAA/B,EAAuD5C,GAAvD,CAA2D,UAAAsD,OAAO;AAAA,eAAIA,OAAO,CAAC7B,SAAZ;AAAA,OAAlE,CAHZ;AAIL7B,aAAO,EAAEwD,gBAAgB,CAACpD,GAAjB,CAAqB,UAAAsD,OAAO;AAAA,eAAIA,OAAO,CAAC9B,UAAZ;AAAA,OAA5B;AAJJ,KAAP;AAMD,GAVD;;AAYA,MAAMiC,cAAc,GAAG,UAAC7D,OAAD,EAAa;AAClC,QAAM8D,SAAS,GAAGR,qBAAqB,CAACtD,OAAD,CAAvC;AACA,WAAO8D,SAAS,CAACL,QAAV,GAAqBK,SAAS,CAAC9D,OAA/B,GAAyCA,OAAhD;AACD,GAHD;;AAKA,MAAM+D,UAAU,GAAG,UAAC/D,OAAD;AAAA,WAAa6D,cAAc,CAACA,cAAc,CAAC7D,OAAD,CAAf,CAA3B;AAAA,GAAnB;;AAEAlM,QAAM,CAACC,OAAP,GAAiB;AAACgQ,cAAU,EAAVA;AAAD,GAAjB;;;;;;;;;;;;;AC/KA,MAAIC,kBAAJ;;AAAuBC,SAAO,CAACC,IAAR,CAAa,0CAAb,EAAwD;AAACC,WAAO,EAAC,UAASnmB,CAAT,EAAW;AAACgmB,wBAAkB,GAAChmB,CAAnB;AAAqB;AAA1C,GAAxD,EAAoG,CAApG;;AAAvB,MAAMomB,YAAY,GAAG1F,OAAO,CAAC,iBAAD,CAA5B;;AAEA,MAAMS,IAAI,GAAG,UAAC5M,EAAD,EAAKC,EAAL;AAAA,WAAY1U,IAAI,CAACK,IAAL,CAAUL,IAAI,CAACuM,GAAL,CAASkI,EAAE,CAAC5Q,CAAH,GAAO6Q,EAAE,CAAC7Q,CAAnB,EAAsB,CAAtB,IAA2B7D,IAAI,CAACuM,GAAL,CAASkI,EAAE,CAAC3Q,CAAH,GAAO4Q,EAAE,CAAC5Q,CAAnB,EAAsB,CAAtB,CAArC,CAAZ;AAAA,GAAb;;AACA,MAAMyiB,IAAI,GAAG,UAACC,IAAD;AAAA,WAAUnF,IAAI,CAACmF,IAAD,EAAO;AAAC3iB,OAAC,EAAE,CAAJ;AAAOC,OAAC,EAAE;AAAV,KAAP,CAAd;AAAA,GAAb;;AACA,MAAM2iB,QAAQ,GAAG,UAAChS,EAAD,EAAKC,EAAL;AAAA,WAAa;AAAC7Q,OAAC,EAAE4Q,EAAE,CAAC5Q,CAAH,GAAO6Q,EAAE,CAAC7Q,CAAd;AAAiBC,OAAC,EAAE2Q,EAAE,CAAC3Q,CAAH,GAAO4Q,EAAE,CAAC5Q;AAA9B,KAAb;AAAA,GAAjB;;AACA,MAAMsd,IAAI,GAAG,UAAC3M,EAAD,EAAKC,EAAL;AAAA,WAAYD,EAAE,CAAC5Q,CAAH,KAAS6Q,EAAE,CAAC7Q,CAAZ,IAAiB4Q,EAAE,CAAC3Q,CAAH,KAAS4Q,EAAE,CAAC5Q,CAAzC;AAAA,GAAb;;AAEA,MAAMkd,gBAAgB,GAAG,UAAC8C,UAAD,EAA8B;AAAA,QAAjB4C,KAAiB,uEAAT,IAAS;AACrD,QAAMnB,IAAI,GAAGe,YAAY,CAACxC,UAAD,CAAzB;AACA,QAAM6C,KAAK,GAAGpB,IAAI,CAAC9jB,MAAL,KAAgBilB,KAA9B;AACA,QAAM7E,OAAO,GAAG,EAAhB;;AACA,SAAK,IAAIxgB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqlB,KAApB,EAA2BrlB,CAAC,IAAI,CAAhC,EAAmC;AACjC,UAAMulB,QAAQ,GAAGrB,IAAI,CAACsB,EAAL,CAAQxlB,CAAC,GAAGslB,KAAZ,CAAjB;AACA9E,aAAO,CAAClgB,IAAR,CAAa;AAACkC,SAAC,EAAE+iB,QAAQ,CAAC,CAAD,CAAZ;AAAiB9iB,SAAC,EAAE8iB,QAAQ,CAAC,CAAD;AAA5B,OAAb;AACD;;AACD,WAAO/E,OAAP;AACD,GATD,C,CAWA;AACA;;;AACA,MAAMd,sBAAsB,GAAG,UAAC+F,IAAD,EAAOC,IAAP,EAAaC,IAAb,EAAmBC,IAAnB,EAA4B;AACzD,QAAMzgB,EAAE,GAAGsgB,IAAI,CAACjjB,CAAhB;AACA,QAAMqjB,EAAE,GAAGH,IAAI,CAACljB,CAAhB;AACA,QAAMsjB,EAAE,GAAGH,IAAI,CAACnjB,CAAhB;AACA,QAAMujB,EAAE,GAAGH,IAAI,CAACpjB,CAAhB;AACA,QAAMwjB,EAAE,GAAGP,IAAI,CAAChjB,CAAhB;AACA,QAAMwjB,EAAE,GAAGP,IAAI,CAACjjB,CAAhB;AACA,QAAMyjB,EAAE,GAAGP,IAAI,CAACljB,CAAhB;AACA,QAAM0jB,EAAE,GAAGP,IAAI,CAACnjB,CAAhB;AACA,QAAM2jB,UAAU,GAAG,CAACjhB,EAAE,GAAG8gB,EAAL,GAAUD,EAAE,GAAGH,EAAhB,KAAuBC,EAAE,GAAGC,EAA5B,IAAkC,CAAC5gB,EAAE,GAAG0gB,EAAN,KAAaC,EAAE,GAAGK,EAAL,GAAUD,EAAE,GAAGH,EAA5B,CAArD;AACA,QAAMM,UAAU,GAAG,CAAClhB,EAAE,GAAG8gB,EAAL,GAAUD,EAAE,GAAGH,EAAhB,KAAuBK,EAAE,GAAGC,EAA5B,IAAkC,CAACH,EAAE,GAAGC,EAAN,KAAaH,EAAE,GAAGK,EAAL,GAAUD,EAAE,GAAGH,EAA5B,CAArD;AACA,QAAMO,WAAW,GAAG,CAACnhB,EAAE,GAAG0gB,EAAN,KAAaK,EAAE,GAAGC,EAAlB,IAAwB,CAACH,EAAE,GAAGC,EAAN,KAAaH,EAAE,GAAGC,EAAlB,CAA5C;AACA,WAAO;AAACvjB,OAAC,EAAE4jB,UAAU,GAAGE,WAAjB;AAA8B7jB,OAAC,EAAE4jB,UAAU,GAAGC;AAA9C,KAAP;AACD,GAbD;;AAeA,MAAMC,aAAa,GAAG,UAAC3S,KAAD,EAAQ4S,WAAR,EAAwB;AAC5C,QAAMC,KAAK,GAAGD,WAAW,CAACvF,GAAZ,CAAgB,UAAAyF,YAAY;AAAA,aAAI1G,IAAI,CAACpM,KAAD,EAAQ8S,YAAR,CAAR;AAAA,KAA5B,CAAd;AACA,QAAM1b,GAAG,GAAGrM,IAAI,CAACqM,GAAL,OAAArM,IAAI,qBAAQ8nB,KAAR,EAAhB;AACA,WAAOA,KAAK,CAACE,OAAN,CAAc3b,GAAd,CAAP;AACD,GAJD;;AAMA,MAAM4b,eAAe,GAAG,UAACzS,KAAD,EAAQmR,KAAR,EAAekB,WAAf,EAA+B;AACrD,WAAO,CAACA,WAAW,CAACpmB,MAAZ,GAAqB+T,KAArB,GAA6BmR,KAA9B,IAAuCkB,WAAW,CAACpmB,MAA1D;AACD,GAFD;;AAIA,MAAMqf,oBAAoB,GAAG,UAAC7L,KAAD,EAAQ4S,WAAR,EAAwB;AACnD;AACA,QAAMK,UAAU,GAAGN,aAAa,CAAC3S,KAAD,EAAQ4S,WAAR,CAAhC;AACA,QAAMM,QAAQ,GAAGF,eAAe,CAACC,UAAD,EAAa,CAAC,CAAd,EAAiBL,WAAjB,CAAhC;AACA,QAAMO,SAAS,GAAGH,eAAe,CAACC,UAAD,EAAa,CAAb,EAAgBL,WAAhB,CAAjC;AACA,QAAMQ,KAAK,GAAG5B,QAAQ,CAACoB,WAAW,CAACK,UAAD,CAAZ,EAA0BL,WAAW,CAACM,QAAD,CAArC,CAAtB;AACA,QAAMG,KAAK,GAAG7B,QAAQ,CAACoB,WAAW,CAACO,SAAD,CAAZ,EAAyBP,WAAW,CAACK,UAAD,CAApC,CAAtB;AACA,WAAO,CAACG,KAAK,CAACxkB,CAAN,GAAUykB,KAAK,CAACzkB,CAAhB,GAAoBwkB,KAAK,CAACvkB,CAAN,GAAUwkB,KAAK,CAACxkB,CAArC,KAA2CyiB,IAAI,CAAC8B,KAAD,CAAJ,GAAc9B,IAAI,CAAC+B,KAAD,CAA7D,CAAP;AACD,GARD,C,CAUA;AACA;;;AACA,MAAMrH,iBAAiB,GAAG,UAACxM,EAAD,EAAKC,EAAL,EAAS6T,QAAT,EAAsB;AAC9C,QAAM/B,IAAI,GAAGC,QAAQ,CAAC/R,EAAD,EAAKD,EAAL,CAArB;AACA,QAAM+T,GAAG,GAAGD,QAAQ,GAAGhC,IAAI,CAACC,IAAD,CAA3B;AACA,WAAO;AAAC3iB,OAAC,EAAE6Q,EAAE,CAAC7Q,CAAH,GAAO2kB,GAAG,GAAGhC,IAAI,CAAC3iB,CAAtB;AAAyBC,OAAC,EAAE4Q,EAAE,CAAC5Q,CAAH,GAAO0kB,GAAG,GAAGhC,IAAI,CAAC1iB;AAA9C,KAAP;AACD,GAJD;;AAMA,MAAM+c,UAAU,GAAG,UAAC5L,KAAD,EAAQ4S,WAAR,EAAwB;AACzC,QAAMC,KAAK,GAAGD,WAAW,CAACvF,GAAZ,CAAgB,UAAAyF,YAAY;AAAA,aAAI1G,IAAI,CAACpM,KAAD,EAAQ8S,YAAR,CAAR;AAAA,KAA5B,CAAd;AACA,WAAO/nB,IAAI,CAACqM,GAAL,OAAArM,IAAI,qBAAQ8nB,KAAR,EAAX;AACD,GAHD;;AAKA,MAAM3G,eAAe,GAAG,UAAC2C,UAAD,EAAgB;AACtC,QAAM2E,MAAM,GAAG3E,UAAU,CAACI,KAAX,CAAiB,YAAjB,CAAf;AACA,QAAI,CAACuE,MAAL,EAAa,OAAO3E,UAAP;AACb,QAAI4E,eAAe,GAAG5E,UAAtB;AACA2E,UAAM,CAAC5D,OAAP,CAAe,UAAA8D,KAAK,EAAI;AACtBD,qBAAe,GAAGA,eAAe,CAAC1F,OAAhB,CAAwB2F,KAAxB,EAA+B3oB,IAAI,CAAC4jB,KAAL,CAAWa,UAAU,CAACkE,KAAD,CAArB,CAA/B,CAAlB;AACD,KAFD;AAGA,WAAOD,eAAP;AACD,GARD;;AAUA,MAAMxH,iBAAiB,GAAG,UAAC2G,WAAD,EAAce,UAAd,EAA6B;AACrD,QAAMC,QAAQ,GAAGjB,aAAa,CAACgB,UAAU,CAAC,CAAD,CAAX,EAAgBf,WAAhB,CAA9B;AACA,QAAMiB,QAAQ,GAAGlB,aAAa,CAACgB,UAAU,CAAC,CAAD,CAAX,EAAgBf,WAAhB,CAA9B;AACA,WAAO,CACLA,WAAW,CAACI,eAAe,CAACY,QAAD,EAAW,CAAC,EAAZ,EAAgBhB,WAAhB,CAAhB,CADN,EAELA,WAAW,CAACI,eAAe,CAACa,QAAD,EAAW,EAAX,EAAejB,WAAf,CAAhB,CAFN,CAAP;AAID,GAPD;;AASA7R,QAAM,CAACC,OAAP,GAAiB;AACf4K,cAAU,EAAVA,UADe;AAEfC,wBAAoB,EAApBA,oBAFe;AAGfE,oBAAgB,EAAhBA,gBAHe;AAIfD,0BAAsB,EAAtBA,sBAJe;AAKfE,qBAAiB,EAAjBA,iBALe;AAMfC,qBAAiB,EAAjBA,iBANe;AAOfG,QAAI,EAAJA,IAPe;AAQfD,QAAI,EAAJA,IARe;AASfD,mBAAe,EAAfA;AATe,GAAjB;;;;;;;;;;;;ACvFA,IAAI4H,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAApC8V,MAAM,CAACgT,MAAP,CAAc;AAACC,kBAAgB,EAAC,YAAU;AAAC,WAAOA,gBAAP;AAAwB;AAArD,CAAd;AAAA,IAAMC,SAAS,GAAG,iBAAlB;AACA,IAAMC,MAAM,GAAG,GAAf;;AAEA,IAAMC,SAAS,GAAG,UAACC,MAAD,EAASC,MAAT,EAAoB;AACpC,MAAMC,IAAI,GAAG,CAACF,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAAnB,EAAwBD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAA1C,CAAb;AACA,SAAOC,IAAI,CAAC,CAAD,CAAJ,GAAQA,IAAI,CAAC,CAAD,CAAZ,GAAkBA,IAAI,CAAC,CAAD,CAAJ,GAAQA,IAAI,CAAC,CAAD,CAArC;AACD,CAHD;;AAKA,IAAMC,eAAe,GAAG,UAACC,MAAD,EAAY;AAClC,MAAIC,MAAM,GAAG,CAAb;;AACA,OAAK,IAAIroB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGooB,MAAM,CAAChoB,MAAP,GAAgB,CAApC,EAAuCJ,CAAC,EAAxC,EAA4C;AAC1CqoB,UAAM,IAAI1pB,IAAI,CAACK,IAAL,CAAU+oB,SAAS,CAACK,MAAM,CAACpoB,CAAD,CAAP,EAAYooB,MAAM,CAACpoB,CAAC,GAAG,CAAL,CAAlB,CAAnB,CAAV;AACD;;AACD,SAAOqoB,MAAP;AACD,CAND;;AAQA,IAAMC,aAAa,GAAG,UAACF,MAAD,EAAY;AAChC,MAAMC,MAAM,GAAG,EAAf;;AACA,uDAAkBD,MAAlB,wCAA0B;AAAA,QAAjBxU,KAAiB;AACxByU,UAAM,CAAC/nB,IAAP,CAAY+nB,MAAM,CAACjoB,MAAP,KAAkB,CAAlB,GAAsB,GAAtB,GAA4B,GAAxC;AACAioB,UAAM,CAAC/nB,IAAP,CAAY,KAAKsT,KAAK,CAAC,CAAD,CAAtB;AACAyU,UAAM,CAAC/nB,IAAP,CAAY,KAAKsT,KAAK,CAAC,CAAD,CAAtB;AACD;;AACD,SAAOyU,MAAM,CAACE,IAAP,CAAY,GAAZ,CAAP;AACD,CARD;;AAWA,IAAMX,gBAAgB,GAAG,UAAC/G,OAAD,EAAU2H,OAAV,EAAmB/c,OAAnB,EAA+B;AACtDA,SAAO,GAAGA,OAAO,IAAI,EAArB;AACA,MAAMgd,KAAK,GAAG,QAAQhd,OAAO,CAACgd,KAAR,IAAiB,GAAzB,CAAd;AACA,MAAMC,KAAK,GAAG,QAAQjd,OAAO,CAACid,KAAR,IAAiB,IAAzB,CAAd;AAEA,MAAMC,OAAO,GAAGH,OAAO,CAACvH,GAAR,CAAY,UAACze,CAAD;AAAA,WAAO2lB,eAAe,CAAC3lB,CAAD,CAAf,GAAqBslB,MAA5B;AAAA,GAAZ,EACQ7G,GADR,CACYtiB,IAAI,CAAC4jB,KADjB,CAAhB;AAEA,MAAMqG,KAAK,GAAGJ,OAAO,CAACvH,GAAR,CAAYqH,aAAZ,CAAd;AAEA,MAAMO,UAAU,GAAG,EAAnB;AACA,MAAIC,cAAc,GAAG,CAArB;;AACA,OAAK,IAAI9oB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6gB,OAAO,CAACzgB,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvC,QAAM+oB,MAAM,GAAGJ,OAAO,CAAC3oB,CAAD,CAAP,GAAa8nB,MAA5B;AACA,QAAMkB,QAAQ,GAAG,CAACP,KAAK,GAAGM,MAAT,IAAmBL,KAAnB,GAA2B,EAA5C;AACA,QAAMO,QAAQ,GAAGtqB,IAAI,CAAC4jB,KAAL,CAAW,MAAMwG,MAAN,IAAgBN,KAAK,GAAGM,MAAxB,CAAX,CAAjB;AACAF,cAAU,CAACvoB,IAAX,CAAgB;AACd4oB,kBAAY,EAAKrB,SAAL,mBAA4B7nB,CAD1B;AAEdmpB,aAAO,EAAKtB,SAAL,cAAuB7nB,CAFhB;AAGd0C,OAAC,EAAEkmB,KAAK,CAAC5oB,CAAD,CAHM;AAIdyoB,WAAK,EAAKK,cAAL,MAJS;AAKdE,cAAQ,EAAKA,QAAL,MALM;AAMdC,cAAQ,EAAKA,QAAL,MANM;AAOdG,eAAS,gBAAcppB,CAPT;AAQdI,YAAM,EAAEuoB,OAAO,CAAC3oB,CAAD,CARD;AASd+oB,YAAM,EAAEA,MATM;AAUdM,aAAO,EAAE,IAAIV,OAAO,CAAC3oB,CAAD,CAVN;AAWdsgB,YAAM,EAAEO,OAAO,CAAC7gB,CAAD,CAXD;AAYduE,WAAK,EAAEujB;AAZO,KAAhB;AAcAgB,kBAAc,IAAIE,QAAlB;AACD;;AAED,SAAO;AAACH,cAAU,EAAEA,UAAb;AAAyBhI,WAAO,EAAEA;AAAlC,GAAP;AACD,CAjCD,C;;;;;;;;;;;;AC3BAiE,SAAO,CAAC6C,MAAR,CAAe;AAAC2B,UAAM,EAAC,YAAU;AAAC,aAAOA,MAAP;AAAc,KAAjC;AAAkCC,UAAM,EAAC,YAAU;AAAC,aAAOA,MAAP;AAAc,KAAlE;AAAmEC,gBAAY,EAAC,YAAU;AAAC,aAAOA,YAAP;AAAoB,KAA/G;AAAgHC,SAAK,EAAC,YAAU;AAAC,aAAOA,KAAP;AAAa,KAA9I;AAA+IC,SAAK,EAAC,YAAU;AAAC,aAAOA,KAAP;AAAa;AAA7K,GAAf;;AAAA;AACA,MAAMJ,MAAM,GAAG,UAACK,SAAD,EAAYC,OAAZ,EAAwB;AACrC,QAAI,CAACD,SAAL,EAAgB;AACdhf,aAAO,CAACkf,KAAR,CAAcD,OAAd;AACA,YAAM,IAAIE,KAAJ,EAAN;AACD;AACF,GALD;;AAOA,MAAMC,QAAQ,GAAG,UAACvnB,CAAD;AAAA,WAAOwnB,MAAM,CAACC,QAAP,CAAgBznB,CAAhB,KAAsB,CAACwnB,MAAM,CAACpqB,KAAP,CAAa4C,CAAb,CAA9B;AAAA,GAAjB;;AAEA,MAAMgnB,YAAY,GAAG,UAAC7U,MAAD;AAAA,WAAYuV,MAAM,CAACC,QAAP,GAAkBC,GAAG,CAAC7K,OAAJ,CAAY5K,MAAZ,CAAlB,GAAwC,IAApD;AAAA,GAArB;;AAEA,MAAI4U,MAAM,GAAG,IAAb;;AAEA,MAAIW,MAAM,CAACC,QAAX,EAAqB;AACnBD,UAAM,CAACG,UAAP,CAAkB,UAAlB;;AACA,QAAMnG,IAAI,GAAGkG,GAAG,CAAC7K,OAAJ,CAAY,MAAZ,CAAb;;AAEA,uBAAAgK,MAAM,GAAG,YAAM;AACb;AACA;AACA,aAAOe,OAAO,CAACC,GAAR,IAAeD,OAAO,CAACC,GAAR,CAAYC,GAA3B,GACHF,OAAO,CAACC,GAAR,CAAYC,GADT,GACetG,IAAI,CAACqE,IAAL,CAAU+B,OAAO,CAACG,GAAR,EAAV,EAAyB,aAAzB,CADtB;AAED,KALD;AAMD,G,CAED;AACA;;;AACA1qB,OAAK,CAACmC,SAAN,CAAgBwoB,MAAhB,GAAyB,YAAW;AAClC,QAAMrC,MAAM,GAAG,EAAf;AACA,QAAMsC,IAAI,GAAG,EAAb;AACA,SAAK1J,GAAL,CAAS,UAACze,CAAD,EAAO;AACd,UAAI,CAACmoB,IAAI,CAACnoB,CAAD,CAAT,EAAc;AACZ6lB,cAAM,CAAC/nB,IAAP,CAAYkC,CAAZ;AACAmoB,YAAI,CAACnoB,CAAD,CAAJ,GAAU,IAAV;AACD;AACF,KALD;AAMA,WAAO6lB,MAAP;AACD,GAVD,C,CAYA;AACA;;;AACAuC,QAAM,CAAC1oB,SAAP,CAAiB2oB,YAAjB,GAAgC,UAASC,OAAT,EAAkB;AAChD,QAAIzC,MAAM,GAAG,EAAb;;AACA,SAAK,IAAIroB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKI,MAAzB,EAAiCJ,CAAC,EAAlC,EAAsC;AACpCqoB,YAAM,IAAIyC,OAAO,CAAC,KAAK9qB,CAAL,CAAD,CAAP,GAAmB8qB,OAAO,CAAC,KAAK9qB,CAAL,CAAD,CAA1B,GAAsC,KAAKA,CAAL,CAAhD;AACD;;AACD,WAAOqoB,MAAP;AACD,GAND,C,CAQA;;;AACA,MAAMoB,KAAK,GAAG;AACZrE,YAAQ,EAAE,UAAC2F,MAAD,EAASC,MAAT,EAAoB;AAC5B,UAAI3C,MAAM,GAAG0C,MAAM,GAAGC,MAAtB;;AACA,UAAI3C,MAAM,GAAG,CAAC1pB,IAAI,CAACssB,EAAnB,EAAuB;AACrB5C,cAAM,IAAI,IAAE1pB,IAAI,CAACssB,EAAjB;AACD;;AACD,UAAI5C,MAAM,IAAI1pB,IAAI,CAACssB,EAAnB,EAAuB;AACrB5C,cAAM,IAAI,IAAE1pB,IAAI,CAACssB,EAAjB;AACD;;AACD,aAAO5C,MAAP;AACD,KAVW;AAWZ6C,WAAO,EAAE,UAAChD,IAAD;AAAA,aAAUA,IAAI,GAACA,IAAf;AAAA;AAXG,GAAd,C,CAcA;;AACA,MAAMwB,KAAK,GAAG;AACZ7mB,OAAG,EAAE,UAACmlB,MAAD,EAASC,MAAT;AAAA,aAAoB,CAACD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAAnB,EAAwBD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAA1C,CAApB;AAAA,KADO;AAEZvP,SAAK,EAAE,UAAC9E,KAAD;AAAA,aAAWjV,IAAI,CAACqb,KAAL,CAAWpG,KAAK,CAAC,CAAD,CAAhB,EAAqBA,KAAK,CAAC,CAAD,CAA1B,CAAX;AAAA,KAFK;AAGZ1Q,SAAK,EAAE,UAAC0Q,KAAD;AAAA,aAAW,CAACA,KAAK,CAAC,CAAD,CAAN,EAAWA,KAAK,CAAC,CAAD,CAAhB,CAAX;AAAA,KAHK;AAIZmU,aAJY,YAIFC,MAJE,EAIMC,MAJN,EAIc;AACxB,UAAIC,IAAI,GAAGwB,KAAK,CAACtE,QAAN,CAAe4C,MAAf,EAAuBC,MAAvB,CAAX;AACA,aAAOtpB,IAAI,CAACuM,GAAL,CAASgd,IAAI,CAAC,CAAD,CAAb,EAAkB,CAAlB,IAAuBvpB,IAAI,CAACuM,GAAL,CAASgd,IAAI,CAAC,CAAD,CAAb,EAAkB,CAAlB,CAA9B;AACD,KAPW;AAQZiD,OAAG,EAAE,UAACnD,MAAD,EAASC,MAAT;AAAA,aAAoBD,MAAM,CAAC,CAAD,CAAN,GAAUC,MAAM,CAAC,CAAD,CAAhB,GAAsBD,MAAM,CAAC,CAAD,CAAN,GAAUC,MAAM,CAAC,CAAD,CAA1D;AAAA,KARO;AASZmD,SAAK,EAAE,UAACpD,MAAD,EAASC,MAAT;AAAA,aAAoBD,MAAM,CAAC,CAAD,CAAN,KAAcC,MAAM,CAAC,CAAD,CAApB,IAA2BD,MAAM,CAAC,CAAD,CAAN,KAAcC,MAAM,CAAC,CAAD,CAAnE;AAAA,KATK;AAUZoD,OAAG,EAAE,UAACzX,KAAD;AAAA,aAAWA,KAAK,CAAC2U,IAAN,CAAW,GAAX,CAAX;AAAA,KAVO;AAWZ+C,YAAQ,EAAE,UAACtD,MAAD,EAASC,MAAT,EAAoB;AAC5B,aAAO,CAAC,CAACD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAAnB,IAAwB,CAAzB,EAA4B,CAACD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAAnB,IAAwB,CAApD,CAAP;AACD,KAbW;AAcZ7C,YAAQ,EAAE,UAAC4C,MAAD,EAASC,MAAT;AAAA,aAAoB,CAACD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAAnB,EAAwBD,MAAM,CAAC,CAAD,CAAN,GAAYC,MAAM,CAAC,CAAD,CAA1C,CAApB;AAAA,KAdE;AAeZsD,SAAK,EAAE,UAAC3X,KAAD;AAAA,aAAWmW,QAAQ,CAACnW,KAAK,CAAC,CAAD,CAAN,CAAR,IAAsBmW,QAAQ,CAACnW,KAAK,CAAC,CAAD,CAAN,CAAzC;AAAA;AAfK,GAAd;;;;;;;;;;;;AClEA,IAAI4X,cAAJ;;AAAmB7W,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC2sB,kBAAc,GAAC3sB,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAAnB8V,MAAM,CAACgT,MAAP,CAAc;AAAC8D,QAAM,EAAC,YAAU;AAAC,WAAOA,MAAP;AAAc;AAAjC,CAAd;AAAkD,IAAInC,MAAJ,EAAWC,MAAX,EAAkBC,YAAlB;AAA+B7U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS,GAA7B;AAA8B0qB,QAAM,EAAC,UAAS1qB,CAAT,EAAW;AAAC0qB,UAAM,GAAC1qB,CAAP;AAAS,GAA1D;AAA2D2qB,cAAY,EAAC,UAAS3qB,CAAT,EAAW;AAAC2qB,gBAAY,GAAC3qB,CAAb;AAAe;AAAnG,CAAxB,EAA6H,CAA7H;AAEjF,IAAM6sB,EAAE,GAAGlC,YAAY,CAAC,IAAD,CAAvB;AACA,IAAMtF,IAAI,GAAGsF,YAAY,CAAC,MAAD,CAAzB;AAEA,IAAMmC,gBAAgB,GAAG,CAAC,WAAD,EAAc,eAAd,EAA+B,YAA/B,EACC,WADD,EACc,cADd,EAC8B,QAD9B,EAEC,YAFD,EAEe,SAFf,EAE0B,aAF1B,CAAzB;AAIA,IAAMF,MAAM,GAAG;AACbG,YAAU,EAAE,EADC;AAEbC,QAAM,EAAE,EAFK;AAGbC,SAAO,EAAEtX,SAHI;AAIbuX,UAAQ,EAAE;AACRC,mBAAe,EAAE,EADT;AAERC,wBAAoB,EAAE,EAFd;AAGRC,wBAAoB,EAAE,EAHd;AAIRC,4BAAwB,EAAE;AAJlB,GAJG;AAUbC,kBAVa,YAUIxL,SAVJ,EAUe;AAC1B,QAAMyH,MAAM,GAAG,EAAf;AACAsD,oBAAgB,CAAC1K,GAAjB,CAAqB,UAACoL,KAAD;AAAA,aACjBhE,MAAM,CAACgE,KAAD,CAAN,GAAgBZ,MAAM,CAACG,UAAP,CAAkBS,KAAlB,EAAyBzL,SAAzB,CADC;AAAA,KAArB;AAEAyH,UAAM,CAACzH,SAAP,GAAmBA,SAAnB;AACAyH,UAAM,CAACiE,WAAP,GAAqBjE,MAAM,CAACiE,WAAP,IAAsB,EAA3C;AACA,WAAOjE,MAAP;AACD;AAjBY,CAAf;AAoBAsD,gBAAgB,CAAC1K,GAAjB,CAAqB,UAACoL,KAAD;AAAA,SAAWZ,MAAM,CAACG,UAAP,CAAkBS,KAAlB,IAA2B,EAAtC;AAAA,CAArB,E,CAEA;AACA;;AACA,IAAME,aAAa,GAAG,UAACvnB,IAAD,EAAU;AAC9B,MAAMwnB,KAAK,GAAGxnB,IAAI,CAACke,KAAL,CAAW,IAAX,CAAd;AACA,SAAOsJ,KAAK,CAAC1L,MAAN,CAAa,UAAC2L,IAAD;AAAA,WAAUA,IAAI,CAACrsB,MAAL,GAAc,CAAd,IAAmBqsB,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAzC;AAAA,GAAb,EACMxL,GADN,CACU,UAACwL,IAAD;AAAA,WAAUA,IAAI,CAACvJ,KAAL,CAAW,GAAX,EAAgBjC,GAAhB,CACX,UAACyL,KAAD;AAAA,aAAWA,KAAK,CAAC/K,OAAN,CAAc,OAAd,EAAuB,EAAvB,CAAX;AAAA,KADW,CAAV;AAAA,GADV,CAAP;AAGD,CALD,C,CAOA;AACA;;;AACA,IAAMgL,gBAAgB,GAAG,UAAC3nB,IAAD,EAAU;AACjC,MAAMwnB,KAAK,GAAGxnB,IAAI,CAACke,KAAL,CAAW,IAAX,CAAd;AACA,SAAOsJ,KAAK,CAAC1L,MAAN,CAAa,UAAC2L,IAAD;AAAA,WAAUA,IAAI,CAACrsB,MAAL,GAAc,CAAd,IAAmBqsB,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAzC;AAAA,GAAb,EACMxL,GADN,CACU,UAACwL,IAAD;AAAA,WAAUA,IAAI,CAACvJ,KAAL,CAAW,IAAX,CAAV;AAAA,GADV,CAAP;AAED,CAJD,C,CAMA;AACA;;;AACA,IAAM0J,aAAa,GAAG,UAAC5nB,IAAD,EAAU;AAC9B,MAAMwnB,KAAK,GAAGxnB,IAAI,CAACke,KAAL,CAAW,IAAX,CAAd;AACA,SAAOsJ,KAAK,CAAC1L,MAAN,CAAa,UAAC2L,IAAD;AAAA,WAAUA,IAAI,CAACrsB,MAAL,GAAc,CAAd,IAAmBqsB,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAzC;AAAA,GAAb,EACMxL,GADN,CACU,UAACwL,IAAD;AAAA,WAAUA,IAAI,CAACvJ,KAAL,CAAW,IAAX,CAAV;AAAA,GADV,CAAP;AAED,CAJD,C,CAMA;AACA;;;AACA,IAAM2J,eAAe,GACjB,UAACC,GAAD;AAAA,SAASlC,MAAM,CAACmC,aAAP,CAAqBC,QAAQ,CAACF,GAAG,CAACG,MAAJ,CAAW,CAAX,CAAD,EAAgB,EAAhB,CAA7B,CAAT;AAAA,CADJ,C,CAGA;AACA;;;AACA,IAAMC,QAAQ,GAAG,UAACC,QAAD;AAAA,SAAc,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC9D,QAAIpD,MAAM,CAACC,QAAX,EAAqB;AACnB,UAAMoD,QAAQ,GAAGrJ,IAAI,CAACqE,IAAL,CAAUgB,MAAM,EAAhB,EAAoB,QAApB,EAA8B4D,QAA9B,CAAjB;AACAzB,QAAE,CAACwB,QAAH,CAAYK,QAAZ,EAAsB,MAAtB,EAA8B,UAAC1D,KAAD,EAAQ7kB,IAAR,EAAiB;AAC7C,YAAI6kB,KAAJ,EAAW,MAAMA,KAAN;AACXwD,eAAO,CAACroB,IAAD,CAAP;AACD,OAHD;AAID,KAND,MAMO;AACLwoB,OAAC,CAACjrB,GAAF,CAAM4qB,QAAN,EAAgB,UAACnoB,IAAD,EAAOyoB,IAAP,EAAgB;AAC9B,YAAIA,IAAI,KAAK,SAAb,EAAwB,MAAM,IAAI3D,KAAJ,CAAU2D,IAAV,CAAN;AACxBJ,eAAO,CAACroB,IAAD,CAAP;AACD,OAHD;AAID;AACF,GAb8B,CAAd;AAAA,CAAjB,C,CAeA;AAEA;AACA;AACA;;;AACA,IAAM0oB,kBAAkB,GAAG,UAACC,cAAD,EAAiBC,MAAjB,EAAyBvF,MAAzB,EAAoC;AAC7D,SAAO+E,OAAO,CAACS,GAAR,CAAY,CAACF,cAAD,EAAiBC,MAAjB,CAAZ,EAAsCE,IAAtC,CAA2C,gBAAoB;AAAA;AAAA,QAAlBC,IAAkB;AAAA,QAAZH,MAAY;;AACpEG,QAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,aAAShB,QAAQ,CAACgB,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAR,MAA0BJ,MAAM,CAACI,GAAG,CAAC,CAAD,CAAJ,CAAN,IAAkB,CAA5C,CAAT;AAAA,KAAZ,EACK/M,GADL,CACS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAAC2F,GAAG,CAAC,CAAD,CAAJ,CAAN,GAAiBA,GAAG,CAAC,CAAD,CAA7B;AAAA,KADT;AAED,GAHM,CAAP;AAID,CALD,C,CAOA;;;AACA,IAAMC,eAAe,GAAG,UAACC,QAAD,EAAW7F,MAAX,EAAsB;AAC5C,SAAO6F,QAAQ,CAACJ,IAAT,CAAc,UAACC,IAAD,EAAU;AAC7BA,QAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,aAASA,GAAG,CAAC,CAAD,CAAH,KAAW,aAApB;AAAA,KAAZ,EACK/M,GADL,CACS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAACwE,eAAe,CAACmB,GAAG,CAAC,CAAD,CAAJ,CAAhB,CAAN,GAAkCA,GAAG,CAAC,CAAD,CAA9C;AAAA,KADT;AAED,GAHM,CAAP;AAID,CALD,C,CAOA;;;AACA,IAAMG,eAAe,GAAG,UAACD,QAAD,EAAW7F,MAAX,EAAsB;AAC5C,SAAO6F,QAAQ,CAACJ,IAAT,CAAc,UAACC,IAAD,EAAU;AAC7BA,QAAI,CAAC9M,GAAL,CAAS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAAC2F,GAAG,CAAC,CAAD,CAAJ,CAAN,GAAiBhB,QAAQ,CAACgB,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAlC;AAAA,KAAT;AACD,GAFM,CAAP;AAGD,CAJD,C,CAMA;AACA;;;AACA,IAAMI,eAAe,GAAG,UAACF,QAAD,EAAW7F,MAAX,EAAsB;AAC5C,SAAO6F,QAAQ,CAACJ,IAAT,CAAc,UAACC,IAAD,EAAU;AAC7B,QAAMM,QAAQ,GAAG,UAACC,KAAD;AAAA,aAAWA,KAAK,CAACpL,KAAN,CAAY,GAAZ,EAAiBjC,GAAjB,CAAqB,UAACze,CAAD;AAAA,eAAOwqB,QAAQ,CAACxqB,CAAD,EAAI,EAAJ,CAAf;AAAA,OAArB,CAAX;AAAA,KAAjB;;AACAurB,QAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,aAASA,GAAG,CAAC,CAAD,CAAH,KAAW,WAApB;AAAA,KAAZ,EACK/M,GADL,CACS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAACwE,eAAe,CAACmB,GAAG,CAAC,CAAD,CAAJ,CAAhB,CAAN,GAAkCK,QAAQ,CAACL,GAAG,CAAC,CAAD,CAAJ,CAAnD;AAAA,KADT;AAED,GAJM,CAAP;AAKD,CAND,C,CAQA;;;AACA,IAAMO,UAAU,GAAG,UAACL,QAAD,EAAW7F,MAAX,EAAsB;AACvC,SAAO6F,QAAQ,CAACJ,IAAT,CAAc,UAACC,IAAD,EAAU;AAC7BA,QAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,aAASA,GAAG,CAAC,CAAD,CAAH,KAAW,WAApB;AAAA,KAAZ,EACK/M,GADL,CACS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAACwE,eAAe,CAACmB,GAAG,CAAC,CAAD,CAAJ,CAAhB,CAAN,GAAkCA,GAAG,CAAC,CAAD,CAA9C;AAAA,KADT;AAED,GAHM,CAAP;AAID,CALD,C,CAOA;;;AACA,IAAMQ,gBAAgB,GAAG,UAACC,oBAAD,EAAuBpG,MAAvB,EAAkC;AACzD,SAAOoG,oBAAoB,CAACX,IAArB,CAA0B,UAACC,IAAD,EAAU;AACzCA,QAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,aAASA,GAAG,CAAC,CAAD,CAAH,KAAW,eAApB;AAAA,KAAZ,EACK/M,GADL,CACS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAACwE,eAAe,CAACmB,GAAG,CAAC,CAAD,CAAJ,CAAhB,CAAN,GAAkChB,QAAQ,CAACgB,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAnD;AAAA,KADT;AAED,GAHM,CAAP;AAID,CALD,C,CAOA;AACA;AACA;AACA;;;AACA,IAAMU,eAAe,GAAG,UAACC,MAAD,EAAS5C,QAAT,EAAmB1D,MAAnB,EAA8B;AACpD,SAAO0D,QAAQ,CAAC+B,IAAT,CAAc,UAACC,IAAD,EAAU;AAC7BA,QAAI,CAAC9M,GAAL,CAAS,UAAC+M,GAAD,EAAS;AAChB,UAAI,CAAC3F,MAAM,CAAC4D,oBAAP,CAA4B2C,cAA5B,CAA2CZ,GAAG,CAAC,CAAD,CAA9C,CAAL,EAAyD;AACvD3F,cAAM,CAAC4D,oBAAP,CAA4B+B,GAAG,CAAC,CAAD,CAA/B,IAAsC,EAAtC;AACD;;AACD3F,YAAM,CAAC4D,oBAAP,CAA4B+B,GAAG,CAAC,CAAD,CAA/B,EAAoC1tB,IAApC,CAAyC0tB,GAAG,CAAC,CAAD,CAA5C;AACA3F,YAAM,CAAC6D,oBAAP,CAA4B8B,GAAG,CAAC,CAAD,CAA/B,IAAsCA,GAAG,CAAC,CAAD,CAAzC;;AACA,UAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,GAAX,IAAkBA,GAAG,CAAC,CAAD,CAAH,CAAOrH,OAAP,CAAegI,MAAf,KAA0B,CAAhD,EAAmD;AACjDtG,cAAM,CAAC2D,eAAP,CAAuBgC,GAAG,CAAC,CAAD,CAA1B,IAAiCA,GAAG,CAAC,CAAD,CAApC;AACD;AACF,KATD;AAUD,GAXM,CAAP;AAYD,CAbD,C,CAeA;AACA;AACA;;;AACA,IAAMa,yBAAyB,GAC3B,UAACF,MAAD,EAASG,6BAAT,EAAwCzG,MAAxC,EAAmD;AACrD,SAAOyG,6BAA6B,CAAChB,IAA9B,CAAmC,UAACC,IAAD,EAAU;AAClDA,QAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,aAASA,GAAG,CAAC,CAAD,CAAH,CAAOrH,OAAP,CAAegI,MAAf,KAA0B,CAAnC;AAAA,KAAZ,EACK1N,GADL,CACS,UAAC+M,GAAD;AAAA,aAAS3F,MAAM,CAAC2F,GAAG,CAAC,CAAD,CAAJ,CAAN,GAAiBA,GAAG,CAAC,CAAD,CAA7B;AAAA,KADT;AAED,GAHM,CAAP;AAID,CAND,C,CAQA;AACA;;;AACA,IAAMe,YAAY,GAAG,UAAC9a,UAAD,EAAaqY,WAAb,EAA0B0C,QAA1B,EAAuC;AAC1D,SAAOA,QAAQ,CAAClB,IAAT,CAAc,UAACC,IAAD,EAAU;AAC7BA,QAAI,CAAC9M,GAAL,CAAS,UAAC+M,GAAD,EAAS;AAChB,UAAKA,GAAG,CAAC,CAAD,CAAH,KAAW,oBAAX,IACAA,GAAG,CAAC,CAAD,CAAH,KAAW,qBADZ,IAEAA,GAAG,CAAC,CAAD,CAAH,KAAWA,GAAG,CAAC,CAAD,CAFd,IAEqBA,GAAG,CAAC,CAAD,CAAH,KAAW,SAFpC,EAE+C;AAC7C;AACA;AACD;;AACD,UAAIiB,MAAM,GAAGpC,eAAe,CAACmB,GAAG,CAAC,CAAD,CAAJ,CAA5B;AACA,UAAIkB,MAAM,GAAGrC,eAAe,CAACmB,GAAG,CAAC,CAAD,CAAJ,CAA5B;AACA,UAAM9K,KAAK,GAAG8K,GAAG,CAAC,CAAD,CAAH,CAAO9K,KAAP,CAAa,GAAb,CAAd,CATgB,CAUhB;AACA;AACA;;AACA,UAAIA,KAAK,CAAC9iB,MAAN,KAAiB,CAAjB,IACA,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+BumB,OAA/B,CAAuCqH,GAAG,CAAC,CAAD,CAA1C,KAAkD,CADtD,EACyD;AACvDkB,cAAM,GAAGrC,eAAe,CAAC3J,KAAK,CAAC,CAAD,CAAN,CAAxB;AACD;;AACD,UAAI+L,MAAM,KAAKC,MAAf,EAAuB;AACrB;AACD,OAFD,MAEO,IAAIlB,GAAG,CAAC,CAAD,CAAH,KAAW,qBAAf,EAAsC;AAC3C,YAAMmB,IAAI,GAAGD,MAAb;AACAA,cAAM,GAAGD,MAAT;AACAA,cAAM,GAAGE,IAAT;AACD,OAvBe,CAwBhB;AACA;;;AACA7F,YAAM,CAAC,CAACrV,UAAU,CAACgb,MAAD,CAAX,IAAuBhb,UAAU,CAACgb,MAAD,CAAV,KAAuBC,MAA/C,CAAN;AACAjb,gBAAU,CAACgb,MAAD,CAAV,GAAqBC,MAArB;AACA5C,iBAAW,CAAC4C,MAAD,CAAX,GAAsBE,CAAC,CAAC1E,MAAF,CAClB,CAAC4B,WAAW,CAAC4C,MAAD,CAAX,IAAuB,EAAxB,EAA4BlQ,MAA5B,CAAmC,CAACiQ,MAAD,CAAnC,CADkB,CAAtB;AAED,KA9BD;AA+BD,GAhCM,CAAP;AAiCD,CAlCD,C,CAoCA;;;AACA,IAAMI,UAAU,GAAG,UAACrqB,IAAD,EAAOqjB,MAAP,EAAkB;AACnCtoB,OAAK,CAACuvB,IAAN,CAAWtqB,IAAX,EAAiBic,GAAjB,CAAqB,UAACL,SAAD,EAAe;AAClC,QAAIA,SAAS,KAAK,IAAlB,EAAwB;AACxB0I,UAAM,CAAC1I,SAAS,CAACxgB,MAAV,KAAqB,CAAtB,CAAN;AACA,QAAMmvB,SAAS,GAAG3O,SAAS,CAAC4O,WAAV,CAAsB,CAAtB,CAAlB;AACAlG,UAAM,CAAC,UAAUiG,SAAV,IAAuBA,SAAS,IAAI,MAArC,CAAN;AACAlH,UAAM,CAACzH,SAAD,CAAN,GAAoB,IAApB;AACD,GAND;AAOA0I,QAAM,CAACrnB,MAAM,CAACwtB,IAAP,CAAYpH,MAAZ,EAAoBjoB,MAApB,KAA+B,IAAhC,CAAN;AACD,CATD,C,CAWA;AACA;;;AACA,IAAMsvB,mBAAmB,GAAG,UAACf,MAAD,EAASZ,IAAT,EAAkB;AAC5C,MAAM1F,MAAM,GAAG,EAAf;AACA0F,MAAI,CAACjN,MAAL,CAAY,UAACkN,GAAD;AAAA,WAASA,GAAG,CAAC,CAAD,CAAH,CAAOrH,OAAP,CAAegI,MAAf,KAA0B,CAAnC;AAAA,GAAZ,EACK1N,GADL,CACS,UAAC+M,GAAD;AAAA,WAAS3F,MAAM,CAAC2F,GAAG,CAAC,CAAD,CAAJ,CAAN,GAAiBhB,QAAQ,CAACgB,GAAG,CAAC,CAAD,CAAJ,EAAS,EAAT,CAAlC;AAAA,GADT;AAEA,SAAO3F,MAAP;AACD,CALD,C,CAOA;;;AAEA,IAAMsH,iBAAiB,GAAG,YAAM;AAC9B,MAAM/D,UAAU,GAAGH,MAAM,CAACG,UAA1B;AACA,MAAMG,QAAQ,GAAGN,MAAM,CAACM,QAAxB;;AACA,MAAM6D,yBAAyB,GAAG,UAACptB,CAAD;AAAA,WAAOA,CAAC,CAACpC,MAAF,KAAa,CAAb,GAAiBoC,CAAjB,GAAqB,GAA5B;AAAA,GAAlC;;AACA,MAAMqtB,oBAAoB,GAAG,UAACrtB,CAAD;AAAA,WAAOupB,QAAQ,CAACI,wBAAT,CAAkC3pB,CAAlC,KAAwCA,CAA/C;AAAA,GAA7B;;AACAP,QAAM,CAACwtB,IAAP,CAAY7D,UAAU,CAACkE,aAAvB,EAAsC7O,GAAtC,CAA0C,UAACL,SAAD,EAAe;AACvD;AACA;AACA;AACA,QAAMkP,aAAa,GAAGlE,UAAU,CAACkE,aAAX,CAAyBlP,SAAzB,CAAtB;AACAgL,cAAU,CAACkE,aAAX,CAAyBlP,SAAzB,IACI7gB,KAAK,CAACuvB,IAAN,CAAWQ,aAAX,EAA0B7O,GAA1B,CAA8B2O,yBAA9B,EAC0B3O,GAD1B,CAC8B4O,oBAD9B,EACoDtH,IADpD,CACyD,EADzD,CADJ;AAGD,GARD;;AASA,OAAK,IAAIvoB,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,GAArB,EAA0BA,CAAC,EAA3B,EAA+B;AAC7B;AACA,QAAM+vB,OAAO,GAAGhE,QAAQ,CAACC,eAAT,CAAyBhsB,CAAzB,CAAhB;AACAspB,UAAM,CAACyC,QAAQ,CAACI,wBAAT,CAAkCyC,cAAlC,CAAiDmB,OAAjD,CAAD,CAAN;AACAhE,YAAQ,CAACC,eAAT,CAAyBhsB,CAAzB,IAA8B+rB,QAAQ,CAACI,wBAAT,CAAkC4D,OAAlC,CAA9B;AACAhE,YAAQ,CAACE,oBAAT,CAA8BjsB,CAA9B,IACI+rB,QAAQ,CAACE,oBAAT,CAA8BjsB,CAA9B,EAAiCihB,GAAjC,CAAqC4O,oBAArC,EAA2DnF,MAA3D,EADJ;AAED;;AACDzoB,QAAM,CAACwtB,IAAP,CAAY1D,QAAQ,CAACG,oBAArB,EAA2CjL,GAA3C,CAA+C,UAAC+O,OAAD,EAAa;AAC1D,QAAMpP,SAAS,GAAGiP,oBAAoB,CAACG,OAAD,CAAtC;;AACA,QAAIpP,SAAS,KAAKoP,OAAlB,EAA2B;AACzBjE,cAAQ,CAACG,oBAAT,CAA8BtL,SAA9B,IACImL,QAAQ,CAACG,oBAAT,CAA8B8D,OAA9B,CADJ;AAEA,aAAOjE,QAAQ,CAACG,oBAAT,CAA8B8D,OAA9B,CAAP;AACD;AACF,GAPD;AAQA,SAAOjE,QAAQ,CAACI,wBAAhB;AACD,CA/BD;;AAiCAjC,MAAM,CAAC+F,OAAP,CAAe,YAAM;AACnB;AACA,MAAMtB,MAAM,GAAG,GAAf;AACA,MAAMmB,aAAa,GACf5C,QAAQ,CAAC,mCAAD,CAAR,CAA8CY,IAA9C,CAAmDvB,aAAnD,CADJ;AAEA,MAAMqB,MAAM,GAAGV,QAAQ,CAAC,iCAAD,CAAR,CACKY,IADL,CACUvB,aADV,EAEKuB,IAFL,CAEU4B,mBAAmB,CAACQ,IAApB,CAAyB,IAAzB,EAA+BvB,MAA/B,CAFV,CAAf;AAGA,MAAM5C,QAAQ,GAAGmB,QAAQ,CAAC,0BAAD,CAAR,CAAqCY,IAArC,CAA0CvB,aAA1C,CAAjB;AACA,MAAMuC,6BAA6B,GAC/B5B,QAAQ,CAAC,uCAAD,CAAR,CAAkDY,IAAlD,CAAuDvB,aAAvD,CADJ;AAEA,MAAM4D,2BAA2B,GAC7BjD,QAAQ,CAAC,2CAAD,CAAR,CAAsDY,IAAtD,CAA2DvB,aAA3D,CADJ,CAXmB,CAcnB;;AACA,MAAM6D,WAAW,GAAGlD,QAAQ,CAAC,+BAAD,CAAR,CACKY,IADL,CACUnB,gBADV,CAApB,CAfmB,CAkBnB;;AACA,MAAM8B,oBAAoB,GACtBvB,QAAQ,CAAC,sCAAD,CAAR,CAAiDY,IAAjD,CAAsDlB,aAAtD,CADJ;AAEA,MAAMyD,qBAAqB,GACvBnD,QAAQ,CAAC,uCAAD,CAAR,CAAkDY,IAAlD,CAAuDlB,aAAvD,CADJ;AAEA,MAAMsB,QAAQ,GAAGhB,QAAQ,CAAC,4BAAD,CAAR,CAAuCY,IAAvC,CAA4ClB,aAA5C,CAAjB;AACA,MAAMoC,QAAQ,GAAG9B,QAAQ,CAAC,4BAAD,CAAR,CAAuCY,IAAvC,CAA4ClB,aAA5C,CAAjB;AAEAnB,QAAM,CAACK,OAAP,GAAiBsB,OAAO,CAACS,GAAR,CAAY,CACzB;AACAH,oBAAkB,CAACoC,aAAD,EAAgBlC,MAAhB,EACCnC,MAAM,CAACG,UAAP,CAAkBkE,aADnB,CAFO,EAIzB7B,eAAe,CAACC,QAAD,EAAWzC,MAAM,CAACG,UAAP,CAAkB0E,UAA7B,CAJU,EAKzBnC,eAAe,CAACiC,WAAD,EAAc3E,MAAM,CAACG,UAAP,CAAkB2E,SAAhC,CALU,EAMzBnC,eAAe,CAACiC,qBAAD,EAAwB5E,MAAM,CAACG,UAAP,CAAkB4E,YAA1C,CANU,EAOzBjC,UAAU,CAACL,QAAD,EAAWzC,MAAM,CAACG,UAAP,CAAkB6E,MAA7B,CAPe,EAQzBjC,gBAAgB,CAACC,oBAAD,EAAuBhD,MAAM,CAACG,UAAP,CAAkB/K,OAAzC,CARS,EASzB;AACA6N,iBAAe,CAACC,MAAD,EAAS5C,QAAT,EAAmBN,MAAM,CAACM,QAA1B,CAVU,EAWzB2C,eAAe,CAACC,MAAD,EAASwB,2BAAT,EAAsC1E,MAAM,CAACM,QAA7C,CAXU,EAYzB8C,yBAAyB,CAACF,MAAD,EAASG,6BAAT,EACCrD,MAAM,CAACM,QAAP,CAAgBI,wBADjB,CAZA,EAczB4C,YAAY,CAACtD,MAAM,CAACG,UAAP,CAAkB3X,UAAnB,EACCwX,MAAM,CAACG,UAAP,CAAkBU,WADnB,EACgC0C,QADhC,CAda,EAgBzB;AACA9B,UAAQ,CAAC,QAAD,CAAR,CAAmBY,IAAnB,CAAwB,UAAC9oB,IAAD;AAAA,WAAUqqB,UAAU,CAACrqB,IAAD,EAAOymB,MAAM,CAACI,MAAd,CAApB;AAAA,GAAxB,CAjByB,CAAZ,EAkBdiC,IAlBc,CAkBT6B,iBAlBS,CAAjB;AAmBAlE,QAAM,CAACK,OAAP,CAAe4E,KAAf,CAAqB/lB,OAAO,CAACkf,KAAR,CAAcqG,IAAd,CAAmBvlB,OAAnB,CAArB;AACD,CA9CD,E;;;;;;;;;;;AC/PA,IAAIgmB,wCAAJ;AAA6Chc,MAAM,CAACoQ,IAAP,CAAY,UAAZ,EAAuB;AAAC4L,0CAAwC,EAAC,UAAS9xB,CAAT,EAAW;AAAC8xB,4CAAwC,GAAC9xB,CAAzC;AAA2C;AAAjG,CAAvB,EAA0H,CAA1H;AAA6H,IAAI+xB,gBAAJ;AAAqBjc,MAAM,CAACoQ,IAAP,CAAY,uBAAZ,EAAoC;AAAC6L,kBAAgB,EAAC,UAAS/xB,CAAT,EAAW;AAAC+xB,oBAAgB,GAAC/xB,CAAjB;AAAmB;AAAjD,CAApC,EAAuF,CAAvF;AAG/LqrB,MAAM,CAAC+F,OAAP,CAAe,YAAM;AACnB,MAAMY,KAAK,GAAG,IAAIzyB,SAAS,CAACyD,GAAd,CAAkB,CAAlB,EAAqB,CAArB,EAAwB;AAAE;AAA1B,GAAd;AACA,MAAMkL,GAAG,GAAG,IAAI3O,SAAS,CAACoN,GAAd,EAAZ;AACAuB,KAAG,CAACtJ,QAAJ,CAAaktB,wCAAb;AACA,MAAMG,MAAM,GAAG,GAAf;;AAEA,MAAMC,iBAAiB,GAAG,UAACC,QAAD,EAAc;AACtCH,SAAK,CAACrwB,CAAN,GAAUwwB,QAAV;AACA,QAAMC,OAAO,GAAGlkB,GAAG,CAAC3G,OAAJ,CAAYyqB,KAAZ,EAAmBrwB,CAAnC;AACA,WAAOywB,OAAO,CAAC,CAAD,CAAP,GAAaA,OAAO,CAAC,CAAD,CAA3B;AACD,GAJD;;AAMAL,kBAAgB,CAACM,kBAAjB,GAAsC,UAACF,QAAD,EAAc;AAClD,WAAOJ,gBAAgB,CAACO,mBAAjB,CAAqCH,QAArC,IACAF,MAAM,GAACC,iBAAiB,CAACC,QAAD,CAD/B;AAED,GAHD;AAID,CAhBD,E;;;;;;;;;;;ACHA,IAAItJ,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAApC8V,MAAM,CAACgT,MAAP,CAAc;AAACyJ,oBAAkB,EAAC,YAAU;AAAC,WAAOA,kBAAP;AAA0B;AAAzD,CAAd;AAA0E,IAAI9H,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAErF,IAAMuyB,kBAAkB,GAAG,EAA3B;AAEAA,kBAAkB,CAACC,QAAnB,GAA8B;AAC5B,OAAK;AAACC,SAAK,EAAE,eAAR;AAAyBC,SAAK,EAAE;AAAhC,GADuB;AAE5B,OAAK;AAACD,SAAK,EAAE,eAAR;AAAyBC,SAAK,EAAE;AAAhC,GAFuB;AAG5B,OAAK;AAACD,SAAK,EAAE,UAAR;AAAoBC,SAAK,EAAE;AAA3B,GAHuB;AAI5B,OAAK;AAACD,SAAK,EAAE,qBAAR;AAA+BC,SAAK,EAAE;AAAtC,GAJuB;AAK5B,OAAK;AAACD,SAAK,EAAE,qBAAR;AAA+BC,SAAK,EAAE;AAAtC,GALuB;AAM5B,OAAK;AAACD,SAAK,EAAE,oBAAR;AAA8BC,SAAK,EAAE;AAArC,GANuB;AAO5B,OAAK;AAACD,SAAK,EAAE,0BAAR;AAAoCC,SAAK,EAAE;AAA3C,GAPuB;AAQ5B,OAAK;AAACD,SAAK,EAAE,2BAAR;AAAqCC,SAAK,EAAE;AAA5C,GARuB;AAS5B,OAAK;AAACD,SAAK,EAAE,0BAAR;AAAoCC,SAAK,EAAE;AAA3C,GATuB;AAU5B,OAAK;AAACD,SAAK,EAAE,UAAR;AAAoBC,SAAK,EAAE;AAA3B,GAVuB;AAW5B,OAAK;AAACD,SAAK,EAAE,yBAAR;AAAmCC,SAAK,EAAE;AAA1C,GAXuB;AAY5B,OAAK;AAACD,SAAK,EAAE,yBAAR;AAAmCC,SAAK,EAAE;AAA1C;AAZuB,CAA9B;AAcAH,kBAAkB,CAACI,gCAAnB,GACIvvB,MAAM,CAACwtB,IAAP,CAAY2B,kBAAkB,CAACC,QAA/B,CADJ;AAGA,IAAMI,iBAAiB,GAAG,GAA1B;;AAEA,IAAMC,uBAAuB,GAAG,UAACC,IAAD,EAAOzN,IAAP,EAAgB;AAC9CyN,MAAI,CAACzN,IAAL,GAAYA,IAAZ;AACA,MAAM0N,QAAQ,GAAG,CAACD,IAAI,CAACC,QAAL,IAAiB,EAAlB,EAAsBxxB,MAAvC;;AACA,OAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4xB,QAApB,EAA8B5xB,CAAC,EAA/B,EAAmC;AACjC0xB,2BAAuB,CAACC,IAAI,CAACC,QAAL,CAAc5xB,CAAd,CAAD,EAAmBkkB,IAAI,CAAClF,MAAL,CAAY,CAAChf,CAAD,CAAZ,CAAnB,CAAvB;AACD;;AACD,SAAO2xB,IAAP;AACD,CAPD;;AASA,IAAME,YAAY,GAAG,UAAC/B,aAAD,EAAgB3b,KAAhB,EAA0B;AAC7CmV,QAAM,CAACnV,KAAK,CAAC,CAAD,CAAL,GAAW2b,aAAa,CAAC1vB,MAA1B,gCAC6B0vB,aAD7B,OAAN;AAEA,MAAMgC,OAAO,GAAGhC,aAAa,CAAC3b,KAAK,CAAC,CAAD,CAAN,CAA7B;AACAA,OAAK,CAAC,CAAD,CAAL,IAAY,CAAZ;;AACA,MAAIid,kBAAkB,CAACC,QAAnB,CAA4BzC,cAA5B,CAA2CkD,OAA3C,CAAJ,EAAyD;AACvD,QAAMzJ,MAAM,GAAG;AAACxc,UAAI,EAAE,UAAP;AAAmBkmB,WAAK,EAAED,OAA1B;AAAmCF,cAAQ,EAAE;AAA7C,KAAf;;AACA,SAAK,IAAI5xB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoxB,kBAAkB,CAACC,QAAnB,CAA4BS,OAA5B,EAAqCP,KAAzD,EAAgEvxB,CAAC,EAAjE,EAAqE;AACnEqoB,YAAM,CAACuJ,QAAP,CAAgBtxB,IAAhB,CAAqBuxB,YAAY,CAAC/B,aAAD,EAAgB3b,KAAhB,CAAjC;AACD;;AACD,WAAOkU,MAAP;AACD,GAND,MAMO,IAAIyJ,OAAO,KAAKL,iBAAhB,EAAmC;AACxC,WAAO;AAAC5lB,UAAI,EAAE,WAAP;AAAoBkmB,WAAK,EAAE;AAA3B,KAAP;AACD,GAb4C,CAc7C;AACA;;;AACA,MAAIjC,aAAa,CAAC3b,KAAK,CAAC,CAAD,CAAN,CAAb,KAA4B,GAAhC,EAAqC;AACnCmV,UAAM,CAAC,aAAa3C,OAAb,CAAqBmJ,aAAa,CAAC3b,KAAK,CAAC,CAAD,CAAL,GAAW,CAAZ,CAAlC,KAAqD,CAAtD,CAAN;AACAmV,UAAM,CAACwG,aAAa,CAAC3b,KAAK,CAAC,CAAD,CAAL,GAAW,CAAZ,CAAb,KAAgC,GAAjC,CAAN;AACAA,SAAK,CAAC,CAAD,CAAL,IAAY,CAAZ;AACD;;AACD,SAAO;AAACtI,QAAI,EAAE,WAAP;AAAoBkmB,SAAK,EAAED;AAA3B,GAAP;AACD,CAtBD;;AAwBA,IAAME,gBAAgB,GAAG,UAACC,OAAD,EAAU5J,MAAV,EAAqB;AAC5CA,QAAM,CAAC,CAAD,CAAN,IAAa4J,OAAO,CAACF,KAAR,KAAkB,GAAlB,GAAwBN,iBAAxB,GAA4CQ,OAAO,CAACF,KAAjE;AACA,MAAMH,QAAQ,GAAGK,OAAO,CAACL,QAAR,GAAmBK,OAAO,CAACL,QAAR,CAAiBxxB,MAApC,GAA6C,CAA9D;;AACA,OAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4xB,QAApB,EAA8B5xB,CAAC,EAA/B,EAAmC;AACjCgyB,oBAAgB,CAACC,OAAO,CAACL,QAAR,CAAiB5xB,CAAjB,CAAD,EAAsBqoB,MAAtB,CAAhB;AACD;AACF,CAND;;AAQA+I,kBAAkB,CAACc,iBAAnB,GAAuC,UAACP,IAAD,EAAOtJ,MAAP,EAAkB;AACvDA,QAAM,GAAGA,MAAM,IAAI,EAAnB;;AACA,MAAIsJ,IAAI,CAAC9lB,IAAL,KAAc,WAAd,IAA6B8lB,IAAI,CAACI,KAAL,KAAe,GAAhD,EAAqD;AACnD1J,UAAM,CAAC/nB,IAAP,CAAYqxB,IAAI,CAACI,KAAjB;AACD;;AACD,uDAAkBJ,IAAI,CAACC,QAAL,IAAiB,EAAnC,wCAAuC;AAAA,QAA9BO,KAA8B;AACrCf,sBAAkB,CAACc,iBAAnB,CAAqCC,KAArC,EAA4C9J,MAA5C;AACD;;AACD,SAAOA,MAAP;AACD,CATD;;AAWA+I,kBAAkB,CAACgB,0BAAnB,GAAgD,UAACtC,aAAD,EAAmB;AACjE,MAAM3b,KAAK,GAAG,CAAC,CAAD,CAAd;AACA2b,eAAa,GAAGA,aAAa,IAAI2B,iBAAjC;AACA,MAAMpJ,MAAM,GAAGwJ,YAAY,CAAC/B,aAAD,EAAgB3b,KAAhB,CAA3B;AACAmV,QAAM,CAACnV,KAAK,CAAC,CAAD,CAAL,KAAa2b,aAAa,CAAC1vB,MAA5B,8BAC2B0vB,aAD3B,OAAN;AAEA,SAAO4B,uBAAuB,CAACrJ,MAAD,EAAS,EAAT,CAA9B;AACD,CAPD;;AASA+I,kBAAkB,CAACiB,0BAAnB,GAAgD,UAACV,IAAD,EAAU;AACxD,MAAMtJ,MAAM,GAAG,CAAC,EAAD,CAAf;AACA2J,kBAAgB,CAACL,IAAD,EAAOtJ,MAAP,CAAhB;AACA,SAAOA,MAAM,CAAC,CAAD,CAAb;AACD,CAJD;;AAMA+I,kBAAkB,CAACkB,UAAnB,GAAgC,UAACX,IAAD,EAAOzN,IAAP,EAAgB;AAC9C,MAAI+N,OAAO,GAAGN,IAAd;;AACA,wDAAkBzN,IAAlB,2CAAwB;AAAA,QAAf/P,KAAe;AACtBmV,UAAM,CAAC,KAAKnV,KAAL,IAAcA,KAAK,GAAG8d,OAAO,CAACL,QAAR,CAAiBxxB,MAAxC,CAAN;AACA6xB,WAAO,GAAGA,OAAO,CAACL,QAAR,CAAiBzd,KAAjB,CAAV;AACD;;AACD,SAAO8d,OAAP;AACD,CAPD,C;;;;;;;;;;;AC1FA,IAAIvK,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAApC8V,MAAM,CAACgT,MAAP,CAAc;AAAC4K,QAAM,EAAC,YAAU;AAAC,WAAOA,MAAP;AAAc,GAAjC;AAAkCC,UAAQ,EAAC,YAAU;AAAC,WAAOA,QAAP;AAAgB;AAAtE,CAAd;AAAuF,IAAIlJ,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAA0D,IAAI4sB,MAAJ;AAAW9W,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAAC0G,QAAM,EAAC,UAAS5sB,CAAT,EAAW;AAAC4sB,UAAM,GAAC5sB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;;AAGvK,IAAM4zB,YAAY,GAAG,UAAC7R,SAAD,EAAe;AAClC,MAAI,CAACA,SAAL,EAAgB;AAChB0I,QAAM,CAAC1I,SAAS,CAACxgB,MAAV,KAAqB,CAAtB,CAAN;AACA,MAAM4E,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBxL,SAAxB,CAAb;AACA,MAAMyH,MAAM,GAAG;AACbzH,aAAS,EAAEA,SADE;AAEb2O,aAAS,EAAE3O,SAAS,CAAC4O,WAAV,CAAsB,CAAtB,CAFE;AAGbkD,YAAQ,EAAE;AACRnC,eAAS,EAAEvrB,IAAI,CAACurB,SADR;AAERC,kBAAY,EAAExrB,IAAI,CAACwrB;AAFX,KAHG;AAObmC,UAAM,EAAE,EAPK;AAQb1e,cAAU,EAAEjP,IAAI,CAACiP,UARJ;AASbqY,eAAW,EAAEtnB,IAAI,CAACsnB;AATL,GAAf;;AAWA,MAAItnB,IAAI,CAACiP,UAAT,EAAqB;AACnB,QAAM2e,KAAK,GAAGL,MAAM,CAAChwB,GAAP,CAAWyC,IAAI,CAACiP,UAAhB,CAAd;AACA,QAAM4e,IAAI,GAAGpH,MAAM,CAACW,gBAAP,CAAwBpnB,IAAI,CAACiP,UAA7B,CAAb;;AACA,QAAI2e,KAAK,CAACD,MAAN,CAAaG,QAAjB,EAA2B;AACzB,UAAMJ,QAAQ,GAAGE,KAAK,CAACF,QAAvB;AACArK,YAAM,CAACqK,QAAP,CAAgBpC,UAAhB,GAA6BoC,QAAQ,CAACpC,UAAT,IAAuBuC,IAAI,CAACvC,UAAzD;AACAjI,YAAM,CAACqK,QAAP,CAAgBjC,MAAhB,GAAyBiC,QAAQ,CAACjC,MAAT,IAAmBoC,IAAI,CAACpC,MAAjD;AACD;AACF;;AACD,SAAOpI,MAAP;AACD,CAzBD;;AA2BA,IAAMkK,MAAM,GAAG,IAAIQ,KAAK,CAACC,UAAV,CAAqB,QAArB,CAAf;AACA,IAAMR,QAAQ,GAAG,IAAIO,KAAK,CAACC,UAAV,CAAqB,UAArB,CAAjB;;AAEAT,MAAM,CAACU,iBAAP,GAA2B,UAACrS,SAAD,EAAe;AACxC,MAAMsS,KAAK,GAAG,CAACtS,SAAD,CAAd;AACA,MAAMuS,OAAO,GAAG,EAAhB;AACAA,SAAO,CAACvS,SAAD,CAAP,GAAqB,IAArB;;AACA,SAAOsS,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACvB,QAAM0xB,OAAO,GAAGoB,KAAK,CAAC/a,GAAN,EAAhB;AACA,QAAMib,YAAY,GAAGb,MAAM,CAACxO,IAAP,CAAY;AAC/B,uCAAiC;AAACsP,cAAM,SAAOvB,OAAP;AAAP,OADF;AAE/B,sBAAgB;AAACwB,WAAG,EAAE;AAAN;AAFe,KAAZ,EAGlB;AAAC1S,eAAS,EAAE;AAAZ,KAHkB,EAGF2S,KAHE,EAArB;AAIAH,gBAAY,CAACnS,GAAb,CAAiB,UAACze,CAAD;AAAA,aAAOA,CAAC,CAACoe,SAAT;AAAA,KAAjB,EAAqCE,MAArC,CAA4C,UAACte,CAAD;AAAA,aAAO,CAAC2wB,OAAO,CAAC3wB,CAAD,CAAf;AAAA,KAA5C,EAAgEye,GAAhE,CAAoE,UAACze,CAAD,EAAO;AACzE0wB,WAAK,CAAC5yB,IAAN,CAAWkC,CAAX;AACA2wB,aAAO,CAAC3wB,CAAD,CAAP,GAAa,IAAb;AACD,KAHD;AAID;;AACD,SAAO2wB,OAAO,CAACvS,SAAD,CAAd;AACA2R,QAAM,CAACiB,MAAP,CAAc;AAAC5S,aAAS,EAAE;AAAC6S,SAAG,EAAExxB,MAAM,CAACwtB,IAAP,CAAY0D,OAAZ;AAAN;AAAZ,GAAd,EACc;AAACO,QAAI,EAAE;AAAC,sBAAgB,IAAjB;AAAuB,yBAAmB;AAA1C;AAAP,GADd,EAEc;AAACC,SAAK,EAAE;AAAR,GAFd;AAGD,CAnBD;;AAqBApB,MAAM,CAAChwB,GAAP,GAAa,UAACqe,SAAD;AAAA,SACT2R,MAAM,CAACqB,OAAP,CAAe;AAAChT,aAAS,EAAEA;AAAZ,GAAf,KAA0C6R,YAAY,CAAC7R,SAAD,CAD7C;AAAA,CAAb;;AAGA2R,MAAM,CAACsB,MAAP,GAAgB,UAACjI,UAAD;AAAA,SAAgB2G,MAAM,CAACxO,IAAP,CAAY;AAACnD,aAAS,EAAE;AAAC6S,SAAG,EAAE7H;AAAN;AAAZ,GAAZ,CAAhB;AAAA,CAAhB;;AAEA2G,MAAM,CAACuB,OAAP,GAAiB,UAAClB,KAAD,EAAQmB,MAAR,EAAmB;AAClCA,QAAM,GAAGA,MAAM,IAAI,EAAnB;AACA,MAAMxE,SAAS,GAAGqD,KAAK,GAAGA,KAAK,CAACrD,SAAT,GAAqB/a,SAA5C;;AACA,MAAMmV,SAAS,GAAGyF,CAAC,CAAC4E,MAAF,CAAS;AAACzE,aAAS,EAAE;AAAC0E,SAAG,EAAE1E;AAAN;AAAZ,GAAT,EAAwCwE,MAAxC,CAAlB;;AACA,MAAMxc,IAAI,GAAGgb,MAAM,CAACqB,OAAP,CAAejK,SAAf,EAA0B;AAACtX,QAAI,EAAE;AAACkd,eAAS,EAAE;AAAZ;AAAP,GAA1B,CAAb;AACA,SAAOhY,IAAI,GAAGA,IAAH,GAAUgb,MAAM,CAACqB,OAAP,CAAeG,MAAf,EAAuB;AAAC1hB,QAAI,EAAE;AAACkd,eAAS,EAAE;AAAZ;AAAP,GAAvB,CAArB;AACD,CAND;;AAQAgD,MAAM,CAAC2B,iBAAP,GAA2B,UAACtB,KAAD,EAAW;AACpC,SAAOL,MAAM,CAACuB,OAAP,CAAelB,KAAf,EAAsB;AAAC,uBAAmB;AAApB,GAAtB,CAAP;AACD,CAFD;;AAIAL,MAAM,CAAC4B,eAAP,GAAyB,UAACvB,KAAD,EAAW;AAClC,SAAOL,MAAM,CAACuB,OAAP,CAAelB,KAAf,EAAsB;AAAC,uBAAmB;AAACU,SAAG,EAAE;AAAN;AAApB,GAAtB,CAAP;AACD,CAFD;;AAIAf,MAAM,CAAC6B,WAAP,GAAqB,UAACxB,KAAD,EAAQmB,MAAR,EAAmB;AACtCA,QAAM,GAAGA,MAAM,IAAI,EAAnB;AACA,MAAMxE,SAAS,GAAGqD,KAAK,GAAGA,KAAK,CAACrD,SAAT,GAAqB/a,SAA5C;;AACA,MAAMmV,SAAS,GAAGyF,CAAC,CAAC4E,MAAF,CAAS;AAACzE,aAAS,EAAE;AAAC8E,SAAG,EAAE9E;AAAN;AAAZ,GAAT,EAAwCwE,MAAxC,CAAlB;;AACA,MAAMjY,QAAQ,GAAGyW,MAAM,CAACqB,OAAP,CAAejK,SAAf,EAA0B;AAACtX,QAAI,EAAE;AAACkd,eAAS,EAAE,CAAC;AAAb;AAAP,GAA1B,CAAjB;AACA,SAAOzT,QAAQ,GAAGA,QAAH,GAAcyW,MAAM,CAACqB,OAAP,CAAeG,MAAf,EAAuB;AAAC1hB,QAAI,EAAE;AAACkd,eAAS,EAAE,CAAC;AAAb;AAAP,GAAvB,CAA7B;AACD,CAND;;AAQAgD,MAAM,CAAC+B,qBAAP,GAA+B,UAAC1B,KAAD,EAAW;AACxC,SAAOL,MAAM,CAAC6B,WAAP,CAAmBxB,KAAnB,EAA0B;AAAC,uBAAmB;AAApB,GAA1B,CAAP;AACD,CAFD;;AAIAL,MAAM,CAACgC,mBAAP,GAA6B,UAAC3B,KAAD,EAAW;AACtC,SAAOL,MAAM,CAAC6B,WAAP,CAAmBxB,KAAnB,EAA0B;AAAC,uBAAmB;AAACU,SAAG,EAAE;AAAN;AAApB,GAA1B,CAAP;AACD,CAFD;;AAIAf,MAAM,CAACiC,OAAP,GAAiB,UAAC5I,UAAD,EAAgB;AAC/B,uDAAsBA,UAAtB,wCAAkC;AAAA,QAAzBhL,SAAyB;AAChC,QAAMgS,KAAK,GAAGL,MAAM,CAAChwB,GAAP,CAAWqe,SAAX,CAAd;;AACA,QAAI,CAACgS,KAAK,CAACD,MAAN,CAAaG,QAAlB,EAA4B;AAC1BP,YAAM,CAACkC,MAAP,CAAc;AAAC7T,iBAAS,EAAEgS,KAAK,CAAChS;AAAlB,OAAd,EAA4CgS,KAA5C;AACD;AACF;;AACDJ,UAAQ,CAACkC,OAAT;AACD,CARD;;AAUAnC,MAAM,CAACoC,IAAP,GAAc,UAAC/B,KAAD,EAAW;AACvBgC,OAAK,CAAChC,KAAK,CAAChS,SAAP,EAAkBgK,MAAlB,CAAL;AACAtB,QAAM,CAACsJ,KAAK,CAAChS,SAAN,CAAgBxgB,MAAhB,KAA2B,CAA5B,CAAN;AACA,MAAM0xB,OAAO,GAAGS,MAAM,CAAChwB,GAAP,CAAWqwB,KAAK,CAAChS,SAAjB,CAAhB;;AACA,MAAIkR,OAAO,IAAIA,OAAO,CAACa,MAAR,CAAeG,QAA1B,IAAsC,CAACF,KAAK,CAACD,MAAN,CAAaG,QAAxD,EAAkE;AAChEP,UAAM,CAACU,iBAAP,CAAyBL,KAAK,CAAChS,SAA/B;AACD;;AACD2R,QAAM,CAACsC,uBAAP,CAA+BjC,KAA/B;;AACA,MAAIA,KAAK,CAACD,MAAN,CAAazO,IAAb,IAAqB,CAAC0O,KAAK,CAACD,MAAN,CAAazO,IAAb,CAAkB4Q,QAA5C,EAAsD;AACpDvC,UAAM,CAACkC,MAAP,CAAc;AAAC7T,eAAS,EAAEgS,KAAK,CAAChS;AAAlB,KAAd,EAA4CgS,KAA5C;AACD,GAFD,MAEO;AACLL,UAAM,CAACwC,MAAP,CAAc;AAACnU,eAAS,EAAEgS,KAAK,CAAChS;AAAlB,KAAd;AACD;;AACD4R,UAAQ,CAACkC,OAAT;AACD,CAdD;;AAgBAnC,MAAM,CAACsC,uBAAP,GAAiC,UAACjC,KAAD,EAAW;AAC1C,MAAM5tB,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBwG,KAAK,CAAChS,SAA9B,CAAb;AACA,MAAMiS,IAAI,GAAGpH,MAAM,CAACW,gBAAP,CAAwBpnB,IAAI,CAACiP,UAAL,IAAmB2e,KAAK,CAAChS,SAAjD,CAAb;AACA,MAAMoU,OAAO,GAAG,CAACnC,IAAI,CAACjS,SAAN,EAAiB5B,MAAjB,CAAwB6T,IAAI,CAACvG,WAA7B,CAAhB;;AACA,MAAI0I,OAAO,CAAC50B,MAAR,KAAmB,CAAnB,IAAwB,OAAOumB,OAAP,CAAeqO,OAAO,CAAC,CAAD,CAAtB,KAA8B,CAA1D,EAA6D;AAC3D;AACD;;AACD,MAAM1E,UAAU,GAAGsC,KAAK,CAACF,QAAN,CAAepC,UAAf,IAA6BtrB,IAAI,CAACsrB,UAArD;AACA,MAAMG,MAAM,GAAGmC,KAAK,CAACF,QAAN,CAAejC,MAAf,IAAyBzrB,IAAI,CAACyrB,MAA7C;AACA8B,QAAM,CAACiB,MAAP,CAAc;AAAC5S,aAAS,EAAE;AAAC6S,SAAG,EAAEuB;AAAN;AAAZ,GAAd,EAA2C;AAACtB,QAAI,EAAE;AAChD,6BAAuBpD,UADyB;AAEhD,yBAAmBG;AAF6B;AAAP,GAA3C,EAGI;AAACkD,SAAK,EAAE;AAAR,GAHJ;AAID,CAbD;;AAeAnB,QAAQ,CAACkC,OAAT,GAAmB,YAAM;AACvB,MAAMO,KAAK,GAAG1C,MAAM,CAACxO,IAAP,GAAcsB,KAAd,EAAd;AACA,MAAM6P,QAAQ,GAAG3C,MAAM,CAACxO,IAAP,CAAY;AAAC,uBAAmB;AAACuP,SAAG,EAAE;AAAN;AAApB,GAAZ,EAA8CjO,KAA9C,EAAjB;AACAmN,UAAQ,CAACiC,MAAT,CAAgB,EAAhB,EAAoB;AAACQ,SAAK,EAAEA,KAAR;AAAeC,YAAQ,EAAEA,QAAzB;AAAmCC,UAAM,EAAE;AAA3C,GAApB;AACD,CAJD;;AAMA,IAAIjL,MAAM,CAACC,QAAX,EAAqB;AACnB;AACAoI,QAAM,CAAC6C,YAAP,CAAoB;AAACxU,aAAS,EAAE;AAAZ,GAApB,EAAoC;AAAC8J,UAAM,EAAE;AAAT,GAApC;;AACA6H,QAAM,CAAC6C,YAAP,CAAoB;AAAC7F,aAAS,EAAE;AAAZ,GAApB,EAAoC;AAAC7E,UAAM,EAAE;AAAT,GAApC;;AACA6H,QAAM,CAAC6C,YAAP,CAAoB;AAAC,uBAAmB;AAApB,GAApB,EAJmB,CAMnB;;;AACA5C,UAAQ,CAACkC,OAAT,GAPmB,CASnB;;AACA,MAAMW,OAAO,GAAG,EAAhB;AACA,MAAMC,YAAY,GAAG,CACjB,KADiB,EACV,SADU,EACC,mBADD,EACsB,iBADtB,EAEjB,aAFiB,EAEF,uBAFE,EAEuB,qBAFvB,EAE8C,MAF9C,CAArB;AAGAA,cAAY,CAACrU,GAAb,CAAiB,UAACpc,IAAD;AAAA,WAAUwwB,OAAO,CAAIxwB,IAAJ,WAAP,GAA0B0tB,MAAM,CAAC1tB,IAAD,CAA1C;AAAA,GAAjB;AACAwwB,SAAO,CAACE,aAAR,GAAwBhD,MAAM,CAACiC,OAA/B;;AACAa,SAAO,CAACG,UAAR,GAAqB,UAAC5H,MAAD;AAAA,WAAYA,MAAM,CAAC3M,GAAP,CAAWsR,MAAM,CAACoC,IAAlB,CAAZ;AAAA,GAArB;;AACAzK,QAAM,CAACmL,OAAP,CAAeA,OAAf,EAjBmB,CAmBnB;;AACAnL,QAAM,CAACuL,OAAP,CAAe,cAAf,EAA+BlD,MAAM,CAACsB,MAAtC;AACA3J,QAAM,CAACuL,OAAP,CAAe,aAAf,EAA8BjD,QAAQ,CAACzO,IAAT,CAAcmM,IAAd,CAAmBsC,QAAnB,CAA9B;AACD,C;;;;;;;;;;;AChKD7d,MAAM,CAACgT,MAAP,CAAc;AAAC+N,WAAS,EAAC,YAAU;AAAC,WAAOA,SAAP;AAAiB;AAAvC,CAAd;;AAAA;AACA;AAEA,IAAIxF,IAAI,GAAG,UAASyF,EAAT,EAAaC,EAAb,EAAgB;AAAE,SAAO,YAAU;AAAE,WAAOD,EAAE,CAACE,KAAH,CAASD,EAAT,EAAaE,SAAb,CAAP;AAAiC,GAApD;AAAuD,CAApF;;AAEA,IAAMJ,SAAS,GAAI,YAAW;AAC5B,WAASA,SAAT,CAAmBK,WAAnB,EAAgC;AAC9B,QAAI/1B,CAAJ,EAAOe,CAAP,EAAUi1B,YAAV,EAAwBniB,GAAxB,EAA6BoiB,GAA7B,EAAkCC,IAAlC,EAAwCC,OAAxC,EAAiDnI,GAAjD,EAAsDxrB,CAAtD,EAAyDC,CAAzD;AACA,SAAKszB,WAAL,GAAmBA,WAAnB;AACA,SAAKK,eAAL,GAAuBlG,IAAI,CAAC,KAAKkG,eAAN,EAAuB,IAAvB,CAA3B;AACA,SAAKC,aAAL,GAAqBnG,IAAI,CAAC,KAAKmG,aAAN,EAAqB,IAArB,CAAzB;AACA,SAAKC,oBAAL,GAA4BpG,IAAI,CAAC,KAAKoG,oBAAN,EAA4B,IAA5B,CAAhC;AACA,SAAK5yB,OAAL,GAAewsB,IAAI,CAAC,KAAKxsB,OAAN,EAAe,IAAf,CAAnB;AACA,SAAKmf,KAAL,GAAaqN,IAAI,CAAC,KAAKrN,KAAN,EAAa,IAAb,CAAjB;AACA,SAAK0T,IAAL,GAAYrG,IAAI,CAAC,KAAKqG,IAAN,EAAY,IAAZ,CAAhB;AACA,SAAKC,oBAAL,GAA4BtG,IAAI,CAAC,KAAKsG,oBAAN,EAA4B,IAA5B,CAAhC;AACA,SAAKC,kBAAL,GAA0BvG,IAAI,CAAC,KAAKuG,kBAAN,EAA0B,IAA1B,CAA9B;AACA,SAAK92B,CAAL,GAAS,KAAKo2B,WAAL,CAAiB31B,MAA1B;AACA61B,OAAG,GAAG,KAAKF,WAAX;;AACA,SAAK/1B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CguB,SAAG,GAAGiI,GAAG,CAACj2B,CAAD,CAAT;;AACA,UAAIguB,GAAG,CAAC5tB,MAAJ,KAAe,KAAKT,CAAxB,EAA2B;AACzB,cAAM,IAAImqB,KAAJ,CAAU,6BAA6B,KAAKiM,WAA5C,CAAN;AACD;AACF;;AACD,SAAKW,KAAL,GAAc,YAAW;AACvBP,aAAO,GAAG,EAAV;;AACA,WAAK,IAAIp1B,CAAC,GAAG,CAAR,EAAWm1B,IAAI,GAAG,KAAKv2B,CAA5B,EAA+B,KAAKu2B,IAAL,GAAYn1B,CAAC,GAAGm1B,IAAhB,GAAuBn1B,CAAC,GAAGm1B,IAA1D,EAAgE,KAAKA,IAAL,GAAYn1B,CAAC,EAAb,GAAkBA,CAAC,EAAnF,EAAsF;AAAEo1B,eAAO,CAAC71B,IAAR,CAAaS,CAAb;AAAkB;;AAC1G,aAAOo1B,OAAP;AACD,KAJY,CAIVN,KAJU,CAIJ,IAJI,CAAb;;AAKA,SAAKc,OAAL,GAAe,CAAf;;AACA,SAAKC,OAAL,GAAgB,YAAW;AACzB,UAAIp1B,CAAJ,EAAOq1B,IAAP,EAAaC,IAAb,EAAmBC,QAAnB;AACAD,UAAI,GAAG,KAAKJ,KAAZ;AACAK,cAAQ,GAAG,EAAX;;AACA,WAAKv1B,CAAC,GAAG,CAAJ,EAAOq1B,IAAI,GAAGC,IAAI,CAAC12B,MAAxB,EAAgCoB,CAAC,GAAGq1B,IAApC,EAA0Cr1B,CAAC,EAA3C,EAA+C;AAC7CgB,SAAC,GAAGs0B,IAAI,CAACt1B,CAAD,CAAR;AACAu1B,gBAAQ,CAACz2B,IAAT,CAAc,CAAd;AACD;;AACD,aAAOy2B,QAAP;AACD,KATc,CASZ30B,IATY,CASP,IATO,CAAf;;AAUA,SAAK40B,OAAL,GAAgB,YAAW;AACzB,UAAIx1B,CAAJ,EAAOq1B,IAAP,EAAaC,IAAb,EAAmBC,QAAnB;AACAD,UAAI,GAAG,KAAKJ,KAAZ;AACAK,cAAQ,GAAG,EAAX;;AACA,WAAKv1B,CAAC,GAAG,CAAJ,EAAOq1B,IAAI,GAAGC,IAAI,CAAC12B,MAAxB,EAAgCoB,CAAC,GAAGq1B,IAApC,EAA0Cr1B,CAAC,EAA3C,EAA+C;AAC7CiB,SAAC,GAAGq0B,IAAI,CAACt1B,CAAD,CAAR;AACAu1B,gBAAQ,CAACz2B,IAAT,CAAc,CAAd;AACD;;AACD,aAAOy2B,QAAP;AACD,KATc,CASZ30B,IATY,CASP,IATO,CAAf;;AAUA,SAAK60B,OAAL,GAAgB,YAAW;AACzB,UAAIz1B,CAAJ,EAAOq1B,IAAP,EAAaC,IAAb,EAAmBC,QAAnB;AACAD,UAAI,GAAG,KAAKJ,KAAZ;AACAK,cAAQ,GAAG,EAAX;;AACA,WAAKv1B,CAAC,GAAG,CAAJ,EAAOq1B,IAAI,GAAGC,IAAI,CAAC12B,MAAxB,EAAgCoB,CAAC,GAAGq1B,IAApC,EAA0Cr1B,CAAC,EAA3C,EAA+C;AAC7CgB,SAAC,GAAGs0B,IAAI,CAACt1B,CAAD,CAAR;AACAu1B,gBAAQ,CAACz2B,IAAT,CAAc,CAAC,CAAf;AACD;;AACD,aAAOy2B,QAAP;AACD,KATc,CASZ30B,IATY,CASP,IATO,CAAf;;AAUA,SAAK80B,OAAL,GAAgB,YAAW;AACzB,UAAI11B,CAAJ,EAAOq1B,IAAP,EAAaC,IAAb,EAAmBC,QAAnB;AACAD,UAAI,GAAG,KAAKJ,KAAZ;AACAK,cAAQ,GAAG,EAAX;;AACA,WAAKv1B,CAAC,GAAG,CAAJ,EAAOq1B,IAAI,GAAGC,IAAI,CAAC12B,MAAxB,EAAgCoB,CAAC,GAAGq1B,IAApC,EAA0Cr1B,CAAC,EAA3C,EAA+C;AAC7CiB,SAAC,GAAGq0B,IAAI,CAACt1B,CAAD,CAAR;AACAu1B,gBAAQ,CAACz2B,IAAT,CAAc,CAAC,CAAf;AACD;;AACD,aAAOy2B,QAAP;AACD,KATc,CASZ30B,IATY,CASP,IATO,CAAf;;AAUA,SAAKq0B,kBAAL;AACA,SAAKD,oBAAL;;AACA,WAAO,KAAKG,OAAL,GAAe,KAAKh3B,CAA3B,EAA8B;AAC5Bq2B,kBAAY,GAAG,KAAKW,OAApB;AACA,WAAKjzB,OAAL;;AACA,UAAI,KAAKizB,OAAL,IAAgBX,YAApB,EAAkC;AAChC,cAAM,IAAIlM,KAAJ,CAAU,8CAAV,CAAN;AACD;AACF;AACF;;AAED4L,WAAS,CAACxzB,SAAV,CAAoBu0B,kBAApB,GAAyC,YAAW;AAClD,QAAIz2B,CAAJ,EAAOe,CAAP,EAAUS,CAAV,EAAayQ,CAAb,EAAgB4B,GAAhB,EAAqBgjB,IAArB,EAA2BM,IAA3B,EAAiCC,IAAjC,EAAuCC,QAAvC,EAAiDpB,GAAjD,EAAsDC,IAAtD,EAA4DY,IAA5D,EAAkEQ,IAAlE,EAAwEtJ,GAAxE,EAA6ExrB,CAA7E,EAAgFC,CAAhF;;AACA,SAAKszB,WAAL,GAAoB,YAAW;AAC7B,UAAI/1B,CAAJ,EAAO6T,GAAP,EAAYoiB,GAAZ,EAAiBE,OAAjB;AACAF,SAAG,GAAG,KAAKF,WAAX;AACAI,aAAO,GAAG,EAAV;;AACA,WAAKn2B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CguB,WAAG,GAAGiI,GAAG,CAACj2B,CAAD,CAAT;AACAm2B,eAAO,CAAC71B,IAAR,CAAa0tB,GAAG,CAACpd,KAAJ,EAAb;AACD;;AACD,aAAOulB,OAAP;AACD,KATkB,CAShB/zB,IATgB,CASX,IATW,CAAnB;;AAUA6zB,OAAG,GAAG,KAAKS,KAAX;;AACA,SAAK12B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CwC,OAAC,GAAGyzB,GAAG,CAACj2B,CAAD,CAAP;AACAq3B,cAAQ,GAAG14B,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,CAAf,EAAmB,YAAW;AACvC,YAAI90B,CAAJ,EAAO81B,IAAP,EAAaX,IAAb,EAAmBC,OAAnB;AACAD,YAAI,GAAG,KAAKQ,KAAZ;AACAP,eAAO,GAAG,EAAV;;AACA,aAAKp1B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGX,IAAI,CAAC91B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,WAAC,GAAGyzB,IAAI,CAACn1B,CAAD,CAAR;AACAo1B,iBAAO,CAAC71B,IAAR,CAAa,KAAKy1B,WAAL,CAAiBvzB,CAAjB,EAAoBC,CAApB,CAAb;AACD;;AACD,eAAO0zB,OAAP;AACD,OAT4B,CAS1B/zB,IAT0B,CASrB,IATqB,CAAlB,CAAX;AAUA8zB,UAAI,GAAG,KAAKQ,KAAZ;;AACA,WAAK31B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGX,IAAI,CAAC91B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,SAAC,GAAGyzB,IAAI,CAACn1B,CAAD,CAAR;AACA,aAAKg1B,WAAL,CAAiBvzB,CAAjB,EAAoBC,CAApB,KAA0B40B,QAA1B;AACD;;AACD,WAAKT,OAAL,CAAap0B,CAAb,IAAkB,CAAlB;AACD;;AACDs0B,QAAI,GAAG,KAAKJ,KAAZ;;AACA,SAAKl1B,CAAC,GAAG,CAAJ,EAAO21B,IAAI,GAAGL,IAAI,CAAC12B,MAAxB,EAAgCoB,CAAC,GAAG21B,IAApC,EAA0C31B,CAAC,EAA3C,EAA+C;AAC7CiB,OAAC,GAAGq0B,IAAI,CAACt1B,CAAD,CAAR;AACA61B,cAAQ,GAAG14B,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,CAAf,EAAmB,YAAW;AACvC,YAAI5jB,CAAJ,EAAOmlB,IAAP,EAAaE,IAAb,EAAmBnB,OAAnB;AACAmB,YAAI,GAAG,KAAKZ,KAAZ;AACAP,eAAO,GAAG,EAAV;;AACA,aAAKlkB,CAAC,GAAG,CAAJ,EAAOmlB,IAAI,GAAGE,IAAI,CAACl3B,MAAxB,EAAgC6R,CAAC,GAAGmlB,IAApC,EAA0CnlB,CAAC,EAA3C,EAA+C;AAC7CzP,WAAC,GAAG80B,IAAI,CAACrlB,CAAD,CAAR;AACAkkB,iBAAO,CAAC71B,IAAR,CAAa,KAAKy1B,WAAL,CAAiBvzB,CAAjB,EAAoBC,CAApB,CAAb;AACD;;AACD,eAAO0zB,OAAP;AACD,OAT4B,CAS1B/zB,IAT0B,CASrB,IATqB,CAAlB,CAAX;AAUAk1B,UAAI,GAAG,KAAKZ,KAAZ;;AACA,WAAKzkB,CAAC,GAAG,CAAJ,EAAOmlB,IAAI,GAAGE,IAAI,CAACl3B,MAAxB,EAAgC6R,CAAC,GAAGmlB,IAApC,EAA0CnlB,CAAC,EAA3C,EAA+C;AAC7CzP,SAAC,GAAG80B,IAAI,CAACrlB,CAAD,CAAR;AACA,aAAK8jB,WAAL,CAAiBvzB,CAAjB,EAAoBC,CAApB,KAA0B40B,QAA1B;AACD;;AACD,WAAKL,OAAL,CAAav0B,CAAb,IAAkB,CAAlB;AACD;AACF,GApDD;;AAsDAizB,WAAS,CAACxzB,SAAV,CAAoBs0B,oBAApB,GAA2C,YAAW;AACpD,QAAIx2B,CAAJ,EAAO6T,GAAP,EAAYoiB,GAAZ,EAAiBE,OAAjB,EAA0B3zB,CAA1B,EAA6BC,CAA7B;AACAwzB,OAAG,GAAG,KAAKS,KAAX;AACAP,WAAO,GAAG,EAAV;;AACA,SAAKn2B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CwC,OAAC,GAAGyzB,GAAG,CAACj2B,CAAD,CAAP;AACAm2B,aAAO,CAAC71B,IAAR,CAAc,YAAW;AACvB,YAAIS,CAAJ,EAAO81B,IAAP,EAAaX,IAAb,EAAmBa,QAAnB;AACAb,YAAI,GAAG,KAAKQ,KAAZ;AACAK,gBAAQ,GAAG,EAAX;;AACA,aAAKh2B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGX,IAAI,CAAC91B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,WAAC,GAAGyzB,IAAI,CAACn1B,CAAD,CAAR;;AACA,cAAI,KAAKk2B,OAAL,CAAaz0B,CAAb,MAAoB,CAAC,CAArB,IAA0B,KAAK00B,OAAL,CAAaz0B,CAAb,MAAoB,CAAC,CAA/C,IAAqD,KAAK8zB,IAAL,CAAU/zB,CAAV,EAAaC,CAAb,CAAD,KAAsB,CAA9E,EAAiF;AAC/E,iBAAKogB,KAAL,CAAWrgB,CAAX,EAAcC,CAAd;AACAs0B,oBAAQ,CAACz2B,IAAT,CAAc,KAAKq2B,OAAL,IAAgB,CAA9B;AACD,WAHD,MAGO;AACLI,oBAAQ,CAACz2B,IAAT,CAAc,KAAK,CAAnB;AACD;AACF;;AACD,eAAOy2B,QAAP;AACD,OAdY,CAcV30B,IAdU,CAcL,IAdK,CAAb;AAeD;;AACD,WAAO+zB,OAAP;AACD,GAvBD;;AAyBAT,WAAS,CAACxzB,SAAV,CAAoBq0B,IAApB,GAA2B,UAAS/zB,CAAT,EAAYC,CAAZ,EAAe;AACxC,WAAO,KAAKszB,WAAL,CAAiBvzB,CAAjB,EAAoBC,CAApB,IAAyB,KAAKm0B,OAAL,CAAap0B,CAAb,CAAzB,GAA2C,KAAKw0B,OAAL,CAAav0B,CAAb,CAAlD;AACD,GAFD;;AAIAizB,WAAS,CAACxzB,SAAV,CAAoB2gB,KAApB,GAA4B,UAASrgB,CAAT,EAAYC,CAAZ,EAAe;AACzC,SAAKw0B,OAAL,CAAaz0B,CAAb,IAAkBC,CAAlB;AACA,WAAO,KAAKy0B,OAAL,CAAaz0B,CAAb,IAAkBD,CAAzB;AACD,GAHD;;AAKAkzB,WAAS,CAACxzB,SAAV,CAAoBwB,OAApB,GAA8B,YAAW;AACvC,QAAI6zB,KAAJ,EAAWC,KAAX,EAAkBlS,KAAlB,EAAyBmS,OAAzB,EAAkCC,OAAlC,EAA2C13B,CAA3C,EAA8Ce,CAA9C,EAAiD8S,GAAjD,EAAsDgjB,IAAtD,EAA4Dc,SAA5D,EAAuEC,MAAvE,EAA+E3B,GAA/E,EAAoFC,IAApF,EAA0FY,IAA1F,EAAgGphB,IAAhG,EAAsGmiB,KAAtG,EAA6GC,OAA7G,EAAsHt1B,CAAtH,EAAyHu1B,SAAzH,EAAoIt1B,CAApI,EAAuIu1B,QAAvI;;AACAD,aAAS,GAAI,YAAW;AACtB,UAAI/3B,CAAJ,EAAO6T,GAAP,EAAYoiB,GAAZ,EAAiBE,OAAjB;AACAF,SAAG,GAAG,KAAKS,KAAX;AACAP,aAAO,GAAG,EAAV;;AACA,WAAKn2B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CwC,SAAC,GAAGyzB,GAAG,CAACj2B,CAAD,CAAP;AACAm2B,eAAO,CAAC71B,IAAR,CAAa,KAAb;AACD;;AACD,aAAO61B,OAAP;AACD,KATW,CAST/zB,IATS,CASJ,IATI,CAAZ;;AAUA41B,YAAQ,GAAI,YAAW;AACrB,UAAIh4B,CAAJ,EAAO6T,GAAP,EAAYoiB,GAAZ,EAAiBE,OAAjB;AACAF,SAAG,GAAG,KAAKS,KAAX;AACAP,aAAO,GAAG,EAAV;;AACA,WAAKn2B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CyC,SAAC,GAAGwzB,GAAG,CAACj2B,CAAD,CAAP;AACAm2B,eAAO,CAAC71B,IAAR,CAAa,CAAC,CAAd;AACD;;AACD,aAAO61B,OAAP;AACD,KATU,CASR/zB,IATQ,CASH,IATG,CAAX;;AAUA6zB,OAAG,GAAG,KAAKK,oBAAL,EAAN,EAAmC5gB,IAAI,GAAGugB,GAAG,CAAC,CAAD,CAA7C,EAAkD4B,KAAK,GAAG5B,GAAG,CAAC,CAAD,CAA7D,EAAkE6B,OAAO,GAAG7B,GAAG,CAAC,CAAD,CAA/E;AACA8B,aAAS,CAACriB,IAAD,CAAT,GAAkB,IAAlB;;AACA,WAAO,IAAP,EAAa;AACX4P,WAAK,GAAGpM,QAAR;AACAgd,UAAI,GAAG,KAAKQ,KAAZ;;AACA,WAAK12B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGqiB,IAAI,CAAC91B,MAAvB,EAA+BJ,CAAC,GAAG6T,GAAnC,EAAwC7T,CAAC,EAAzC,EAA6C;AAC3CyC,SAAC,GAAGyzB,IAAI,CAACl2B,CAAD,CAAR;;AACA,YAAIg4B,QAAQ,CAACv1B,CAAD,CAAR,GAAc,CAAd,IAAmBo1B,KAAK,CAACp1B,CAAD,CAAL,GAAW6iB,KAAlC,EAAyC;AACvCA,eAAK,GAAGuS,KAAK,CAACp1B,CAAD,CAAb;AACAg1B,iBAAO,GAAGK,OAAO,CAACr1B,CAAD,CAAjB;AACAi1B,iBAAO,GAAGj1B,CAAV;AACD;AACF;;AACD,WAAK4zB,aAAL,CAAmB/Q,KAAnB,EAA0ByS,SAA1B,EAAqCC,QAArC,EAA+CH,KAA/C;AACAG,cAAQ,CAACN,OAAD,CAAR,GAAoBD,OAApB;;AACA,UAAI,KAAKP,OAAL,CAAaQ,OAAb,IAAwB,CAA5B,EAA+B;AAC7BF,aAAK,GAAGE,OAAR;;AACA,eAAOF,KAAK,IAAI,CAAhB,EAAmB;AACjBD,eAAK,GAAGS,QAAQ,CAACR,KAAD,CAAhB;AACAI,gBAAM,GAAG,KAAKX,OAAL,CAAaM,KAAb,CAAT;AACA,eAAK1U,KAAL,CAAW0U,KAAX,EAAkBC,KAAlB;AACAA,eAAK,GAAGI,MAAR;AACD;;AACD,aAAKjB,OAAL,IAAgB,CAAhB;AACA;AACD;;AACDn0B,OAAC,GAAG,KAAK00B,OAAL,CAAaQ,OAAb,CAAJ;AACAK,eAAS,CAACv1B,CAAD,CAAT,GAAe,IAAf;AACAs0B,UAAI,GAAG,KAAKJ,KAAZ;;AACA,WAAK31B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGC,IAAI,CAAC12B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,SAAC,GAAGq0B,IAAI,CAAC/1B,CAAD,CAAR;;AACA,YAAIi3B,QAAQ,CAACv1B,CAAD,CAAR,GAAc,CAAlB,EAAqB;AACnBk1B,mBAAS,GAAG,CAAE,KAAKpB,IAAL,CAAU/zB,CAAV,EAAaC,CAAb,CAAd;;AACA,cAAIo1B,KAAK,CAACp1B,CAAD,CAAL,GAAWk1B,SAAf,EAA0B;AACxBE,iBAAK,CAACp1B,CAAD,CAAL,GAAWk1B,SAAX;AACAG,mBAAO,CAACr1B,CAAD,CAAP,GAAaD,CAAb;AACD;AACF;AACF;AACF;AACF,GA9DD;;AAgEAkzB,WAAS,CAACxzB,SAAV,CAAoBo0B,oBAApB,GAA2C,YAAW;AACpD,QAAIt2B,CAAJ,EAAO6T,GAAP,EAAYoiB,GAAZ,EAAiBzzB,CAAjB,EAAoBC,CAApB;AACAwzB,OAAG,GAAG,KAAKS,KAAX;;AACA,SAAK12B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CwC,OAAC,GAAGyzB,GAAG,CAACj2B,CAAD,CAAP;;AACA,UAAI,KAAKi3B,OAAL,CAAaz0B,CAAb,IAAkB,CAAtB,EAAyB;AACvB,eAAO,CACLA,CADK,EACD,YAAW;AACb,cAAIzB,CAAJ,EAAO81B,IAAP,EAAaX,IAAb,EAAmBC,OAAnB;AACAD,cAAI,GAAG,KAAKQ,KAAZ;AACAP,iBAAO,GAAG,EAAV;;AACA,eAAKp1B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGX,IAAI,CAAC91B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,aAAC,GAAGyzB,IAAI,CAACn1B,CAAD,CAAR;AACAo1B,mBAAO,CAAC71B,IAAR,CAAa,CAAE,KAAKi2B,IAAL,CAAU/zB,CAAV,EAAaC,CAAb,CAAf;AACD;;AACD,iBAAO0zB,OAAP;AACD,SATE,CASA/zB,IATA,CASK,IATL,CADE,EAUW,YAAW;AACzB,cAAIrB,CAAJ,EAAO81B,IAAP,EAAaX,IAAb,EAAmBC,OAAnB;AACAD,cAAI,GAAG,KAAKQ,KAAZ;AACAP,iBAAO,GAAG,EAAV;;AACA,eAAKp1B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGX,IAAI,CAAC91B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,aAAC,GAAGyzB,IAAI,CAACn1B,CAAD,CAAR;AACAo1B,mBAAO,CAAC71B,IAAR,CAAakC,CAAb;AACD;;AACD,iBAAO2zB,OAAP;AACD,SATc,CASZ/zB,IATY,CASP,IATO,CAVV,CAAP;AAqBD;AACF;AACF,GA7BD;;AA+BAszB,WAAS,CAACxzB,SAAV,CAAoBm0B,aAApB,GAAoC,UAAS/Q,KAAT,EAAgByS,SAAhB,EAA2BC,QAA3B,EAAqCH,KAArC,EAA4C;AAC9E,QAAI73B,CAAJ,EAAOe,CAAP,EAAU8S,GAAV,EAAegjB,IAAf,EAAqBZ,GAArB,EAA0BC,IAA1B,EAAgCC,OAAhC,EAAyC3zB,CAAzC,EAA4CC,CAA5C;AACAwzB,OAAG,GAAG,KAAKS,KAAX;;AACA,SAAK12B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CwC,OAAC,GAAGyzB,GAAG,CAACj2B,CAAD,CAAP;;AACA,UAAI+3B,SAAS,CAACv1B,CAAD,CAAb,EAAkB;AAChB,aAAKo0B,OAAL,CAAap0B,CAAb,KAAmB8iB,KAAnB;AACD;AACF;;AACD4Q,QAAI,GAAG,KAAKQ,KAAZ;AACAP,WAAO,GAAG,EAAV;;AACA,SAAKp1B,CAAC,GAAG,CAAJ,EAAO81B,IAAI,GAAGX,IAAI,CAAC91B,MAAxB,EAAgCW,CAAC,GAAG81B,IAApC,EAA0C91B,CAAC,EAA3C,EAA+C;AAC7C0B,OAAC,GAAGyzB,IAAI,CAACn1B,CAAD,CAAR;;AACA,UAAIi3B,QAAQ,CAACv1B,CAAD,CAAR,GAAc,CAAlB,EAAqB;AACnB0zB,eAAO,CAAC71B,IAAR,CAAau3B,KAAK,CAACp1B,CAAD,CAAL,IAAY6iB,KAAzB;AACD,OAFD,MAEO;AACL6Q,eAAO,CAAC71B,IAAR,CAAa,KAAK02B,OAAL,CAAav0B,CAAb,KAAmB6iB,KAAhC;AACD;AACF;;AACD,WAAO6Q,OAAP;AACD,GApBD;;AAsBAT,WAAS,CAACxzB,SAAV,CAAoBk0B,eAApB,GAAsC,UAAS6B,eAAT,EAA0B;AAC9D,QAAIz1B,CAAJ;AACA,WAAO01B,IAAI,CAACC,GAAL,CAAU,YAAW;AAC1B,UAAIn4B,CAAJ,EAAO6T,GAAP,EAAYoiB,GAAZ,EAAiBE,OAAjB;AACAF,SAAG,GAAG,KAAKS,KAAX;AACAP,aAAO,GAAG,EAAV;;AACA,WAAKn2B,CAAC,GAAG,CAAJ,EAAO6T,GAAG,GAAGoiB,GAAG,CAAC71B,MAAtB,EAA8BJ,CAAC,GAAG6T,GAAlC,EAAuC7T,CAAC,EAAxC,EAA4C;AAC1CwC,SAAC,GAAGyzB,GAAG,CAACj2B,CAAD,CAAP;AACAm2B,eAAO,CAAC71B,IAAR,CAAa23B,eAAe,CAACz1B,CAAD,CAAf,CAAmB,KAAKy0B,OAAL,CAAaz0B,CAAb,CAAnB,CAAb;AACD;;AACD,aAAO2zB,OAAP;AACD,KATe,CASb/zB,IATa,CASR,IATQ,CAAT,CAAP;AAUD,GAZD;;AAcA,SAAOszB,SAAP;AAED,CA1SiB,EAAlB,C;;;;;;;;;;;ACLA,IAAIhO,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAApC8V,MAAM,CAACgT,MAAP,CAAc;AAACyQ,aAAW,EAAC,YAAU;AAAC,WAAOA,WAAP;AAAmB;AAA3C,CAAd;AAA4D,IAAIllB,QAAJ;AAAayB,MAAM,CAACoQ,IAAP,CAAY,uCAAZ,EAAoD;AAAC,aAAQ,UAASlmB,CAAT,EAAW;AAACqU,YAAQ,GAACrU,CAAT;AAAW;AAAhC,CAApD,EAAsF,CAAtF;AAAyF,IAAIyqB,MAAJ,EAAWI,KAAX;AAAiB/U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS,GAA7B;AAA8B6qB,OAAK,EAAC,UAAS7qB,CAAT,EAAW;AAAC6qB,SAAK,GAAC7qB,CAAN;AAAQ;AAAxD,CAAxB,EAAkF,CAAlF;AAAqF,IAAIw5B,GAAJ;AAAQ1jB,MAAM,CAACoQ,IAAP,CAAY,UAAZ,EAAuB;AAACsT,KAAG,EAAC,UAASx5B,CAAT,EAAW;AAACw5B,OAAG,GAACx5B,CAAJ;AAAM;AAAvB,CAAvB,EAAgD,CAAhD;AAKhR,IAAMy5B,IAAI,GAAG,IAAb;AACA,IAAMC,IAAI,GAAG,GAAb;AACA,IAAMC,YAAY,GAAG,CAArB;AAEA,IAAIC,OAAO,GAAGjkB,SAAd;;AAEA,IAAMkkB,YAAY,GAAG,UAACtQ,MAAD,EAASzoB,CAAT,EAAe;AAClC,MAAMg5B,SAAS,GAAGvJ,CAAC,CAACsH,KAAF,CAAQtO,MAAM,CAAChoB,MAAP,GAAgB,CAAxB,EAA2B6gB,GAA3B,CACd,UAACjhB,CAAD;AAAA,WAAOrB,IAAI,CAACK,IAAL,CAAU0qB,KAAK,CAAC3B,SAAN,CAAgBK,MAAM,CAACpoB,CAAD,CAAtB,EAA2BooB,MAAM,CAACpoB,CAAC,GAAG,CAAL,CAAjC,CAAV,CAAP;AAAA,GADc,CAAlB;;AAEA,MAAIi1B,KAAK,GAAG,CAAZ;AACA0D,WAAS,CAAC1X,GAAV,CAAc,UAACze,CAAD;AAAA,WAAOyyB,KAAK,IAAIzyB,CAAhB;AAAA,GAAd;AACA,MAAM6lB,MAAM,GAAG,EAAf;AACA,MAAIlU,KAAK,GAAG,CAAZ;AACA,MAAIykB,QAAQ,GAAGxQ,MAAM,CAAC,CAAD,CAArB;AACA,MAAIyQ,YAAY,GAAG,CAAnB;;AACA,uDAAczJ,CAAC,CAACsH,KAAF,CAAQ/2B,CAAC,GAAG,CAAZ,CAAd,wCAA8B;AAAA,QAArBK,CAAqB;AAC5B,QAAMkvB,MAAM,GAAGlvB,CAAC,GAACi1B,KAAF,IAASt1B,CAAC,GAAG,CAAb,CAAf;;AACA,WAAOk5B,YAAY,GAAG3J,MAAtB,EAA8B;AAC5B,UAAMpd,IAAI,GAAGnT,IAAI,CAACK,IAAL,CAAU0qB,KAAK,CAAC3B,SAAN,CAAgB6Q,QAAhB,EAA0BxQ,MAAM,CAACjU,KAAK,GAAG,CAAT,CAAhC,CAAV,CAAb;;AACA,UAAI0kB,YAAY,GAAG/mB,IAAf,GAAsBod,MAA1B,EAAkC;AAChC/a,aAAK,IAAI,CAAT;AACAykB,gBAAQ,GAAGxQ,MAAM,CAACjU,KAAD,CAAjB;AACA0kB,oBAAY,IAAI/mB,IAAhB;AACD,OAJD,MAIO;AACL,YAAMlF,CAAC,GAAG,CAACsiB,MAAM,GAAG2J,YAAV,IAAwB/mB,IAAlC;AACA8mB,gBAAQ,GAAG,CAAC,CAAC,IAAIhsB,CAAL,IAAQgsB,QAAQ,CAAC,CAAD,CAAhB,GAAsBhsB,CAAC,GAACwb,MAAM,CAACjU,KAAK,GAAG,CAAT,CAAN,CAAkB,CAAlB,CAAzB,EACC,CAAC,IAAIvH,CAAL,IAAQgsB,QAAQ,CAAC,CAAD,CAAhB,GAAsBhsB,CAAC,GAACwb,MAAM,CAACjU,KAAK,GAAG,CAAT,CAAN,CAAkB,CAAlB,CADzB,CAAX;AAEA0kB,oBAAY,GAAG3J,MAAf;AACD;AACF;;AACD7G,UAAM,CAAC/nB,IAAP,CAAYopB,KAAK,CAACxmB,KAAN,CAAY01B,QAAZ,CAAZ;AACD;;AACDvQ,QAAM,CAAC/nB,IAAP,CAAY8nB,MAAM,CAACA,MAAM,CAAChoB,MAAP,GAAgB,CAAjB,CAAlB;AACA,SAAOioB,MAAP;AACD,CA5BD;;AA8BA,IAAMyQ,uBAAuB,GAAG,UAACC,SAAD,EAAYjkB,QAAZ,EAAsB0B,IAAtB,EAA+B;AAC7D,MAAM0N,IAAI,GAAG8U,wBAAwB,CAACD,SAAD,EAAYjkB,QAAZ,EAAsB0B,IAAtB,CAArC;AACA,SAAOwiB,wBAAwB,CAACD,SAAD,EAAYjkB,QAAZ,EAAsBoP,IAAI,CAAC,CAAD,CAA1B,CAA/B;AACD,CAHD;;AAKA,IAAM8U,wBAAwB,GAAG,UAACD,SAAD,EAAYjkB,QAAZ,EAAsB0B,IAAtB,EAA4B2c,OAA5B,EAAwC;AACvEA,SAAO,GAAGA,OAAO,IAAI,EAArB;AACAA,SAAO,CAAC3c,IAAD,CAAP,GAAgB,IAAhB;AACA,MAAI6R,MAAM,GAAG,EAAb;AACAA,QAAM,CAACnB,QAAP,GAAkB,CAAlB;;AACA,wDAAqB6R,SAAS,CAACviB,IAAD,CAAT,IAAmB,EAAxC,2CAA4C;AAAA,QAAnCyiB,QAAmC;;AAC1C,QAAI,CAAC9F,OAAO,CAAC8F,QAAD,CAAZ,EAAwB;AACtB,UAAMC,SAAS,GAAGF,wBAAwB,CACtCD,SADsC,EAC3BjkB,QAD2B,EACjBmkB,QADiB,EACP9F,OADO,CAA1C;AAEA+F,eAAS,CAAChS,QAAV,IACIvoB,IAAI,CAACK,IAAL,CAAU0qB,KAAK,CAAC3B,SAAN,CAAgBjT,QAAQ,CAAC0B,IAAD,CAAxB,EAAgC1B,QAAQ,CAACmkB,QAAD,CAAxC,CAAV,CADJ;;AAEA,UAAIC,SAAS,CAAChS,QAAV,GAAqBmB,MAAM,CAACnB,QAAhC,EAA0C;AACxCmB,cAAM,GAAG6Q,SAAT;AACD;AACF;AACF;;AACD7Q,QAAM,CAAC/nB,IAAP,CAAYkW,IAAZ;AACA,SAAO6R,MAAP;AACD,CAlBD;;AAoBA,IAAM8Q,gBAAgB,GAAG,UAAC7Y,MAAD,EAAY;AACnC,MAAMsI,KAAK,GAAGyP,GAAG,CAACe,qBAAJ,CAA0B9Y,MAA1B,CAAd;AACAgJ,QAAM,CAACV,KAAK,CAACxoB,MAAN,KAAiB,CAAlB,uCAAwDkgB,MAAxD,CAAN;AAEA,MAAI+Y,OAAO,GAAG7kB,SAAd;AACA,MAAIqK,OAAO,GAAGrK,SAAd;;AACA,0BAA0B,CAAC,EAAD,EAAK,EAAL,CAA1B,0BAAoC;AAA/B,QAAI8kB,aAAa,WAAjB;AACHD,WAAO,GAAGhB,GAAG,CAACkB,uBAAJ,CAA4B3Q,KAAK,CAAC,CAAD,CAAjC,EAAsC0Q,aAAtC,CAAV;AACAb,WAAO,GAAGA,OAAO,IAAI,IAAI5jB,OAAJ,EAArB;AACA,QAAM8J,KAAK,GAAG0a,OAAO,CAACpY,GAAR,CAAY,UAACrN,KAAD;AAAA,aAAY;AAACpR,SAAC,EAAEoR,KAAK,CAAC,CAAD,CAAT;AAAcnR,SAAC,EAAEmR,KAAK,CAAC,CAAD;AAAtB,OAAZ;AAAA,KAAZ,CAAd;AACA,QAAM4lB,YAAY,GAAG;AAACnc,QAAE,EAAE,CAACib,IAAN;AAAYhb,QAAE,EAAEgb,IAAhB;AAAsB/a,QAAE,EAAE,CAAC+a,IAA3B;AAAiC9a,QAAE,EAAE8a;AAArC,KAArB;;AACA,QAAI;AACFzZ,aAAO,GAAG4Z,OAAO,CAAC3Z,OAAR,CAAgBH,KAAhB,EAAuB6a,YAAvB,CAAV;AACA;AACD,KAHD,CAGE,OAAM3P,KAAN,EAAa;AACblf,aAAO,CAACkf,KAAR,6CAAwDyP,aAAxD;AACD;AACF;;AACDhQ,QAAM,CAACzK,OAAD,EAAU,wCAAV,CAAN;AAEAA,SAAO,CAAC/J,QAAR,CAAiBmM,GAAjB,CAAqB,UAACze,CAAD,EAAIxC,CAAJ,EAAU;AAC7BwC,KAAC,CAACi3B,OAAF,GAAYpB,GAAG,CAACqB,oBAAJ,CAAyBL,OAAzB,EAAkC,CAAC72B,CAAC,CAACA,CAAH,EAAMA,CAAC,CAACC,CAAR,CAAlC,CAAZ;AACAD,KAAC,CAAC2R,KAAF,GAAUnU,CAAV;AACD,GAHD;AAIA,MAAM8U,QAAQ,GAAG+J,OAAO,CAAC/J,QAAR,CAAiBmM,GAAjB,CAAqB,UAACze,CAAD;AAAA,WAAO,CAACA,CAAC,CAACA,CAAH,EAAMA,CAAC,CAACC,CAAR,EAAWwe,GAAX,CAAetiB,IAAI,CAAC4jB,KAApB,CAAP;AAAA,GAArB,CAAjB;AACA,MAAMxN,KAAK,GAAG8J,OAAO,CAAC9J,KAAR,CAAckM,GAAd,CAAkB,UAACze,CAAD;AAAA,WAAO,CAACA,CAAC,CAACgW,EAAF,CAAKrE,KAAN,EAAa3R,CAAC,CAAC+V,EAAF,CAAKpE,KAAlB,CAAP;AAAA,GAAlB,EAAmD2M,MAAnD,CACV,UAACte,CAAD;AAAA,WAAOqc,OAAO,CAAC/J,QAAR,CAAiBtS,CAAC,CAAC,CAAD,CAAlB,EAAuBi3B,OAAvB,IAAkC5a,OAAO,CAAC/J,QAAR,CAAiBtS,CAAC,CAAC,CAAD,CAAlB,EAAuBi3B,OAAhE;AAAA,GADU,CAAd;AAEAhB,SAAO,CAAC7Z,OAAR,CAAgBC,OAAhB;AAEAyK,QAAM,CAACvU,KAAK,CAAC3U,MAAN,GAAe,CAAhB,CAAN;AACA,MAAM24B,SAAS,GAAG,EAAlB;;AACA,wDAAiBhkB,KAAjB,2CAAwB;AAAA,QAAfuD,IAAe;AACtBygB,aAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,GAAqBygB,SAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,IAAsB,EAA3C;AACAygB,aAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,CAAmBhY,IAAnB,CAAwBgY,IAAI,CAAC,CAAD,CAA5B;AACAygB,aAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,GAAqBygB,SAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,IAAsB,EAA3C;AACAygB,aAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,CAAmBhY,IAAnB,CAAwBgY,IAAI,CAAC,CAAD,CAA5B;AACD;;AACD,MAAM5C,IAAI,GAAGX,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAb;AACA,MAAMmP,IAAI,GAAG4U,uBAAuB,CAACC,SAAD,EAAYjkB,QAAZ,EAAsBY,IAAtB,CAApC;AACA,MAAMlC,MAAM,GAAG0Q,IAAI,CAACjD,GAAL,CAAS,UAACjhB,CAAD;AAAA,WAAO8U,QAAQ,CAAC9U,CAAD,CAAf;AAAA,GAAT,CAAf;AAEA,MAAMsU,SAAS,GAAG,CAAlB;AACA,MAAMqlB,MAAM,GAAGzmB,QAAQ,CAACM,MAAM,CAACyN,GAAP,CAAW,UAACze,CAAD;AAAA,WAAQ;AAACA,OAAC,EAAEA,CAAC,CAAC,CAAD,CAAL;AAAUC,OAAC,EAAED,CAAC,CAAC,CAAD;AAAd,KAAR;AAAA,GAAX,CAAD,EAA0C8R,SAA1C,CAAvB;AACA,SAAOqlB,MAAM,CAAC1Y,GAAP,CAAW,UAACze,CAAD;AAAA,WAAO,CAACA,CAAC,CAACA,CAAH,EAAMA,CAAC,CAACC,CAAR,CAAP;AAAA,GAAX,CAAP;AACD,CA5CD;;AA8CA,IAAMm3B,iBAAiB,GAAG,UAACxR,MAAD,EAAY;AACpC,SAAOsQ,YAAY,CAACtQ,MAAD,EAASoQ,YAAT,CAAZ,CAAmCvX,GAAnC,CACH,UAACze,CAAD;AAAA,WAAO,CAACA,CAAC,CAAC,CAAD,CAAD,GAAK81B,IAAN,EAAY,CAACC,IAAI,GAAG/1B,CAAC,CAAC,CAAD,CAAT,IAAc81B,IAA1B,CAAP;AAAA,GADG,CAAP;AAED,CAHD;;AAKA,IAAMF,WAAW,GAAG;AAClBe,kBAAgB,EAAEA,gBADA;AAElBS,mBAAiB,EAAEA;AAFD,CAApB,C;;;;;;;;;;;ACrHAjlB,MAAM,CAACgT,MAAP,CAAc;AAACgJ,0CAAwC,EAAC,YAAU;AAAC,WAAOA,wCAAP;AAAgD;AAArG,CAAd;AAAA,IAAMA,wCAAwC,GAAG;AAAC,YAAS,CAAC;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa;AAAlD,GAAD,EAA4D;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa,IAAlD;AAAuD,kBAAa,CAApE;AAAsE,oBAAe,CAArF;AAAuF,oBAAe,CAAtG;AAAwG,eAAU,CAAC;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,kBAAN;AAAyB,aAAI,CAAC,mBAA9B;AAAkD,aAAI,mBAAtD;AAA0E,aAAI,kBAA9E;AAAiG,aAAI,mBAArG;AAAyH,aAAI,kBAA7H;AAAgJ,aAAI,oBAApJ;AAAyK,aAAI,CAAC,kBAA9K;AAAiM,6BAAoB,CAArN;AAAuN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,GAA7B;AAAiC,eAAI,GAArC;AAAyC,eAAI,GAA7C;AAAiD,eAAI,GAArD;AAAyD,eAAI,GAA7D;AAAiE,eAAI,GAArE;AAAyE,eAAI,GAA7E;AAAiF,gBAAK,EAAtF;AAAyF,gBAAK,GAA9F;AAAkG,gBAAK,EAAvG;AAA0G,gBAAK,GAA/G;AAAmH,gBAAK,GAAxH;AAA4H,gBAAK,GAAjI;AAAqI,gBAAK,GAA1I;AAA8I,gBAAK,GAAnJ;AAAuJ,gBAAK,GAA5J;AAAgK,gBAAK,EAArK;AAAwK,gBAAK,GAA7K;AAAiL,gBAAK,GAAtL;AAA0L,gBAAK,GAA/L;AAAmM,gBAAK,EAAxM;AAA2M,gBAAK,GAAhN;AAAoN,gBAAK,GAAzN;AAA6N,gBAAK,GAAlO;AAAsO,gBAAK,EAA3O;AAA8O,gBAAK,GAAnP;AAAuP,gBAAK,GAA5P;AAAgQ,gBAAK,GAArQ;AAAyQ,gBAAK,EAA9Q;AAAiR,gBAAK,GAAtR;AAA0R,gBAAK,EAA/R;AAAkS,gBAAK,GAAvS;AAA2S,gBAAK,GAAhT;AAAoT,gBAAK,EAAzT;AAA4T,gBAAK,EAAjU;AAAoU,gBAAK,GAAzU;AAA6U,gBAAK,EAAlV;AAAqV,gBAAK,EAA1V;AAA6V,gBAAK,GAAlW;AAAsW,gBAAK,GAA3W;AAA+W,gBAAK,EAApX;AAAuX,gBAAK,CAA5X;AAA8X,gBAAK,GAAnY;AAAuY,gBAAK,GAA5Y;AAAgZ,gBAAK,EAArZ;AAAwZ,gBAAK,EAA7Z;AAAga,gBAAK,GAAra;AAAya,gBAAK,GAA9a;AAAkb,gBAAK,GAAvb;AAA2b,gBAAK,GAAhc;AAAoc,gBAAK,GAAzc;AAA6c,gBAAK,GAAld;AAAsd,gBAAK,EAA3d;AAA8d,gBAAK,GAAne;AAAue,gBAAK,GAA5e;AAAgf,gBAAK,EAArf;AAAwf,gBAAK,GAA7f;AAAigB,gBAAK,EAAtgB;AAAygB,gBAAK,EAA9gB;AAAihB,gBAAK,GAAthB;AAA0hB,gBAAK,GAA/hB;AAAmiB,wBAAa;AAAhjB,SAAhO;AAAoxB,kBAAS,CAA7xB;AAA+xB,sBAAa,CAA5yB;AAA8yB,sBAAa;AAA3zB;AAA7B,KAAD,EAA81B;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,kBAAN;AAAyB,aAAI,CAAC,kBAA9B;AAAiD,aAAI,CAAC,kBAAtD;AAAyE,aAAI,CAAC,mBAA9E;AAAkG,aAAI,mBAAtG;AAA0H,aAAI,CAAC,mBAA/H;AAAmJ,aAAI,kBAAvJ;AAA0K,aAAI,kBAA9K;AAAiM,6BAAoB,CAArN;AAAuN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,GAA7B;AAAiC,eAAI,GAArC;AAAyC,eAAI,GAA7C;AAAiD,eAAI,GAArD;AAAyD,eAAI,GAA7D;AAAiE,eAAI,GAArE;AAAyE,eAAI,GAA7E;AAAiF,gBAAK,GAAtF;AAA0F,gBAAK,GAA/F;AAAmG,gBAAK,GAAxG;AAA4G,gBAAK,GAAjH;AAAqH,gBAAK,GAA1H;AAA8H,gBAAK,GAAnI;AAAuI,gBAAK,GAA5I;AAAgJ,gBAAK,GAArJ;AAAyJ,gBAAK,GAA9J;AAAkK,gBAAK,GAAvK;AAA2K,gBAAK,EAAhL;AAAmL,gBAAK,GAAxL;AAA4L,gBAAK,GAAjM;AAAqM,gBAAK,GAA1M;AAA8M,gBAAK,GAAnN;AAAuN,gBAAK,GAA5N;AAAgO,gBAAK,GAArO;AAAyO,gBAAK,EAA9O;AAAiP,gBAAK,EAAtP;AAAyP,gBAAK,GAA9P;AAAkQ,gBAAK,GAAvQ;AAA2Q,gBAAK,GAAhR;AAAoR,gBAAK,GAAzR;AAA6R,gBAAK,EAAlS;AAAqS,gBAAK,EAA1S;AAA6S,gBAAK,GAAlT;AAAsT,gBAAK,EAA3T;AAA8T,gBAAK,EAAnU;AAAsU,gBAAK,GAA3U;AAA+U,gBAAK,EAApV;AAAuV,gBAAK,EAA5V;AAA+V,gBAAK,GAApW;AAAwW,gBAAK,GAA7W;AAAiX,gBAAK,EAAtX;AAAyX,gBAAK,EAA9X;AAAiY,gBAAK,EAAtY;AAAyY,gBAAK,GAA9Y;AAAkZ,gBAAK,GAAvZ;AAA2Z,gBAAK,EAAha;AAAma,gBAAK,EAAxa;AAA2a,gBAAK,GAAhb;AAAob,gBAAK,GAAzb;AAA6b,gBAAK,EAAlc;AAAqc,gBAAK,GAA1c;AAA8c,gBAAK,GAAnd;AAAud,gBAAK,EAA5d;AAA+d,gBAAK,GAApe;AAAwe,gBAAK,GAA7e;AAAif,gBAAK,GAAtf;AAA0f,gBAAK,GAA/f;AAAmgB,gBAAK,GAAxgB;AAA4gB,gBAAK,GAAjhB;AAAqhB,gBAAK,GAA1hB;AAA8hB,gBAAK,EAAniB;AAAsiB,wBAAa;AAAnjB,SAAhO;AAAuxB,kBAAS,CAAhyB;AAAkyB,sBAAa,CAA/yB;AAAizB,sBAAa;AAA9zB;AAA7B,KAA91B,EAA8rD;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,kBAAN;AAAyB,aAAI,mBAA7B;AAAiD,aAAI,CAAC,oBAAtD;AAA2E,aAAI,oBAA/E;AAAoG,aAAI,CAAC,mBAAzG;AAA6H,aAAI,CAAC,mBAAlI;AAAsJ,aAAI,CAAC,kBAA3J;AAA8K,aAAI,CAAC,mBAAnL;AAAuM,6BAAoB,CAA3N;AAA6N,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,GAA7B;AAAiC,eAAI,EAArC;AAAwC,eAAI,GAA5C;AAAgD,eAAI,GAApD;AAAwD,eAAI,GAA5D;AAAgE,eAAI,EAApE;AAAuE,eAAI,GAA3E;AAA+E,gBAAK,GAApF;AAAwF,gBAAK,EAA7F;AAAgG,gBAAK,EAArG;AAAwG,gBAAK,EAA7G;AAAgH,gBAAK,GAArH;AAAyH,gBAAK,EAA9H;AAAiI,gBAAK,GAAtI;AAA0I,gBAAK,GAA/I;AAAmJ,gBAAK,GAAxJ;AAA4J,gBAAK,EAAjK;AAAoK,gBAAK,EAAzK;AAA4K,gBAAK,GAAjL;AAAqL,gBAAK,GAA1L;AAA8L,gBAAK,GAAnM;AAAuM,gBAAK,EAA5M;AAA+M,gBAAK,GAApN;AAAwN,gBAAK,EAA7N;AAAgO,gBAAK,GAArO;AAAyO,gBAAK,GAA9O;AAAkP,gBAAK,EAAvP;AAA0P,gBAAK,GAA/P;AAAmQ,gBAAK,EAAxQ;AAA2Q,gBAAK,GAAhR;AAAoR,gBAAK,GAAzR;AAA6R,gBAAK,EAAlS;AAAqS,gBAAK,GAA1S;AAA8S,gBAAK,GAAnT;AAAuT,gBAAK,EAA5T;AAA+T,gBAAK,GAApU;AAAwU,gBAAK,GAA7U;AAAiV,gBAAK,GAAtV;AAA0V,gBAAK,GAA/V;AAAmW,gBAAK,GAAxW;AAA4W,gBAAK,GAAjX;AAAqX,gBAAK,GAA1X;AAA8X,gBAAK,GAAnY;AAAuY,gBAAK,GAA5Y;AAAgZ,gBAAK,GAArZ;AAAyZ,gBAAK,GAA9Z;AAAka,gBAAK,EAAva;AAA0a,gBAAK,EAA/a;AAAkb,gBAAK,GAAvb;AAA2b,gBAAK,GAAhc;AAAoc,gBAAK,GAAzc;AAA6c,gBAAK,GAAld;AAAsd,gBAAK,GAA3d;AAA+d,gBAAK,EAApe;AAAue,gBAAK,GAA5e;AAAgf,gBAAK,EAArf;AAAwf,gBAAK,GAA7f;AAAigB,gBAAK,GAAtgB;AAA0gB,gBAAK,GAA/gB;AAAmhB,gBAAK,GAAxhB;AAA4hB,gBAAK,GAAjiB;AAAqiB,wBAAa;AAAljB,SAAtO;AAA4xB,kBAAS,CAAryB;AAAuyB,sBAAa,CAApzB;AAAszB,sBAAa;AAAn0B;AAA7B,KAA9rD,EAAmiF;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,oBAAL;AAA0B,aAAI,mBAA9B;AAAkD,aAAI,CAAC,kBAAvD;AAA0E,aAAI,oBAA9E;AAAmG,aAAI,CAAC,kBAAxG;AAA2H,aAAI,CAAC,kBAAhI;AAAmJ,aAAI,CAAC,mBAAxJ;AAA4K,aAAI,CAAC,mBAAjL;AAAqM,6BAAoB,CAAzN;AAA2N,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,GAA7B;AAAiC,eAAI,GAArC;AAAyC,eAAI,GAA7C;AAAiD,eAAI,GAArD;AAAyD,eAAI,EAA7D;AAAgE,eAAI,GAApE;AAAwE,eAAI,EAA5E;AAA+E,gBAAK,EAApF;AAAuF,gBAAK,EAA5F;AAA+F,gBAAK,GAApG;AAAwG,gBAAK,EAA7G;AAAgH,gBAAK,GAArH;AAAyH,gBAAK,EAA9H;AAAiI,gBAAK,GAAtI;AAA0I,gBAAK,EAA/I;AAAkJ,gBAAK,GAAvJ;AAA2J,gBAAK,GAAhK;AAAoK,gBAAK,CAAzK;AAA2K,gBAAK,EAAhL;AAAmL,gBAAK,GAAxL;AAA4L,gBAAK,GAAjM;AAAqM,gBAAK,EAA1M;AAA6M,gBAAK,EAAlN;AAAqN,gBAAK,EAA1N;AAA6N,gBAAK,EAAlO;AAAqO,gBAAK,GAA1O;AAA8O,gBAAK,GAAnP;AAAuP,gBAAK,GAA5P;AAAgQ,gBAAK,EAArQ;AAAwQ,gBAAK,GAA7Q;AAAiR,gBAAK,GAAtR;AAA0R,gBAAK,GAA/R;AAAmS,gBAAK,EAAxS;AAA2S,gBAAK,EAAhT;AAAmT,gBAAK,EAAxT;AAA2T,gBAAK,GAAhU;AAAoU,gBAAK,GAAzU;AAA6U,gBAAK,GAAlV;AAAsV,gBAAK,GAA3V;AAA+V,gBAAK,GAApW;AAAwW,gBAAK,EAA7W;AAAgX,gBAAK,EAArX;AAAwX,gBAAK,GAA7X;AAAiY,gBAAK,GAAtY;AAA0Y,gBAAK,GAA/Y;AAAmZ,gBAAK,GAAxZ;AAA4Z,gBAAK,GAAja;AAAqa,gBAAK,EAA1a;AAA6a,gBAAK,GAAlb;AAAsb,gBAAK,EAA3b;AAA8b,gBAAK,GAAnc;AAAuc,gBAAK,GAA5c;AAAgd,gBAAK,GAArd;AAAyd,gBAAK,GAA9d;AAAke,gBAAK,GAAve;AAA2e,gBAAK,EAAhf;AAAmf,gBAAK,GAAxf;AAA4f,gBAAK,EAAjgB;AAAogB,gBAAK,GAAzgB;AAA6gB,gBAAK,GAAlhB;AAAshB,gBAAK,GAA3hB;AAA+hB,wBAAa;AAA5iB,SAApO;AAAoxB,kBAAS,CAA7xB;AAA+xB,sBAAa,CAA5yB;AAA8yB,sBAAa;AAA3zB;AAA7B,KAAniF,EAAg4G;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,mBAAL;AAAyB,aAAI,CAAC,kBAA9B;AAAiD,aAAI,CAAC,kBAAtD;AAAyE,aAAI,CAAC,mBAA9E;AAAkG,aAAI,mBAAtG;AAA0H,aAAI,oBAA9H;AAAmJ,aAAI,CAAC,mBAAxJ;AAA4K,aAAI,CAAC,kBAAjL;AAAoM,6BAAoB,CAAxN;AAA0N,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,EAA7B;AAAgC,eAAI,GAApC;AAAwC,eAAI,EAA5C;AAA+C,eAAI,GAAnD;AAAuD,eAAI,EAA3D;AAA8D,eAAI,CAAlE;AAAoE,eAAI,GAAxE;AAA4E,gBAAK,GAAjF;AAAqF,gBAAK,GAA1F;AAA8F,gBAAK,EAAnG;AAAsG,gBAAK,EAA3G;AAA8G,gBAAK,GAAnH;AAAuH,gBAAK,GAA5H;AAAgI,gBAAK,EAArI;AAAwI,gBAAK,GAA7I;AAAiJ,gBAAK,EAAtJ;AAAyJ,gBAAK,EAA9J;AAAiK,gBAAK,EAAtK;AAAyK,gBAAK,EAA9K;AAAiL,gBAAK,GAAtL;AAA0L,gBAAK,GAA/L;AAAmM,gBAAK,GAAxM;AAA4M,gBAAK,GAAjN;AAAqN,gBAAK,GAA1N;AAA8N,gBAAK,CAAnO;AAAqO,gBAAK,EAA1O;AAA6O,gBAAK,CAAlP;AAAoP,gBAAK,GAAzP;AAA6P,gBAAK,GAAlQ;AAAsQ,gBAAK,EAA3Q;AAA8Q,gBAAK,GAAnR;AAAuR,gBAAK,GAA5R;AAAgS,gBAAK,EAArS;AAAwS,gBAAK,EAA7S;AAAgT,gBAAK,GAArT;AAAyT,gBAAK,GAA9T;AAAkU,gBAAK,EAAvU;AAA0U,gBAAK,GAA/U;AAAmV,gBAAK,GAAxV;AAA4V,gBAAK,EAAjW;AAAoW,gBAAK,EAAzW;AAA4W,gBAAK,EAAjX;AAAoX,gBAAK,GAAzX;AAA6X,gBAAK,GAAlY;AAAsY,gBAAK,EAA3Y;AAA8Y,gBAAK,GAAnZ;AAAuZ,gBAAK,GAA5Z;AAAga,gBAAK,GAAra;AAAya,gBAAK,EAA9a;AAAib,gBAAK,GAAtb;AAA0b,gBAAK,EAA/b;AAAkc,gBAAK,GAAvc;AAA2c,gBAAK,GAAhd;AAAod,gBAAK,EAAzd;AAA4d,gBAAK,EAAje;AAAoe,gBAAK,GAAze;AAA6e,gBAAK,GAAlf;AAAsf,gBAAK,GAA3f;AAA+f,gBAAK,EAApgB;AAAugB,gBAAK,GAA5gB;AAAghB,gBAAK,GAArhB;AAAyhB,wBAAa;AAAtiB,SAAnO;AAA6wB,kBAAS,CAAtxB;AAAwxB,sBAAa,CAAryB;AAAuyB,sBAAa;AAApzB;AAA7B,KAAh4G,EAAstI;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,mBAAL;AAAyB,aAAI,kBAA7B;AAAgD,aAAI,CAAC,kBAArD;AAAwE,aAAI,CAAC,oBAA7E;AAAkG,aAAI,mBAAtG;AAA0H,aAAI,CAAC,kBAA/H;AAAkJ,aAAI,CAAC,kBAAvJ;AAA0K,aAAI,CAAC,mBAA/K;AAAmM,6BAAoB,CAAvN;AAAyN,kBAAS;AAAC,eAAI,EAAL;AAAQ,eAAI,GAAZ;AAAgB,eAAI,EAApB;AAAuB,eAAI,EAA3B;AAA8B,eAAI,GAAlC;AAAsC,eAAI,EAA1C;AAA6C,eAAI,GAAjD;AAAqD,eAAI,EAAzD;AAA4D,eAAI,EAAhE;AAAmE,eAAI,GAAvE;AAA2E,gBAAK,GAAhF;AAAoF,gBAAK,GAAzF;AAA6F,gBAAK,EAAlG;AAAqG,gBAAK,GAA1G;AAA8G,gBAAK,GAAnH;AAAuH,gBAAK,EAA5H;AAA+H,gBAAK,EAApI;AAAuI,gBAAK,EAA5I;AAA+I,gBAAK,EAApJ;AAAuJ,gBAAK,GAA5J;AAAgK,gBAAK,GAArK;AAAyK,gBAAK,EAA9K;AAAiL,gBAAK,GAAtL;AAA0L,gBAAK,GAA/L;AAAmM,gBAAK,GAAxM;AAA4M,gBAAK,GAAjN;AAAqN,gBAAK,GAA1N;AAA8N,gBAAK,EAAnO;AAAsO,gBAAK,GAA3O;AAA+O,gBAAK,GAApP;AAAwP,gBAAK,GAA7P;AAAiQ,gBAAK,GAAtQ;AAA0Q,gBAAK,GAA/Q;AAAmR,gBAAK,EAAxR;AAA2R,gBAAK,EAAhS;AAAmS,gBAAK,GAAxS;AAA4S,gBAAK,GAAjT;AAAqT,gBAAK,EAA1T;AAA6T,gBAAK,GAAlU;AAAsU,gBAAK,EAA3U;AAA8U,gBAAK,GAAnV;AAAuV,gBAAK,EAA5V;AAA+V,gBAAK,GAApW;AAAwW,gBAAK,EAA7W;AAAgX,gBAAK,CAArX;AAAuX,gBAAK,EAA5X;AAA+X,gBAAK,GAApY;AAAwY,gBAAK,GAA7Y;AAAiZ,gBAAK,EAAtZ;AAAyZ,gBAAK,GAA9Z;AAAka,gBAAK,EAAva;AAA0a,gBAAK,GAA/a;AAAmb,gBAAK,GAAxb;AAA4b,gBAAK,GAAjc;AAAqc,gBAAK,GAA1c;AAA8c,gBAAK,GAAnd;AAAud,gBAAK,GAA5d;AAAge,gBAAK,GAAre;AAAye,gBAAK,GAA9e;AAAkf,gBAAK,EAAvf;AAA0f,gBAAK,EAA/f;AAAkgB,gBAAK,GAAvgB;AAA2gB,gBAAK,GAAhhB;AAAohB,gBAAK,GAAzhB;AAA6hB,wBAAa;AAA1iB,SAAlO;AAAgxB,kBAAS,CAAzxB;AAA2xB,sBAAa,CAAxyB;AAA0yB,sBAAa;AAAvzB;AAA7B,KAAttI,EAA+iK;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,kBAAL;AAAwB,aAAI,kBAA5B;AAA+C,aAAI,CAAC,mBAApD;AAAwE,aAAI,CAAC,mBAA7E;AAAiG,aAAI,kBAArG;AAAwH,aAAI,mBAA5H;AAAgJ,aAAI,kBAApJ;AAAuK,aAAI,mBAA3K;AAA+L,6BAAoB,CAAnN;AAAqN,kBAAS;AAAC,eAAI,EAAL;AAAQ,eAAI,GAAZ;AAAgB,eAAI,GAApB;AAAwB,eAAI,GAA5B;AAAgC,eAAI,GAApC;AAAwC,eAAI,EAA5C;AAA+C,eAAI,GAAnD;AAAuD,eAAI,EAA3D;AAA8D,eAAI,EAAlE;AAAqE,eAAI,GAAzE;AAA6E,gBAAK,GAAlF;AAAsF,gBAAK,GAA3F;AAA+F,gBAAK,EAApG;AAAuG,gBAAK,GAA5G;AAAgH,gBAAK,GAArH;AAAyH,gBAAK,EAA9H;AAAiI,gBAAK,GAAtI;AAA0I,gBAAK,GAA/I;AAAmJ,gBAAK,EAAxJ;AAA2J,gBAAK,EAAhK;AAAmK,gBAAK,EAAxK;AAA2K,gBAAK,GAAhL;AAAoL,gBAAK,GAAzL;AAA6L,gBAAK,GAAlM;AAAsM,gBAAK,GAA3M;AAA+M,gBAAK,GAApN;AAAwN,gBAAK,GAA7N;AAAiO,gBAAK,GAAtO;AAA0O,gBAAK,GAA/O;AAAmP,gBAAK,GAAxP;AAA4P,gBAAK,GAAjQ;AAAqQ,gBAAK,GAA1Q;AAA8Q,gBAAK,GAAnR;AAAuR,gBAAK,EAA5R;AAA+R,gBAAK,EAApS;AAAuS,gBAAK,EAA5S;AAA+S,gBAAK,EAApT;AAAuT,gBAAK,EAA5T;AAA+T,gBAAK,GAApU;AAAwU,gBAAK,EAA7U;AAAgV,gBAAK,EAArV;AAAwV,gBAAK,GAA7V;AAAiW,gBAAK,EAAtW;AAAyW,gBAAK,GAA9W;AAAkX,gBAAK,EAAvX;AAA0X,gBAAK,GAA/X;AAAmY,gBAAK,GAAxY;AAA4Y,gBAAK,EAAjZ;AAAoZ,gBAAK,GAAzZ;AAA6Z,gBAAK,EAAla;AAAqa,gBAAK,EAA1a;AAA6a,gBAAK,EAAlb;AAAqb,gBAAK,EAA1b;AAA6b,gBAAK,GAAlc;AAAsc,gBAAK,GAA3c;AAA+c,gBAAK,EAApd;AAAud,gBAAK,GAA5d;AAAge,gBAAK,EAAre;AAAwe,gBAAK,EAA7e;AAAgf,gBAAK,GAArf;AAAyf,gBAAK,EAA9f;AAAigB,gBAAK,EAAtgB;AAAygB,gBAAK,GAA9gB;AAAkhB,gBAAK,EAAvhB;AAA0hB,wBAAa;AAAviB,SAA9N;AAAywB,kBAAS,CAAlxB;AAAoxB,sBAAa,CAAjyB;AAAmyB,sBAAa;AAAhzB;AAA7B,KAA/iK,EAAi4L;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,mBAAL;AAAyB,aAAI,CAAC,mBAA9B;AAAkD,aAAI,CAAC,kBAAvD;AAA0E,aAAI,CAAC,kBAA/E;AAAkG,aAAI,CAAC,kBAAvG;AAA0H,aAAI,CAAC,mBAA/H;AAAmJ,aAAI,kBAAvJ;AAA0K,aAAI,CAAC,kBAA/K;AAAkM,6BAAoB,CAAtN;AAAwN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,GAA7B;AAAiC,eAAI,GAArC;AAAyC,eAAI,GAA7C;AAAiD,eAAI,GAArD;AAAyD,eAAI,EAA7D;AAAgE,eAAI,EAApE;AAAuE,eAAI,GAA3E;AAA+E,gBAAK,GAApF;AAAwF,gBAAK,EAA7F;AAAgG,gBAAK,GAArG;AAAyG,gBAAK,EAA9G;AAAiH,gBAAK,GAAtH;AAA0H,gBAAK,GAA/H;AAAmI,gBAAK,EAAxI;AAA2I,gBAAK,CAAhJ;AAAkJ,gBAAK,GAAvJ;AAA2J,gBAAK,GAAhK;AAAoK,gBAAK,GAAzK;AAA6K,gBAAK,EAAlL;AAAqL,gBAAK,GAA1L;AAA8L,gBAAK,GAAnM;AAAuM,gBAAK,GAA5M;AAAgN,gBAAK,EAArN;AAAwN,gBAAK,EAA7N;AAAgO,gBAAK,CAArO;AAAuO,gBAAK,GAA5O;AAAgP,gBAAK,EAArP;AAAwP,gBAAK,GAA7P;AAAiQ,gBAAK,GAAtQ;AAA0Q,gBAAK,EAA/Q;AAAkR,gBAAK,GAAvR;AAA2R,gBAAK,GAAhS;AAAoS,gBAAK,GAAzS;AAA6S,gBAAK,EAAlT;AAAqT,gBAAK,EAA1T;AAA6T,gBAAK,GAAlU;AAAsU,gBAAK,GAA3U;AAA+U,gBAAK,GAApV;AAAwV,gBAAK,EAA7V;AAAgW,gBAAK,EAArW;AAAwW,gBAAK,EAA7W;AAAgX,gBAAK,GAArX;AAAyX,gBAAK,GAA9X;AAAkY,gBAAK,GAAvY;AAA2Y,gBAAK,GAAhZ;AAAoZ,gBAAK,EAAzZ;AAA4Z,gBAAK,GAAja;AAAqa,gBAAK,EAA1a;AAA6a,gBAAK,GAAlb;AAAsb,gBAAK,EAA3b;AAA8b,gBAAK,GAAnc;AAAuc,gBAAK,GAA5c;AAAgd,gBAAK,EAArd;AAAwd,gBAAK,EAA7d;AAAge,gBAAK,EAAre;AAAwe,gBAAK,GAA7e;AAAif,gBAAK,GAAtf;AAA0f,gBAAK,GAA/f;AAAmgB,gBAAK,GAAxgB;AAA4gB,gBAAK,GAAjhB;AAAqhB,gBAAK,GAA1hB;AAA8hB,wBAAa;AAA3iB,SAAjO;AAAgxB,kBAAS,CAAzxB;AAA2xB,sBAAa,CAAxyB;AAA0yB,sBAAa;AAAvzB;AAA7B,KAAj4L,CAAlH;AAA60N,cAAS;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,kBAAL;AAAwB,aAAI,CAAC,kBAA7B;AAAgD,aAAI,mBAApD;AAAwE,aAAI,CAAC,mBAA7E;AAAiG,aAAI,mBAArG;AAAyH,aAAI,kBAA7H;AAAgJ,aAAI,CAAC,mBAArJ;AAAyK,aAAI,mBAA7K;AAAiM,6BAAoB,CAArN;AAAuN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,EAA7B;AAAgC,eAAI,GAApC;AAAwC,eAAI,GAA5C;AAAgD,eAAI,GAApD;AAAwD,eAAI,EAA5D;AAA+D,eAAI,GAAnE;AAAuE,eAAI,EAA3E;AAA8E,gBAAK,GAAnF;AAAuF,gBAAK,GAA5F;AAAgG,gBAAK,EAArG;AAAwG,gBAAK,GAA7G;AAAiH,gBAAK,GAAtH;AAA0H,gBAAK,GAA/H;AAAmI,gBAAK,EAAxI;AAA2I,gBAAK,EAAhJ;AAAmJ,gBAAK,GAAxJ;AAA4J,gBAAK,GAAjK;AAAqK,gBAAK,GAA1K;AAA8K,gBAAK,GAAnL;AAAuL,gBAAK,GAA5L;AAAgM,gBAAK,EAArM;AAAwM,gBAAK,EAA7M;AAAgN,gBAAK,GAArN;AAAyN,gBAAK,EAA9N;AAAiO,gBAAK,GAAtO;AAA0O,gBAAK,GAA/O;AAAmP,gBAAK,GAAxP;AAA4P,gBAAK,GAAjQ;AAAqQ,gBAAK,GAA1Q;AAA8Q,gBAAK,GAAnR;AAAuR,gBAAK,EAA5R;AAA+R,gBAAK,EAApS;AAAuS,gBAAK,EAA5S;AAA+S,gBAAK,EAApT;AAAuT,gBAAK,CAA5T;AAA8T,gBAAK,GAAnU;AAAuU,gBAAK,EAA5U;AAA+U,gBAAK,GAApV;AAAwV,gBAAK,GAA7V;AAAiW,gBAAK,GAAtW;AAA0W,gBAAK,GAA/W;AAAmX,gBAAK,EAAxX;AAA2X,gBAAK,GAAhY;AAAoY,gBAAK,GAAzY;AAA6Y,gBAAK,EAAlZ;AAAqZ,gBAAK,EAA1Z;AAA6Z,gBAAK,GAAla;AAAsa,gBAAK,GAA3a;AAA+a,gBAAK,EAApb;AAAub,gBAAK,GAA5b;AAAgc,gBAAK,GAArc;AAAyc,gBAAK,GAA9c;AAAkd,gBAAK,GAAvd;AAA2d,gBAAK,GAAhe;AAAoe,gBAAK,GAAze;AAA6e,gBAAK,EAAlf;AAAqf,gBAAK,GAA1f;AAA8f,gBAAK,GAAngB;AAAugB,gBAAK,GAA5gB;AAAghB,gBAAK,GAArhB;AAAyhB,gBAAK,EAA9hB;AAAiiB,wBAAa;AAA9iB,SAAhO;AAAkxB,kBAAS,CAA3xB;AAA6xB,sBAAa,CAA1yB;AAA4yB,sBAAa;AAAzzB;AAA7B;AAAt1N,GAA5D,EAA8uP;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa;AAAlD,GAA9uP,EAAwyP;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa,IAAlD;AAAuD,kBAAa,CAApE;AAAsE,oBAAe,CAArF;AAAuF,oBAAe,CAAtG;AAAwG,eAAU,CAAC;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,mBAAN;AAA0B,aAAI,kBAA9B;AAAiD,aAAI,CAAC,mBAAtD;AAA0E,aAAI,CAAC,mBAA/E;AAAmG,aAAI,CAAC,mBAAxG;AAA4H,aAAI,CAAC,mBAAjI;AAAqJ,aAAI,kBAAzJ;AAA4K,aAAI,CAAC,kBAAjL;AAAoM,6BAAoB,CAAxN;AAA0N,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,EAAb;AAAgB,eAAI,EAApB;AAAuB,eAAI,GAA3B;AAA+B,eAAI,EAAnC;AAAsC,eAAI,GAA1C;AAA8C,eAAI,GAAlD;AAAsD,eAAI,GAA1D;AAA8D,eAAI,EAAlE;AAAqE,eAAI,GAAzE;AAA6E,gBAAK,GAAlF;AAAsF,gBAAK,EAA3F;AAA8F,gBAAK,EAAnG;AAAsG,gBAAK,EAA3G;AAA8G,gBAAK,GAAnH;AAAuH,gBAAK,EAA5H;AAA+H,gBAAK,GAApI;AAAwI,gBAAK,EAA7I;AAAgJ,gBAAK,GAArJ;AAAyJ,gBAAK,EAA9J;AAAiK,gBAAK,GAAtK;AAA0K,gBAAK,GAA/K;AAAmL,gBAAK,GAAxL;AAA4L,gBAAK,GAAjM;AAAqM,gBAAK,EAA1M;AAA6M,gBAAK,GAAlN;AAAsN,gBAAK,GAA3N;AAA+N,gBAAK,GAApO;AAAwO,gBAAK,EAA7O;AAAgP,gBAAK,EAArP;AAAwP,gBAAK,GAA7P;AAAiQ,gBAAK,GAAtQ;AAA0Q,gBAAK,GAA/Q;AAAmR,gBAAK,GAAxR;AAA4R,gBAAK,GAAjS;AAAqS,gBAAK,GAA1S;AAA8S,gBAAK,GAAnT;AAAuT,gBAAK,EAA5T;AAA+T,gBAAK,GAApU;AAAwU,gBAAK,GAA7U;AAAiV,gBAAK,GAAtV;AAA0V,gBAAK,GAA/V;AAAmW,gBAAK,EAAxW;AAA2W,gBAAK,GAAhX;AAAoX,gBAAK,GAAzX;AAA6X,gBAAK,GAAlY;AAAsY,gBAAK,GAA3Y;AAA+Y,gBAAK,GAApZ;AAAwZ,gBAAK,GAA7Z;AAAia,gBAAK,GAAta;AAA0a,gBAAK,EAA/a;AAAkb,gBAAK,EAAvb;AAA0b,gBAAK,GAA/b;AAAmc,gBAAK,GAAxc;AAA4c,gBAAK,GAAjd;AAAqd,gBAAK,EAA1d;AAA6d,gBAAK,GAAle;AAAse,gBAAK,CAA3e;AAA6e,gBAAK,GAAlf;AAAsf,gBAAK,EAA3f;AAA8f,gBAAK,EAAngB;AAAsgB,gBAAK,EAA3gB;AAA8gB,gBAAK,GAAnhB;AAAuhB,gBAAK,GAA5hB;AAAgiB,wBAAa;AAA7iB,SAAnO;AAAoxB,kBAAS,CAA7xB;AAA+xB,sBAAa,CAA5yB;AAA8yB,sBAAa;AAA3zB;AAA7B,KAAD,EAA81B;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,mBAAN;AAA0B,aAAI,CAAC,kBAA/B;AAAkD,aAAI,mBAAtD;AAA0E,aAAI,mBAA9E;AAAkG,aAAI,kBAAtG;AAAyH,aAAI,kBAA7H;AAAgJ,aAAI,CAAC,mBAArJ;AAAyK,aAAI,oBAA7K;AAAkM,6BAAoB,CAAtN;AAAwN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,EAA7B;AAAgC,eAAI,GAApC;AAAwC,eAAI,EAA5C;AAA+C,eAAI,GAAnD;AAAuD,eAAI,GAA3D;AAA+D,eAAI,GAAnE;AAAuE,eAAI,EAA3E;AAA8E,gBAAK,GAAnF;AAAuF,gBAAK,GAA5F;AAAgG,gBAAK,CAArG;AAAuG,gBAAK,GAA5G;AAAgH,gBAAK,GAArH;AAAyH,gBAAK,GAA9H;AAAkI,gBAAK,EAAvI;AAA0I,gBAAK,GAA/I;AAAmJ,gBAAK,GAAxJ;AAA4J,gBAAK,GAAjK;AAAqK,gBAAK,EAA1K;AAA6K,gBAAK,GAAlL;AAAsL,gBAAK,GAA3L;AAA+L,gBAAK,EAApM;AAAuM,gBAAK,GAA5M;AAAgN,gBAAK,GAArN;AAAyN,gBAAK,EAA9N;AAAiO,gBAAK,GAAtO;AAA0O,gBAAK,EAA/O;AAAkP,gBAAK,EAAvP;AAA0P,gBAAK,GAA/P;AAAmQ,gBAAK,EAAxQ;AAA2Q,gBAAK,GAAhR;AAAoR,gBAAK,GAAzR;AAA6R,gBAAK,GAAlS;AAAsS,gBAAK,EAA3S;AAA8S,gBAAK,GAAnT;AAAuT,gBAAK,GAA5T;AAAgU,gBAAK,GAArU;AAAyU,gBAAK,EAA9U;AAAiV,gBAAK,GAAtV;AAA0V,gBAAK,EAA/V;AAAkW,gBAAK,GAAvW;AAA2W,gBAAK,GAAhX;AAAoX,gBAAK,GAAzX;AAA6X,gBAAK,GAAlY;AAAsY,gBAAK,GAA3Y;AAA+Y,gBAAK,EAApZ;AAAuZ,gBAAK,EAA5Z;AAA+Z,gBAAK,GAApa;AAAwa,gBAAK,EAA7a;AAAgb,gBAAK,EAArb;AAAwb,gBAAK,EAA7b;AAAgc,gBAAK,GAArc;AAAyc,gBAAK,GAA9c;AAAkd,gBAAK,GAAvd;AAA2d,gBAAK,GAAhe;AAAoe,gBAAK,EAAze;AAA4e,gBAAK,GAAjf;AAAqf,gBAAK,GAA1f;AAA8f,gBAAK,GAAngB;AAAugB,gBAAK,GAA5gB;AAAghB,gBAAK,GAArhB;AAAyhB,gBAAK,EAA9hB;AAAiiB,wBAAa;AAA9iB,SAAjO;AAAmxB,kBAAS,CAA5xB;AAA8xB,sBAAa,CAA3yB;AAA6yB,sBAAa;AAA1zB;AAA7B,KAA91B,EAA0rD;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,kBAAN;AAAyB,aAAI,kBAA7B;AAAgD,aAAI,oBAApD;AAAyE,aAAI,CAAC,kBAA9E;AAAiG,aAAI,CAAC,mBAAtG;AAA0H,aAAI,CAAC,kBAA/H;AAAkJ,aAAI,CAAC,kBAAvJ;AAA0K,aAAI,CAAC,mBAA/K;AAAmM,6BAAoB,CAAvN;AAAyN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,EAAb;AAAgB,eAAI,CAApB;AAAsB,eAAI,EAA1B;AAA6B,eAAI,EAAjC;AAAoC,eAAI,CAAxC;AAA0C,eAAI,GAA9C;AAAkD,eAAI,GAAtD;AAA0D,eAAI,GAA9D;AAAkE,eAAI,EAAtE;AAAyE,gBAAK,EAA9E;AAAiF,gBAAK,GAAtF;AAA0F,gBAAK,EAA/F;AAAkG,gBAAK,EAAvG;AAA0G,gBAAK,GAA/G;AAAmH,gBAAK,EAAxH;AAA2H,gBAAK,GAAhI;AAAoI,gBAAK,EAAzI;AAA4I,gBAAK,GAAjJ;AAAqJ,gBAAK,GAA1J;AAA8J,gBAAK,GAAnK;AAAuK,gBAAK,EAA5K;AAA+K,gBAAK,GAApL;AAAwL,gBAAK,EAA7L;AAAgM,gBAAK,EAArM;AAAwM,gBAAK,GAA7M;AAAiN,gBAAK,EAAtN;AAAyN,gBAAK,GAA9N;AAAkO,gBAAK,GAAvO;AAA2O,gBAAK,GAAhP;AAAoP,gBAAK,GAAzP;AAA6P,gBAAK,GAAlQ;AAAsQ,gBAAK,GAA3Q;AAA+Q,gBAAK,GAApR;AAAwR,gBAAK,GAA7R;AAAiS,gBAAK,CAAtS;AAAwS,gBAAK,EAA7S;AAAgT,gBAAK,GAArT;AAAyT,gBAAK,GAA9T;AAAkU,gBAAK,GAAvU;AAA2U,gBAAK,GAAhV;AAAoV,gBAAK,GAAzV;AAA6V,gBAAK,GAAlW;AAAsW,gBAAK,CAA3W;AAA6W,gBAAK,EAAlX;AAAqX,gBAAK,GAA1X;AAA8X,gBAAK,GAAnY;AAAuY,gBAAK,GAA5Y;AAAgZ,gBAAK,GAArZ;AAAyZ,gBAAK,GAA9Z;AAAka,gBAAK,EAAva;AAA0a,gBAAK,GAA/a;AAAmb,gBAAK,EAAxb;AAA2b,gBAAK,EAAhc;AAAmc,gBAAK,GAAxc;AAA4c,gBAAK,GAAjd;AAAqd,gBAAK,GAA1d;AAA8d,gBAAK,EAAne;AAAse,gBAAK,GAA3e;AAA+e,gBAAK,EAApf;AAAuf,gBAAK,GAA5f;AAAggB,gBAAK,EAArgB;AAAwgB,gBAAK,GAA7gB;AAAihB,gBAAK,GAAthB;AAA0hB,wBAAa;AAAviB,SAAlO;AAA6wB,kBAAS,CAAtxB;AAAwxB,sBAAa,CAAryB;AAAuyB,sBAAa;AAApzB;AAA7B,KAA1rD,EAAghF;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,kBAAL;AAAwB,aAAI,CAAC,eAA7B;AAA6C,aAAI,mBAAjD;AAAqE,aAAI,CAAC,iBAA1E;AAA4F,aAAI,kBAAhG;AAAmH,aAAI,kBAAvH;AAA0I,aAAI,CAAC,kBAA/I;AAAkK,aAAI,mBAAtK;AAA0L,6BAAoB,CAA9M;AAAgN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,GAA7B;AAAiC,eAAI,EAArC;AAAwC,eAAI,GAA5C;AAAgD,eAAI,GAApD;AAAwD,eAAI,EAA5D;AAA+D,eAAI,EAAnE;AAAsE,eAAI,EAA1E;AAA6E,gBAAK,EAAlF;AAAqF,gBAAK,GAA1F;AAA8F,gBAAK,GAAnG;AAAuG,gBAAK,GAA5G;AAAgH,gBAAK,GAArH;AAAyH,gBAAK,GAA9H;AAAkI,gBAAK,GAAvI;AAA2I,gBAAK,EAAhJ;AAAmJ,gBAAK,GAAxJ;AAA4J,gBAAK,GAAjK;AAAqK,gBAAK,EAA1K;AAA6K,gBAAK,EAAlL;AAAqL,gBAAK,GAA1L;AAA8L,gBAAK,EAAnM;AAAsM,gBAAK,EAA3M;AAA8M,gBAAK,GAAnN;AAAuN,gBAAK,EAA5N;AAA+N,gBAAK,GAApO;AAAwO,gBAAK,EAA7O;AAAgP,gBAAK,GAArP;AAAyP,gBAAK,GAA9P;AAAkQ,gBAAK,GAAvQ;AAA2Q,gBAAK,GAAhR;AAAoR,gBAAK,GAAzR;AAA6R,gBAAK,GAAlS;AAAsS,gBAAK,CAA3S;AAA6S,gBAAK,CAAlT;AAAoT,gBAAK,GAAzT;AAA6T,gBAAK,GAAlU;AAAsU,gBAAK,EAA3U;AAA8U,gBAAK,EAAnV;AAAsV,gBAAK,EAA3V;AAA8V,gBAAK,GAAnW;AAAuW,gBAAK,EAA5W;AAA+W,gBAAK,GAApX;AAAwX,gBAAK,GAA7X;AAAiY,gBAAK,GAAtY;AAA0Y,gBAAK,EAA/Y;AAAkZ,gBAAK,GAAvZ;AAA2Z,gBAAK,GAAha;AAAoa,gBAAK,EAAza;AAA4a,gBAAK,GAAjb;AAAqb,gBAAK,GAA1b;AAA8b,gBAAK,EAAnc;AAAsc,gBAAK,GAA3c;AAA+c,gBAAK,GAApd;AAAwd,gBAAK,GAA7d;AAAie,gBAAK,GAAte;AAA0e,gBAAK,GAA/e;AAAmf,gBAAK,GAAxf;AAA4f,gBAAK,EAAjgB;AAAogB,gBAAK,GAAzgB;AAA6gB,gBAAK,GAAlhB;AAAshB,gBAAK,EAA3hB;AAA8hB,wBAAa;AAA3iB,SAAzN;AAAwwB,kBAAS,CAAjxB;AAAmxB,sBAAa,CAAhyB;AAAkyB,sBAAa;AAA/yB;AAA7B,KAAhhF,EAAi2G;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,kBAAL;AAAwB,aAAI,CAAC,kBAA7B;AAAgD,aAAI,mBAApD;AAAwE,aAAI,CAAC,mBAA7E;AAAiG,aAAI,kBAArG;AAAwH,aAAI,kBAA5H;AAA+I,aAAI,CAAC,mBAApJ;AAAwK,aAAI,mBAA5K;AAAgM,6BAAoB,CAApN;AAAsN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,EAArB;AAAwB,eAAI,EAA5B;AAA+B,eAAI,EAAnC;AAAsC,eAAI,GAA1C;AAA8C,eAAI,GAAlD;AAAsD,eAAI,EAA1D;AAA6D,eAAI,GAAjE;AAAqE,eAAI,EAAzE;AAA4E,gBAAK,GAAjF;AAAqF,gBAAK,CAA1F;AAA4F,gBAAK,EAAjG;AAAoG,gBAAK,EAAzG;AAA4G,gBAAK,GAAjH;AAAqH,gBAAK,GAA1H;AAA8H,gBAAK,EAAnI;AAAsI,gBAAK,GAA3I;AAA+I,gBAAK,EAApJ;AAAuJ,gBAAK,EAA5J;AAA+J,gBAAK,EAApK;AAAuK,gBAAK,GAA5K;AAAgL,gBAAK,GAArL;AAAyL,gBAAK,EAA9L;AAAiM,gBAAK,GAAtM;AAA0M,gBAAK,GAA/M;AAAmN,gBAAK,GAAxN;AAA4N,gBAAK,GAAjO;AAAqO,gBAAK,EAA1O;AAA6O,gBAAK,EAAlP;AAAqP,gBAAK,GAA1P;AAA8P,gBAAK,GAAnQ;AAAuQ,gBAAK,CAA5Q;AAA8Q,gBAAK,GAAnR;AAAuR,gBAAK,GAA5R;AAAgS,gBAAK,EAArS;AAAwS,gBAAK,GAA7S;AAAiT,gBAAK,GAAtT;AAA0T,gBAAK,GAA/T;AAAmU,gBAAK,EAAxU;AAA2U,gBAAK,GAAhV;AAAoV,gBAAK,GAAzV;AAA6V,gBAAK,GAAlW;AAAsW,gBAAK,EAA3W;AAA8W,gBAAK,EAAnX;AAAsX,gBAAK,GAA3X;AAA+X,gBAAK,GAApY;AAAwY,gBAAK,EAA7Y;AAAgZ,gBAAK,EAArZ;AAAwZ,gBAAK,GAA7Z;AAAia,gBAAK,GAAta;AAA0a,gBAAK,GAA/a;AAAmb,gBAAK,EAAxb;AAA2b,gBAAK,EAAhc;AAAmc,gBAAK,GAAxc;AAA4c,gBAAK,GAAjd;AAAqd,gBAAK,EAA1d;AAA6d,gBAAK,EAAle;AAAqe,gBAAK,GAA1e;AAA8e,gBAAK,EAAnf;AAAsf,gBAAK,GAA3f;AAA+f,gBAAK,GAApgB;AAAwgB,gBAAK,GAA7gB;AAAihB,gBAAK,EAAthB;AAAyhB,wBAAa;AAAtiB,SAA/N;AAAywB,kBAAS,CAAlxB;AAAoxB,sBAAa,CAAjyB;AAAmyB,sBAAa;AAAhzB;AAA7B,KAAj2G,EAAmrI;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,kBAAN;AAAyB,aAAI,kBAA7B;AAAgD,aAAI,mBAApD;AAAwE,aAAI,kBAA5E;AAA+F,aAAI,CAAC,kBAApG;AAAuH,aAAI,CAAC,kBAA5H;AAA+I,aAAI,mBAAnJ;AAAuK,aAAI,CAAC,kBAA5K;AAA+L,6BAAoB,CAAnN;AAAqN,kBAAS;AAAC,eAAI,EAAL;AAAQ,eAAI,GAAZ;AAAgB,eAAI,GAApB;AAAwB,eAAI,GAA5B;AAAgC,eAAI,GAApC;AAAwC,eAAI,GAA5C;AAAgD,eAAI,GAApD;AAAwD,eAAI,GAA5D;AAAgE,eAAI,GAApE;AAAwE,eAAI,GAA5E;AAAgF,gBAAK,GAArF;AAAyF,gBAAK,GAA9F;AAAkG,gBAAK,GAAvG;AAA2G,gBAAK,EAAhH;AAAmH,gBAAK,GAAxH;AAA4H,gBAAK,EAAjI;AAAoI,gBAAK,GAAzI;AAA6I,gBAAK,GAAlJ;AAAsJ,gBAAK,EAA3J;AAA8J,gBAAK,GAAnK;AAAuK,gBAAK,EAA5K;AAA+K,gBAAK,GAApL;AAAwL,gBAAK,GAA7L;AAAiM,gBAAK,EAAtM;AAAyM,gBAAK,CAA9M;AAAgN,gBAAK,GAArN;AAAyN,gBAAK,CAA9N;AAAgO,gBAAK,GAArO;AAAyO,gBAAK,GAA9O;AAAkP,gBAAK,EAAvP;AAA0P,gBAAK,GAA/P;AAAmQ,gBAAK,EAAxQ;AAA2Q,gBAAK,GAAhR;AAAoR,gBAAK,CAAzR;AAA2R,gBAAK,GAAhS;AAAoS,gBAAK,GAAzS;AAA6S,gBAAK,EAAlT;AAAqT,gBAAK,GAA1T;AAA8T,gBAAK,GAAnU;AAAuU,gBAAK,GAA5U;AAAgV,gBAAK,GAArV;AAAyV,gBAAK,GAA9V;AAAkW,gBAAK,EAAvW;AAA0W,gBAAK,GAA/W;AAAmX,gBAAK,GAAxX;AAA4X,gBAAK,GAAjY;AAAqY,gBAAK,GAA1Y;AAA8Y,gBAAK,GAAnZ;AAAuZ,gBAAK,GAA5Z;AAAga,gBAAK,EAAra;AAAwa,gBAAK,EAA7a;AAAgb,gBAAK,GAArb;AAAyb,gBAAK,GAA9b;AAAkc,gBAAK,EAAvc;AAA0c,gBAAK,GAA/c;AAAmd,gBAAK,EAAxd;AAA2d,gBAAK,EAAhe;AAAme,gBAAK,GAAxe;AAA4e,gBAAK,GAAjf;AAAqf,gBAAK,EAA1f;AAA6f,gBAAK,EAAlgB;AAAqgB,gBAAK,GAA1gB;AAA8gB,gBAAK,GAAnhB;AAAuhB,gBAAK,GAA5hB;AAAgiB,wBAAa;AAA7iB,SAA9N;AAA+wB,kBAAS,CAAxxB;AAA0xB,sBAAa,CAAvyB;AAAyyB,sBAAa;AAAtzB;AAA7B,KAAnrI,EAA2gK;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,oBAAN;AAA2B,aAAI,kBAA/B;AAAkD,aAAI,mBAAtD;AAA0E,aAAI,mBAA9E;AAAkG,aAAI,CAAC,mBAAvG;AAA2H,aAAI,mBAA/H;AAAmJ,aAAI,kBAAvJ;AAA0K,aAAI,CAAC,kBAA/K;AAAkM,6BAAoB,CAAtN;AAAwN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,EAArB;AAAwB,eAAI,GAA5B;AAAgC,eAAI,EAApC;AAAuC,eAAI,GAA3C;AAA+C,eAAI,GAAnD;AAAuD,eAAI,GAA3D;AAA+D,eAAI,EAAnE;AAAsE,eAAI,GAA1E;AAA8E,gBAAK,GAAnF;AAAuF,gBAAK,EAA5F;AAA+F,gBAAK,EAApG;AAAuG,gBAAK,CAA5G;AAA8G,gBAAK,GAAnH;AAAuH,gBAAK,EAA5H;AAA+H,gBAAK,GAApI;AAAwI,gBAAK,GAA7I;AAAiJ,gBAAK,EAAtJ;AAAyJ,gBAAK,GAA9J;AAAkK,gBAAK,GAAvK;AAA2K,gBAAK,GAAhL;AAAoL,gBAAK,GAAzL;AAA6L,gBAAK,EAAlM;AAAqM,gBAAK,GAA1M;AAA8M,gBAAK,GAAnN;AAAuN,gBAAK,GAA5N;AAAgO,gBAAK,GAArO;AAAyO,gBAAK,GAA9O;AAAkP,gBAAK,GAAvP;AAA2P,gBAAK,GAAhQ;AAAoQ,gBAAK,EAAzQ;AAA4Q,gBAAK,GAAjR;AAAqR,gBAAK,EAA1R;AAA6R,gBAAK,EAAlS;AAAqS,gBAAK,GAA1S;AAA8S,gBAAK,GAAnT;AAAuT,gBAAK,EAA5T;AAA+T,gBAAK,GAApU;AAAwU,gBAAK,GAA7U;AAAiV,gBAAK,EAAtV;AAAyV,gBAAK,GAA9V;AAAkW,gBAAK,GAAvW;AAA2W,gBAAK,GAAhX;AAAoX,gBAAK,EAAzX;AAA4X,gBAAK,EAAjY;AAAoY,gBAAK,GAAzY;AAA6Y,gBAAK,EAAlZ;AAAqZ,gBAAK,GAA1Z;AAA8Z,gBAAK,GAAna;AAAua,gBAAK,GAA5a;AAAgb,gBAAK,GAArb;AAAyb,gBAAK,EAA9b;AAAic,gBAAK,EAAtc;AAAyc,gBAAK,GAA9c;AAAkd,gBAAK,EAAvd;AAA0d,gBAAK,CAA/d;AAAie,gBAAK,GAAte;AAA0e,gBAAK,EAA/e;AAAkf,gBAAK,EAAvf;AAA0f,gBAAK,GAA/f;AAAmgB,gBAAK,GAAxgB;AAA4gB,gBAAK,GAAjhB;AAAqhB,gBAAK,GAA1hB;AAA8hB,wBAAa;AAA3iB,SAAjO;AAAgxB,kBAAS,CAAzxB;AAA2xB,sBAAa,CAAxyB;AAA0yB,sBAAa;AAAvzB;AAA7B,KAA3gK,EAAo2L;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,kBAAL;AAAwB,aAAI,CAAC,kBAA7B;AAAgD,aAAI,mBAApD;AAAwE,aAAI,CAAC,kBAA7E;AAAgG,aAAI,kBAApG;AAAuH,aAAI,mBAA3H;AAA+I,aAAI,CAAC,kBAApJ;AAAuK,aAAI,mBAA3K;AAA+L,6BAAoB,CAAnN;AAAqN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,GAArB;AAAyB,eAAI,EAA7B;AAAgC,eAAI,EAApC;AAAuC,eAAI,GAA3C;AAA+C,eAAI,GAAnD;AAAuD,eAAI,EAA3D;AAA8D,eAAI,GAAlE;AAAsE,eAAI,EAA1E;AAA6E,gBAAK,GAAlF;AAAsF,gBAAK,EAA3F;AAA8F,gBAAK,GAAnG;AAAuG,gBAAK,GAA5G;AAAgH,gBAAK,GAArH;AAAyH,gBAAK,GAA9H;AAAkI,gBAAK,EAAvI;AAA0I,gBAAK,EAA/I;AAAkJ,gBAAK,GAAvJ;AAA2J,gBAAK,GAAhK;AAAoK,gBAAK,GAAzK;AAA6K,gBAAK,GAAlL;AAAsL,gBAAK,GAA3L;AAA+L,gBAAK,EAApM;AAAuM,gBAAK,GAA5M;AAAgN,gBAAK,EAArN;AAAwN,gBAAK,GAA7N;AAAiO,gBAAK,EAAtO;AAAyO,gBAAK,GAA9O;AAAkP,gBAAK,EAAvP;AAA0P,gBAAK,GAA/P;AAAmQ,gBAAK,GAAxQ;AAA4Q,gBAAK,GAAjR;AAAqR,gBAAK,GAA1R;AAA8R,gBAAK,GAAnS;AAAuS,gBAAK,GAA5S;AAAgT,gBAAK,GAArT;AAAyT,gBAAK,GAA9T;AAAkU,gBAAK,GAAvU;AAA2U,gBAAK,EAAhV;AAAmV,gBAAK,GAAxV;AAA4V,gBAAK,GAAjW;AAAqW,gBAAK,GAA1W;AAA8W,gBAAK,EAAnX;AAAsX,gBAAK,EAA3X;AAA8X,gBAAK,GAAnY;AAAuY,gBAAK,GAA5Y;AAAgZ,gBAAK,EAArZ;AAAwZ,gBAAK,EAA7Z;AAAga,gBAAK,GAAra;AAAya,gBAAK,EAA9a;AAAib,gBAAK,GAAtb;AAA0b,gBAAK,EAA/b;AAAkc,gBAAK,GAAvc;AAA2c,gBAAK,GAAhd;AAAod,gBAAK,GAAzd;AAA6d,gBAAK,EAAle;AAAqe,gBAAK,GAA1e;AAA8e,gBAAK,GAAnf;AAAuf,gBAAK,EAA5f;AAA+f,gBAAK,EAApgB;AAAugB,gBAAK,EAA5gB;AAA+gB,gBAAK,GAAphB;AAAwhB,gBAAK,EAA7hB;AAAgiB,wBAAa;AAA7iB,SAA9N;AAA+wB,kBAAS,CAAxxB;AAA0xB,sBAAa,CAAvyB;AAAyyB,sBAAa;AAAtzB;AAA7B,KAAp2L,CAAlH;AAA+yN,cAAS;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,oBAAL;AAA0B,aAAI,CAAC,oBAA/B;AAAoD,aAAI,CAAC,mBAAzD;AAA6E,aAAI,CAAC,mBAAlF;AAAsG,aAAI,CAAC,mBAA3G;AAA+H,aAAI,mBAAnI;AAAuJ,aAAI,CAAC,mBAA5J;AAAgL,aAAI,mBAApL;AAAwM,6BAAoB,CAA5N;AAA8N,kBAAS;AAAC,eAAI,EAAL;AAAQ,eAAI,EAAZ;AAAe,eAAI,GAAnB;AAAuB,eAAI,EAA3B;AAA8B,eAAI,CAAlC;AAAoC,eAAI,CAAxC;AAA0C,eAAI,GAA9C;AAAkD,eAAI,EAAtD;AAAyD,eAAI,GAA7D;AAAiE,eAAI,GAArE;AAAyE,gBAAK,EAA9E;AAAiF,gBAAK,EAAtF;AAAyF,gBAAK,EAA9F;AAAiG,gBAAK,EAAtG;AAAyG,gBAAK,GAA9G;AAAkH,gBAAK,GAAvH;AAA2H,gBAAK,GAAhI;AAAoI,gBAAK,GAAzI;AAA6I,gBAAK,EAAlJ;AAAqJ,gBAAK,GAA1J;AAA8J,gBAAK,EAAnK;AAAsK,gBAAK,EAA3K;AAA8K,gBAAK,GAAnL;AAAuL,gBAAK,GAA5L;AAAgM,gBAAK,EAArM;AAAwM,gBAAK,GAA7M;AAAiN,gBAAK,EAAtN;AAAyN,gBAAK,GAA9N;AAAkO,gBAAK,GAAvO;AAA2O,gBAAK,GAAhP;AAAoP,gBAAK,GAAzP;AAA6P,gBAAK,GAAlQ;AAAsQ,gBAAK,EAA3Q;AAA8Q,gBAAK,GAAnR;AAAuR,gBAAK,GAA5R;AAAgS,gBAAK,EAArS;AAAwS,gBAAK,EAA7S;AAAgT,gBAAK,GAArT;AAAyT,gBAAK,GAA9T;AAAkU,gBAAK,GAAvU;AAA2U,gBAAK,GAAhV;AAAoV,gBAAK,CAAzV;AAA2V,gBAAK,GAAhW;AAAoW,gBAAK,EAAzW;AAA4W,gBAAK,GAAjX;AAAqX,gBAAK,GAA1X;AAA8X,gBAAK,GAAnY;AAAuY,gBAAK,EAA5Y;AAA+Y,gBAAK,EAApZ;AAAuZ,gBAAK,EAA5Z;AAA+Z,gBAAK,GAApa;AAAwa,gBAAK,GAA7a;AAAib,gBAAK,GAAtb;AAA0b,gBAAK,EAA/b;AAAkc,gBAAK,GAAvc;AAA2c,gBAAK,GAAhd;AAAod,gBAAK,EAAzd;AAA4d,gBAAK,EAAje;AAAoe,gBAAK,GAAze;AAA6e,gBAAK,GAAlf;AAAsf,gBAAK,GAA3f;AAA+f,gBAAK,GAApgB;AAAwgB,gBAAK,GAA7gB;AAAihB,gBAAK,EAAthB;AAAyhB,wBAAa;AAAtiB,SAAvO;AAAixB,kBAAS,CAA1xB;AAA4xB,sBAAa,CAAzyB;AAA2yB,sBAAa;AAAxzB;AAA7B;AAAxzN,GAAxyP,EAA27e;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa;AAAlD,GAA37e,EAAq/e;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa,IAAlD;AAAuD,kBAAa,CAApE;AAAsE,oBAAe,CAArF;AAAuF,oBAAe,CAAtG;AAAwG,eAAU,CAAC;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,kBAAL;AAAwB,aAAI,CAAC,mBAA7B;AAAiD,aAAI,kBAArD;AAAwE,aAAI,CAAC,kBAA7E;AAAgG,aAAI,CAAC,kBAArG;AAAwH,aAAI,kBAA5H;AAA+I,aAAI,kBAAnJ;AAAsK,aAAI,CAAC,kBAA3K;AAA8L,6BAAoB,CAAlN;AAAoN,kBAAS;AAAC,eAAI,GAAL;AAAS,eAAI,GAAb;AAAiB,eAAI,EAArB;AAAwB,eAAI,EAA5B;AAA+B,eAAI,GAAnC;AAAuC,eAAI,EAA3C;AAA8C,eAAI,GAAlD;AAAsD,eAAI,EAA1D;AAA6D,eAAI,EAAjE;AAAoE,eAAI,GAAxE;AAA4E,gBAAK,GAAjF;AAAqF,gBAAK,GAA1F;AAA8F,gBAAK,EAAnG;AAAsG,gBAAK,GAA3G;AAA+G,gBAAK,GAApH;AAAwH,gBAAK,GAA7H;AAAiI,gBAAK,EAAtI;AAAyI,gBAAK,GAA9I;AAAkJ,gBAAK,GAAvJ;AAA2J,gBAAK,EAAhK;AAAmK,gBAAK,GAAxK;AAA4K,gBAAK,EAAjL;AAAoL,gBAAK,GAAzL;AAA6L,gBAAK,EAAlM;AAAqM,gBAAK,GAA1M;AAA8M,gBAAK,GAAnN;AAAuN,gBAAK,GAA5N;AAAgO,gBAAK,EAArO;AAAwO,gBAAK,GAA7O;AAAiP,gBAAK,CAAtP;AAAwP,gBAAK,GAA7P;AAAiQ,gBAAK,GAAtQ;AAA0Q,gBAAK,GAA/Q;AAAmR,gBAAK,GAAxR;AAA4R,gBAAK,EAAjS;AAAoS,gBAAK,EAAzS;AAA4S,gBAAK,EAAjT;AAAoT,gBAAK,GAAzT;AAA6T,gBAAK,GAAlU;AAAsU,gBAAK,GAA3U;AAA+U,gBAAK,EAApV;AAAuV,gBAAK,GAA5V;AAAgW,gBAAK,GAArW;AAAyW,gBAAK,GAA9W;AAAkX,gBAAK,GAAvX;AAA2X,gBAAK,EAAhY;AAAmY,gBAAK,GAAxY;AAA4Y,gBAAK,EAAjZ;AAAoZ,gBAAK,EAAzZ;AAA4Z,gBAAK,EAAja;AAAoa,gBAAK,EAAza;AAA4a,gBAAK,GAAjb;AAAqb,gBAAK,EAA1b;AAA6b,gBAAK,GAAlc;AAAsc,gBAAK,GAA3c;AAA+c,gBAAK,EAApd;AAAud,gBAAK,GAA5d;AAAge,gBAAK,GAAre;AAAye,gBAAK,GAA9e;AAAkf,gBAAK,GAAvf;AAA2f,gBAAK,GAAhgB;AAAogB,gBAAK,GAAzgB;AAA6gB,gBAAK,GAAlhB;AAAshB,gBAAK,GAA3hB;AAA+hB,wBAAa;AAA5iB,SAA7N;AAA6wB,kBAAS,CAAtxB;AAAwxB,sBAAa,CAAryB;AAAuyB,sBAAa;AAApzB;AAA7B,KAAD,EAAu1B;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,iBAAN;AAAwB,aAAI,kBAA5B;AAA+C,aAAI,oBAAnD;AAAwE,aAAI,iBAA5E;AAA8F,aAAI,iBAAlG;AAAoH,aAAI,CAAC,kBAAzH;AAA4I,aAAI,CAAC,kBAAjJ;AAAoK,aAAI,kBAAxK;AAA2L,6BAAoB,CAA/M;AAAiN,kBAAS;AAAC,eAAI,EAAL;AAAQ,eAAI,GAAZ;AAAgB,eAAI,GAApB;AAAwB,eAAI,GAA5B;AAAgC,eAAI,EAApC;AAAuC,eAAI,CAA3C;AAA6C,eAAI,GAAjD;AAAqD,eAAI,GAAzD;AAA6D,eAAI,GAAjE;AAAqE,eAAI,GAAzE;AAA6E,gBAAK,GAAlF;AAAsF,gBAAK,EAA3F;AAA8F,gBAAK,EAAnG;AAAsG,gBAAK,EAA3G;AAA8G,gBAAK,GAAnH;AAAuH,gBAAK,EAA5H;AAA+H,gBAAK,GAApI;AAAwI,gBAAK,EAA7I;AAAgJ,gBAAK,GAArJ;AAAyJ,gBAAK,GAA9J;AAAkK,gBAAK,GAAvK;AAA2K,gBAAK,EAAhL;AAAmL,gBAAK,GAAxL;AAA4L,gBAAK,EAAjM;AAAoM,gBAAK,GAAzM;AAA6M,gBAAK,GAAlN;AAAsN,gBAAK,EAA3N;AAA8N,gBAAK,GAAnO;AAAuO,gBAAK,EAA5O;AAA+O,gBAAK,CAApP;AAAsP,gBAAK,GAA3P;AAA+P,gBAAK,EAApQ;AAAuQ,gBAAK,GAA5Q;AAAgR,gBAAK,EAArR;AAAwR,gBAAK,GAA7R;AAAiS,gBAAK,EAAtS;AAAyS,gBAAK,EAA9S;AAAiT,gBAAK,GAAtT;AAA0T,gBAAK,GAA/T;AAAmU,gBAAK,EAAxU;AAA2U,gBAAK,EAAhV;AAAmV,gBAAK,EAAxV;AAA2V,gBAAK,EAAhW;AAAmW,gBAAK,GAAxW;AAA4W,gBAAK,GAAjX;AAAqX,gBAAK,GAA1X;AAA8X,gBAAK,GAAnY;AAAuY,gBAAK,GAA5Y;AAAgZ,gBAAK,GAArZ;AAAyZ,gBAAK,GAA9Z;AAAka,gBAAK,GAAva;AAA2a,gBAAK,GAAhb;AAAob,gBAAK,GAAzb;AAA6b,gBAAK,GAAlc;AAAsc,gBAAK,GAA3c;AAA+c,gBAAK,GAApd;AAAwd,gBAAK,GAA7d;AAAie,gBAAK,GAAte;AAA0e,gBAAK,GAA/e;AAAmf,gBAAK,GAAxf;AAA4f,gBAAK,EAAjgB;AAAogB,gBAAK,GAAzgB;AAA6gB,gBAAK,GAAlhB;AAAshB,gBAAK,EAA3hB;AAA8hB,wBAAa;AAA3iB,SAA1N;AAAywB,kBAAS,CAAlxB;AAAoxB,sBAAa,CAAjyB;AAAmyB,sBAAa;AAAhzB;AAA7B,KAAv1B,CAAlH;AAA4xD,cAAS;AAAC,YAAK,CAAN;AAAQ,YAAK,CAAb;AAAe,eAAQ,CAAvB;AAAyB,WAAI;AAAC,aAAI,CAAC,oBAAN;AAA2B,aAAI,mBAA/B;AAAmD,6BAAoB,CAAvE;AAAyE,kBAAS;AAAC,eAAI,EAAL;AAAQ,eAAI,GAAZ;AAAgB,eAAI,GAApB;AAAwB,eAAI,GAA5B;AAAgC,eAAI,EAApC;AAAuC,eAAI,GAA3C;AAA+C,eAAI,GAAnD;AAAuD,eAAI,GAA3D;AAA+D,eAAI,GAAnE;AAAuE,eAAI,GAA3E;AAA+E,gBAAK,GAApF;AAAwF,gBAAK,GAA7F;AAAiG,gBAAK,EAAtG;AAAyG,gBAAK,GAA9G;AAAkH,gBAAK,GAAvH;AAA2H,gBAAK,EAAhI;AAAmI,wBAAa;AAAhJ,SAAlF;AAAsO,kBAAS,CAA/O;AAAiP,sBAAa,CAA9P;AAAgQ,sBAAa;AAA7Q;AAA7B;AAAryD,GAAr/e,EAA0kjB;AAAC,iBAAY,CAAb;AAAe,cAAS,CAAxB;AAA0B,cAAS,CAAnC;AAAqC,kBAAa,SAAlD;AAA4D,kBAAa;AAAzE,GAA1kjB;AAAV,CAAjD,C;;;;;;;;;;;ACAAhc,MAAM,CAACgT,MAAP,CAAc;AAACkS,aAAW,EAAC,YAAU;AAAC,WAAOA,WAAP;AAAmB;AAA3C,CAAd;AAA4D,IAAIvQ,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAEvE,IAAMi7B,aAAa,GACf;AAAC,KAAG,QAAJ;AAAc,KAAG,QAAjB;AAA2B,KAAG,QAA9B;AAAwC,KAAG,QAA3C;AAAqD,KAAG;AAAxD,CADJ;;AAGA,IAAMC,QAAQ,GAAG,UAACC,MAAD,EAAY;AAC3B,MAAM3R,MAAM,GAAG,EAAf;AACA2R,QAAM,CAAC9W,KAAP,CAAa,GAAb,EAAkBjC,GAAlB,CAAsB,UAACze,CAAD;AAAA,WAAO6lB,MAAM,CAAC7lB,CAAD,CAAN,GAAY,IAAnB;AAAA,GAAtB;AACA,SAAO6lB,MAAP;AACD,CAJD;;AAMA,IAAM4R,UAAU,GAAGF,QAAQ,CAAC,kDAAD,CAA3B;AACA,IAAMG,MAAM,GAAGH,QAAQ,CAAC,wDACA,qDADA,GAEA,gBAFD,CAAvB;AAGA,IAAMI,aAAa,GAAGJ,QAAQ,CAAC,8CACA,mBADD,CAA9B;AAGA,IAAMF,WAAW,GAAG,EAApB;;AAEAA,WAAW,CAACO,SAAZ,GAAwB,UAAC3J,MAAD,EAAS4J,aAAT,EAA2B;AACjD,OAAK,IAAIr6B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGywB,MAAM,CAACrwB,MAA3B,EAAmCJ,CAAC,EAApC,EAAwC;AACtC,SAAK,IAAIs6B,MAAM,GAAG,CAAlB,EAAqBA,MAAM,IAAI,CAA/B,EAAkCA,MAAM,EAAxC,EAA4C;AAC1C,UAAMnmB,KAAK,GAAG2lB,aAAa,CAACQ,MAAD,CAAb,CAAsB3T,OAAtB,CAA8B8J,MAAM,CAACzwB,CAAD,CAApC,CAAd;;AACA,UAAImU,KAAK,IAAI,CAAb,EAAgB;AACd,YAAMomB,QAAQ,GAAG,SAASpmB,KAAT,CAAjB;AACAsc,cAAM,GAAGA,MAAM,CAACxD,MAAP,CAAc,CAAd,EAAiBjtB,CAAjB,IAAsBu6B,QAAtB,GAAiC9J,MAAM,CAACxD,MAAP,CAAcjtB,CAAC,GAAG,CAAlB,CAA1C;;AACA,YAAIq6B,aAAJ,EAAmB;AACjB,sBAAU5J,MAAV,GAAmB6J,MAAnB;AACD;AACF;AACF;AACF;;AACD,SAAO7J,MAAP;AACD,CAdD;;AAgBAoJ,WAAW,CAACW,0BAAZ,GAAyC,UAACC,QAAD,EAAc;AACrDnR,QAAM,CAACmR,QAAQ,IAAIA,QAAQ,KAAKA,QAAQ,CAACC,WAAT,EAA1B,CAAN;AACA,MAAIC,IAAI,GAAG,CAAX;;AACA,MAAI,QAAQhU,OAAR,CAAgB8T,QAAQ,CAACA,QAAQ,CAACr6B,MAAT,GAAkB,CAAnB,CAAxB,KAAkD,CAAtD,EAAyD;AACvDu6B,QAAI,GAAG3N,QAAQ,CAACyN,QAAQ,CAACA,QAAQ,CAACr6B,MAAT,GAAkB,CAAnB,CAAT,EAAgC,EAAhC,CAAf;AACAq6B,YAAQ,GAAGA,QAAQ,CAACxN,MAAT,CAAgB,CAAhB,EAAmBwN,QAAQ,CAACr6B,MAAT,GAAkB,CAArC,CAAX;AACD;;AACD,OAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGy6B,QAAQ,CAACr6B,MAA7B,EAAqCJ,CAAC,EAAtC,EAA0C;AACxC,SAAK,IAAIs6B,MAAM,GAAG,CAAlB,EAAqBA,MAAM,IAAI,CAA/B,EAAkCA,MAAM,EAAxC,EAA4C;AAC1C,UAAMnmB,KAAK,GAAG2lB,aAAa,CAACQ,MAAD,CAAb,CAAsB3T,OAAtB,CAA8B8T,QAAQ,CAACz6B,CAAD,CAAtC,CAAd;;AACA,UAAImU,KAAK,IAAI,CAAb,EAAgB;AACdwmB,YAAI,GAAGL,MAAP;AACA,YAAMC,QAAQ,GAAG,SAASpmB,KAAT,CAAjB;AACAsmB,gBAAQ,GAAGA,QAAQ,CAACxN,MAAT,CAAgB,CAAhB,EAAmBjtB,CAAnB,IAAwBu6B,QAAxB,GAAmCE,QAAQ,CAACxN,MAAT,CAAgBjtB,CAAC,GAAG,CAApB,CAA9C;AACD;AACF;AACF;;AACD,MAAI46B,SAAS,GAAG,EAAhB;;AACA,OAAK,IAAI56B,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGy6B,QAAQ,CAACr6B,MAA7B,EAAqCJ,EAAC,EAAtC,EAA0C;AACxC,QAAMk5B,SAAS,GAAGuB,QAAQ,CAACxN,MAAT,CAAgB,CAAhB,EAAmBjtB,EAAnB,CAAlB;;AACA,QAAIi6B,UAAU,CAACf,SAAD,CAAd,EAA2B;AACzB0B,eAAS,GAAG1B,SAAZ;AACD,KAFD,MAEO;AACL;AACD;AACF;;AACD,MAAI2B,KAAK,GAAGJ,QAAQ,CAACxN,MAAT,CAAgB2N,SAAS,CAACx6B,MAA1B,CAAZ;AACAkpB,QAAM,CAAC,CAAC,CAACsR,SAAD,IAAcX,UAAU,CAACW,SAAD,CAAzB,KAAyCV,MAAM,CAACW,KAAD,CAAhD,CAAN;;AACA,MAAIV,aAAa,CAACU,KAAD,CAAjB,EAA0B;AACxB,QAAM1mB,MAAK,GAAG,SAASwS,OAAT,CAAiBkU,KAAK,CAAC,CAAD,CAAtB,CAAd;;AACAA,SAAK,GAAGA,KAAK,CAAC,CAAD,CAAL,GAAWf,aAAa,CAACa,IAAD,CAAb,CAAoBxmB,MAApB,CAAX,GAAwC0mB,KAAK,CAAC5N,MAAN,CAAa,CAAb,CAAhD;AACD,GAHD,MAGO;AACL,QAAM9Y,OAAK,GAAG,SAASwS,OAAT,CAAiBkU,KAAK,CAAC,CAAD,CAAtB,CAAd;;AACAvR,UAAM,CAACnV,OAAK,IAAI,CAAV,CAAN;AACA0mB,SAAK,GAAGf,aAAa,CAACa,IAAD,CAAb,CAAoBxmB,OAApB,IAA6B0mB,KAAK,CAAC5N,MAAN,CAAa,CAAb,CAArC;AACD;;AACD,SAAO2N,SAAS,GAAGC,KAAK,CAAClZ,OAAN,CAAc,GAAd,EAAmB,GAAnB,CAAnB;AACD,CArCD;;AAuCAkY,WAAW,CAACiB,0BAAZ,GAAyC,UAACH,IAAD,EAAU;AACjD,SAAOd,WAAW,CAACO,SAAZ,CAAsBO,IAAtB,EAA4B;AAAK;AAAjC,GAAP;AACD,CAFD,C;;;;;;;;;;;AC3EA,IAAIjT,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAApC8V,MAAM,CAACgT,MAAP,CAAc;AAACiJ,kBAAgB,EAAC,YAAU;AAAC,WAAOA,gBAAP;AAAwB;AAArD,CAAd;AAAsE,IAAItH,MAAJ,EAAWG,KAAX,EAAiBC,KAAjB;AAAuB/U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS,GAA7B;AAA8B4qB,OAAK,EAAC,UAAS5qB,CAAT,EAAW;AAAC4qB,SAAK,GAAC5qB,CAAN;AAAQ,GAAxD;AAAyD6qB,OAAK,EAAC,UAAS7qB,CAAT,EAAW;AAAC6qB,SAAK,GAAC7qB,CAAN;AAAQ;AAAnF,CAAxB,EAA6G,CAA7G;AAAgH,IAAI62B,SAAJ;AAAc/gB,MAAM,CAACoQ,IAAP,CAAY,gBAAZ,EAA6B;AAAC2Q,WAAS,EAAC,UAAS72B,CAAT,EAAW;AAAC62B,aAAS,GAAC72B,CAAV;AAAY;AAAnC,CAA7B,EAAkE,CAAlE;AAAqE,IAAIw5B,GAAJ;AAAQ1jB,MAAM,CAACoQ,IAAP,CAAY,UAAZ,EAAuB;AAACsT,KAAG,EAAC,UAASx5B,CAAT,EAAW;AAACw5B,OAAG,GAACx5B,CAAJ;AAAM;AAAvB,CAAvB,EAAgD,CAAhD;AAIxS,IAAMk8B,mBAAmB,GAAG,EAA5B;AACA,IAAMC,gBAAgB,GAAG,MAAIr8B,IAAI,CAACssB,EAAlC;AACA,IAAMgQ,2BAA2B,GAAG,CAApC;AACA,IAAMC,gBAAgB,GAAG,GAAzB,C,CAEA;;AACA,IAAMC,WAAW,GAAG,UAAC/Z,MAAD,EAAY;AAC9BkI,QAAM,CAACI,KAAK,CAAC6B,KAAN,CAAYnK,MAAM,CAAC,CAAD,CAAlB,KAA0BsI,KAAK,CAAC6B,KAAN,CAAYnK,MAAM,CAAC,CAAD,CAAlB,CAA3B,CAAN;AACAkI,QAAM,CAAC,CAACI,KAAK,CAAC0B,KAAN,CAAYhK,MAAM,CAAC,CAAD,CAAlB,EAAuBA,MAAM,CAAC,CAAD,CAA7B,CAAF,CAAN;AACD,CAHD,C,CAKA;AACA;AACA;;;AACA,IAAMuB,UAAU,GAAG,UAACyY,SAAD,EAAYC,UAAZ,EAA2B;AAC5C,MAAMhT,MAAM,GAAG,EAAf;AACA,MAAMiT,OAAO,GAAGF,SAAS,CAACta,MAAV,CAAiB,UAACte,CAAD;AAAA,WAAOA,CAAC,CAAC+4B,MAAT;AAAA,GAAjB,CAAhB;AACA,MAAMC,QAAQ,GAAGC,YAAY,CAACH,OAAD,EAAUD,UAAV,CAA7B;;AACA,OAAK,IAAIr7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs7B,OAAO,CAACl7B,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvC,QAAMe,CAAC,GAAGy6B,QAAQ,CAACx7B,CAAD,CAAlB;;AACA,QAAIe,CAAC,IAAIf,CAAL,IAAUw7B,QAAQ,CAACz6B,CAAD,CAAR,KAAgBf,CAA9B,EAAiC;AAC/B;AACD;;AACDqoB,UAAM,CAAC/nB,IAAP,CAAY,CAACopB,KAAK,CAACxmB,KAAN,CAAYo4B,OAAO,CAACt7B,CAAD,CAAP,CAAW4T,KAAvB,CAAD,EAAgC8V,KAAK,CAACxmB,KAAN,CAAYo4B,OAAO,CAACv6B,CAAD,CAAP,CAAW6S,KAAvB,CAAhC,CAAZ;AACD;;AACDyU,QAAM,CAACpH,GAAP,CAAWka,WAAX;AACA,SAAO9S,MAAP;AACD,CAbD,C,CAeA;;;AACA,IAAMqT,WAAW,GAAG,UAACC,GAAD,EAAMC,GAAN,EAAc;AAChC,MAAM1T,IAAI,GAAGwB,KAAK,CAACtE,QAAN,CAAewW,GAAG,CAAChoB,KAAnB,EAA0B+nB,GAAG,CAAC/nB,KAA9B,CAAb;AACA,MAAMioB,OAAO,GAAGnS,KAAK,CAAC0B,KAAN,CAAYlD,IAAZ,EAAkB,CAAC,CAAD,EAAI,CAAJ,CAAlB,CAAhB;AACA,MAAMxP,KAAK,GAAG/Z,IAAI,CAACqb,KAAL,CAAWkO,IAAI,CAAC,CAAD,CAAf,EAAoBA,IAAI,CAAC,CAAD,CAAxB,CAAd;AACA,MAAMhB,QAAQ,GAAGvoB,IAAI,CAACK,IAAL,CAAU0qB,KAAK,CAAC3B,SAAN,CAAgB6T,GAAG,CAAChoB,KAApB,EAA2B+nB,GAAG,CAAC/nB,KAA/B,CAAV,CAAjB;AACA,SAAO,CACL6V,KAAK,CAACrE,QAAN,CAAe1M,KAAf,EAAsBijB,GAAG,CAACG,MAAJ,CAAW,CAAX,CAAtB,CADK,EAELrS,KAAK,CAACrE,QAAN,CAAewW,GAAG,CAACE,MAAJ,CAAW,CAAX,CAAf,EAA8BpjB,KAA9B,CAFK,EAGL+Q,KAAK,CAACrE,QAAN,CAAeuW,GAAG,CAACG,MAAJ,CAAW,CAAX,CAAf,EAA8BpjB,KAA9B,CAHK,EAIL+Q,KAAK,CAACrE,QAAN,CAAe1M,KAAf,EAAsBkjB,GAAG,CAACE,MAAJ,CAAW,CAAX,CAAtB,CAJK,EAKLrS,KAAK,CAACrE,QAAN,CAAeuW,GAAG,CAACG,MAAJ,CAAW,CAAX,CAAf,EAA8BH,GAAG,CAACG,MAAJ,CAAW,CAAX,CAA9B,CALK,EAMLrS,KAAK,CAACrE,QAAN,CAAewW,GAAG,CAACE,MAAJ,CAAW,CAAX,CAAf,EAA8BF,GAAG,CAACE,MAAJ,CAAW,CAAX,CAA9B,CANK,EAOJD,OAAO,GAAG,CAAH,GAAO,CAPV,EAQL3U,QAAQ,GAAC6T,mBARJ,CAAP;AAUD,CAfD,C,CAiBA;AACA;;;AACA,IAAM5J,mBAAmB,GAAG,UAACH,QAAD,EAAc;AACxC,MAAIA,QAAQ,CAAC,CAAD,CAAR,GAAc,CAAlB,EAAqB;AACnB,WAAO,CAACvH,KAAK,CAACyB,OAAN,CAAc8F,QAAQ,CAAC,CAAD,CAAtB,CAAR;AACD;;AACD,MAAI+K,aAAa,GAAGtS,KAAK,CAACyB,OAAN,CAAc8F,QAAQ,CAAC,CAAD,CAAtB,IAA6BvH,KAAK,CAACyB,OAAN,CAAc8F,QAAQ,CAAC,CAAD,CAAtB,CAAjD;AACA,MAAMgL,gBAAgB,GAAGhL,QAAQ,CAAC,CAAD,CAAjC;;AACA,MAAIA,QAAQ,CAAC,CAAD,CAAR,GAAc,CAAd,IAAmBA,QAAQ,CAAC,CAAD,CAAR,GAAc,CAAjC,IACAA,QAAQ,CAAC,CAAD,CAAR,GAAcA,QAAQ,CAAC,CAAD,CAAtB,GAA4B,CAAC,GAAD,GAAKryB,IAAI,CAACssB,EAD1C,EAC8C;AAC5C8Q,iBAAa,GAAGA,aAAa,GAAC,EAA9B;AACD;;AACD,SAAO,EAAEA,aAAa,GAAGC,gBAAlB,CAAP;AACD,CAXD,C,CAaA;AACA;AACA;;;AACA,IAAMP,YAAY,GAAG,UAACH,OAAD,EAAUD,UAAV,EAAyB;AAC5C,MAAMY,MAAM,GAAG,EAAf;;AACA,OAAK,IAAIj8B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGs7B,OAAO,CAACl7B,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvCi8B,UAAM,CAAC37B,IAAP,CAAY,EAAZ;;AACA,SAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGu6B,OAAO,CAACl7B,MAA5B,EAAoCW,CAAC,EAArC,EAAyC;AACvCk7B,YAAM,CAACj8B,CAAD,CAAN,CAAUM,IAAV,CAAe47B,YAAY,CAACZ,OAAO,CAACt7B,CAAD,CAAR,EAAas7B,OAAO,CAACv6B,CAAD,CAApB,EAAyBs6B,UAAzB,CAA3B;AACD;AACF;;AACD,OAAK,IAAIr7B,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGs7B,OAAO,CAACl7B,MAA5B,EAAoCJ,EAAC,EAArC,EAAyC;AACvC,SAAK,IAAIe,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGu6B,OAAO,CAACl7B,MAA5B,EAAoCW,EAAC,EAArC,EAAyC;AACvC,UAAMo7B,cAAc,GAAGF,MAAM,CAACl7B,EAAD,CAAN,CAAUf,EAAV,IAAek7B,gBAAtC;;AACA,UAAIiB,cAAc,GAAGF,MAAM,CAACj8B,EAAD,CAAN,CAAUe,EAAV,CAArB,EAAmC;AACjCk7B,cAAM,CAACj8B,EAAD,CAAN,CAAUe,EAAV,IAAeo7B,cAAf;AACD;AACF;AACF;;AACD,SAAQ,IAAIzG,SAAJ,CAAcuG,MAAd,CAAD,CAAwBhF,OAA/B;AACD,CAjBD,C,CAmBA;AACA;AACA;;;AACA,IAAMiF,YAAY,GAAG,UAACP,GAAD,EAAMC,GAAN,EAAWP,UAAX,EAA0B;AAC7C,SAAOA,UAAU,CAACK,WAAW,CAACC,GAAD,EAAMC,GAAN,CAAZ,CAAjB;AACD,CAFD,C,CAIA;AACA;AACA;;;AACA,SAASQ,QAAT,CAAkBxT,KAAlB,EAAyBzU,KAAzB,EAAgC;AAC9B,OAAKA,KAAL,GAAaA,KAAb;AACA,MAAM+P,IAAI,GAAG0E,KAAK,CAACzU,KAAK,CAAC,CAAD,CAAN,CAAlB;AACA,MAAMxU,CAAC,GAAGukB,IAAI,CAAC9jB,MAAf;AACA,OAAKi8B,OAAL,GAAe,CAAC,CAACloB,KAAK,CAAC,CAAD,CAAN,EAAW,CAACA,KAAK,CAAC,CAAD,CAAL,GAAWxU,CAAX,GAAe,CAAhB,IAAqBA,CAAhC,CAAD,EAAqCwU,KAArC,CAAf;AACA,OAAKmoB,QAAL,GAAgB,CAACpY,IAAI,CAAC,CAAC/P,KAAK,CAAC,CAAD,CAAL,GAAWxU,CAAX,GAAe,CAAhB,IAAqBA,CAAtB,CAAL,EAA+BukB,IAAI,CAAC/P,KAAK,CAAC,CAAD,CAAN,CAAnC,CAAhB;AACA,OAAKP,KAAL,GAAa,KAAK0oB,QAAL,CAAc,CAAd,EAAiBxuB,GAA9B;AACAwb,QAAM,CAACI,KAAK,CAAC6B,KAAN,CAAY,KAAK3X,KAAjB,CAAD,EAA0B,KAAKA,KAA/B,CAAN;AACA0V,QAAM,CAACI,KAAK,CAAC0B,KAAN,CAAY,KAAKxX,KAAjB,EAAwB,KAAK0oB,QAAL,CAAc,CAAd,EAAiB3uB,KAAzC,CAAD,EAAkDuW,IAAlD,CAAN;AACA,OAAKqY,QAAL,GAAgB,CACd7S,KAAK,CAACtE,QAAN,CAAe,KAAKkX,QAAL,CAAc,CAAd,EAAiBxuB,GAAhC,EAAqC,KAAKwuB,QAAL,CAAc,CAAd,EAAiB3uB,KAAtD,CADc,EAEd+b,KAAK,CAACtE,QAAN,CAAe,KAAKkX,QAAL,CAAc,CAAd,EAAiBxuB,GAAhC,EAAqC,KAAKwuB,QAAL,CAAc,CAAd,EAAiB3uB,KAAtD,CAFc,CAAhB;AAIA,MAAM6uB,SAAS,GAAG79B,IAAI,CAACuM,GAAL,CAAS+vB,2BAAT,EAAsC,CAAtC,CAAlB;;AACA,MAAI,KAAKqB,QAAL,CAAc,CAAd,EAAiBG,OAAjB,KAA6BjoB,SAA7B,IACAkV,KAAK,CAAC3B,SAAN,CAAgB,KAAKnU,KAArB,EAA4B,KAAK0oB,QAAL,CAAc,CAAd,EAAiBG,OAA7C,IAAwDD,SAD5D,EACuE;AACrE,SAAKD,QAAL,CAAc,CAAd,IAAmB7S,KAAK,CAACtE,QAAN,CAAe,KAAKxR,KAApB,EAA2B,KAAK0oB,QAAL,CAAc,CAAd,EAAiBG,OAA5C,CAAnB;AACD;;AACD,MAAI,KAAKH,QAAL,CAAc,CAAd,EAAiBG,OAAjB,KAA6BjoB,SAA7B,IACAkV,KAAK,CAAC3B,SAAN,CAAgB,KAAKnU,KAArB,EAA4B,KAAK0oB,QAAL,CAAc,CAAd,EAAiBG,OAA7C,IAAwDD,SAD5D,EACuE;AACrE,SAAKD,QAAL,CAAc,CAAd,IAAmB7S,KAAK,CAACtE,QAAN,CAAe,KAAKkX,QAAL,CAAc,CAAd,EAAiBG,OAAhC,EAAyC,KAAK7oB,KAA9C,CAAnB;AACD;;AACD,OAAKkoB,MAAL,GAAc,KAAKS,QAAL,CAActb,GAAd,CAAkByI,KAAK,CAAChR,KAAxB,CAAd;AACA,MAAMwP,IAAI,GAAGuB,KAAK,CAACrE,QAAN,CAAe,KAAK0W,MAAL,CAAY,CAAZ,CAAf,EAA+B,KAAKA,MAAL,CAAY,CAAZ,CAA/B,CAAb;AACA,OAAKP,MAAL,GAAcrT,IAAI,GAAG,CAAC8S,gBAAtB;AACA,SAAO,IAAP;AACD,C,CAED;;;AAEA,IAAM0B,kBAAkB,GAAG,UAACpkB,IAAD,EAAOygB,SAAP,EAAqB;AAC9CzP,QAAM,CAAChR,IAAI,CAAClY,MAAL,KAAgB,CAAjB,CAAN;AACA24B,WAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,GAAqBygB,SAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,IAAsB,EAA3C;;AACA,MAAIygB,SAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,CAAmBqO,OAAnB,CAA2BrO,IAAI,CAAC,CAAD,CAA/B,IAAsC,CAA1C,EAA6C;AAC3CygB,aAAS,CAACzgB,IAAI,CAAC,CAAD,CAAL,CAAT,CAAmBhY,IAAnB,CAAwBgY,IAAI,CAAC,CAAD,CAA5B;AACD;AACF,CAND;;AAQA,IAAMqkB,aAAa,GAAG,UAAC/T,KAAD,EAAQgU,YAAR,EAAsBC,gBAAtB,EAAwC59B,GAAxC,EACC69B,iBADD,EACoBnvB,KADpB,EAC2BovB,WAD3B,EAC2C;AAC/D,MAAM1U,MAAM,GAAG,EAAf;AACA,MAAM8K,OAAO,GAAG,EAAhB;AACA,MAAIrB,OAAO,GAAGnkB,KAAd,CAH+D,CAK/D;AACA;;AACA,MAAMqvB,aAAa,GAAG,EAAtB;AACA,MAAIC,iBAAiB,GAAG,KAAxB;;AAEA,MAAMC,OAAO,GAAG,UAAC/oB,KAAD;AAAA,WACZ,CAACA,KAAK,CAAC,CAAD,CAAN,EAAW,CAACA,KAAK,CAAC,CAAD,CAAL,GAAW,CAAZ,IAAiByU,KAAK,CAACzU,KAAK,CAAC,CAAD,CAAN,CAAL,CAAgB/T,MAA5C,CADY;AAAA,GAAhB;;AAGA,MAAMsY,KAAK,GAAG,UAACykB,MAAD,EAASC,MAAT,EAAoB;AAChC,QAAMlV,IAAI,GAAGwB,KAAK,CAACtE,QAAN,CAAewX,YAAY,CAAClT,KAAK,CAAC2B,GAAN,CAAU+R,MAAV,CAAD,CAAZ,CAAgCxpB,KAA/C,EACegpB,YAAY,CAAClT,KAAK,CAAC2B,GAAN,CAAU8R,MAAV,CAAD,CAAZ,CAAgCvpB,KAD/C,CAAb;AAEA0V,UAAM,CAACpB,IAAI,CAAC,CAAD,CAAJ,KAAY,CAAZ,IAAiBA,IAAI,CAAC,CAAD,CAAJ,KAAY,CAA9B,CAAN;AACA,QAAMxP,KAAK,GAAG/Z,IAAI,CAACqb,KAAL,CAAWkO,IAAI,CAAC,CAAD,CAAf,EAAoBA,IAAI,CAAC,CAAD,CAAxB,CAAd;AACA,WAAOuB,KAAK,CAACrE,QAAN,CAAe1M,KAAf,EAAuB2kB,QAAQ,CAACvB,MAAT,CAAgB,CAAhB,CAAvB,CAAP;AACD,GAND;;AAQA,MAAMwB,eAAe,GAAG,UAACC,QAAD,EAAWC,QAAX,EAAwB;AAC9C,QAAMC,KAAK,GAAG/T,KAAK,CAACtE,QAAN,CAAemY,QAAQ,CAAC,CAAD,CAAvB,EAA4BA,QAAQ,CAAC,CAAD,CAApC,CAAd;AACA,QAAMG,KAAK,GAAGhU,KAAK,CAACtE,QAAN,CAAeoY,QAAQ,CAAC,CAAD,CAAvB,EAA4BA,QAAQ,CAAC,CAAD,CAApC,CAAd;AACA,QAAMG,KAAK,GAAGF,KAAK,CAAC,CAAD,CAAL,GAASC,KAAK,CAAC,CAAD,CAAd,GAAoBD,KAAK,CAAC,CAAD,CAAL,GAASC,KAAK,CAAC,CAAD,CAAhD;;AACA,QAAIC,KAAK,KAAK,CAAd,EAAiB;AACf,aAAOnpB,SAAP;AACD;;AACD,QAAM3V,CAAC,GAAG6qB,KAAK,CAACtE,QAAN,CAAemY,QAAQ,CAAC,CAAD,CAAvB,EAA4BC,QAAQ,CAAC,CAAD,CAApC,CAAV;AACA,QAAMI,CAAC,GAAG,CAACH,KAAK,CAAC,CAAD,CAAL,GAAS5+B,CAAC,CAAC,CAAD,CAAV,GAAgB4+B,KAAK,CAAC,CAAD,CAAL,GAAS5+B,CAAC,CAAC,CAAD,CAA3B,IAAgC8+B,KAA1C;AACA,QAAM/wB,CAAC,GAAG,CAAC8wB,KAAK,CAAC,CAAD,CAAL,GAAS7+B,CAAC,CAAC,CAAD,CAAV,GAAgB6+B,KAAK,CAAC,CAAD,CAAL,GAAS7+B,CAAC,CAAC,CAAD,CAA3B,IAAgC8+B,KAA1C;;AACA,QAAI,IAAIC,CAAJ,IAASA,CAAC,GAAG,CAAb,IAAkB,IAAIhxB,CAAtB,IAA2BA,CAAC,GAAG,CAAnC,EAAsC;AACpC,aAAO,CAAC2wB,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,IAAiB3wB,CAAC,GAAC6wB,KAAK,CAAC,CAAD,CAAzB,EAA8BF,QAAQ,CAAC,CAAD,CAAR,CAAY,CAAZ,IAAiB3wB,CAAC,GAAC6wB,KAAK,CAAC,CAAD,CAAtD,CAAP;AACD;;AACD,WAAOjpB,SAAP;AACD,GAdD;;AAgBA,MAAMqpB,YAAY,GAAG,UAAC1pB,KAAD;AAAA,WAAWyoB,YAAY,CAAClT,KAAK,CAAC2B,GAAN,CAAUlX,KAAV,CAAD,CAAZ,CAA+BP,KAA1C;AAAA,GAArB;;AAEA,MAAMkqB,gBAAgB,GAAG,UAACtqB,MAAD,EAAY;AACnC,QAAMuqB,SAAS,GAAGf,aAAa,CAAC58B,MAAhC;;AACA,SAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwT,MAAM,CAACpT,MAAP,GAAgB,CAApC,EAAuCJ,CAAC,EAAxC,EAA4C;AAC1Cg9B,mBAAa,CAAC18B,IAAd,CAAmB,CAACkT,MAAM,CAACxT,CAAD,CAAP,EAAYwT,MAAM,CAACxT,CAAC,GAAG,CAAL,CAAlB,CAAnB;AACAqoB,YAAM,CAAC/nB,IAAP,CAAY;AACVqN,aAAK,EAAE+b,KAAK,CAACxmB,KAAN,CAAYsQ,MAAM,CAACxT,CAAD,CAAlB,CADG;AAEV8N,WAAG,EAAE4b,KAAK,CAACxmB,KAAN,CAAYsQ,MAAM,CAACxT,CAAC,GAAG,CAAL,CAAlB,CAFK;AAGVy8B,eAAO,EAAEjoB;AAHC,OAAZ;AAKD,KATkC,CAUnC;;;AACA,QAAI,CAACyoB,iBAAL,EAAwB;AACtB,WAAK,IAAIj9B,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAG+9B,SAApB,EAA+B/9B,GAAC,EAAhC,EAAoC;AAClC,aAAK,IAAIe,CAAC,GAAGg9B,SAAb,EAAwBh9B,CAAC,GAAGi8B,aAAa,CAAC58B,MAA1C,EAAkDW,CAAC,EAAnD,EAAuD;AACrD,cAAIu8B,eAAe,CAACN,aAAa,CAACh9B,GAAD,CAAd,EAAmBg9B,aAAa,CAACj8B,CAAD,CAAhC,CAAnB,EAAyD;AACvDk8B,6BAAiB,GAAG,IAApB;AACA;AACD;AACF;AACF;AACF;AACF,GArBD,CAvC+D,CA8D/D;AACA;;;AACA,MAAMe,YAAY,GAAG,UAACX,QAAD,EAAW5xB,OAAX,EAAuB;AAC1C,QAAIA,OAAO,CAACrL,MAAR,KAAmB,CAAnB,IAAwB08B,iBAAiB,CAACpT,KAAK,CAAC2B,GAAN,CAAU5f,OAAO,CAAC,CAAD,CAAjB,CAAD,CAA7C,EAAsE;AACpE;AACA;AACA,UAAMwyB,QAAQ,GAAG,CAACZ,QAAQ,CAAClpB,KAAV,EAAiB1I,OAAO,CAAC,CAAD,CAAxB,CAAjB;AACA,UAAM8xB,QAAQ,GAAGU,QAAQ,CAAChd,GAAT,CAAa4c,YAAb,CAAjB;;AACA,WAAK,IAAIxS,GAAT,2CAAgBwR,gBAAhB,GAAkC;AAChC,YAAInT,KAAK,CAAC0B,KAAN,CAAYwR,YAAY,CAACvR,GAAD,CAAZ,CAAkBlX,KAA9B,EAAqC8pB,QAAQ,CAAC,CAAD,CAA7C,CAAJ,EAAuD;AACrD;AACD;;AACD,aAAK,IAAIj+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG68B,gBAAgB,CAACxR,GAAD,CAAhB,CAAsBjrB,MAA1C,EAAkDJ,CAAC,EAAnD,EAAuD;AACrD,cAAI0pB,KAAK,CAAC0B,KAAN,CAAYyR,gBAAgB,CAACxR,GAAD,CAAhB,CAAsBrrB,CAAtB,CAAZ,EAAsCu9B,QAAQ,CAAC,CAAD,CAA9C,CAAJ,EAAwD;AACtD;AACD,WAHoD,CAIrD;;;AACA,cAAMW,QAAQ,GAAG,CAACtB,YAAY,CAACvR,GAAD,CAAZ,CAAkBlX,KAAnB,EAA0B0oB,gBAAgB,CAACxR,GAAD,CAAhB,CAAsBrrB,CAAtB,CAA1B,CAAjB;AACA,cAAMw9B,QAAQ,GAAGU,QAAQ,CAACjd,GAAT,CAAa4c,YAAb,CAAjB;;AACA,cAAInU,KAAK,CAAC0B,KAAN,CAAY8S,QAAQ,CAAC,CAAD,CAApB,EAAyBD,QAAQ,CAAC,CAAD,CAAjC,KACA,CAACnB,iBAAiB,CAACpT,KAAK,CAAC2B,GAAN,CAAU6S,QAAQ,CAAC,CAAD,CAAlB,CAAD,CADtB,EACgD;AAC9CJ,4BAAgB,CAAC,CAACP,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,EAA2BC,QAAQ,CAAC,CAAD,CAAnC,CAAD,CAAhB;AACA,mBAAOU,QAAQ,CAAC,CAAD,CAAf;AACD,WAJD,MAIO,IAAIxU,KAAK,CAAC0B,KAAN,CAAY8S,QAAQ,CAAC,CAAD,CAApB,EAAyBD,QAAQ,CAAC,CAAD,CAAjC,KACA,CAACnB,iBAAiB,CAACpT,KAAK,CAAC2B,GAAN,CAAU6S,QAAQ,CAAC,CAAD,CAAlB,CAAD,CADtB,EACgD;AACrDJ,4BAAgB,CAAC,CAACP,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,EAA2BC,QAAQ,CAAC,CAAD,CAAnC,CAAD,CAAhB;AACA,mBAAOU,QAAQ,CAAC,CAAD,CAAf;AACD;;AACD,cAAMC,YAAY,GAAGb,eAAe,CAACC,QAAD,EAAWC,QAAX,CAApC;;AACA,cAAIW,YAAY,KAAK3pB,SAArB,EAAgC;AAC9B,gBAAMuW,MAAM,GAAGrS,KAAK,CAACulB,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAApB;AACA,gBAAMjT,MAAM,GAAGtS,KAAK,CAACwlB,QAAQ,CAAC,CAAD,CAAT,EAAcA,QAAQ,CAAC,CAAD,CAAtB,CAApB;;AACA,gBAAIzU,KAAK,CAACrE,QAAN,CAAe4F,MAAf,EAAuBD,MAAvB,IAAiC,CAArC,EAAwC;AACtCmT,sBAAQ,CAACE,OAAT;AACAZ,sBAAQ,CAACY,OAAT;AACD;;AACDN,4BAAgB,CAAC,CAACP,QAAQ,CAAC,CAAD,CAAT,EAAcY,YAAd,EAA4BX,QAAQ,CAAC,CAAD,CAApC,CAAD,CAAhB;AACA,mBAAOU,QAAQ,CAAC,CAAD,CAAf;AACD;AACF;AACF;AACF,KAtCD,MAsCO;AACL;AACA;AACA,WAAK,IAAIl+B,GAAC,GAAG,CAAb,EAAgBA,GAAC,GAAGyL,OAAO,CAACrL,MAA5B,EAAoCJ,GAAC,EAArC,EAAyC;AACvC,YAAMqrB,IAAG,GAAG3B,KAAK,CAAC2B,GAAN,CAAU5f,OAAO,CAACzL,GAAD,CAAjB,CAAZ;;AACA,YAAI,CAAC88B,iBAAiB,CAACzR,IAAD,CAAtB,EAA6B;AAC3B,iBAAO5f,OAAO,CAACzL,GAAD,CAAd;AACD;AACF;AACF;;AACD,WAAOyL,OAAO,CAAC,CAAD,CAAd;AACD,GAlDD;;AAoDA,SAAO,IAAP,EAAa;AACX;AACA4c,UAAM,CAAC/nB,IAAP,CAAYsoB,KAAK,CAACkJ,OAAO,CAAC,CAAD,CAAR,CAAL,CAAkBA,OAAO,CAAC,CAAD,CAAzB,CAAZ;AACAqB,WAAO,CAACzJ,KAAK,CAAC2B,GAAN,CAAUyG,OAAV,CAAD,CAAP,GAA8B,IAA9B;AACAA,WAAO,GAAGoL,OAAO,CAACpL,OAAD,CAAjB,CAJW,CAKX;AACA;AACA;;AACA,QAAMzG,GAAG,GAAG3B,KAAK,CAAC2B,GAAN,CAAUyG,OAAV,CAAZ;;AACA,QAAI+K,gBAAgB,CAACjO,cAAjB,CAAgCvD,GAAhC,CAAJ,EAA0C;AACxC,UAAIgS,QAAQ,GAAGT,YAAY,CAACvR,GAAD,CAA3B;AACA,UAAM5f,OAAO,GAAGoxB,gBAAgB,CAACxR,GAAD,CAAhB,CAAsBhZ,IAAtB,CACZ,UAAClT,CAAD,EAAIC,CAAJ;AAAA,eAAUsZ,KAAK,CAAC2kB,QAAQ,CAAClpB,KAAV,EAAiBhV,CAAjB,CAAL,GAA2BuZ,KAAK,CAAC2kB,QAAQ,CAAClpB,KAAV,EAAiB/U,CAAjB,CAA1C;AAAA,OADY,CAAhB,CAFwC,CAIxC;AACA;AACA;;AACA,UAAMi/B,aAAa,GAAGhW,MAAM,CAACjoB,MAA7B;AACA,UAAMmX,IAAI,GAAIwlB,WAAW,GAAGtxB,OAAO,CAAC,CAAD,CAAV,GAAgBuyB,YAAY,CAACX,QAAD,EAAW5xB,OAAX,CAArD;;AACA,UAAI4c,MAAM,CAACjoB,MAAP,KAAkBi+B,aAAtB,EAAqC;AACnCP,wBAAgB,CAAC,CAACT,QAAQ,CAACzpB,KAAV,EAAiBgpB,YAAY,CAAClT,KAAK,CAAC2B,GAAN,CAAU9T,IAAV,CAAD,CAAZ,CAA8B3D,KAA/C,CAAD,CAAhB;AACD;;AACDke,aAAO,GAAGva,IAAV;AACD,KAtBU,CAuBX;;;AACA,QAAM+mB,OAAO,GAAG5U,KAAK,CAAC2B,GAAN,CAAUyG,OAAV,CAAhB;;AACA,QAAIpI,KAAK,CAAC0B,KAAN,CAAY0G,OAAZ,EAAqBnkB,KAArB,CAAJ,EAAiC;AAC/B,UAAIsvB,iBAAJ,EAAuB;AACrBh+B,WAAG,CAACqB,IAAJ,CAAS;AAACi+B,aAAG,EAAE,OAAN;AACC3U,iBAAO,EAAE;AADV,SAAT;AAED;;AACD,UAAI4U,oBAAoB,GAAG,CAA3B;;AACA,WAAK,IAAIrqB,KAAT,2CAAkBgf,OAAlB,GAA2B;AACzB2J,yBAAiB,CAAC3oB,KAAD,CAAjB,GAA2B,IAA3B;AACAqqB,4BAAoB,IAAI,CAAxB;AACD,OAT8B,CAU/B;AACA;;;AACA,UAAIA,oBAAoB,KAAK,CAA7B,EAAgC;AAC9Bv/B,WAAG,CAACqB,IAAJ,CAAS;AAACi+B,aAAG,EAAE,SAAN;AAAiB3U,iBAAO,EAAE;AAA1B,SAAT;AACA,eAAOpV,SAAP;AACD;;AACD,aAAO6T,MAAP;AACD,KAjBD,MAiBO,IAAIyU,iBAAiB,CAACwB,OAAD,CAAjB,IAA8BnL,OAAO,CAACmL,OAAD,CAAzC,EAAoD;AACzD,aAAO9pB,SAAP;AACD;AACF;AACF,CAnKD;;AAqKA,IAAMiqB,cAAc,GAAG,UAAC7V,KAAD,EAAQwS,SAAR,EAAmB9X,OAAnB,EAA4BrkB,GAA5B,EAAoC;AACzD;AACA;AACA,MAAM29B,YAAY,GAAG,EAArB;AACA,MAAM8B,qBAAqB,GAAG,EAA9B;;AACA,uDAAqBtD,SAArB,wCAAgC;AAAA,QAAvBiC,SAAuB;AAC9BT,gBAAY,CAAClT,KAAK,CAAC2B,GAAN,CAAUgS,SAAQ,CAAClpB,KAAnB,CAAD,CAAZ,GAA0CkpB,SAA1C;AACAqB,yBAAqB,CAAChV,KAAK,CAAC2B,GAAN,CAAUgS,SAAQ,CAACzpB,KAAnB,CAAD,CAArB,GAAmDypB,SAAnD;AACD;;AACD/Z,SAAO,CAACrC,GAAR,CAAYka,WAAZ;AACA,MAAM0B,gBAAgB,GAAG,EAAzB;;AACA,wDAAmBvZ,OAAnB,2CAA4B;AAAA,QAAnBlC,MAAmB;AAC1B,QAAMqO,IAAI,GAAGrO,MAAM,CAACH,GAAP,CAAWyI,KAAK,CAAC2B,GAAjB,CAAb;AACA/B,UAAM,CAACoV,qBAAqB,CAAC9P,cAAtB,CAAqCa,IAAI,CAAC,CAAD,CAAzC,CAAD,CAAN;AACAnG,UAAM,CAACoV,qBAAqB,CAAC9P,cAAtB,CAAqCa,IAAI,CAAC,CAAD,CAAzC,CAAD,CAAN;AACA,QAAMkP,EAAE,GAAGlP,IAAI,CAACxO,GAAL,CAAS,UAACze,CAAD;AAAA,aAAOk8B,qBAAqB,CAACl8B,CAAD,CAArB,CAAyB2R,KAAhC;AAAA,KAAT,CAAX;AACAuoB,sBAAkB,CAAC,CAAChT,KAAK,CAAC2B,GAAN,CAAUsT,EAAE,CAAC,CAAD,CAAZ,CAAD,EAAmBA,EAAE,CAAC,CAAD,CAArB,CAAD,EAA4B9B,gBAA5B,CAAlB;AACAH,sBAAkB,CAAC,CAAChT,KAAK,CAAC2B,GAAN,CAAUsT,EAAE,CAAC,CAAD,CAAZ,CAAD,EAAmBA,EAAE,CAAC,CAAD,CAArB,CAAD,EAA4B9B,gBAA5B,CAAlB;AACD,GAlBwD,CAmBzD;AACA;;;AACA,MAAMC,iBAAiB,GAAG,EAA1B;AACA,MAAMjc,OAAO,GAAG,EAAhB;;AACA,OAAK,IAAI+d,OAAO,GAAG,CAAnB,EAAsBA,OAAO,GAAG,CAAhC,EAAmCA,OAAO,EAA1C,EAA8C;AAC5C,QAAIC,MAAM,GAAG,KAAb;;AACA,SAAK,IAAI7+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4oB,KAAK,CAACxoB,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,WAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6nB,KAAK,CAAC5oB,CAAD,CAAL,CAASI,MAA7B,EAAqCW,CAAC,EAAtC,EAA0C;AACxC,YAAMoT,KAAK,GAAG,CAACnU,CAAD,EAAIe,CAAJ,CAAd;;AACA,YAAI+7B,iBAAiB,CAACpT,KAAK,CAAC2B,GAAN,CAAUlX,KAAV,CAAD,CAArB,EAAyC;AACvC;AACD;;AACD,YAAM4oB,WAAW,GAAG6B,OAAO,KAAK,CAAhC;AACA,YAAMte,MAAM,GAAGqc,aAAa,CAAC/T,KAAD,EAAQgU,YAAR,EAAsBC,gBAAtB,EAAwC59B,GAAxC,EACC69B,iBADD,EACoB3oB,KADpB,EAC2B4oB,WAD3B,CAA5B;;AAEA,YAAIzc,MAAM,KAAK9L,SAAf,EAA0B;AACxBqqB,gBAAM,GAAG,IAAT;AACA;AACD;;AACDhe,eAAO,CAACvgB,IAAR,CAAaggB,MAAb;AACD;AACF;;AACD,QAAI,CAACue,MAAL,EAAa;AACX,aAAOhe,OAAP;AACD;AACF;;AACD5hB,KAAG,CAACqB,IAAJ,CAAS;AAACi+B,OAAG,EAAE,OAAN;AACC3U,WAAO,EAAE;AADV,GAAT;AAEA,SAAO/I,OAAP;AACD,CAhDD,C,CAkDA;;;AAEA,IAAM+P,gBAAgB,GAAG,EAAzB;;AAEAA,gBAAgB,CAACjO,UAAjB,GAA8B,UAACuB,IAAD,EAAOmX,UAAP,EAAsB;AAClD,MAAMzS,KAAK,GAAGyP,GAAG,CAACe,qBAAJ,CAA0BlV,IAA1B,CAAd;AACA,MAAMkX,SAAS,GAAG,EAAlB;;AACA,OAAK,IAAIp7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4oB,KAAK,CAACxoB,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,SAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6nB,KAAK,CAAC5oB,CAAD,CAAL,CAASI,MAA7B,EAAqCW,CAAC,EAAtC,EAA0C;AACxCq6B,eAAS,CAAC96B,IAAV,CAAe,IAAI87B,QAAJ,CAAaxT,KAAb,EAAoB,CAAC5oB,CAAD,EAAIe,CAAJ,CAApB,CAAf;AACD;AACF;;AACDs6B,YAAU,GAAGA,UAAU,IAAIzK,gBAAgB,CAACM,kBAA5C;AACA,MAAM5N,OAAO,GAAGX,UAAU,CAACyY,SAAD,EAAYC,UAAZ,CAA1B;AACA,SAAO;AAACD,aAAS,EAAEA,SAAZ;AAAuB9X,WAAO,EAAEA;AAAhC,GAAP;AACD,CAXD;;AAaAsN,gBAAgB,CAACkO,UAAjB,GAA8B,UAAC5a,IAAD,EAAOZ,OAAP,EAAmB;AAC/C,MAAMsF,KAAK,GAAGyP,GAAG,CAACe,qBAAJ,CAA0BlV,IAA1B,CAAd;AACA,MAAMkX,SAAS,GAAG,EAAlB;;AACA,OAAK,IAAIp7B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4oB,KAAK,CAACxoB,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,SAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6nB,KAAK,CAAC5oB,CAAD,CAAL,CAASI,MAA7B,EAAqCW,CAAC,EAAtC,EAA0C;AACxCq6B,eAAS,CAAC96B,IAAV,CAAe,IAAI87B,QAAJ,CAAaxT,KAAb,EAAoB,CAAC5oB,CAAD,EAAIe,CAAJ,CAApB,CAAf;AACD;AACF;;AACD,MAAM9B,GAAG,GAAG,EAAZ;AACA,MAAM8/B,YAAY,GAAGN,cAAc,CAAC7V,KAAD,EAAQwS,SAAR,EAAmB9X,OAAnB,EAA4BrkB,GAA5B,CAAnC;AACA,MAAM4hB,OAAO,GAAGke,YAAY,CAAC9d,GAAb,CAAiB,UAACze,CAAD;AAAA,WAAO61B,GAAG,CAAC2G,qBAAJ,CAA0B,CAACx8B,CAAD,CAA1B,CAAP;AAAA,GAAjB,CAAhB;AACA,SAAO;AAACvD,OAAG,EAAEA,GAAN;AAAW4hB,WAAO,EAAEA;AAApB,GAAP;AACD,CAZD;;AAcA+P,gBAAgB,CAACO,mBAAjB,GAAuCA,mBAAvC,C;;;;;;;;;;;AC9XA,IAAIzJ,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAApC8V,MAAM,CAACgT,MAAP,CAAc;AAAC0Q,KAAG,EAAC,YAAU;AAAC,WAAOA,GAAP;AAAW;AAA3B,CAAd;AAA4C,IAAI/O,MAAJ,EAAWI,KAAX;AAAiB/U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS,GAA7B;AAA8B6qB,OAAK,EAAC,UAAS7qB,CAAT,EAAW;AAAC6qB,SAAK,GAAC7qB,CAAN;AAAQ;AAAxD,CAAxB,EAAkF,CAAlF;AAE7D,IAAMw5B,GAAG,GAAG,EAAZ,C,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;;AACA,IAAM4G,SAAS,GAAG,UAAC5F,OAAD,EAAa;AAC7B,MAAI6F,IAAI,GAAG,CAAX;;AACA,OAAK,IAAIl/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq5B,OAAO,CAACj5B,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvC,QAAMoT,EAAE,GAAGimB,OAAO,CAACr5B,CAAD,CAAlB;AACA,QAAMqT,EAAE,GAAGgmB,OAAO,CAAC,CAACr5B,CAAC,GAAG,CAAL,IAAUq5B,OAAO,CAACj5B,MAAnB,CAAlB;AACA8+B,QAAI,IAAI,CAAC7rB,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAAX,KAAiBC,EAAE,CAAC,CAAD,CAAF,GAAQD,EAAE,CAAC,CAAD,CAA3B,CAAR;AACD;;AACD,SAAO8rB,IAAP;AACD,CARD,C,CAUA;AACA;;;AACA,IAAMC,WAAW,GAAG,UAACvW,KAAD,EAAQwW,mBAAR,EAAgC;AAClD,MAAMC,QAAQ,GAAGzW,KAAK,CAAC3H,GAAN,CAAUoX,GAAG,CAACkB,uBAAd,CAAjB;;AACA,OAAK,IAAIv5B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4oB,KAAK,CAACxoB,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,QAAMkkB,IAAI,GAAG0E,KAAK,CAAC5oB,CAAD,CAAlB;AACA,QAAIs/B,QAAQ,GAAG,CAAf;;AACA,SAAK,IAAIv+B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6nB,KAAK,CAACxoB,MAA1B,EAAkCW,CAAC,EAAnC,EAAuC;AACrC,UAAIA,CAAC,KAAKf,CAAV,EAAa;AACX;AACD,OAFD,MAEO,IAAIq4B,GAAG,CAACqB,oBAAJ,CAAyB2F,QAAQ,CAACt+B,CAAD,CAAjC,EAAsCmjB,IAAI,CAAC,CAAD,CAAJ,CAAQvW,KAA9C,CAAJ,EAA0D;AAC/D2xB,gBAAQ,IAAI,CAAZ;AACD;AACF;;AACD,QAAMJ,IAAI,GAAGD,SAAS,CAACI,QAAQ,CAACr/B,CAAD,CAAT,CAAtB,CAVqC,CAWrC;AACA;AACA;;AACA,QAAMu/B,cAAc,GAAIL,IAAI,GAAG,CAAR,MAAgBI,QAAQ,GAAG,CAAX,KAAiB,CAAjC,CAAvB;;AACA,QAAIC,cAAJ,EAAoB;AAClB,2DAAoBrb,IAApB,wCAA0B;AAAA,YAAjBsb,OAAiB;AAAA,mBACO,CAACA,OAAO,CAAC1xB,GAAT,EAAc0xB,OAAO,CAAC7xB,KAAtB,CADP;AACvB6xB,eAAO,CAAC7xB,KADe;AACR6xB,eAAO,CAAC1xB,GADA;AAEzB;;AACDoW,UAAI,CAACka,OAAL;AACD;AACF;;AACD,SAAOxV,KAAP;AACD,CAzBD,C,CA2BA;;;AACA,IAAM6W,SAAS,GAAG,UAACvb,IAAD,EAAU;AAC1BoF,QAAM,CAACpF,IAAI,CAAC9jB,MAAL,GAAc,CAAf,CAAN;AACAkpB,QAAM,CAACpF,IAAI,CAAC,CAAD,CAAJ,KAAY,GAAb,kCAAgDA,IAAhD,CAAN;AACAoF,QAAM,CAACpF,IAAI,CAACA,IAAI,CAAC9jB,MAAL,GAAc,CAAf,CAAJ,KAA0B,GAA3B,gCAA4D8jB,IAA5D,CAAN;AACA,MAAMwb,KAAK,GAAGxb,IAAI,CAAChB,KAAL,CAAW,GAAX,CAAd;AACA,MAAMmF,MAAM,GAAG,EAAf;AACA,MAAI1a,KAAK,GAAG6G,SAAZ;AACA,MAAIsd,OAAO,GAAGtd,SAAd;;AACA,OAAK,IAAIxU,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0/B,KAAK,CAACt/B,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AACrC,QAAM2/B,OAAO,GAAGD,KAAK,CAAC1/B,CAAD,CAArB;AACAspB,UAAM,CAACqW,OAAO,CAACv/B,MAAR,GAAiB,CAAlB,oCAAqD8jB,IAArD,CAAN;AACAoF,UAAM,CAAC,OAAO3C,OAAP,CAAegZ,OAAf,KAA2B,CAA5B,EAA+BA,OAA/B,CAAN;;AACA,QAAIA,OAAO,KAAK,GAAZ,IAAmBA,OAAO,KAAK,GAAnC,EAAwC;AACtC,UAAI7N,OAAO,KAAKtd,SAAhB,EAA2B;AACzB8U,cAAM,CAACI,KAAK,CAAC0B,KAAN,CAAY0G,OAAZ,EAAqBnkB,KAArB,CAAD,8BAAwDuW,IAAxD,CAAN;AACAoF,cAAM,CAACjB,MAAM,CAACA,MAAM,CAACjoB,MAAP,GAAgB,CAAjB,CAAN,CAA0BA,MAA1B,GAAmC,CAApC,+BAC4B8jB,IAD5B,CAAN;;AAEA,YAAIyb,OAAO,KAAK,GAAhB,EAAqB;AACnBrW,gBAAM,CAACtpB,CAAC,KAAK0/B,KAAK,CAACt/B,MAAN,GAAe,CAAtB,yBAA8C8jB,IAA9C,CAAN;AACA,iBAAOmE,MAAP;AACD;AACF;;AACDA,YAAM,CAAC/nB,IAAP,CAAY,EAAZ;AACAgpB,YAAM,CAACtpB,CAAC,GAAG0/B,KAAK,CAACt/B,MAAN,GAAe,CAApB,8BAAiD8jB,IAAjD,CAAN;AACAvW,WAAK,GAAG,CAACyV,UAAU,CAACsc,KAAK,CAAC1/B,CAAC,GAAG,CAAL,CAAN,EAAe,EAAf,CAAX,EAA+BojB,UAAU,CAACsc,KAAK,CAAC1/B,CAAC,GAAG,CAAL,CAAN,EAAe,EAAf,CAAzC,CAAR;AACAspB,YAAM,CAACI,KAAK,CAAC6B,KAAN,CAAY5d,KAAZ,CAAD,CAAN;AACA3N,OAAC,IAAI,CAAL;AACA8xB,aAAO,GAAGpI,KAAK,CAACxmB,KAAN,CAAYyK,KAAZ,CAAV;AACA;AACD;;AACD,QAAI8uB,OAAO,GAAGjoB,SAAd;;AACA,QAAImrB,OAAO,KAAK,GAAhB,EAAqB;AACnBrW,YAAM,CAACtpB,CAAC,GAAG0/B,KAAK,CAACt/B,MAAN,GAAe,CAApB,8BAAiD8jB,IAAjD,CAAN;AACAuY,aAAO,GAAG,CAACrZ,UAAU,CAACsc,KAAK,CAAC1/B,CAAC,GAAG,CAAL,CAAN,EAAe,EAAf,CAAX,EAA+BojB,UAAU,CAACsc,KAAK,CAAC1/B,CAAC,GAAG,CAAL,CAAN,EAAe,EAAf,CAAzC,CAAV;AACAspB,YAAM,CAACI,KAAK,CAAC6B,KAAN,CAAYkR,OAAZ,CAAD,CAAN;AACAz8B,OAAC,IAAI,CAAL;AACD;;AACDspB,UAAM,CAACtpB,CAAC,GAAG0/B,KAAK,CAACt/B,MAAN,GAAe,CAApB,8BAAiD8jB,IAAjD,CAAN;AACA,QAAMpW,GAAG,GAAG,CAACsV,UAAU,CAACsc,KAAK,CAAC1/B,CAAC,GAAG,CAAL,CAAN,EAAe,EAAf,CAAX,EAA+BojB,UAAU,CAACsc,KAAK,CAAC1/B,CAAC,GAAG,CAAL,CAAN,EAAe,EAAf,CAAzC,CAAZ;AACAspB,UAAM,CAACI,KAAK,CAAC6B,KAAN,CAAYzd,GAAZ,CAAD,CAAN;AACA9N,KAAC,IAAI,CAAL;;AACA,QAAI0pB,KAAK,CAAC0B,KAAN,CAAY0G,OAAZ,EAAqBhkB,GAArB,CAAJ,EAA+B;AAC7B;AACD;;AACD,QAAI2uB,OAAO,KAAKjoB,SAAZ,KACCkV,KAAK,CAAC0B,KAAN,CAAYqR,OAAZ,EAAqB3K,OAArB,KAAiCpI,KAAK,CAAC0B,KAAN,CAAYqR,OAAZ,EAAqB3uB,GAArB,CADlC,CAAJ,EACkE;AAChE2uB,aAAO,GAAGjoB,SAAV;AACD;;AACD6T,UAAM,CAACA,MAAM,CAACjoB,MAAP,GAAgB,CAAjB,CAAN,CAA0BE,IAA1B,CAA+B;AAC7BqN,WAAK,EAAE+b,KAAK,CAACxmB,KAAN,CAAY4uB,OAAZ,CADsB;AAE7B2K,aAAO,EAAEA,OAFoB;AAG7B3uB,SAAG,EAAEA;AAHwB,KAA/B;AAKAgkB,WAAO,GAAGpI,KAAK,CAACxmB,KAAN,CAAY4K,GAAZ,CAAV;AACD;AACF,CAvDD,C,CAyDA;AACA;;;AACAuqB,GAAG,CAACuH,qBAAJ,GAA4B,UAACC,QAAD,EAAc;AACxC,MAAMH,KAAK,GAAG,EAAd;;AACA,OAAK,IAAI1/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6/B,QAAQ,CAACz/B,MAA7B,EAAqCJ,CAAC,EAAtC,EAA0C;AACxC,QAAM2/B,OAAO,GAAGE,QAAQ,CAAC7/B,CAAD,CAAxB;AACAspB,UAAM,CAAC,OAAO3C,OAAP,CAAegZ,OAAO,CAAC9zB,IAAvB,KAAgC,CAAjC,EAAoC8zB,OAAO,CAAC9zB,IAA5C,CAAN;;AACA,QAAI8zB,OAAO,CAAC9zB,IAAR,KAAiB,GAArB,EAA0B;AACxByd,YAAM,CAACtpB,CAAC,KAAK6/B,QAAQ,CAACz/B,MAAT,GAAkB,CAAzB,CAAN;AACA;AACD;;AACDs/B,SAAK,CAACp/B,IAAN,CAAWq/B,OAAO,CAAC9zB,IAAnB;AACAyd,UAAM,CAAEqW,OAAO,CAACx6B,EAAR,KAAeqP,SAAhB,MAAgCmrB,OAAO,CAAC9zB,IAAR,KAAiB,GAAjD,CAAD,CAAN;;AACA,QAAI8zB,OAAO,CAACx6B,EAAR,KAAeqP,SAAnB,EAA8B;AAC5BkrB,WAAK,CAACp/B,IAAN,CAAWq/B,OAAO,CAACx6B,EAAnB;AACAu6B,WAAK,CAACp/B,IAAN,CAAWq/B,OAAO,CAAC3Z,EAAnB;AACD;;AACDsD,UAAM,CAACqW,OAAO,CAACn9B,CAAR,KAAcgS,SAAf,CAAN;AACAkrB,SAAK,CAACp/B,IAAN,CAAWq/B,OAAO,CAACn9B,CAAnB;AACAk9B,SAAK,CAACp/B,IAAN,CAAWq/B,OAAO,CAACl9B,CAAnB;AACD;;AACDi9B,OAAK,CAACp/B,IAAN,CAAW,GAAX;AACA,SAAOo/B,KAAK,CAACnX,IAAN,CAAW,GAAX,CAAP;AACD,CArBD,C,CAuBA;AACA;AACA;;;AACA8P,GAAG,CAACe,qBAAJ,GAA4B,UAAClV,IAAD,EAAU;AACpC,SAAOib,WAAW,CAACM,SAAS,CAACvb,IAAD,CAAV,CAAlB;AACD,CAFD,C,CAIA;;;AACAmU,GAAG,CAAC2G,qBAAJ,GAA4B,UAACpW,KAAD,EAAW;AACrC,MAAM8W,KAAK,GAAG,EAAd;;AACA,wDAAiB9W,KAAjB,2CAAwB;AAAA,QAAf1E,IAAe;AACtBoF,UAAM,CAACpF,IAAI,CAAC9jB,MAAL,GAAc,CAAf,CAAN;AACAs/B,SAAK,CAACp/B,IAAN,CAAW,GAAX;AACAo/B,SAAK,CAACp/B,IAAN,CAAW4jB,IAAI,CAAC,CAAD,CAAJ,CAAQvW,KAAR,CAAc,CAAd,CAAX;AACA+xB,SAAK,CAACp/B,IAAN,CAAW4jB,IAAI,CAAC,CAAD,CAAJ,CAAQvW,KAAR,CAAc,CAAd,CAAX;;AACA,0DAAoBuW,IAApB,2CAA0B;AAAA,UAAjBsb,OAAiB;;AACxB,UAAIA,OAAO,CAAC/C,OAAR,KAAoBjoB,SAAxB,EAAmC;AACjCkrB,aAAK,CAACp/B,IAAN,CAAW,GAAX;AACD,OAFD,MAEO;AACLo/B,aAAK,CAACp/B,IAAN,CAAW,GAAX;AACAo/B,aAAK,CAACp/B,IAAN,CAAWk/B,OAAO,CAAC/C,OAAR,CAAgB,CAAhB,CAAX;AACAiD,aAAK,CAACp/B,IAAN,CAAWk/B,OAAO,CAAC/C,OAAR,CAAgB,CAAhB,CAAX;AACD;;AACDiD,WAAK,CAACp/B,IAAN,CAAWk/B,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CAAX;AACA4xB,WAAK,CAACp/B,IAAN,CAAWk/B,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CAAX;AACD;AACF;;AACD4xB,OAAK,CAACp/B,IAAN,CAAW,GAAX;AACA,SAAOo/B,KAAK,CAACnX,IAAN,CAAW,GAAX,CAAP;AACD,CArBD,C,CAuBA;AACA;AACA;AACA;AACA;AACA;;;AACA8P,GAAG,CAACkB,uBAAJ,GAA8B,UAACrV,IAAD,EAAOkb,mBAAP,EAA+B;AAC3D,MAAM/W,MAAM,GAAG,EAAf;AACA+W,qBAAmB,GAAGA,mBAAmB,IAAI,EAA7C;;AACA,wDAAclb,IAAd,2CAAoB;AAAA,QAAX1hB,CAAW;AAClB,QAAMi6B,OAAO,GAAGj6B,CAAC,CAACi6B,OAAF,IAAa/S,KAAK,CAAC4B,QAAN,CAAe9oB,CAAC,CAACmL,KAAjB,EAAwBnL,CAAC,CAACsL,GAA1B,CAA7B;AACA,QAAMoZ,QAAQ,GAAGvoB,IAAI,CAACK,IAAL,CAAU0qB,KAAK,CAAC3B,SAAN,CAAgBvlB,CAAC,CAACmL,KAAlB,EAAyBnL,CAAC,CAACsL,GAA3B,CAAV,CAAjB;AACA,QAAMgyB,UAAU,GAAGnhC,IAAI,CAACW,KAAL,CAAW4nB,QAAQ,GAACkY,mBAApB,CAAnB;;AACA,SAAK,IAAIp/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8/B,UAApB,EAAgC9/B,CAAC,EAAjC,EAAqC;AACnC,UAAM4M,CAAC,GAAG,CAAC5M,CAAC,GAAG,CAAL,KAAS8/B,UAAU,GAAG,CAAtB,CAAV;AACA,UAAMlC,CAAC,GAAG,IAAIhxB,CAAd;AACAyb,YAAM,CAAC/nB,IAAP,CAAY,CAACs9B,CAAC,GAACA,CAAF,GAAIp7B,CAAC,CAACmL,KAAF,CAAQ,CAAR,CAAJ,GAAiB,IAAEiwB,CAAF,GAAIhxB,CAAJ,GAAM6vB,OAAO,CAAC,CAAD,CAA9B,GAAoC7vB,CAAC,GAACA,CAAF,GAAIpK,CAAC,CAACsL,GAAF,CAAM,CAAN,CAAzC,EACC8vB,CAAC,GAACA,CAAF,GAAIp7B,CAAC,CAACmL,KAAF,CAAQ,CAAR,CAAJ,GAAiB,IAAEiwB,CAAF,GAAIhxB,CAAJ,GAAM6vB,OAAO,CAAC,CAAD,CAA9B,GAAoC7vB,CAAC,GAACA,CAAF,GAAIpK,CAAC,CAACsL,GAAF,CAAM,CAAN,CADzC,CAAZ;AAED;;AACDua,UAAM,CAAC/nB,IAAP,CAAYkC,CAAC,CAACsL,GAAd;AACD;;AACD,SAAOua,MAAP;AACD,CAhBD,C,CAkBA;;;AACAgQ,GAAG,CAACqB,oBAAJ,GAA2B,UAACL,OAAD,EAAUzlB,KAAV,EAAoB;AAC7C,MAAMpR,CAAC,GAAGoR,KAAK,CAAC,CAAD,CAAf;AACA,MAAMnR,CAAC,GAAGmR,KAAK,CAAC,CAAD,CAAf;AACA,MAAImsB,SAAS,GAAG,CAAhB;;AACA,OAAK,IAAI//B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGq5B,OAAO,CAACj5B,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvC,QAAMw/B,OAAO,GAAG;AAAC7xB,WAAK,EAAE0rB,OAAO,CAACr5B,CAAD,CAAf;AAAoB8N,SAAG,EAAEurB,OAAO,CAAC,CAACr5B,CAAC,GAAG,CAAL,IAAUq5B,OAAO,CAACj5B,MAAnB;AAAhC,KAAhB;;AACA,QAAKo/B,OAAO,CAAC7xB,KAAR,CAAc,CAAd,IAAmBnL,CAAnB,IAAwBA,CAAC,GAAGg9B,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CAA7B,IACC0xB,OAAO,CAAC7xB,KAAR,CAAc,CAAd,IAAmBnL,CAAnB,IAAwBA,CAAC,GAAGg9B,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CADjC,EACkD;AAChD,UAAMlB,CAAC,GAAG,CAACpK,CAAC,GAAGg9B,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CAAL,KAAsB0xB,OAAO,CAAC7xB,KAAR,CAAc,CAAd,IAAmB6xB,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CAAzC,CAAV;AACA,UAAM8O,EAAE,GAAGhQ,CAAC,GAAC4yB,OAAO,CAAC7xB,KAAR,CAAc,CAAd,CAAF,GAAqB,CAAC,IAAIf,CAAL,IAAQ4yB,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,CAAxC;;AACA,UAAIrL,CAAC,GAAGma,EAAR,EAAY;AACVmjB,iBAAS,IAAI,CAAb;AACD;AACF,KAPD,MAOO,IAAIP,OAAO,CAAC7xB,KAAR,CAAc,CAAd,MAAqBnL,CAArB,IAA0Bg9B,OAAO,CAAC7xB,KAAR,CAAc,CAAd,KAAoBlL,CAAlD,EAAqD;AAC1D,UAAI+8B,OAAO,CAAC1xB,GAAR,CAAY,CAAZ,IAAiBtL,CAArB,EAAwB;AACtBu9B,iBAAS,IAAI,CAAb;AACD;;AACD,UAAM/rB,IAAI,GAAGqlB,OAAO,CAAC,CAACr5B,CAAC,GAAGq5B,OAAO,CAACj5B,MAAZ,GAAqB,CAAtB,IAA4Bi5B,OAAO,CAACj5B,MAArC,CAApB;;AACA,UAAI4T,IAAI,CAAC,CAAD,CAAJ,GAAUxR,CAAd,EAAiB;AACfu9B,iBAAS,IAAI,CAAb;AACD;AACF;AACF;;AACD,SAAOA,SAAS,GAAG,CAAZ,KAAkB,CAAzB;AACD,CAxBD,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpMAprB,MAAM,CAACgT,MAAP,CAAc;AAACqY,eAAa,EAAC,YAAU;AAAC,WAAOA,aAAP;AAAqB;AAA/C,CAAd;AAAgE,IAAI1W,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;;AAE3E;AACA;AACA;AACA;AACA;AACA;IACMmhC,a;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAYpN,KAAZ,EAAmB;AACjB;AACA;AACA,SAAK/mB,IAAL,GAAY+mB,KAAZ;AACA,SAAKqN,MAAL,GAAc,CAAC,SAAD,EAAY,SAAZ,EAAuB,SAAvB,EAAkC,SAAlC,EAA6C,SAA7C,EACC,SADD,EACY,SADZ,EACuB,SADvB,EACkC,SADlC,EAC6C,SAD7C,CAAd,CAJiB,CAMjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAC,WAAO,CAACt9B,GAAR,CAAY,YAAZ,EAA0B,KAAKiJ,IAA/B;AACAq0B,WAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B4R,SAA3B;AACA0rB,WAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B4R,SAA3B;AACA0rB,WAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B4R,SAA5B;AACA0rB,WAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B4R,SAA5B,EApBiB,CAqBjB;AACA;AACA;AACA;AACA;AACA;AACA;;AACA0rB,WAAO,CAACt9B,GAAR,CAAY,kBAAZ,EAAgC4R,SAAhC;AACD,G,CACD;AACA;AACA;;;;;SACA2rB,gB;AAAA,8BAAiBC,OAAjB,EAA0BC,OAA1B,EAAmC;AACjC,aAAO,IAAP;AACD;;;MACD;AACA;AACA;;;SACAC,c;AAAA,8BAAiB;AACf,aAAO,KAAKC,QAAZ;AACD;;;MACD;;;SACAC,W;AAAA,yBAAYC,KAAZ,EAAmBC,QAAnB,EAA6B;AAC3BpX,YAAM,CAAC,KAAD,EAAQ,kCAAR,CAAN;AACD;;;MACD;AACA;;;SACAqX,S;AAAA,uBAAU/f,SAAV,EAAqB8R,QAArB,EAA+B;AAC7BpJ,YAAM,CAAC,KAAD,EAAQ,8BAAR,CAAN;AACD;;;MACD;AACA;;;SACAsX,Q;AAAA,wBAAW;AACT,UAAM3hC,GAAG,GAAGihC,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAZ;AACA+mB,YAAM,CAACrqB,GAAG,IAAIA,GAAG,CAAC6hB,MAAJ,CAAW,UAACte,CAAD;AAAA,eAAOA,CAAC,CAAC+7B,GAAF,KAAU,OAAjB;AAAA,OAAX,EAAqCn+B,MAArC,KAAgD,CAAxD,CAAN;AACD;;;;;;;;;;;;;;;;;ACzEH,IAAIsnB,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;;AAAgI,IAAIgiC,sBAAJ;;AAA2BlsB,MAAM,CAACoQ,IAAP,CAAY,8CAAZ,EAA2D;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACgiC,0BAAsB,GAAChiC,CAAvB;AAAyB;AAA9C,CAA3D,EAA2G,CAA3G;;AAA8G,IAAIiiC,cAAJ;;AAAmBnsB,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACiiC,kBAAc,GAACjiC,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAAhU8V,MAAM,CAACgT,MAAP,CAAc;AAACoZ,eAAa,EAAC,YAAU;AAAC,WAAOA,aAAP;AAAqB;AAA/C,CAAd;AAAgE,IAAIf,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAIyqB,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAA0D,IAAI4sB,MAAJ;AAAW9W,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAAC0G,QAAM,EAAC,UAAS5sB,CAAT,EAAW;AAAC4sB,UAAM,GAAC5sB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAIuyB,kBAAJ;AAAuBzc,MAAM,CAACoQ,IAAP,CAAY,yBAAZ,EAAsC;AAACqM,oBAAkB,EAAC,UAASvyB,CAAT,EAAW;AAACuyB,sBAAkB,GAACvyB,CAAnB;AAAqB;AAArD,CAAtC,EAA6F,CAA7F;AAAgG,IAAI0zB,MAAJ;AAAW5d,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAACwN,QAAM,EAAC,UAAS1zB,CAAT,EAAW;AAAC0zB,UAAM,GAAC1zB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAIg7B,WAAJ;AAAgBllB,MAAM,CAACoQ,IAAP,CAAY,kBAAZ,EAA+B;AAAC8U,aAAW,EAAC,UAASh7B,CAAT,EAAW;AAACg7B,eAAW,GAACh7B,CAAZ;AAAc;AAAvC,CAA/B,EAAwE,CAAxE;AAO/f,IAAImiC,KAAK,GAAGxsB,SAAZ;AAEA,IAAMysB,gBAAgB,GAAG,CAAC,MAAD,EAAS,UAAT,EAAqB,UAArB,CAAzB,C,CAEA;;AAEA,IAAM/O,iBAAiB,GAAG,UAACD,OAAD,EAAa;AACrC,SAAOA,OAAO,GAAGb,kBAAkB,CAACc,iBAAnB,CAAqCD,OAArC,CAAH,GAAmD,EAAjE;AACD,CAFD;;AAIA,IAAMiP,wBAAwB,GAAG,UAACjP,OAAD,EAAa;AAC5C,MAAMjtB,IAAI,GAAGosB,kBAAkB,CAACC,QAAnB,CAA4BY,OAAO,CAACF,KAApC,CAAb;AACAzI,QAAM,CAACtkB,IAAD,gDAAmDitB,OAAO,CAACF,KAA3D,CAAN;AACAE,SAAO,CAACL,QAAR,CAAiBxxB,MAAjB,GAA0B4E,IAAI,CAACusB,KAA/B;;AACA,OAAK,IAAIvxB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiyB,OAAO,CAACL,QAAR,CAAiBxxB,MAArC,EAA6CJ,CAAC,EAA9C,EAAkD;AAChDiyB,WAAO,CAACL,QAAR,CAAiB5xB,CAAjB,IACIiyB,OAAO,CAACL,QAAR,CAAiB5xB,CAAjB,KAAuB;AAAC6L,UAAI,EAAE,WAAP;AAAoBkmB,WAAK,EAAE;AAA3B,KAD3B;AAEAE,WAAO,CAACL,QAAR,CAAiB5xB,CAAjB,EAAoBkkB,IAApB,GAA2B+N,OAAO,CAAC/N,IAAR,CAAalF,MAAb,CAAoB,CAAChf,CAAD,CAApB,CAA3B;AACD;AACF,CATD;;AAWA,IAAMmhC,cAAc,GAAG,UAAClP,OAAD,EAAUpmB,IAAV,EAAmB;AACxC,MAAIomB,OAAO,CAACpmB,IAAR,KAAiBA,IAArB,EAA2B;AACzB;AACD;;AACD,MAAIA,IAAI,KAAK,WAAb,EAA0B;AACxBomB,WAAO,CAACF,KAAR,GAAgB,GAAhB;AACA,WAAOE,OAAO,CAACL,QAAf;AACD,GAHD,MAGO,IAAI/lB,IAAI,KAAK,UAAb,EAAyB;AAC9BomB,WAAO,CAACF,KAAR,GAAgBX,kBAAkB,CAACI,gCAAnB,CAAoD,CAApD,CAAhB;AACAS,WAAO,CAACL,QAAR,GAAmB,EAAnB;AACAsP,4BAAwB,CAACjP,OAAD,CAAxB;AACD,GAJM,MAIA;AACL3I,UAAM,CAAC,KAAD,gCAAoCzd,IAApC,CAAN;AACD;;AACDomB,SAAO,CAACpmB,IAAR,GAAeA,IAAf;AACD,CAfD,C,CAiBA;;;AAEA,IAAMu1B,oBAAoB,GAAG,UAAClS,MAAD,EAASmS,IAAT,EAAend,IAAf,EAAwB;AACnD,MAAM+N,OAAO,GAAGb,kBAAkB,CAACkB,UAAnB,CAA8B0O,KAAK,CAACrP,IAApC,EAA0CzN,IAA1C,CAAhB;;AACA,MAAImd,IAAI,KAAKpP,OAAO,CAACF,KAAjB,IAA0BE,OAAO,CAACpmB,IAAR,KAAiB,WAA/C,EAA4D;AAC1D;AACD;;AACD,MAAMkmB,KAAK,GAAGsP,IAAI,CAACjhC,MAAL,KAAgB,CAAhB,GAAoBihC,IAApB,GAA2B,GAAzC;;AACA,MAAItP,KAAK,KAAKE,OAAO,CAACF,KAAtB,EAA6B;AAC3B7C,UAAM,CAACmS,IAAP,CAAYtP,KAAZ;AACD,GAFD,MAEO;AACLE,WAAO,CAACF,KAAR,GAAgBsP,IAAI,CAACjhC,MAAL,KAAgB,CAAhB,GAAoBihC,IAApB,GAA2B,GAA3C;AACAL,SAAK,CAACM,YAAN;AACD;AACF,CAZD;;AAcA,IAAMC,eAAe,GAAG,UAACrS,MAAD,EAASmS,IAAT,EAAex1B,IAAf,EAAwB;AAC9C,MAAIkmB,KAAK,GAAGsP,IAAI,IAAIA,IAAI,KAAK,GAAjB,GAAuBA,IAAvB,GAA8B7sB,SAA1C;AACA,MAAMgtB,SAAS,GAAG,OAAlB;;AACA,MAAI31B,IAAI,KAAK,MAAT,IAAmBkmB,KAAnB,IAA4BA,KAAK,CAAC0P,QAAN,CAAeD,SAAf,CAAhC,EAA2D;AACzD,QAAME,MAAM,GAAG,iCAAf;AACA3P,SAAK,GAAMA,KAAK,CAAC9E,MAAN,CAAa,CAAb,EAAgB8E,KAAK,CAAC3xB,MAAN,GAAeohC,SAAS,CAACphC,MAAzC,CAAN,SAA0DshC,MAA/D;AACD;;AACD,MAAI3P,KAAK,KAAKiP,KAAK,CAACW,SAAN,CAAgB91B,IAAhB,CAAd,EAAqC;AACnCqjB,UAAM,CAACmS,IAAP,CAAYtP,KAAK,IAAI,GAArB;AACD,GAFD,MAEO;AACLiP,SAAK,CAACW,SAAN,CAAgB91B,IAAhB,IAAwBkmB,KAAxB;AACAiP,SAAK,CAACM,YAAN;AACD;AACF,CAbD;;AAeA,IAAMM,kBAAkB,GAAG,UAAC1S,MAAD,EAASmS,IAAT,EAAkB;AAC3C,MAAMtP,KAAK,GAAGsP,IAAI,IAAIA,IAAI,KAAK,GAAjB,GAAuBA,IAAvB,GAA8B7sB,SAA5C;;AACA,MAAIud,KAAK,KAAKiP,KAAK,CAAChR,OAApB,EAA6B;AAC3Bd,UAAM,CAACmS,IAAP,CAAYtP,KAAK,IAAI,GAArB;AACD,GAFD,MAEO;AACLiP,SAAK,CAAChR,OAAN,GAAgB+B,KAAhB;AACAiP,SAAK,CAACM,YAAN;AACD;AACF,CARD,C,CAUA;;;AAEA,IAAMO,2BAA2B,GAAG,UAACC,QAAD,EAAWlhB,SAAX,EAAyB;AAC3D,MAAM5b,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBxL,SAAxB,CAAb;AACA,SAAOwQ,kBAAkB,CAACgB,0BAAnB,CACH0P,QAAQ,CAAChS,aAAT,IAA0B9qB,IAAI,CAAC8qB,aAD5B,CAAP;AAED,CAJD;;AAMA,IAAMiS,iBAAiB,GAAG,UAACnhB,SAAD,EAAYohB,UAAZ,EAA2B;AACnD,MAAIvW,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqC0C,cAArC,CAAoDhO,SAApD,CAAJ,EAAoE;AAClE,WAAOA,SAAP;AACD;;AACD,MAAM5b,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBxL,SAAxB,CAAb;;AACA,MAAI5b,IAAI,CAACwrB,YAAT,EAAuB;AACrB,QAAMrc,KAAK,GAAGnP,IAAI,CAACwrB,YAAL,CAAkB,CAAlB,CAAd;AACA,QAAMzE,QAAQ,GAAGN,MAAM,CAACM,QAAP,CAAgBE,oBAAhB,CAAqC9X,KAArC,CAAjB;AACA,QAAM8tB,QAAQ,GAAGlW,QAAQ,CAACjL,MAAT,CAAgB,UAACte,CAAD;AAAA,aAAOw/B,UAAU,CAACrb,OAAX,CAAmBnkB,CAAnB,KAAyB,CAAhC;AAAA,KAAhB,CAAjB;AACA,WAAOy/B,QAAQ,CAAC7hC,MAAT,KAAoB,CAApB,GAAwB6hC,QAAQ,CAAC,CAAD,CAAhC,GAAsClW,QAAQ,CAACxD,IAAT,CAAc,EAAd,CAA7C;AACD;;AACD,SAAO/T,SAAP;AACD,CAZD;;AAcA,IAAM0tB,mBAAmB,GAAG,UAACtP,KAAD,EAAQoP,UAAR,EAAuB;AACjD,MAAMh9B,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBwG,KAAK,CAAChS,SAA9B,CAAb;AACA,MAAMsO,MAAM,GAAG2K,WAAW,CAACO,SAAZ,CACXxH,KAAK,CAACF,QAAN,CAAejC,MAAf,IAAyBzrB,IAAI,CAACyrB,MAA9B,IAAwC,EAD7B,CAAf;;AAEA,MAAM0R,cAAc,GAAG,UAACC,SAAD,EAAe;AACpC,QAAMC,cAAc,GAAG5W,MAAM,CAACW,gBAAP,CAAwBgW,SAAxB,CAAvB;AACA,QAAMxD,OAAO,GAAG/E,WAAW,CAACO,SAAZ,CAAsBiI,cAAc,CAAC5R,MAAf,IAAyB,EAA/C,CAAhB;AACA,WAAOmO,OAAO,IAAIA,OAAO,KAAK1P,MAA9B;AACD,GAJD;;AAKA,MAAMoT,QAAQ,GAAGN,UAAU,CAAClhB,MAAX,CAAkBqhB,cAAlB,CAAjB;;AACA,MAAIG,QAAQ,CAACliC,MAAT,KAAoB,CAAxB,EAA2B;AACzB,QAAMioB,MAAM,GAAG;AAACxc,UAAI,EAAE,eAAP;AAAwBy2B,cAAQ,EAAEA,QAAQ,CAAC,CAAD;AAA1C,KAAf;AACA,QAAMC,QAAQ,GAAGP,UAAU,CAAClhB,MAAX,CAAkB,UAACte,CAAD;AAAA,aAAO,CAAC2/B,cAAc,CAAC3/B,CAAD,CAAtB;AAAA,KAAlB,CAAjB;;AACA,QAAI+/B,QAAQ,CAACniC,MAAT,KAAoB,CAAxB,EAA2B;AACzBioB,YAAM,CAACka,QAAP,GAAkBA,QAAQ,CAAC,CAAD,CAA1B;AACD;;AACD,WAAOla,MAAP;AACD;;AACD,SAAO;AAACxc,QAAI,EAAE;AAAP,GAAP;AACD,CAnBD,C,CAqBA;;;AAEA,IAAM22B,0BAA0B,GAAG,UAAC/R,MAAD,EAAY;AAC7C,MAAMgK,QAAQ,GAAGZ,WAAW,CAACiB,0BAAZ,CAAuCrK,MAAvC,CAAjB;AACA,SAAO1wB,KAAK,CAACuvB,IAAN,CAAWmL,QAAX,EAAqBxZ,GAArB,CAAyB,UAACze,CAAD;AAAA,WAAO,QAAQigC,IAAR,CAAajgC,CAAb,IAAkBA,CAAC,GAAGA,CAAtB,GAA0BA,CAAjC;AAAA,GAAzB,EAA6D+lB,IAA7D,CAAkE,EAAlE,CAAP;AACD,CAHD;;AAKA,IAAMma,kCAAkC,GAAG,UAAC9P,KAAD,EAAQoP,UAAR,EAAuB;AAChE,MAAMh9B,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBwG,KAAK,CAAChS,SAA9B,CAAb;AACA,MAAMsO,MAAM,GAAGsT,0BAA0B,CACrC5P,KAAK,CAACF,QAAN,CAAejC,MAAf,IAAyBzrB,IAAI,CAACyrB,MAA9B,IAAwC,EADH,CAAzC;;AAEA,MAAMvJ,QAAQ,GAAG,UAACkb,SAAD,EAAe;AAC9B,QAAMC,cAAc,GAAG5W,MAAM,CAACW,gBAAP,CAAwBgW,SAAxB,CAAvB;AACA,QAAMxD,OAAO,GAAG4D,0BAA0B,CAACH,cAAc,CAAC5R,MAAf,IAAyB,EAA1B,CAA1C;AACA,WAAOmN,CAAC,CAAC+E,WAAF,CAAc/D,OAAd,EAAuB1P,MAAvB,CAAP;AACD,GAJD;;AAKA,MAAM0T,KAAK,GAAGZ,UAAU,CAAC/gB,GAAX,CAAe,UAACze,CAAD;AAAA,WAAO,CAACA,CAAD,EAAI0kB,QAAQ,CAAC1kB,CAAD,CAAZ,CAAP;AAAA,GAAf,CAAd;AACA,MAAMqgC,MAAM,GAAGD,KAAK,CAACvwB,IAAN,CAAW,UAAClT,CAAD,EAAIC,CAAJ;AAAA,WAAUD,CAAC,CAAC,CAAD,CAAD,GAAOC,CAAC,CAAC,CAAD,CAAlB;AAAA,GAAX,EAAkC6hB,GAAlC,CAAsC,UAACze,CAAD;AAAA,WAAOA,CAAC,CAAC,CAAD,CAAR;AAAA,GAAtC,CAAf;AACA,MAAM6lB,MAAM,GAAG,EAAf;;AACA,MAAIwa,MAAM,CAACziC,MAAP,GAAgB,CAApB,EAAuB;AACrBioB,UAAM,CAACia,QAAP,GAAkBO,MAAM,CAAC,CAAD,CAAxB;;AACA,QAAIA,MAAM,CAACziC,MAAP,KAAkB,CAAtB,EAAyB;AACvBioB,YAAM,CAACka,QAAP,GAAkBM,MAAM,CAAC,CAAD,CAAxB;AACD;AACF;;AACD,SAAOxa,MAAP;AACD,CAnBD;;IAqBM0Y,a;;;AACJ,yBAAYnO,KAAZ,EAAmB;AAAA;;AACjB,sCAAM,UAAN;AACA,UAAK/R,OAAL,GAAe+R,KAAK,CAACD,MAAN,CAAa9R,OAAb,CAAqB8D,SAApC;AACA,QAAMmd,QAAQ,GAAGlP,KAAK,CAACD,MAAN,CAAamP,QAAb,IAAyB,EAA1C;AACA,UAAKnQ,IAAL,GAAYkQ,2BAA2B,CAACC,QAAD,EAAWlP,KAAK,CAAChS,SAAjB,CAAvC;AACA,QAAMohB,UAAU,GAAG9P,iBAAiB,CAAC,MAAKP,IAAN,CAApC;AACA,UAAK3B,OAAL,GAAe8R,QAAQ,CAAC9R,OAAT,IACA+R,iBAAiB,CAACnP,KAAK,CAAChS,SAAP,EAAkBohB,UAAlB,CADhC;AAEA,UAAKL,SAAL,GAAiBG,QAAQ,CAACH,SAAT,IACAO,mBAAmB,CAACtP,KAAD,EAAQoP,UAAR,CADpC;AAEA,UAAK/tB,UAAL,GAAkBwX,MAAM,CAACW,gBAAP,CAAwBwG,KAAK,CAAChS,SAA9B,EAAyC3M,UAA3D;AACA+sB,SAAK,gCAAL;AACA8B,gBAAY;AAZK;AAalB;;;;SACD3C,gB;AAAA,8BAAiBC,OAAjB,EAA0BC,OAA1B,EAAmC;AACjC,aAAOD,OAAO,CAACtQ,aAAR,KAA0BuQ,OAAO,CAACvQ,aAAzC;AACD;;;;;SACDwQ,c;AAAA,8BAAiB;AACf,aAAO;AACLxQ,qBAAa,EAAEsB,kBAAkB,CAACiB,0BAAnB,CAA8C,KAAKV,IAAnD,CADV;AAELgQ,iBAAS,EAAEvS,CAAC,CAAC4E,MAAF,CAAS,EAAT,EAAa,KAAK2N,SAAlB,CAFN;AAGL3R,eAAO,EAAE,KAAKA;AAHT,OAAP;AAKD;;;;;SACD2Q,S;AAAA,yBAAY;AACV,UAAMoC,OAAO,GAAG,UAACvgC,CAAD;AAAA,eAAQ;AAACE,WAAC,EAAEF,CAAJ;AAAOwgC,cAAI,EAAE,MAAb;AAAqB1iB,gBAAM,EAAE;AAA7B,SAAR;AAAA,OAAhB;;AACA4f,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B,KAAKie,OAAL,CAAaI,GAAb,CAAiB8hB,OAAjB,CAA3B;AACA7C,aAAO,CAACt9B,GAAR,CAAY,sBAAZ,EAAoC,KAAK+uB,IAAzC;AACAuO,aAAO,CAACt9B,GAAR,CAAY,yBAAZ,EAAuC,KAAKotB,OAA5C;AACAkQ,aAAO,CAACt9B,GAAR,CAAY,2BAAZ,EAAyC,KAAK++B,SAA9C;AACAzB,aAAO,CAACt9B,GAAR,CAAY,4BAAZ,EAA0C,KAAKqR,UAA/C;AACD;;;;;;EAhCyB+rB,a;;AAmC5BiD,QAAQ,CAACC,cAAT,CAAwBC,MAAxB,CAA+B;AAC7B,iBAAe,UAAS1C,KAAT,EAAgB;AAC7B;AACA,QAAI;AAAE2C,YAAM,CAACC,YAAP,GAAsBC,eAAtB;AAA0C,KAAhD,CAAiD,OAAO1+B,CAAP,EAAU,CAAG;;AAC9D,QAAMsqB,MAAM,GAAG1B,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAhB;AACA,QAAM7C,KAAK,GAAG6C,MAAM,CAACqU,IAAP,CAAY,YAAZ,CAAd;AACA,QAAMlC,IAAI,GAAGnS,MAAM,CAACmS,IAAP,EAAb;;AACA,QAAIhV,KAAK,KAAK,WAAd,EAA2B;AACzB+U,0BAAoB,CAAClS,MAAD,EAASmS,IAAT,EAAe,KAAKnd,IAApB,CAApB;AACD,KAFD,MAEO,IAAImI,KAAK,KAAK,SAAd,EAAyB;AAC9BuV,wBAAkB,CAAC1S,MAAD,EAASmS,IAAT,CAAlB;AACD,KAFM,MAEA,IAAIJ,gBAAgB,CAACta,OAAjB,CAAyB0F,KAAzB,KAAmC,CAAvC,EAA0C;AAC/CkV,qBAAe,CAACrS,MAAD,EAASmS,IAAT,EAAehV,KAAf,CAAf;AACD,KAFM,MAEA;AACL/C,YAAM,CAAC,KAAD,kCAAsC+C,KAAtC,CAAN;AACD;AACF,GAhB4B;AAiB7B,2BAAyB,UAASoU,KAAT,EAAgB;AACvC,QAAM50B,IAAI,GAAG2hB,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgB9lB,GAAhB,EAAb;AACA,QAAM6oB,OAAO,GAAGb,kBAAkB,CAACkB,UAAnB,CAA8B0O,KAAK,CAACrP,IAApC,EAA0C,KAAKzN,IAA/C,CAAhB;;AACA,QAAIrY,IAAI,KAAKomB,OAAO,CAACF,KAAjB,IAA0BE,OAAO,CAACpmB,IAAR,IAAgB,UAA9C,EAA0D;AACxD;AACD;;AACDomB,WAAO,CAACF,KAAR,GAAgBlmB,IAAhB;AACAq1B,4BAAwB,CAACjP,OAAD,CAAxB;AACA+O,SAAK,CAACM,YAAN;AACD,GA1B4B;AA2B7B,4BAA0B,UAASb,KAAT,EAAgB;AACxC,QAAM50B,IAAI,GAAG2hB,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgB9lB,GAAhB,EAAb;AACA63B,oBAAgB,CAAChgB,GAAjB,CACI,UAACze,CAAD,EAAO;AAAE,UAAIA,CAAC,KAAK,MAAV,EAAkB,OAAOw+B,KAAK,CAACW,SAAN,CAAgBn/B,CAAhB,CAAP;AAA4B,KAD3D;;AAEA,QAAKqJ,IAAI,KAAK,eAAV,MACCm1B,KAAK,CAACW,SAAN,CAAgB91B,IAAhB,KAAyB,eAD1B,CAAJ,EACgD;AAC9C,aAAOm1B,KAAK,CAACW,SAAN,CAAgB6B,IAAvB;AACD;;AACDxC,SAAK,CAACW,SAAN,CAAgB91B,IAAhB,GAAuBA,IAAvB;;AACA,QAAIA,IAAI,KAAK,eAAb,EAA8B;AAC5BujB,OAAC,CAAC4E,MAAF,CAASgN,KAAK,CAACW,SAAf,EAA0Be,kCAAkC,CACxDxC,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CADwD,EAC3B2vB,iBAAiB,CAAC8O,KAAK,CAACrP,IAAP,CADU,CAA5D;AAED;;AACDqP,SAAK,CAACM,YAAN;AACD,GAzC4B;AA0C7B,0BAAwB,UAASb,KAAT,EAAgB;AACtC,QAAM50B,IAAI,GAAG2hB,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgB9lB,GAAhB,EAAb;AACA,QAAM6oB,OAAO,GAAGb,kBAAkB,CAACkB,UAAnB,CAA8B0O,KAAK,CAACrP,IAApC,EAA0C,KAAKzN,IAA/C,CAAhB;AACAid,kBAAc,CAAClP,OAAD,EAAUpmB,IAAV,CAAd;AACAm1B,SAAK,CAACM,YAAN;AACD;AA/C4B,CAA/B;AAkDA2B,QAAQ,CAACC,cAAT,CAAwBO,OAAxB,CAAgC;AAC9BC,oBAAkB,EAAE,YAAM;AACxB,WAAOxD,OAAO,CAAC39B,GAAR,CAAY,sBAAZ,CAAP;AACD,GAH6B;AAI9BohC,gBAAc,EAAE,YAAM;AACpB,QAAMtb,MAAM,GAAG6X,OAAO,CAAC39B,GAAR,CAAY,2BAAZ,KAA4C,EAA3D;AACA8lB,UAAM,CAACmb,IAAP,GAAcnb,MAAM,CAACmb,IAAP,IAAe,GAA7B;;AACA,QAAInb,MAAM,CAACxc,IAAP,KAAgB,eAApB,EAAqC;AACnCwc,YAAM,CAACia,QAAP,GAAkBja,MAAM,CAACia,QAAP,IAAmB,GAArC;AACAja,YAAM,CAACka,QAAP,GAAkBla,MAAM,CAACka,QAAP,IAAmB,GAArC;AACD;;AACD,WAAOla,MAAP;AACD,GAZ6B;AAa9B2H,SAAO,EAAE,YAAM;AACb,WAAOkQ,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,KAA0C,GAAjD;AACD;AAf6B,CAAhC;AAkBA0gC,QAAQ,CAACtR,IAAT,CAAc8R,OAAd,CAAsB;AACpBG,WAAS,EAAE,UAAC7R,KAAD,EAAW;AACpB,WAAOX,kBAAkB,CAACI,gCAAnB,CAAoDvQ,GAApD,CAAyD,UAACze,CAAD;AAAA,aAAQ;AACtEqhC,gBAAQ,EAAErhC,CAD4D;AAEtE8uB,aAAK,EAAK9uB,CAAL,WAAY4uB,kBAAkB,CAACC,QAAnB,CAA4B7uB,CAA5B,EAA+B8uB,KAFsB;AAGtES,aAAK,EAAEA;AAH+D,OAAR;AAAA,KAAzD,CAAP;AAKD,GAPmB;AAQpB+R,SAAO,EAAE,UAACljB,SAAD,EAAe;AACtB,QAAMgS,KAAK,GAAGL,MAAM,CAAChwB,GAAP,CAAWqe,SAAX,CAAd;AACA,QAAM5b,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBxL,SAAxB,CAAb;AACA,QAAI0P,UAAU,GAAGsC,KAAK,CAACF,QAAN,CAAepC,UAAf,IAA6BtrB,IAAI,CAACsrB,UAAnD;AACA,QAAIG,MAAM,GAAGmC,KAAK,CAACF,QAAN,CAAejC,MAAf,IAAyBzrB,IAAI,CAACyrB,MAA3C;AACA,QAAIT,OAAO,GAAG,EAAd;;AACA,QAAIvE,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqC0C,cAArC,CAAoDhO,SAApD,CAAJ,EAAoE;AAClE,UAAMzM,KAAK,GAAGsX,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqCtL,SAArC,CAAd;AACA,UAAMmP,OAAO,GAAGtE,MAAM,CAACM,QAAP,CAAgBC,eAAhB,CAAgC7X,KAAhC,CAAhB;AACA,UAAM4vB,OAAO,GAAGhU,OAAO,KAAKnP,SAA5B;AACAoP,aAAO,GAAG,QAAK+T,OAAO,GAAG,aAAH,GAAmB,EAA/B,yBACkB5vB,KADlB,UAC2B4vB,OAAO,GAAGhU,OAAH,GAAa,EAD/C,EAAV;;AAEA,UAAIgU,OAAO,IAAIxR,MAAM,CAAChwB,GAAP,CAAWwtB,OAAX,CAAf,EAAoC;AAClC,YAAM6C,MAAK,GAAGL,MAAM,CAAChwB,GAAP,CAAWwtB,OAAX,CAAd;;AACA,YAAM/qB,KAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwB2D,OAAxB,CAAb;;AACAO,kBAAU,GAAGA,UAAU,IAAIsC,MAAK,CAACtC,UAApB,IAAkCtrB,KAAI,CAACsrB,UAApD;AACAG,cAAM,GAAGA,MAAM,IAAImC,MAAK,CAACnC,MAAhB,IAA0BzrB,KAAI,CAACyrB,MAAxC;AACD;AACF;;AACDH,cAAU,GAAGA,UAAU,IAAI,WAA3B;AACA,iBAAUG,MAAM,GAAGA,MAAM,GAAG,KAAZ,GAAoB,EAApC,IAAyCH,UAAzC,GAAsDN,OAAtD;AACD;AA7BmB,CAAtB;;AAgCA,IAAMgU,wBAAwB,GAAG,YAAM;AACrC;AACA;AACA,MAAI,CAAChD,KAAD,IAAU,CAACA,KAAK,CAAC/sB,UAAjB,IACA+sB,KAAK,CAACiD,uCADV,EACmD;AACjD;AACD;;AACD,MAAMrR,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,MAAM0R,UAAU,GAAGse,MAAM,CAACqB,OAAP,CAAe;AAAChT,aAAS,EAAEogB,KAAK,CAAC/sB;AAAlB,GAAf,CAAnB;;AACA,MAAI,CAAC2e,KAAD,IAAU,CAAC3e,UAAf,EAA2B;AACzB;AACD;;AACD+sB,OAAK,CAACiD,uCAAN,GAAgD,IAAhD;;AACA,MAAKrR,KAAK,CAACD,MAAN,CAAamP,QAAb,IAAyBlP,KAAK,CAACD,MAAN,CAAamP,QAAb,CAAsBH,SAA/C,IACA/O,KAAK,CAACD,MAAN,CAAamP,QAAb,CAAsBH,SAAtB,CAAgC6B,IADjC,IAEA,EAAEvvB,UAAU,CAAC0e,MAAX,CAAkBmP,QAAlB,IAA8B7tB,UAAU,CAAC0e,MAAX,CAAkBmP,QAAlB,CAA2BH,SAAzD,IACA1tB,UAAU,CAAC0e,MAAX,CAAkBmP,QAAlB,CAA2BH,SAA3B,CAAqC6B,IADvC,CAFJ,EAGkD;AAChD;AACD,GAlBoC,CAmBrC;AACA;;;AACA,MAAM1Y,OAAO,GAAG,EAAhB;AACA,MAAMgX,QAAQ,GAAG7tB,UAAU,CAAC0e,MAAX,CAAkBmP,QAAnC;AACA,MAAMhS,aAAa,GACfsB,kBAAkB,CAACiB,0BAAnB,CAA8C2O,KAAK,CAACrP,IAApD,CADJ;;AAEA,MAAI7B,aAAa,CAAC1vB,MAAd,KAAyB0hC,QAAQ,CAAChS,aAAT,CAAuB1vB,MAAhD,IACA0vB,aAAa,CAAC,CAAD,CAAb,KAAqBgS,QAAQ,CAAChS,aAAT,CAAuB,CAAvB,CADzB,EACoD;AAClD,SAAK,IAAI9vB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8vB,aAAa,CAAC1vB,MAAlC,EAA0CJ,CAAC,EAA3C,EAA+C;AAC7C8qB,aAAO,CAACgX,QAAQ,CAAChS,aAAT,CAAuB9vB,CAAvB,CAAD,CAAP,GAAqC8vB,aAAa,CAAC9vB,CAAD,CAAlD;AACD;AACF,GALD,MAKO;AACL;AACD,GAhCoC,CAiCrC;;;AACAghC,OAAK,CAACW,SAAN,GAAkB,EAAlB;;AACA,uDAAgBvS,CAAC,CAACK,IAAF,CAAOqS,QAAQ,CAACH,SAAhB,CAAhB,wCAA4C;AAAA,QAAnCtW,GAAmC;AAC1C,QAAM0G,KAAK,GAAG+P,QAAQ,CAACH,SAAT,CAAmBtW,GAAnB,CAAd;AACA2V,SAAK,CAACW,SAAN,CAAgBtW,GAAhB,IAAuBA,GAAG,KAAK,MAAR,GAAiB0G,KAAjB,GAAyBA,KAAK,CAAClH,YAAN,CAAmBC,OAAnB,CAAhD;AACD;;AACDkW,OAAK,CAACM,YAAN;AACD,CAxCD;;AA0CA,IAAMwB,YAAY,GAAG,YAAM;AACzB,MAAMd,UAAU,GAAG9P,iBAAiB,CAACgO,OAAO,CAAC39B,GAAR,CAAY,sBAAZ,CAAD,CAApC;;AACA,MAAI29B,OAAO,CAAC39B,GAAR,CAAY,4BAAZ,CAAJ,EAA+C;AAC7Cy/B,cAAU,CAAC1hC,IAAX,CAAgB4/B,OAAO,CAAC39B,GAAR,CAAY,4BAAZ,CAAhB;AACD;;AACD,MAAMytB,OAAO,GAAGkQ,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,CAAhB;AACA,MAAM2hC,OAAO,GAAGlC,UAAU,CAAClhB,MAAX,CAAkB,UAACte,CAAD,EAAO;AACvC,QAAMowB,KAAK,GAAGL,MAAM,CAACqB,OAAP,CAAe;AAAChT,eAAS,EAAEpe;AAAZ,KAAf,CAAd;AACA,WAAO,CAACowB,KAAD,IAAU,CAACA,KAAK,CAACD,MAAN,CAAaG,QAA/B;AACD,GAHe,CAAhB;AAIA,MAAM7zB,GAAG,GAAG,EAAZ;;AACA,MAAIilC,OAAO,CAAC9jC,MAAR,KAAmB,CAAvB,EAA0B;AACxBnB,OAAG,CAACqB,IAAJ,CAAS;AAACi+B,SAAG,EAAE,SAAN;AAAiB3U,aAAO,EAAE;AAA1B,KAAT;AACAM,UAAM,CAACia,UAAP,CAAkBH,wBAAlB,EAA4C,CAA5C;AACD,GAHD,MAGO;AACL,QAAMna,KAAK,+BAA6Bqa,OAAO,CAAC3b,IAAR,CAAa,GAAb,CAAxC;AACAtpB,OAAG,CAACqB,IAAJ,CAAS;AAACi+B,SAAG,EAAE,OAAN;AAAe3U,aAAO,EAAEC;AAAxB,KAAT;AACD;;AACD,MAAI,CAACmG,OAAD,IAAYA,OAAO,CAAC5vB,MAAR,KAAmB,CAAnC,EAAsC;AACpCnB,OAAG,CAACqB,IAAJ,CAAS;AAACi+B,SAAG,EAAE,OAAN;AAAe3U,aAAO,EAAE;AAAxB,KAAT;AACD,GAFD,MAEO,IAAIoG,OAAO,CAAC5vB,MAAR,GAAiB,CAArB,EAAwB;AAC7BnB,OAAG,CAACqB,IAAJ,CAAS;AAACi+B,SAAG,EAAE,OAAN;AAAe3U,aAAO,EAAE;AAAxB,KAAT;AACD,GAFM,MAEA,IAAIoY,UAAU,CAACrb,OAAX,CAAmBqJ,OAAnB,KAA+B,CAAnC,EAAsC;AAC3C/wB,OAAG,CAACqB,IAAJ,CAAS;AAACi+B,SAAG,EAAE,SAAN;AACC3U,aAAO,eAAaoG,OAAb;AADR,KAAT;AAED;;AACD,MAAMoU,WAAW,GAAIrkC,KAAK,CAACuvB,IAAN,CAAWU,OAAO,IAAI,EAAtB,CAAD,CAA4BlP,MAA5B,CAChB,UAACte,CAAD;AAAA,WAAO,CAACipB,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqC0C,cAArC,CAAoDpsB,CAApD,CAAR;AAAA,GADgB,CAApB;;AAEA,MAAI4hC,WAAW,CAAChkC,MAAZ,GAAqB,CAAzB,EAA4B;AAC1BnB,OAAG,CAACqB,IAAJ,CAAS;AAACi+B,SAAG,EAAE,OAAN;AAAe3U,aAAO,EAAE,0CACAwa,WAAW,CAAC7b,IAAZ,CAAiB,GAAjB;AADxB,KAAT;AAED;;AACD,MAAI2X,OAAO,CAAC39B,GAAR,CAAY,YAAZ,MAA8B,UAAlC,EAA8C;AAC5C29B,WAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B3D,GAA5B;AACD;AACF,CAnCD,C,CAqCA;AACA;;;AACAirB,MAAM,CAAC+F,OAAP,CAAe;AAAA,SAAM/F,MAAM,CAACia,UAAP,CAAkB,YAAM;AAC3CE,WAAO,CAACC,OAAR,CAAgBxB,YAAhB;AACArX,UAAM,CAACK,OAAP,CAAegC,IAAf,CAAoB;AAAA,aAAMuW,OAAO,CAACC,OAAR,CAAgB,YAAM;AAC9C,YAAMtC,UAAU,GAAG9P,iBAAiB,CAACgO,OAAO,CAAC39B,GAAR,CAAY,sBAAZ,CAAD,CAApC;;AACA,YAAI29B,OAAO,CAAC39B,GAAR,CAAY,4BAAZ,CAAJ,EAA+C;AAC7Cy/B,oBAAU,CAAC1hC,IAAX,CAAgB4/B,OAAO,CAAC39B,GAAR,CAAY,4BAAZ,CAAhB;AACD;;AACD,8DAAsB,GAAGyc,MAAH,CAAUgjB,UAAV,CAAtB,2CAA6C;AAAA,cAApCI,SAAoC;;AAC3C,cAAI3W,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqC0C,cAArC,CAAoDwT,SAApD,CAAJ,EAAoE;AAClE,gBAAMjuB,KAAK,GAAGsX,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqCkW,SAArC,CAAd;AACA,gBAAMrS,OAAO,GAAGtE,MAAM,CAACM,QAAP,CAAgBC,eAAhB,CAAgC7X,KAAhC,CAAhB;;AACA,gBAAI4b,OAAO,KAAKqS,SAAhB,EAA2B;AACzBJ,wBAAU,CAAC1hC,IAAX,CAAgByvB,OAAhB;AACD;AACF;AACF;;AACD7F,cAAM,CAACqa,SAAP,CAAiB,cAAjB,EAAiCvC,UAAjC;AACD,OAfyB,CAAN;AAAA,KAApB,EAeItR,KAfJ,CAeU/lB,OAAO,CAACkf,KAAR,CAAcqG,IAAd,CAAmBvlB,OAAnB,CAfV;AAgBD,GAlBoB,EAkBlB,CAlBkB,CAAN;AAAA,CAAf,E;;;;;;;;;;;ACrXA,IAAIm2B,cAAJ;;AAAmBnsB,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACiiC,kBAAc,GAACjiC,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAAnB8V,MAAM,CAACgT,MAAP,CAAc;AAAC6c,cAAY,EAAC,YAAU;AAAC,WAAOA,YAAP;AAAoB;AAA7C,CAAd;AAA8D,IAAIxE,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAI6qB,KAAJ;AAAU/U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAAC2E,OAAK,EAAC,UAAS7qB,CAAT,EAAW;AAAC6qB,SAAK,GAAC7qB,CAAN;AAAQ;AAA3B,CAAxB,EAAqD,CAArD;AAAwD,IAAI+xB,gBAAJ;AAAqBjc,MAAM,CAACoQ,IAAP,CAAY,uBAAZ,EAAoC;AAAC6L,kBAAgB,EAAC,UAAS/xB,CAAT,EAAW;AAAC+xB,oBAAgB,GAAC/xB,CAAjB;AAAmB;AAAjD,CAApC,EAAuF,CAAvF;;AAI1P,IAAM4lC,SAAS,GAAG,UAACrjB,MAAD;AAAA,SAAYA,MAAM,CAACH,GAAP,CAAWyI,KAAK,CAAC2B,GAAjB,EAAsB9C,IAAtB,CAA2B,GAA3B,CAAZ;AAAA,CAAlB;;AAEA,IAAMmc,YAAY,GAAG,UAACphB,OAAD,EAAUlC,MAAV,EAAqB;AACxC,MAAMqO,IAAI,GAAG,EAAb;AACAA,MAAI,CAACgV,SAAS,CAACrjB,MAAD,CAAV,CAAJ,GAA0B,IAA1B;AACAqO,MAAI,CAACgV,SAAS,CAAC,CAACrjB,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,CAAD,CAAV,CAAJ,GAA0C,IAA1C;AACA,SAAOkC,OAAO,CAACxC,MAAR,CAAe,UAACM,MAAD;AAAA,WAAY,CAACqO,IAAI,CAACgV,SAAS,CAACrjB,MAAD,CAAV,CAAjB;AAAA,GAAf,CAAP;AACD,CALD;;IAOMojB,Y;;;AACJ,wBAAY5R,KAAZ,EAAmB;AAAA;;AACjB,sCAAM,SAAN;AACA,QAAMtP,OAAO,GAAGsN,gBAAgB,CAACjO,UAAjB,CAA4BiQ,KAAK,CAACD,MAAN,CAAazO,IAAzC,CAAhB;AACA,UAAKygB,QAAL,GAAgBrhB,OAAO,CAACA,OAAxB;AACA,UAAKid,QAAL,GAAgB3N,KAAK,CAACD,MAAN,CAAarP,OAAb,IAAwB,MAAKqhB,QAA7C;AACA,UAAKvJ,SAAL,GAAiB9X,OAAO,CAAC8X,SAAR,CAAkBwJ,MAAlB,CAAyB,UAACpiC,CAAD,EAAIC,CAAJ;AAAA,aAAUD,CAAC,CAACwc,MAAF,CAASvc,CAAT,CAAV;AAAA,KAAzB,EAAgD,EAAhD,CAAjB;AACA,UAAKyhB,IAAL,GAAY0O,KAAK,CAACD,MAAN,CAAazO,IAAzB;AACA,UAAK2gB,cAAL,GAAsBrwB,SAAtB;AAPiB;AAQlB;;;;SACDswB,mB;AAAA,iCAAoB1jB,MAApB,EAA4B;AAC1B,WAAKmf,QAAL,GAAgBmE,YAAY,CAAC,KAAKnE,QAAN,EAAgBnf,MAAhB,CAA5B;AACD;;;;;SACD2jB,kB;AAAA,gCAAmBnxB,KAAnB,EAA0B;AACxB,UAAI,KAAKixB,cAAL,KAAwBrwB,SAA5B,EAAuC;AACrC,aAAKqwB,cAAL,GAAsBjxB,KAAtB;AACA;AACD,OAHD,MAGO,IAAI8V,KAAK,CAAC0B,KAAN,CAAYxX,KAAZ,EAAmB,KAAKixB,cAAxB,CAAJ,EAA6C;AAClD,aAAKA,cAAL,GAAsBrwB,SAAtB;AACA;AACD;;AACD,UAAM4M,MAAM,GAAG,CAACxN,KAAD,EAAQ,KAAKixB,cAAb,CAAf;AACA,WAAKA,cAAL,GAAsBrwB,SAAtB;AACA,UAAMwwB,OAAO,GAAGN,YAAY,CAAC,KAAKnE,QAAN,EAAgBnf,MAAhB,CAA5B;;AACA,UAAI4jB,OAAO,CAAC5kC,MAAR,GAAiB,KAAKmgC,QAAL,CAAcngC,MAAnC,EAA2C;AACzC;AACD;;AACD,WAAKmgC,QAAL,CAAcjgC,IAAd,CAAmB8gB,MAAnB;AACD;;;;;SACDof,W;AAAA,yBAAYC,KAAZ,EAAmBC,QAAnB,EAA6B;AAC3B,UAAIA,QAAQ,CAACv7B,EAAT,KAAgBqP,SAApB,EAA+B;AAC7B,YAAM4M,MAAM,GAAG,CAAC,CAACsf,QAAQ,CAACv7B,EAAV,EAAcu7B,QAAQ,CAAC1a,EAAvB,CAAD,EAA6B,CAAC0a,QAAQ,CAAC7a,EAAV,EAAc6a,QAAQ,CAACza,EAAvB,CAA7B,CAAf;AACA,aAAK6e,mBAAL,CAAyB1jB,MAAzB;AACD,OAHD,MAGO,IAAIsf,QAAQ,CAAC/jB,EAAT,KAAgBnI,SAApB,EAA+B;AACpC,aAAKuwB,kBAAL,CAAwB,CAACrE,QAAQ,CAAC/jB,EAAV,EAAc+jB,QAAQ,CAAC9jB,EAAvB,CAAxB;AACD;AACF;;;;;SACD+jB,S;AAAA,yBAAY;AAAA;;AACVT,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B,CAAC;AAACF,SAAC,EAAE,KAAKwhB,IAAT;AAAe8e,YAAI,EAAE,MAArB;AAA6B1iB,cAAM,EAAE;AAArC,OAAD,CAA3B;AACA,UAAMmP,IAAI,GAAG,EAAb;AACA,WAAKkV,QAAL,CAAc1jB,GAAd,CAAkB,UAACG,MAAD,EAAY;AAC5BqO,YAAI,CAACgV,SAAS,CAACrjB,MAAD,CAAV,CAAJ,GAA0B,IAA1B;AACAqO,YAAI,CAACgV,SAAS,CAAC,CAACrjB,MAAM,CAAC,CAAD,CAAP,EAAYA,MAAM,CAAC,CAAD,CAAlB,CAAD,CAAV,CAAJ,GAA0C,IAA1C;AACD,OAHD;AAIA8e,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B,KAAK29B,QAAL,CAActf,GAAd,CAAkB,UAACG,MAAD;AAAA,eAAa;AACxDmd,aAAG,EAAE,YADmD;AAExDje,gBAAM,EAAEmP,IAAI,CAACgV,SAAS,CAACrjB,MAAD,CAAV,CAAJ,GAA0B,KAA1B,GAAkC,QAFc;AAGxDjc,YAAE,EAAEic,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAHoD;AAIxD4E,YAAE,EAAE5E,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAJoD;AAKxDyE,YAAE,EAAEzE,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CALoD;AAMxD6E,YAAE,EAAE7E,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV;AANoD,SAAb;AAAA,OAAlB,CAA3B;AAQA8e,aAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B,KAAKw4B,SAAL,CAAena,GAAf,CAAmB,UAACoc,QAAD,EAAc;AAC3D,YAAI4H,KAAK,GAAG5H,QAAQ,CAAC9B,MAAT,GAAkB,KAAlB,GAA0B,OAAtC;;AACA,YAAI,MAAI,CAACsJ,cAAL,IACAnb,KAAK,CAAC0B,KAAN,CAAYiS,QAAQ,CAACzpB,KAArB,EAA4B,MAAI,CAACixB,cAAjC,CADJ,EACsD;AACpDI,eAAK,GAAG,QAAR;AACD;;AACD,eAAO;AACL1G,aAAG,EAAE,YADA;AAEL5hB,YAAE,EAAE0gB,QAAQ,CAACzpB,KAAT,CAAe,CAAf,CAFC;AAGLgJ,YAAE,EAAEygB,QAAQ,CAACzpB,KAAT,CAAe,CAAf,CAHC;AAILovB,cAAI,EAAEiC,KAJD;AAKL3kB,gBAAM,EAAE2kB;AALH,SAAP;AAOD,OAb2B,CAA5B;AAcA,UAAMpkB,OAAO,GAAG+P,gBAAgB,CAACkO,UAAjB,CAA4B,KAAK5a,IAAjC,EAAuC,KAAKqc,QAA5C,CAAhB;AACA,UAAM5gC,CAAC,GAAGkhB,OAAO,CAACA,OAAR,CAAgBzgB,MAA1B;AACA,UAAMwpB,OAAO,kBAAgBjqB,CAAhB,gBAA2BA,CAAC,IAAI,CAAL,GAAS,EAAT,GAAc,GAAzC,OAAb;AACA,UAAM+sB,KAAK,GAAG;AAAC6R,WAAG,EAAE,SAAN;AAAiB3U,eAAO,EAAEA;AAA1B,OAAd;AACAsW,aAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4Bie,OAAO,CAAC5hB,GAAR,CAAY+f,MAAZ,CAAmB,CAAC0N,KAAD,CAAnB,CAA5B;AACD;;;;;;EAvEwBsT,a;;;;;;;;;;;ACb3B,IAAIa,sBAAJ;;AAA2BlsB,MAAM,CAACoQ,IAAP,CAAY,8CAAZ,EAA2D;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACgiC,0BAAsB,GAAChiC,CAAvB;AAAyB;AAA9C,CAA3D,EAA2G,CAA3G;;AAA8G,IAAIiiC,cAAJ;;AAAmBnsB,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACiiC,kBAAc,GAACjiC,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;;AAA8F,IAAI6oB,+BAAJ;;AAAoC/S,MAAM,CAACoQ,IAAP,CAAY,uDAAZ,EAAoE;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAAC6oB,mCAA+B,GAAC7oB,CAAhC;AAAkC;AAAvD,CAApE,EAA6H,CAA7H;AAA9R8V,MAAM,CAACgT,MAAP,CAAc;AAACud,YAAU,EAAC,YAAU;AAAC,WAAOA,UAAP;AAAkB;AAAzC,CAAd;AAA0D,IAAIlF,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAIyqB,MAAJ,EAAWI,KAAX;AAAiB/U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS,GAA7B;AAA8B6qB,OAAK,EAAC,UAAS7qB,CAAT,EAAW;AAAC6qB,SAAK,GAAC7qB,CAAN;AAAQ;AAAxD,CAAxB,EAAkF,CAAlF;AAAqF,IAAIuyB,kBAAJ;AAAuBzc,MAAM,CAACoQ,IAAP,CAAY,yBAAZ,EAAsC;AAACqM,oBAAkB,EAAC,UAASvyB,CAAT,EAAW;AAACuyB,sBAAkB,GAACvyB,CAAnB;AAAqB;AAArD,CAAtC,EAA6F,CAA7F;AAAgG,IAAI0zB,MAAJ;AAAW5d,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAACwN,QAAM,EAAC,UAAS1zB,CAAT,EAAW;AAAC0zB,UAAM,GAAC1zB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAI62B,SAAJ;AAAc/gB,MAAM,CAACoQ,IAAP,CAAY,gBAAZ,EAA6B;AAAC2Q,WAAS,EAAC,UAAS72B,CAAT,EAAW;AAAC62B,aAAS,GAAC72B,CAAV;AAAY;AAAnC,CAA7B,EAAkE,CAAlE;AAAqE,IAAIu5B,WAAJ;AAAgBzjB,MAAM,CAACoQ,IAAP,CAAY,kBAAZ,EAA+B;AAACqT,aAAW,EAAC,UAASv5B,CAAT,EAAW;AAACu5B,eAAW,GAACv5B,CAAZ;AAAc;AAAvC,CAA/B,EAAwE,CAAxE;AAOtiB,IAAImiC,KAAK,GAAGxsB,SAAZ;AAEA,IAAM2wB,KAAK,GAAG,IAAIpS,KAAK,CAACC,UAAV,CAAqB,OAArB,EAA8BoS,WAA5C,C,CAEA;AACA;;AACA,IAAMC,IAAI,GAAG,IAAE,CAAf;AACA,IAAMC,eAAe,GAAG;AACtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,IAAE,CAAH,EAAM,CAAN,CAAT,CAAD,EAAqB,CAAC,CAAC,IAAE,CAAH,EAAM,CAAN,CAAD,EAAW,CAAC,IAAE,CAAH,EAAM,CAAN,CAAX,CAArB,CADiB;AAEtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,IAAE,CAAN,CAAT,CAAD,EAAqB,CAAC,CAAC,CAAD,EAAI,IAAE,CAAN,CAAD,EAAW,CAAC,CAAD,EAAI,IAAE,CAAN,CAAX,CAArB,CAFiB;AAGtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,CAAC,IAAID,IAAL,IAAW,CAAZ,EAAe,CAAC,IAAIA,IAAL,IAAW,CAA1B,CAAD,EAA+B,CAACA,IAAD,EAAOA,IAAP,CAA/B,CAAnB,CAHiB;AAItB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,CAAC,IAAIA,IAAL,IAAW,CAAZ,EAAe,IAAIA,IAAnB,CAAD,EAA2B,CAACA,IAAD,EAAOA,IAAP,CAA3B,CAAnB,CAJiB;AAKtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,CAAC,IAAIA,IAAL,IAAW,CAAZ,EAAe,CAAf,CAAD,EAAoB,CAACA,IAAD,EAAOA,IAAP,CAApB,CAAnB,CALiB;AAMtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,IAAIA,IAAL,EAAW,CAAC,IAAIA,IAAL,IAAW,CAAtB,CAAD,EAA2B,CAACA,IAAD,EAAOA,IAAP,CAA3B,CAAnB,CANiB;AAOtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,IAAIA,IAAR,CAAT,CAAD,EAA0B,CAAC,CAAC,IAAIA,IAAL,EAAW,IAAIA,IAAf,CAAD,EAAuB,CAACA,IAAD,EAAOA,IAAP,CAAvB,CAA1B,CAPiB;AAQtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,CAAD,EAAI,IAAIA,IAAR,CAAD,EAAgB,CAACA,IAAD,EAAOA,IAAP,CAAhB,CAAnB,CARiB;AAStB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,IAAIA,IAAL,EAAW,CAAX,CAAD,EAAgB,CAACA,IAAD,EAAOA,IAAP,CAAhB,CAAnB,CATiB;AAUtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmB,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAnB,CAViB;AAWtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,IAAE,CAAN,CAAT,CAAD,EAAqB,CAAC,CAAC,CAAD,EAAI,IAAE,CAAN,CAAD,EAAW,CAAC,CAAD,EAAI,IAAE,CAAN,CAAX,CAArB,EAA2C,CAAC,CAAC,CAAD,EAAI,IAAE,CAAN,CAAD,EAAW,CAAC,CAAD,EAAI,IAAE,CAAN,CAAX,CAA3C,CAXiB;AAYtB,OAAK,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,IAAE,CAAH,EAAM,CAAN,CAAT,CAAD,EAAqB,CAAC,CAAC,IAAE,CAAH,EAAM,CAAN,CAAD,EAAW,CAAC,IAAE,CAAH,EAAM,CAAN,CAAX,CAArB,EAA2C,CAAC,CAAC,IAAE,CAAH,EAAM,CAAN,CAAD,EAAW,CAAC,IAAE,CAAH,EAAM,CAAN,CAAX,CAA3C;AAZiB,CAAxB;;AAeA,IAAME,yBAAyB,GAAG,UAAC5T,IAAD,EAAO6T,MAAP,EAAkB;AAClD7T,MAAI,CAAC6T,MAAL,GAAcA,MAAd;;AACA,MAAI7T,IAAI,CAAC9lB,IAAL,KAAc,UAAlB,EAA8B;AAAA;AAC5B,UAAMqc,IAAI,GAAGwB,KAAK,CAACtE,QAAN,CAAeogB,MAAM,CAAC,CAAD,CAArB,EAA0BA,MAAM,CAAC,CAAD,CAAhC,CAAb;AACA,UAAMxQ,OAAO,GAAGsQ,eAAe,CAAC3T,IAAI,CAACI,KAAN,CAA/B;AACAzI,YAAM,CAAC0L,OAAO,IAAIA,OAAO,CAAC50B,MAAR,KAAmBuxB,IAAI,CAACC,QAAL,CAAcxxB,MAA7C,CAAN;;AACA,WAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGg1B,OAAO,CAAC50B,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvC,YAAMkvB,MAAM,GAAG,CAAC8F,OAAO,CAACh1B,CAAD,CAAP,CAAW,CAAX,CAAD,EAAgB0pB,KAAK,CAAC7mB,GAAN,CAAUmyB,OAAO,CAACh1B,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyBg1B,OAAO,CAACh1B,CAAD,CAAP,CAAW,CAAX,CAAzB,CAAhB,CAAf;AACA,YAAMylC,YAAY,GAAGvW,MAAM,CAACjO,GAAP,CACjB,UAACze,CAAD;AAAA,iBAAO,CAACA,CAAC,CAAC,CAAD,CAAD,GAAK0lB,IAAI,CAAC,CAAD,CAAT,GAAesd,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAhB,EAA8BhjC,CAAC,CAAC,CAAD,CAAD,GAAK0lB,IAAI,CAAC,CAAD,CAAT,GAAesd,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAA7C,CAAP;AAAA,SADiB,CAArB;AAEAD,iCAAyB,CAAC5T,IAAI,CAACC,QAAL,CAAc5xB,CAAd,CAAD,EAAmBylC,YAAnB,CAAzB;AACD;AAT2B;AAU7B,GAVD,MAUO;AACLnc,UAAM,CAAC,CAACqI,IAAI,CAACC,QAAP,CAAN;AACD;;AACD,SAAOD,IAAP;AACD,CAhBD;;AAkBA,IAAM+T,gBAAgB,GAAG,UAAC/T,IAAD,EAAO1yB,GAAP,EAAe;AACtC,MAAI0yB,IAAI,CAAC9lB,IAAL,KAAc,WAAlB,EAA+B;AAC7B,QAAI,CAAC8lB,IAAI,CAACnJ,OAAV,EAAmB;AACjBvpB,SAAG,CAACqB,IAAJ,yBAA+BqxB,IAAI,CAACI,KAApC;AACA,aAAO,EAAP;AACD;;AACD,WAAOJ,IAAI,CAACnJ,OAAL,CAAavH,GAAb,CAAiB,UAACze,CAAD;AAAA,aAAQ;AAAC4lB,cAAM,EAAE5lB,CAAT;AAAYgU,YAAI,EAAEmb;AAAlB,OAAR;AAAA,KAAjB,CAAP;AACD;;AACD,MAAM1O,KAAK,GAAG0O,IAAI,CAACC,QAAL,CAAc3Q,GAAd,CAAkB,UAACze,CAAD;AAAA,WAAOkjC,gBAAgB,CAACljC,CAAD,EAAIvD,GAAJ,CAAvB;AAAA,GAAlB,CAAd;AACA,MAAMkzB,KAAK,GAAGR,IAAI,CAACC,QAAL,CAAc,CAAd,EAAiBG,KAA/B;;AACA,MAAIJ,IAAI,CAACI,KAAL,KAAe,GAAnB,EAAwB;AACtB9yB,OAAG,CAACqB,IAAJ,CAAS,2CAAT;AACD,GAFD,MAEO,IAAIqxB,IAAI,CAACI,KAAL,KAAe,GAAnB,EAAwB;AAC7BzI,UAAM,CAACrG,KAAK,CAAC7iB,MAAN,KAAiB,CAAlB,CAAN;;AACA,QAAI6iB,KAAK,CAAC,CAAD,CAAL,CAAS7iB,MAAT,KAAoB,CAAxB,EAA2B;AACzBnB,SAAG,CAACqB,IAAJ,CAAS,sDACO6xB,KADP,eAAT;AAED,KAHD,MAGO;AACL,aAAOlP,KAAK,CAAC,CAAD,CAAL,CAASrS,KAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqBoO,MAArB,CAA4BiE,KAAK,CAAC,CAAD,CAAjC,EAAsCjE,MAAtC,CAA6C,CAACiE,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAD,CAA7C,CAAP;AACD;AACF,GARM,MAQA,IAAI0O,IAAI,CAACI,KAAL,KAAe,GAAnB,EAAwB;AAC7BzI,UAAM,CAACrG,KAAK,CAAC7iB,MAAN,KAAiB,CAAlB,CAAN;;AACA,QAAI6iB,KAAK,CAAC,CAAD,CAAL,CAAS7iB,MAAT,KAAoB,CAAxB,EAA2B;AACzBnB,SAAG,CAACqB,IAAJ,CAAS,2DACO6xB,KADP,eAAT;AAED,KAHD,MAGO;AACL,aAAOlP,KAAK,CAAC,CAAD,CAAL,CAASrS,KAAT,CAAe,CAAf,EAAkB,CAAlB,EAAqBoO,MAArB,CAA4BiE,KAAK,CAAC,CAAD,CAAjC,EAAsCjE,MAAtC,CAA6C,CAACiE,KAAK,CAAC,CAAD,CAAL,CAAS,CAAT,CAAD,CAA7C,CAAP;AACD;AACF,GARM,MAQA,IAAI0O,IAAI,CAACI,KAAL,KAAe,GAAf,IACCJ,IAAI,CAACI,KAAL,KAAe,GAAf,IAAsB,MAAMpL,OAAN,CAAcwL,KAAd,KAAwB,CADnD,EACuD;AAC5D7I,UAAM,CAACrG,KAAK,CAAC7iB,MAAN,KAAiB,CAAlB,CAAN;AACA,WAAO6iB,KAAK,CAAC,CAAD,CAAL,CAASjE,MAAT,CAAgBiE,KAAK,CAAC,CAAD,CAArB,CAAP;AACD;;AACD,MAAMoF,MAAM,GAAG,EAAf;AACApF,OAAK,CAAChC,GAAN,CAAU,UAACze,CAAD;AAAA,WAAOA,CAAC,CAACye,GAAF,CAAM,UAACxe,CAAD;AAAA,aAAO4lB,MAAM,CAAC/nB,IAAP,CAAYmC,CAAZ,CAAP;AAAA,KAAN,CAAP;AAAA,GAAV;AACA,SAAO4lB,MAAP;AACD,CApCD;;AAsCA,IAAMsd,qBAAqB,GAAG,UAAChU,IAAD,EAAOtJ,MAAP,EAAkB;AAC9CA,QAAM,GAAGA,MAAM,IAAI,EAAnB;;AACA,MAAIsJ,IAAI,CAAC9lB,IAAL,KAAc,WAAd,IAA6B8lB,IAAI,CAACI,KAAL,KAAe,GAAhD,EAAqD;AACnD1J,UAAM,CAAC/nB,IAAP,CAAYqxB,IAAZ;AACD;;AACD,uDAAkBA,IAAI,CAACC,QAAL,IAAiB,EAAnC,wCAAuC;AAAA,QAA9BO,KAA8B;AACrCwT,yBAAqB,CAACxT,KAAD,EAAQ9J,MAAR,CAArB;AACD;;AACD,SAAOA,MAAP;AACD,CATD;;AAWA,IAAMud,kBAAkB,GAAG,UAAC3W,MAAD,EAASC,MAAT,EAAoB;AAC7C,MAAM2W,KAAK,GAAGnc,KAAK,CAACtE,QAAN,CAAe6J,MAAM,CAAC,CAAD,CAArB,EAA0BA,MAAM,CAAC,CAAD,CAAhC,CAAd;AACA,MAAM6W,KAAK,GAAGpc,KAAK,CAACtE,QAAN,CAAe8J,MAAM,CAAC,CAAD,CAArB,EAA0BA,MAAM,CAAC,CAAD,CAAhC,CAAd;AACA,MAAM6W,KAAK,GAAG,CAACD,KAAK,CAAC,CAAD,CAAL,GAASD,KAAK,CAAC,CAAD,CAAf,EAAoBC,KAAK,CAAC,CAAD,CAAL,GAASD,KAAK,CAAC,CAAD,CAAlC,CAAd;AACA,SAAO,UAACjyB,KAAD;AAAA,WAAW,CAACmyB,KAAK,CAAC,CAAD,CAAL,IAAUnyB,KAAK,CAAC,CAAD,CAAL,GAAWqb,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAArB,IAAqCC,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAAtC,EACC6W,KAAK,CAAC,CAAD,CAAL,IAAUnyB,KAAK,CAAC,CAAD,CAAL,GAAWqb,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CAArB,IAAqCC,MAAM,CAAC,CAAD,CAAN,CAAU,CAAV,CADtC,CAAX;AAAA,GAAP;AAED,CAND;;AAQA,IAAM8W,YAAY,GAAG,UAACplB,SAAD,EAAYohB,UAAZ,EAA2B;AAC9C,MAAMiE,SAAS,GAAG7N,WAAW,CAACwB,iBAA9B;AACA,MAAMsM,OAAO,GAAGtlB,SAAS,CAACK,GAAV,CAAcglB,SAAd,CAAhB;AACA,MAAMjR,OAAO,GAAG,EAAhB;AACAgN,YAAU,CAAC/gB,GAAX,CAAe,UAACze,CAAD,EAAO;AACpB,QAAM2jC,SAAS,GAAGP,kBAAkB,CAAC,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAD,EAAmBpjC,CAAC,CAACgU,IAAF,CAAOgvB,MAA1B,CAApC;AACA,QAAMtW,MAAM,GAAG+W,SAAS,CAACzjC,CAAC,CAAC4lB,MAAH,CAAT,CAAoBnH,GAApB,CAAwBklB,SAAxB,CAAf;AACAnR,WAAO,CAAC10B,IAAR,CAAa4uB,MAAb;AACD,GAJD;AAMA,MAAM+M,MAAM,GAAG,EAAf;AACA,MAAMmK,eAAe,GAAG,IAAxB;AACA,MAAMzmC,CAAC,GAAGhB,IAAI,CAACoM,GAAL,CAASm7B,OAAO,CAAC9lC,MAAjB,EAAyB40B,OAAO,CAAC50B,MAAjC,CAAV;;AACA,OAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,CAApB,EAAuBK,CAAC,EAAxB,EAA4B;AAC1Bi8B,UAAM,CAAC37B,IAAP,CAAY,EAAZ;;AACA,SAAK,IAAIS,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGpB,CAApB,EAAuBoB,CAAC,EAAxB,EAA4B;AAC1B,UAAIf,CAAC,GAAGkmC,OAAO,CAAC9lC,MAAZ,IAAsBW,CAAC,GAAGi0B,OAAO,CAAC50B,MAAtC,EAA8C;AAC5C67B,cAAM,CAACj8B,CAAD,CAAN,CAAUM,IAAV,CAAe+lC,YAAY,CAACH,OAAO,CAAClmC,CAAD,CAAR,EAAag1B,OAAO,CAACj0B,CAAD,CAApB,CAA3B;AACD,OAFD,MAEO;AACL,YAAIulC,gBAAgB,GAAG,CAAvB;;AACA,YAAIvlC,CAAC,IAAIi0B,OAAO,CAAC50B,MAAjB,EAAyB;AACvB;AACA;AACA;AACA;AACA,cAAMmmC,SAAS,GAAG,CAAC,IAAD,EAAO,IAAP,CAAlB;AACAD,0BAAgB,GAAG,CAACvlC,CAAD,GAAGpC,IAAI,CAACqM,GAAL,CAClB0e,KAAK,CAACyB,GAAN,CAAUob,SAAV,EAAqBL,OAAO,CAAClmC,CAAD,CAAP,CAAW,CAAX,CAArB,CADkB,EAElB0pB,KAAK,CAACyB,GAAN,CAAUob,SAAV,EAAqBL,OAAO,CAAClmC,CAAD,CAAP,CAAWkmC,OAAO,CAAClmC,CAAD,CAAP,CAAWI,MAAX,GAAoB,CAA/B,CAArB,CAFkB,CAAtB;AAGD;;AACD67B,cAAM,CAACj8B,CAAD,CAAN,CAAUM,IAAV,CAAe,CAAC8lC,eAAD,GAAmBE,gBAAlC;AACD;AACF;AACF;;AACD,SAAO,IAAI5Q,SAAJ,CAAcuG,MAAd,EAAsBhF,OAA7B;AACD,CAnCD;;AAqCA,IAAMuP,YAAY,GAAG,UAACpe,MAAD,EAASvF,KAAT,EAAmB;AACtC,MAAM4a,KAAK,GAAG/T,KAAK,CAACtE,QAAN,CAAegD,MAAM,CAACA,MAAM,CAAChoB,MAAP,GAAgB,CAAjB,CAArB,EAA0CgoB,MAAM,CAAC,CAAD,CAAhD,CAAd;AACA,MAAIsV,KAAK,GAAG,CAAC,CAAD,EAAI,CAAC,CAAL,CAAZ;;AACA,MAAI7a,KAAJ,EAAW;AACT,QAAMqM,MAAM,GAAGrM,KAAK,CAACuF,MAArB;AACAsV,SAAK,GAAGhU,KAAK,CAACtE,QAAN,CAAe8J,MAAM,CAACA,MAAM,CAAC9uB,MAAP,GAAgB,CAAjB,CAArB,EAA0C8uB,MAAM,CAAC,CAAD,CAAhD,CAAR;AACD;;AACD,MAAIxF,KAAK,CAACyB,GAAN,CAAUsS,KAAV,EAAiBC,KAAjB,IAA0B,CAA9B,EAAiC;AAC/BtV,UAAM,CAACgW,OAAP;AACD;;AACD,SAAOhW,MAAP;AACD,CAXD;;AAaA,IAAMie,YAAY,GAAG,UAACI,OAAD,EAAUC,OAAV,EAAsB;AACzCpd,QAAM,CAACmd,OAAO,CAACrmC,MAAR,KAAmBsmC,OAAO,CAACtmC,MAA5B,CAAN;AACA,MAAIumC,OAAO,GAAG,CAAd;AACA,MAAIC,OAAO,GAAG,CAAd;;AACAxX,GAAC,CAACsH,KAAF,CAAQ+P,OAAO,CAACrmC,MAAhB,EAAwB6gB,GAAxB,CAA4B,UAACjhB,CAAD,EAAO;AACjC2mC,WAAO,IAAIjd,KAAK,CAAC3B,SAAN,CAAgB0e,OAAO,CAACzmC,CAAD,CAAvB,EAA4B0mC,OAAO,CAAC1mC,CAAD,CAAnC,CAAX;AACA4mC,WAAO,IAAIld,KAAK,CAAC3B,SAAN,CAAgB0e,OAAO,CAACzmC,CAAD,CAAvB,EAA4B0mC,OAAO,CAACA,OAAO,CAACtmC,MAAR,GAAiBJ,CAAjB,GAAqB,CAAtB,CAAnC,CAAX;AACD,GAHD;;AAIA,SAAOrB,IAAI,CAACoM,GAAL,CAAS47B,OAAT,EAAkBC,OAAlB,CAAP;AACD,CATD;;IAWM1B,U;;;AACJ,sBAAYtS,KAAZ,EAAmB;AAAA;;AACjB,sCAAM,OAAN;AACA,UAAK2N,QAAL,GAAgB3N,KAAK,CAACD,MAAN,CAAakU,KAA7B;AACA,UAAKre,OAAL,GAAeoK,KAAK,CAACD,MAAN,CAAa9R,OAAb,CAAqBimB,GAArB,CAAyB7lB,GAAzB,CAA6BmX,WAAW,CAACe,gBAAzC,CAAf;AACA,UAAKtY,OAAL,GAAe+R,KAAK,CAACD,MAAN,CAAa9R,OAAb,CAAqB8D,SAApC;AAEA,QAAMgN,IAAI,GAAGP,kBAAkB,CAACgB,0BAAnB,CACTQ,KAAK,CAACD,MAAN,CAAamP,QAAb,CAAsBhS,aADb,CAAb;AAEA,UAAK6B,IAAL,GAAY4T,yBAAyB,CAAC5T,IAAD,EAAO,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAS,CAAC,CAAD,EAAI,CAAJ,CAAT,CAAP,CAArC;AAEA,UAAK0K,OAAL,GAAe;AAAC,cAAM,CAAC;AAAR,KAAf;AACA,UAAK2F,UAAL,GAAkB,EAAlB;AACA,UAAKpZ,KAAL,GAAa,EAAb;AACA+c,yBAAqB,CAAC,MAAKhU,IAAN,CAArB,CAAiC1Q,GAAjC,CAAqC,UAACze,CAAD,EAAIxC,CAAJ,EAAU;AAC7C,YAAKq8B,OAAL,CAAa0K,IAAI,CAACC,SAAL,CAAexkC,CAAC,CAAC0hB,IAAjB,CAAb,IAAuClkB,CAAvC;;AACA,YAAKgiC,UAAL,CAAgB1hC,IAAhB,CAAqBkC,CAAC,CAACuvB,KAAvB;;AACA,YAAKnJ,KAAL,CAAWtoB,IAAX,CAAgBkC,CAAC,CAAC0hB,IAAlB;AACD,KAJD;AAMA8c,SAAK,gCAAL;AAnBiB;AAoBlB;;;;SACDR,W;AAAA,yBAAYC,KAAZ,EAAmBC,QAAnB,EAA6B;AAC3B,UAAMuG,OAAO,GAAG,KAAK1G,QAAL,CAAczf,MAAd,CACZ,UAACte,CAAD;AAAA,eAAOA,CAAC,CAAC8d,MAAF,KAAaogB,QAAQ,CAACwG,YAA7B;AAAA,OADY,EAC+B,CAD/B,CAAhB;AAEA,UAAMC,SAAS,GAAG,KAAK9K,OAAL,CAAa0K,IAAI,CAACC,SAAL,CAAeC,OAAO,CAACpkB,KAAR,IAAiB,IAAhC,CAAb,CAAlB;AACA,UAAMukB,SAAS,GAAI,CAACD,SAAS,GAAG,CAAb,KAAmB,KAAKnF,UAAL,CAAgB5hC,MAAhB,GAAyB,CAA5C,CAAD,GAAmD,CAArE;AACA6mC,aAAO,CAACpkB,KAAR,GAAgB,KAAK+F,KAAL,CAAWwe,SAAX,CAAhB;AACD;;;;;SACDC,oB;AAAA,oCAAuB;AAAA;;AACrB,UAAI,KAAK9G,QAAT,EAAmB;AACjB;AACD;;AACD,UAAM+G,KAAK,GAAG3B,qBAAqB,CAAC,KAAKhU,IAAN,CAAnC;AACA2V,WAAK,CAACrmB,GAAN,CAAU,UAACzK,IAAD,EAAU;AAClB,YAAMoc,KAAK,GAAGL,MAAM,CAACqB,OAAP,CAAe;AAAChT,mBAAS,EAAEpK,IAAI,CAACub;AAAjB,SAAf,CAAd;AACAvb,YAAI,CAACgS,OAAL,GAAeoK,KAAK,CAACD,MAAN,CAAakU,KAAb,CAAmB5lB,GAAnB,CAAuB,UAACze,CAAD;AAAA,iBAAOA,CAAC,CAAC4lB,MAAT;AAAA,SAAvB,CAAf;AACD,OAHD;AAIA,UAAMnpB,GAAG,GAAG,EAAZ;AACA,UAAM4nC,KAAK,GAAGnB,gBAAgB,CAAC,KAAK/T,IAAN,EAAY1yB,GAAZ,CAA9B;AACA,UAAMu8B,QAAQ,GAAGwK,YAAY,CAAC,KAAKxd,OAAN,EAAeqe,KAAf,CAA7B;;AACA,UAAMxK,OAAO,GAAGjN,CAAC,CAACsH,KAAF,CAAQ,KAAKlO,OAAL,CAAapoB,MAArB,EAA6BiS,IAA7B,CACZ,UAAClT,CAAD,EAAIC,CAAJ;AAAA,eAAUo8B,QAAQ,CAACr8B,CAAD,CAAR,GAAcq8B,QAAQ,CAACp8B,CAAD,CAAhC;AAAA,OADY,CAAhB;;AAEA,WAAKmhC,QAAL,GAAgBlE,OAAO,CAACpb,GAAR,CAAY,UAACze,CAAD,EAAO;AACjC,YAAMqgB,KAAK,GAAGgkB,KAAK,CAACrL,QAAQ,CAACh5B,CAAD,CAAT,CAAnB;AACA,eAAO;AACLqgB,eAAK,EAAEA,KAAK,GAAGA,KAAK,CAACrM,IAAN,CAAW0N,IAAd,GAAqB1P,SAD5B;AAEL4T,gBAAM,EAAEoe,YAAY,CAAC,MAAI,CAAChe,OAAL,CAAahmB,CAAb,CAAD,EAAkBqgB,KAAlB,CAFf;AAGLvC,gBAAM,EAAE9d;AAHH,SAAP;AAKD,OAPe,CAAhB;AAQA,WAAK8+B,YAAL,CAAkB;AAAK;AAAvB;AACD;;;;;SACDiG,e;AAAA,6BAAgBjnB,MAAhB,EAAwB;AACtB,UAAM2mB,OAAO,GAAG,KAAK1G,QAAL,CAAczf,MAAd,CAAqB,UAACte,CAAD;AAAA,eAAOA,CAAC,CAAC8d,MAAF,KAAaA,MAApB;AAAA,OAArB,EAAiD,CAAjD,CAAhB;AACA2mB,aAAO,CAAC7e,MAAR,CAAegW,OAAf;AACA,WAAKkD,YAAL;AACD;;;;;SACDkG,M;AAAA,oBAAOL,SAAP,EAAkBC,SAAlB,EAA6B;AAC3B,UAAMK,QAAQ,GAAG,KAAKlH,QAAL,CAAc9nB,MAAd,CAAqB0uB,SAArB,EAAgC,CAAhC,CAAjB;AACA7d,YAAM,CAACme,QAAQ,CAACrnC,MAAT,KAAoB,CAArB,CAAN;AACA,WAAKmgC,QAAL,CAAc9nB,MAAd,CAAqB2uB,SAArB,EAAgC,CAAhC,EAAmCK,QAAQ,CAAC,CAAD,CAA3C;AACA,WAAKnG,YAAL;AACD;;;;;SACDX,S;AAAA,yBAAY;AAAA;;AACVT,aAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B,KAAK29B,QAAL,GAAgB,EAAhB,GAAqB,CAAC;AAChDhC,WAAG,EAAE,OAD2C;AAEhD3U,eAAO,EAAE;AAFuC,OAAD,CAAjD;AAIAsW,aAAO,CAACt9B,GAAR,CAAY,qBAAZ,EAAmC,KAAKq9B,MAAxC;AACAC,aAAO,CAACt9B,GAAR,CAAY,yBAAZ,EAAuC,KAAKo/B,UAA5C;AACA9B,aAAO,CAACt9B,GAAR,CAAY,sBAAZ,EAAoC,KAAKy5B,OAAzC;AACA6D,aAAO,CAACt9B,GAAR,CAAY,oBAAZ,EAAkC,KAAK29B,QAAvC;AACA4E,WAAK,CAACpQ,MAAN,CAAa,EAAb;AACA,OAAC,KAAKwL,QAAL,IAAiB,EAAlB,EAAsBtf,GAAtB,CAA0B,UAACze,CAAD,EAAIxC,CAAJ,EAAU;AAClC,YAAMqrB,GAAG,GAAG0b,IAAI,CAACC,SAAL,CAAexkC,CAAC,CAACqgB,KAAF,IAAW,IAA1B,CAAZ;AACA,YAAMoiB,KAAK,GAAG,MAAI,CAAChF,MAAL,CAAY,MAAI,CAAC5D,OAAL,CAAahR,GAAb,CAAZ,KAAkC,WAAhD;AACA,YAAMuH,KAAK,GAAG;AACZpG,eAAK,EAAE,CAAC;AACNrnB,cAAE,EAAE3C,CAAC,CAAC4lB,MAAF,CAAS,CAAT,EAAY,CAAZ,CADE;AAENpC,cAAE,EAAExjB,CAAC,CAAC4lB,MAAF,CAAS,CAAT,EAAY,CAAZ,CAFE;AAGNvC,cAAE,EAAErjB,CAAC,CAAC4lB,MAAF,CAAS5lB,CAAC,CAAC4lB,MAAF,CAAShoB,MAAT,GAAkB,CAA3B,EAA8B,CAA9B,CAHE;AAIN6lB,cAAE,EAAEzjB,CAAC,CAAC4lB,MAAF,CAAS5lB,CAAC,CAAC4lB,MAAF,CAAShoB,MAAT,GAAkB,CAA3B,EAA8B,CAA9B;AAJE,WAAD,CADK;AAOZwoB,eAAK,EAAE,CAAC;AAAClmB,aAAC,EAAE,MAAI,CAACme,OAAL,CAAare,CAAC,CAAC8d,MAAf;AAAJ,WAAD;AAPK,SAAd;;AASA,YAAMonB,OAAO,GAAG,UAACzC,KAAD,EAAQx6B,KAAR,EAAkB;AAChC,cAAM1L,CAAC,GAAGiuB,QAAQ,CAACiY,KAAK,CAAChY,MAAN,CAAa,CAAb,CAAD,EAAkB,EAAlB,CAAlB;AACA,4BAAeluB,CAAC,IAAI,EAApB,YAA4BA,CAAC,IAAI,CAAN,GAAW,IAAtC,YAA+CA,CAAC,GAAG,IAAnD,WAA4D0L,KAA5D;AACD,SAHD;;AAIA06B,aAAK,CAACwC,MAAN,CAAa;AACXC,oBAAU,EAAEF,OAAO,CAACzC,KAAD,EAAQ,GAAR,CADR;AAEXA,eAAK,EAAEA,KAFI;AAGXrS,eAAK,EAAEA,KAHI;AAIXze,eAAK,EAAEnU,CAJI;AAKXknC,sBAAY,EAAE1kC,CAAC,CAAC8d;AALL,SAAb;AAOD,OAvBD;AAwBD;;;;;;EAlGsB0f,a;;AAqGzBiD,QAAQ,CAAC4E,WAAT,CAAqB1E,MAArB,CAA4B;AAC1B,wCAAsC,UAAS1C,KAAT,EAAgB;AACpDO,SAAK,IAAIA,KAAK,CAACuG,eAAN,CAAsB,KAAKL,YAA3B,CAAT;AACD;AAHyB,CAA5B;AAMAjE,QAAQ,CAAC4E,WAAT,CAAqBpE,OAArB,CAA6B;AAC3B7iB,WAAS,EAAE,YAAM;AACf,QAAMqf,MAAM,GAAGC,OAAO,CAAC39B,GAAR,CAAY,qBAAZ,CAAf;AACA,QAAM85B,OAAO,GAAG6D,OAAO,CAAC39B,GAAR,CAAY,sBAAZ,CAAhB;AACA,QAAMskC,KAAK,GAAG3G,OAAO,CAAC39B,GAAR,CAAY,oBAAZ,CAAd;AACA,QAAMqe,SAAS,GAAGsf,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAlB;AACA,QAAM8lB,MAAM,GAAG;AAACO,WAAK,EAAE;AAAR,KAAf;;AACA,QAAI,CAACqX,MAAD,IAAW,CAAC5D,OAAZ,IAAuB,CAACwK,KAAxB,IAAiC,CAACjmB,SAAtC,EAAiD;AAC/C,aAAOyH,MAAP;AACD;;AACD,0DAAoBwe,KAApB,2CAA2B;AAAA,UAAlBI,OAAkB;AACzB,UAAM9yB,KAAK,GAAGkoB,OAAO,CAAC0K,IAAI,CAACC,SAAL,CAAeC,OAAO,CAACpkB,KAAR,IAAiB,IAAhC,CAAD,CAArB;AACA,UAAMoiB,KAAK,GAAGhF,MAAM,CAAC9rB,KAAK,GAAG8rB,MAAM,CAAC7/B,MAAhB,CAApB;AACAioB,YAAM,CAACO,KAAP,CAAatoB,IAAb,CAAkB;AAChBi+B,WAAG,EAAE,YADW;AAEhB77B,SAAC,EAAEke,SAAS,CAAC+R,MAAV,CAAiB9R,OAAjB,CAAyB8D,SAAzB,CAAmCsiB,OAAO,CAAC3mB,MAA3C,CAFa;AAGhB0iB,YAAI,EAAE7uB,KAAK,GAAG,CAAR,GAAY,WAAZ,GAA0B8wB,KAHhB;AAIhB3kB,cAAM,EAAEnM,KAAK,GAAG,CAAR,GAAY,WAAZ,GAA0B,OAJlB;AAKhB+yB,oBAAY,EAAED,OAAO,CAAC3mB;AALN,OAAlB;AAOD;;AACD,WAAO+H,MAAP;AACD,GAtB0B;AAuB3B2Z,YAAU,EAAE,YAAM;AAChB,QAAM/B,MAAM,GAAGC,OAAO,CAAC39B,GAAR,CAAY,qBAAZ,CAAf;AACA,QAAMy/B,UAAU,GAAG9B,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,CAAnB;AACA,QAAM8lB,MAAM,GAAG,EAAf;;AACA,QAAI,CAAC4X,MAAD,IAAW,CAAC+B,UAAhB,EAA4B;AAC1B,aAAO3Z,MAAP;AACD;;AACD,SAAK,IAAIlU,KAAK,GAAG,CAAjB,EAAoBA,KAAK,GAAG6tB,UAAU,CAAC5hC,MAAvC,EAA+C+T,KAAK,EAApD,EAAwD;AACtD,UAAM8wB,KAAK,GAAGhF,MAAM,CAAC9rB,KAAK,GAAG8rB,MAAM,CAAC7/B,MAAhB,CAApB;AACA,UAAMwyB,KAAK,GAAGL,MAAM,CAACqB,OAAP,CAAe;AAAChT,iBAAS,EAAEohB,UAAU,CAAC7tB,KAAD;AAAtB,OAAf,CAAd;;AACA,UAAI,CAACye,KAAL,EAAY;AACV;AACD;;AACD,UAAMwP,SAAS,GAAG,EAAlB;;AACA,4DAAmBxP,KAAK,CAACD,MAAN,CAAa9R,OAAb,CAAqB8D,SAAxC,2CAAmD;AAAA,YAA1CrE,MAA0C;AACjD8hB,iBAAS,CAAC9hC,IAAV,CAAe;AAACoC,WAAC,EAAE4d,MAAJ;AAAY0iB,cAAI,EAAEiC,KAAlB;AAAyB3kB,gBAAM,EAAE;AAAjC,SAAf;AACD;;AACD+H,YAAM,CAAC/nB,IAAP,CAAY;AAACsyB,aAAK,EAAE;AAAChK,eAAK,EAAEwZ;AAAR,SAAR;AAA4B0F,WAAG,EAAK,MAAI3zB,KAAJ,GAAY,CAAjB;AAA/B,OAAZ;AACD;;AACD,WAAOkU,MAAP;AACD,GA3C0B;AA4C3B0f,OAAK,EAAE,YAAM;AACX,QAAMlB,KAAK,GAAG3G,OAAO,CAAC39B,GAAR,CAAY,oBAAZ,CAAd;AACA,WAAO4iC,KAAK,CAACphB,IAAN,CAAW,EAAX,EAAe;AAACikB,WAAK,EAAE,CAACnB,KAAK,IAAI,EAAV,EAAczmC;AAAtB,KAAf,CAAP;AACD,GA/C0B;AAgD3BqL,SAAO,EAAE,YAAM;AACb,WAAO;AACL+7B,YAAM,EAAE,UAAC/G,KAAD,EAAW;AACjB;AACA;AACAvW,cAAM,CAAC+d,aAAP,CAAqB,CAArB;;AACAjH,aAAK,IAAIA,KAAK,CAACwG,MAAN,CAAa/G,KAAK,CAACyH,QAAnB,EAA6BzH,KAAK,CAAC0H,QAAnC,CAAT;AACD;AANI,KAAP;AAQD;AAzD0B,CAA7B;AA4DAje,MAAM,CAAC+F,OAAP,CAAe,YAAM;AACnBoU,SAAO,CAACC,OAAR,CAAgB,YAAM;AACpB,QAAMtC,UAAU,GAAG9B,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,KAA0C,EAA7D;AACA2nB,UAAM,CAACqa,SAAP,CAAiB,cAAjB,EAAiCvC,UAAjC;AACD,GAHD;AAIAqC,SAAO,CAACC,OAAR,CAAgB,YAAM;AACpB,QAAMtC,UAAU,GAAG9B,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,KAA0C,EAA7D;AACA,QAAM6lC,KAAK,GAAGpG,UAAU,CAAClhB,MAAX,CAAkB,UAACte,CAAD;AAAA,aAAO+vB,MAAM,CAACqB,OAAP,CAAe;AAAChT,iBAAS,EAAEpe;AAAZ,OAAf,CAAP;AAAA,KAAlB,CAAd;;AACA,QAAI4lC,KAAK,CAAChoC,MAAN,KAAiB4hC,UAAU,CAAC5hC,MAA5B,IACA8/B,OAAO,CAAC39B,GAAR,CAAY,YAAZ,MAA8B,OADlC,EAC2C;AACzCy+B,WAAK,CAACqG,oBAAN;AACD;AACF,GAPD;AAQD,CAbD,E;;;;;;;;;;;AC5UA,IAAIxG,sBAAJ;;AAA2BlsB,MAAM,CAACoQ,IAAP,CAAY,8CAAZ,EAA2D;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACgiC,0BAAsB,GAAChiC,CAAvB;AAAyB;AAA9C,CAA3D,EAA2G,CAA3G;;AAA8G,IAAIiiC,cAAJ;;AAAmBnsB,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACiiC,kBAAc,GAACjiC,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAA5J8V,MAAM,CAACgT,MAAP,CAAc;AAAC0gB,WAAS,EAAC,YAAU;AAAC,WAAOA,SAAP;AAAiB;AAAvC,CAAd;AAAwD,IAAIC,QAAJ;AAAa3zB,MAAM,CAACoQ,IAAP,CAAY,2CAAZ,EAAwD;AAAC,aAAQ,UAASlmB,CAAT,EAAW;AAACypC,YAAQ,GAACzpC,CAAT;AAAW;AAAhC,CAAxD,EAA0F,CAA1F;AAA6F,IAAImhC,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAIyqB,MAAJ,EAAWI,KAAX;AAAiB/U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS,GAA7B;AAA8B6qB,OAAK,EAAC,UAAS7qB,CAAT,EAAW;AAAC6qB,SAAK,GAAC7qB,CAAN;AAAQ;AAAxD,CAAxB,EAAkF,CAAlF;AAAqF,IAAI0zB,MAAJ;AAAW5d,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAACwN,QAAM,EAAC,UAAS1zB,CAAT,EAAW;AAAC0zB,UAAM,GAAC1zB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAIw5B,GAAJ;AAAQ1jB,MAAM,CAACoQ,IAAP,CAAY,UAAZ,EAAuB;AAACsT,KAAG,EAAC,UAASx5B,CAAT,EAAW;AAACw5B,OAAG,GAACx5B,CAAJ;AAAM;AAAvB,CAAvB,EAAgD,CAAhD;AAO5b,IAAImiC,KAAK,GAAGxsB,SAAZ;;IAEM6zB,S;;;AACJ,qBAAYzV,KAAZ,EAAmB;AAAA;;AACjB,sCAAM,MAAN;AACA,UAAK2N,QAAL,GAAgB3N,KAAK,CAACD,MAAN,CAAazO,IAA7B;AACA,UAAKtD,SAAL,GAAiBgS,KAAK,CAAChS,SAAvB;AACA,UAAK2nB,WAAL,GAAmB/zB,SAAnB;AACA,UAAKqV,KAAL,GAAa,eAAb;AACAmX,SAAK,gCAAL;AANiB;AAOlB;;;;SACDwH,S;AAAA,uBAAU3e,KAAV,EAAiB3F,IAAjB,EAAuB;AACrBgc,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B4R,SAA3B;AACA,WAAK+rB,QAAL,GAAgBrc,IAAhB;AACA,WAAK2F,KAAL,GAAaA,KAAb;AACA,WAAKyX,YAAL;AACD;;;;;SACDX,S;AAAA,yBAAY;AACV,UAAMj+B,CAAC,GAAG,KAAK69B,QAAf;AACAL,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B,CAAC;AAACF,SAAC,EAAEA,CAAJ;AAAOsgC,YAAI,EAAE,MAAb;AAAqB1iB,cAAM,EAAE;AAA7B,OAAD,CAA3B;AACA4f,aAAO,CAACt9B,GAAR,CACE,cADF,EAEEF,CAAC,GAAG,CAAC;AAAC67B,WAAG,EAAE,SAAN;AAAiB3U,eAAO,EAAE;AAA1B,OAAD,CAAH,GACG,CAAC;AAAC2U,WAAG,EAAE,OAAN;AAAe3U,eAAO,EAAE,KAAKC;AAA7B,OAAD,CAHN;AAIAqW,aAAO,CAACt9B,GAAR,CAAY,yBAAZ,EAAuC,KAAK2lC,WAA5C;AACD;;;;;;EAvBqBvI,a,GA0BxB;;;AACAiD,QAAQ,CAACwF,UAAT,CAAoBtF,MAApB,CAA2B;AACzB,iBAAe,UAAS1C,KAAT,EAAgB;AAC7B,QAAMY,IAAI,GAAG7T,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgBmS,IAAhB,EAAb;AACA,QAAMtP,KAAK,GAAGsP,IAAI,CAACjhC,MAAL,KAAgB,CAAhB,IAAqBihC,IAAI,KAAK,GAA9B,GAAoCA,IAApC,GAA2C7sB,SAAzD;;AACA,QAAIud,KAAK,KAAKiP,KAAK,CAACuH,WAApB,EAAiC;AAC/B/a,OAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgBmS,IAAhB,CAAqBtP,KAAK,IAAI,GAA9B;AACD,KAFD,MAEO;AACLiP,WAAK,CAACuH,WAAN,GAAoBxW,KAApB;AACAiP,WAAK,CAACM,YAAN;AACD;AACF,GAVwB;AAWzB,mBAAiB,UAASb,KAAT,EAAgB;AAC/B,QAAMnP,KAAK,GAAG,KAAKA,KAAnB;AACA,QAAM1Q,SAAS,GAAGogB,KAAK,CAACpgB,SAAxB;AACA0I,UAAM,CAAC1I,SAAS,CAACxgB,MAAV,KAAqB,CAAtB,CAAN;AACA8/B,WAAO,CAACt9B,GAAR,CAAY,YAAZ,eAAqC0uB,KAArC;AACA4O,WAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B,CAA3B;AACA0lC,YAAQ,CAACI,IAAT,CAAc,KAAKC,IAAnB,EAAyB,UAAC9e,KAAD,EAAQ8e,IAAR,EAAiB;AACxC3H,WAAK,CAACuH,WAAN,GAAoB/zB,SAApB;;AACA,UAAIqV,KAAJ,EAAW;AACTmX,aAAK,CAACwH,SAAN,oBAAiClX,KAAjC,UAA2CzH,KAA3C;AACA;AACD;;AACDqW,aAAO,CAACt9B,GAAR,CAAY,YAAZ,kBAAwCge,SAAxC,cAA0D0Q,KAA1D;AACA4O,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B,GAA3B;AACA,UAAMuR,KAAK,GAAGw0B,IAAI,CAACC,gBAAL,CAAsBhoB,SAAtB,CAAd;AACA,UAAMgS,KAAK,GAAG+V,IAAI,CAAC/a,MAAL,CAAYrrB,GAAZ,CAAgB4R,KAAhB,CAAd;;AACA,UAAIye,KAAK,CAACiW,OAAN,KAAkBjoB,SAAS,CAAC4O,WAAV,CAAsB,CAAtB,CAAtB,EAAgD;AAC9CwR,aAAK,CAACwH,SAAN,CAAmB5nB,SAAnB,2BAAkD0Q,KAAlD;AACA;AACD,OAbuC,CAcxC;;;AACA,UAAMpN,IAAI,GAAGmU,GAAG,CAACuH,qBAAJ,CAA0BhN,KAAK,CAAC1O,IAAN,CAAW2b,QAArC,CAAb;AACAmB,WAAK,CAACwH,SAAN,CAAgBh0B,SAAhB,EAA2B0P,IAA3B;AACD,KAjBD;AAkBD;AAnCwB,CAA3B;AAsCA+e,QAAQ,CAACwF,UAAT,CAAoBhF,OAApB,CAA4B;AAC1B8E,aAAW,EAAE;AAAA,WAAMrI,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,KAA0C,GAAhD;AAAA,GADa;AAE1BkJ,SAAO,EAAE;AAAA,WAAM,CAAC;AAACk9B,UAAI,EAAE,qBAAP;AAA8BrX,WAAK,EAAE;AAArC,KAAD,EACC;AAACqX,UAAI,EAAE,mBAAP;AAA4BrX,WAAK,EAAE;AAAnC,KADD,CAAN;AAAA;AAFiB,CAA5B;AAMApH,MAAM,CAAC+F,OAAP,CAAe,YAAM;AACnBoU,SAAO,CAACC,OAAR,CAAgB,YAAM;AACpB,QAAMiE,WAAW,GAAGrI,OAAO,CAAC39B,GAAR,CAAY,yBAAZ,CAApB;;AACA,QAAIgmC,WAAJ,EAAiB;AACfre,YAAM,CAACqa,SAAP,CAAiB,cAAjB,EAAiC,CAACgE,WAAD,CAAjC;AACA,UAAM3V,KAAK,GAAGL,MAAM,CAACqB,OAAP,CAAe;AAAChT,iBAAS,EAAE2nB;AAAZ,OAAf,CAAd;;AACA,UAAI,CAAC3V,KAAL,EAAY;AACVoO,aAAK,CAACwH,SAAN,+BAA4CD,WAA5C;AACD,OAFD,MAEO,IAAI,CAAC3V,KAAK,CAACD,MAAN,CAAazO,IAAlB,EAAwB;AAC7B8c,aAAK,CAACwH,SAAN,4BAAyCD,WAAzC;AACD,OAFM,MAEA;AACLvH,aAAK,CAACwH,SAAN,CAAgBh0B,SAAhB,EAA2Boe,KAAK,CAACD,MAAN,CAAazO,IAAxC;AACD;AACF;AACF,GAbD;AAcD,CAfD,E;;;;;;;;;;;AChFA,IAAI4c,cAAJ;;AAAmBnsB,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACiiC,kBAAc,GAACjiC,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAAnB8V,MAAM,CAACgT,MAAP,CAAc;AAACmhB,cAAY,EAAC,YAAU;AAAC,WAAOA,YAAP;AAAoB;AAA7C,CAAd;AAA8D,IAAI9I,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAIyqB,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAA0D,IAAI4sB,MAAJ;AAAW9W,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAAC0G,QAAM,EAAC,UAAS5sB,CAAT,EAAW;AAAC4sB,UAAM,GAAC5sB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAI+lB,UAAJ;AAAejQ,MAAM,CAACoQ,IAAP,CAAY,6BAAZ,EAA0C;AAACH,YAAU,EAAC,UAAS/lB,CAAT,EAAW;AAAC+lB,cAAU,GAAC/lB,CAAX;AAAa;AAArC,CAA1C,EAAiF,CAAjF;AAAoF,IAAI+xB,gBAAJ;AAAqBjc,MAAM,CAACoQ,IAAP,CAAY,uBAAZ,EAAoC;AAAC6L,kBAAgB,EAAC,UAAS/xB,CAAT,EAAW;AAAC+xB,oBAAgB,GAAC/xB,CAAjB;AAAmB;AAAjD,CAApC,EAAuF,CAAvF;;AAMva,IAAMkqC,aAAa,GAAG,UAACC,MAAD,EAASC,QAAT,EAAsB;AAC1C,MAAMC,WAAW,iBAAeF,MAAf,gBAA+BA,MAAM,KAAK,CAAX,GAAe,EAAf,GAAoB,GAAnD,CAAjB;;AACA,MAAI,CAACC,QAAL,EAAe;AACb,WAAO;AAAC1K,SAAG,EAAE,OAAN;AAAe3U,aAAO,EAAKsf,WAAL;AAAtB,KAAP;AACD,GAFD,MAEO,IAAIF,MAAM,KAAKC,QAAf,EAAyB;AAC9B,WAAO;AAAC1K,SAAG,EAAE,OAAN;AAAe3U,aAAO,EAAKsf,WAAL,mBAA8BD,QAA9B;AAAtB,KAAP;AACD;;AACD,SAAO;AAAC1K,OAAG,EAAE,SAAN;AAAiB3U,WAAO,EAAKsf,WAAL;AAAxB,GAAP;AACD,CARD;;AAUA,IAAMC,cAAc,GAAG,UAACtoB,OAAD,EAAU4Y,OAAV,EAAmBwG,MAAnB,EAA8B;AACnD,MAAM5X,MAAM,GAAG,EAAf;;AACA,OAAK,IAAIroB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6gB,OAAO,CAACzgB,MAA5B,EAAoCJ,CAAC,EAArC,EAAyC;AACvC,QAAMsgB,MAAM,GAAGO,OAAO,CAAC7gB,CAAD,CAAtB;AACA,QAAMilC,KAAK,GAAGxL,OAAO,CAACnZ,MAAD,CAAP,GAAkB2f,MAAM,CAACjgC,CAAC,GAAGigC,MAAM,CAAC7/B,MAAZ,CAAxB,GAA8C,MAA5D;AACAioB,UAAM,CAAC/nB,IAAP,CAAY;AAACi+B,SAAG,EAAE,YAAN;AAAoB77B,OAAC,EAAE4d,MAAvB;AAA+B0iB,UAAI,EAAEiC,KAArC;AAA4C3kB,YAAM,EAAE;AAApD,KAAZ;AACD;;AACD,SAAO+H,MAAP;AACD,CARD;;IAUMygB,Y;;;AACJ,wBAAYlW,KAAZ,EAAmB;AAAA;;AACjB,sCAAM,SAAN;AACA,QAAMkU,GAAG,GAAGlW,gBAAgB,CAACkO,UAAjB,CACRlM,KAAK,CAACD,MAAN,CAAazO,IADL,EACW0O,KAAK,CAACD,MAAN,CAAarP,OADxB,EACiCzC,OAD7C;AAEA,UAAK4Y,OAAL,GAAe,EAAf;AACA,UAAKkL,QAAL,GAAgB;AAAChgB,eAAS,EAAEC,UAAU,CAACkiB,GAAD,CAAtB;AAA6BA,SAAG,EAAHA;AAA7B,KAAhB;;AACA,UAAKnC,QAAL,CAAchgB,SAAd,CAAwB1D,GAAxB,CAA4B,UAACze,CAAD;AAAA,aAAO,MAAKi3B,OAAL,CAAaj3B,CAAb,IAAkB,IAAzB;AAAA,KAA5B;;AACA,QAAIowB,KAAK,CAACD,MAAN,CAAa9R,OAAjB,EAA0B;AACxB,YAAK8jB,QAAL,CAAchgB,SAAd,CAAwB1D,GAAxB,CAA4B,UAACze,CAAD;AAAA,eAAO,MAAKi3B,OAAL,CAAaj3B,CAAb,IAAkB,KAAzB;AAAA,OAA5B;;AACAowB,WAAK,CAACD,MAAN,CAAa9R,OAAb,CAAqB8D,SAArB,CAA+B1D,GAA/B,CAAmC,UAACze,CAAD;AAAA,eAAO,MAAKi3B,OAAL,CAAaj3B,CAAb,IAAkB,IAAzB;AAAA,OAAnC;AACD;;AAVgB;AAWlB;;;;SACD89B,c;AAAA,8BAAiB;AAAA;;AACf,UAAM3K,EAAE,GAAG,UAACvG,CAAD,EAAIpvB,CAAJ;AAAA,eAAU,MAAI,CAACy5B,OAAL,CAAa,MAAI,CAACkL,QAAL,CAAchgB,SAAd,CAAwB3kB,CAAxB,CAAb,CAAV;AAAA,OAAX;;AACA,aAAO;AACL8mC,WAAG,EAAE,KAAKnC,QAAL,CAAcmC,GAAd,CAAkBhmB,MAAlB,CAAyB6U,EAAzB,CADA;AAELhR,iBAAS,EAAE,KAAKggB,QAAL,CAAchgB,SAAd,CAAwB7D,MAAxB,CAA+B6U,EAA/B;AAFN,OAAP;AAID;;;;;SACD6K,W;AAAA,yBAAYC,KAAZ,EAAmBC,QAAnB,EAA6B;AAC3BpX,YAAM,CAAC,KAAKmQ,OAAL,CAAa7K,cAAb,CAA4B8R,QAAQ,CAACh+B,CAArC,CAAD,CAAN;AACA,WAAK+2B,OAAL,CAAaiH,QAAQ,CAACh+B,CAAtB,IAA2B,CAAC,KAAK+2B,OAAL,CAAaiH,QAAQ,CAACh+B,CAAtB,CAA5B;AACD;;;;;SACDi+B,S;AAAA,uBAAU/f,SAAV,EAAqB8R,QAArB,EAA+B;AAC7B,UAAM7R,OAAO,GAAG,KAAK8jB,QAAL,CAAchgB,SAA9B;AACAub,aAAO,CAACt9B,GAAR,CAAY,aAAZ,EACYumC,cAAc,CAACtoB,OAAD,EAAU,KAAK4Y,OAAf,EAAwB,KAAKwG,MAA7B,CAD1B;AAEA,UAAMj7B,IAAI,GAAGymB,MAAM,CAACW,gBAAP,CAAwBxL,SAAxB,CAAb;AACA,UAAMooB,MAAM,GAAG,KAAK1I,cAAL,GAAsB3b,SAAtB,CAAgCvkB,MAA/C;AACA,UAAM6oC,QAAQ,GAAGvW,QAAQ,CAAC7R,OAAT,IAAoB7b,IAAI,CAAC6b,OAA1C;AACAqf,aAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B,CAACmmC,aAAa,CAACC,MAAD,EAASC,QAAT,CAAd,CAA5B;AACD;;;;;;EAhCwBjJ,a;;;;;;;;;;;AC1B3B,IAAIc,cAAJ;;AAAmBnsB,MAAM,CAACoQ,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASnmB,CAAT,EAAW;AAACiiC,kBAAc,GAACjiC,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAAnB8V,MAAM,CAACgT,MAAP,CAAc;AAACyhB,eAAa,EAAC,YAAU;AAAC,WAAOA,aAAP;AAAqB;AAA/C,CAAd;AAAgE,IAAIpJ,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAI+oB,gBAAJ;AAAqBjT,MAAM,CAACoQ,IAAP,CAAY,gBAAZ,EAA6B;AAAC6C,kBAAgB,EAAC,UAAS/oB,CAAT,EAAW;AAAC+oB,oBAAgB,GAAC/oB,CAAjB;AAAmB;AAAjD,CAA7B,EAAgF,CAAhF;;IAGpLuqC,a;;;AACJ,yBAAYxW,KAAZ,EAAmB;AAAA;;AACjB,sCAAM,UAAN;AACA,QAAM/R,OAAO,GAAG+R,KAAK,CAACD,MAAN,CAAakU,KAAb,CAAmB5lB,GAAnB,CACZ,UAACze,CAAD;AAAA,aAAOowB,KAAK,CAACD,MAAN,CAAa9R,OAAb,CAAqB8D,SAArB,CAA+BniB,CAAC,CAAC8d,MAAjC,CAAP;AAAA,KADY,CAAhB;AAEA,QAAMkI,OAAO,GAAGoK,KAAK,CAACD,MAAN,CAAakU,KAAb,CAAmB5lB,GAAnB,CAAuB,UAACze,CAAD;AAAA,aAAOA,CAAC,CAAC4lB,MAAT;AAAA,KAAvB,CAAhB;AACA,UAAKpjB,IAAL,GAAY4iB,gBAAgB,CAAC/G,OAAD,EAAU2H,OAAV,CAA5B;AALiB;AAMlB;;;;SACDmY,S;AAAA,yBAAY;AACVT,aAAO,CAACt9B,GAAR,CAAY,cAAZ,EACY,CAAC;AAAC27B,WAAG,EAAE,SAAN;AAAiB3U,eAAO,EAAE;AAA1B,OAAD,CADZ;AAEAsW,aAAO,CAACt9B,GAAR,CAAY,sBAAZ,EAAoC,KAAKoC,IAAzC;AACD;;;;;;EAZyBg7B,a;;AAe5BiD,QAAQ,CAACoG,cAAT,CAAwB5F,OAAxB,CAAgC;AAC9Bz+B,MAAI,EAAE;AAAA,WAAMk7B,OAAO,CAAC39B,GAAR,CAAY,sBAAZ,CAAN;AAAA;AADwB,CAAhC,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClBA,MAAI+mC,OAAJ;;AAAYxkB,SAAO,CAACC,IAAR,CAAa,+BAAb,EAA6C;AAACC,WAAO,EAAC,UAASnmB,CAAT,EAAW;AAACyqC,aAAO,GAACzqC,CAAR;AAAU;AAA/B,GAA7C,EAA8E,CAA9E;;AAAZ,GAAC,UAAS8H,CAAT,EAAW;AAAC,QAAG,QAAOiO,OAAP,yCAAOA,OAAP,OAAiB,QAAjB,IAA2B,OAAOD,MAAP,KAAgB,WAA9C,EAA0D;AAACA,YAAM,CAACC,OAAP,GAAejO,CAAC,EAAhB;AAAmB,KAA9E,MAAmF,IAAG,OAAO8N,MAAP,KAAgB,UAAhB,IAA4BA,MAAM,CAACC,GAAtC,EAA0C;AAACD,YAAM,CAAC,EAAD,EAAI9N,CAAJ,CAAN;AAAa,KAAxD,MAA4D;AAAC,UAAI4E,CAAJ;;AAAM,UAAG,OAAO63B,MAAP,KAAgB,WAAnB,EAA+B;AAAC73B,SAAC,GAAC63B,MAAF;AAAS,OAAzC,MAA8C,IAAG,OAAO9kC,MAAP,KAAgB,WAAnB,EAA+B;AAACiN,SAAC,GAACjN,MAAF;AAAS,OAAzC,MAA8C,IAAG,OAAOirC,IAAP,KAAc,WAAjB,EAA6B;AAACh+B,SAAC,GAACg+B,IAAF;AAAO,OAArC,MAAyC;AAACh+B,SAAC,GAAC,IAAF;AAAO;;AAAAA,OAAC,CAAC+8B,QAAF,GAAa3hC,CAAC,EAAd;AAAiB;AAAC,GAAlU,EAAoU,YAAU;AAAC,QAAI8N,MAAJ,EAAWE,MAAX,EAAkBC,OAAlB;AAA0B,WAAO;AAAC,eAAShQ,CAAT,CAAWgI,CAAX,EAAajN,CAAb,EAAeb,CAAf,EAAiB;AAAC,iBAAS8+B,CAAT,CAAW4L,CAAX,EAAa9qC,CAAb,EAAe;AAAC,cAAG,CAACiB,CAAC,CAAC6pC,CAAD,CAAL,EAAS;AAAC,gBAAG,CAAC58B,CAAC,CAAC48B,CAAD,CAAL,EAAS;AAAC,kBAAIrqC,CAAC,GAAC,OAAOogB,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC;AAA0C,kBAAG,CAAC7gB,CAAD,IAAIS,CAAP,EAAS,OAAOA,CAAC,CAACqqC,CAAD,EAAG,CAAC,CAAJ,CAAR;AAAe,kBAAGxpC,CAAH,EAAK,OAAOA,CAAC,CAACwpC,CAAD,EAAG,CAAC,CAAJ,CAAR;AAAe,kBAAI7iC,CAAC,GAAC,IAAImjB,KAAJ,CAAU,yBAAuB0f,CAAvB,GAAyB,GAAnC,CAAN;AAA8C,oBAAM7iC,CAAC,CAAC8mB,IAAF,GAAO,kBAAP,EAA0B9mB,CAAhC;AAAkC;;AAAA,gBAAIsL,CAAC,GAACtS,CAAC,CAAC6pC,CAAD,CAAD,GAAK;AAAC50B,qBAAO,EAAC;AAAT,aAAX;AAAwBhI,aAAC,CAAC48B,CAAD,CAAD,CAAK,CAAL,EAAQpnC,IAAR,CAAa6P,CAAC,CAAC2C,OAAf,EAAuB,UAAShQ,CAAT,EAAW;AAAC,kBAAIjF,CAAC,GAACiN,CAAC,CAAC48B,CAAD,CAAD,CAAK,CAAL,EAAQ5kC,CAAR,CAAN;AAAiB,qBAAOg5B,CAAC,CAACj+B,CAAC,GAACA,CAAD,GAAGiF,CAAL,CAAR;AAAgB,aAApE,EAAqEqN,CAArE,EAAuEA,CAAC,CAAC2C,OAAzE,EAAiFhQ,CAAjF,EAAmFgI,CAAnF,EAAqFjN,CAArF,EAAuFb,CAAvF;AAA0F;;AAAA,iBAAOa,CAAC,CAAC6pC,CAAD,CAAD,CAAK50B,OAAZ;AAAoB;;AAAA,YAAI5U,CAAC,GAAC,OAAOuf,OAAP,IAAgB,UAAhB,IAA4BA,OAAlC;;AAA0C,aAAI,IAAIiqB,CAAC,GAAC,CAAV,EAAYA,CAAC,GAAC1qC,CAAC,CAACsB,MAAhB,EAAuBopC,CAAC,EAAxB;AAA2B5L,WAAC,CAAC9+B,CAAC,CAAC0qC,CAAD,CAAF,CAAD;AAA3B;;AAAmC,eAAO5L,CAAP;AAAS;;AAAzb,aAAUh5B,CAAV;AAAA,QAA2b;AAAC,SAAE,CAAC,UAAS2a,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAC/0B;AAEA,qBAH+0B,CAK/0B;AACA;;AACAA,eAAO,CAAC60B,QAAR,GAAmB,UAASC,SAAT,EAAoB9f,OAApB,EAA6B;AAC5C,cAAI,CAAC8f,SAAL,EAAgB;AACZ,kBAAM,IAAI5f,KAAJ,CAAUF,OAAV,CAAN;AACH;AACJ,SAJD,CAP+0B,CAa/0B;AACA;;;AACAhV,eAAO,CAAC0U,MAAR,GAAiB1U,OAAO,CAAC60B,QAAzB;AAEC,OAjB6yB,EAiB5yB,EAjB4yB,CAAH;AAiBryB,SAAE,CAAC,UAASlqB,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACzC;AAEA,qBAHyC,CAKzC;;AACA,iBAAS6X,IAAT,CAAchoB,GAAd,EAAmBU,EAAnB,EAAuB6gB,EAAvB,EAA2BH,EAA3B,EAA+BI,EAA/B,EAAmC;AAC/BxhB,aAAG,CAACklC,SAAJ;AACAllC,aAAG,CAACmlC,MAAJ,CAAWzkC,EAAX,EAAe6gB,EAAf;AACAvhB,aAAG,CAAColC,MAAJ,CAAWhkB,EAAX,EAAeI,EAAf;AACAxhB,aAAG,CAAC6b,MAAJ;AACH;;AAED1L,eAAO,CAAC6X,IAAR,GAAeA,IAAf;AAEC,OAfO,EAeN,EAfM,CAjBmyB;AAgCryB,SAAE,CAAC,UAASlN,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACzC;AAEA;;AAEA,YAAIk1B,kBAAkB,GAAG,CACrB,SADqB,EACV,OADU,EACD,QADC,EACS,UADT,EACqB,YADrB,EACmC,QADnC,EAC6C,SAD7C,EACwD,WADxD,EACqE,YADrE,EAErB,WAFqB,EAER,YAFQ,EAEM,UAFN,EAEkB,MAFlB,EAE0B,OAF1B,EAEmC,QAFnC,EAE6C,QAF7C,EAEuD,OAFvD,EAEgE,MAFhE,EAEwE,KAFxE,EAE+E,KAF/E,EAGrB,OAHqB,EAGZ,MAHY,EAGJ,MAHI,EAGI,KAHJ,EAGW,OAHX,EAGoB,OAHpB,EAG6B,MAH7B,EAGqC,OAHrC,EAG8C,WAH9C,EAG2D,MAH3D,EAGmE,OAHnE,EAG4E,SAH5E,EAIrB,UAJqB,EAIT,IAJS,EAIH,GAJG,EAIE,GAJF,EAIO,GAJP,EAIY,GAJZ,EAIiB,GAJjB,EAIsB,GAJtB,EAI2B,GAJ3B,EAIgC,GAJhC,EAIqC,GAJrC,EAI0C,GAJ1C,EAI+C,GAJ/C,EAIoD,GAJpD,EAIyD,GAJzD,EAI8D,GAJ9D,EAImE,GAJnE,EAIwE,GAJxE,EAI6E,GAJ7E,EAIkF,GAJlF,EAIuF,GAJvF,EAKrB,GALqB,EAKhB,GALgB,EAKX,GALW,EAKN,GALM,EAKD,GALC,EAKI,GALJ,EAKS,GALT,EAKc,aALd,EAK6B,WAL7B,EAK0C,cAL1C,EAK0D,aAL1D,EAKyE,YALzE,EAMrB,WANqB,EAMR,GANQ,EAMH,GANG,EAME,GANF,EAMO,GANP,EAMY,GANZ,EAMiB,GANjB,EAMsB,GANtB,EAM2B,GAN3B,EAMgC,GANhC,EAMqC,GANrC,EAM0C,GAN1C,EAM+C,GAN/C,EAMoD,GANpD,EAMyD,GANzD,EAM8D,GAN9D,EAMmE,GANnE,EAMwE,GANxE,EAM6E,GAN7E,EAMkF,GANlF,EAMuF,GANvF,EAOrB,GAPqB,EAOhB,GAPgB,EAOX,GAPW,EAON,GAPM,EAOD,GAPC,EAOI,GAPJ,EAOS,WAPT,EAOsB,KAPtB,EAO6B,YAP7B,EAO2C,YAP3C,EAOyD,YAPzD,EAOuE,MAPvE,EAO+E,UAP/E,EAQrB,UARqB,EAQT,KARS,EAQF,QARE,EAQQ,SARR,EAQmB,UARnB,EAQ+B,aAR/B,EAQ8C,cAR9C,EAQ8D,eAR9D,EASrB,eATqB,EASJ,gBATI,EASc,IATd,EASoB,IATpB,EAS0B,QAT1B,EASoC,QATpC,EAS8C,WAT9C,EAS2D,gBAT3D,EAS6E,WAT7E,EAUrB,QAVqB,EAUX,gBAVW,EAUO,cAVP,EAUuB,eAVvB,EAUwC,gBAVxC,EAU0D,UAV1D,EAUsE,aAVtE,EAWrB,cAXqB,EAWL,OAXK,EAWI,OAXJ,EAWa,YAXb,EAW2B,OAX3B,EAWoC,QAXpC,EAW8C,OAX9C,EAWuD,WAXvD,EAWoE,UAXpE,EAWgF,MAXhF,EAYrB,SAZqB,EAYV,cAZU,EAYM,QAZN,EAYgB,OAZhB,EAYyB,QAZzB,EAYmC,IAZnC,EAYyC,aAZzC,EAYwD,QAZxD,EAYkE,QAZlE,EAY4E,IAZ5E,EAarB,cAbqB,EAaL,IAbK,EAaC,UAbD,EAaa,QAbb,EAauB,QAbvB,EAaiC,IAbjC,EAauC,YAbvC,EAaqD,aAbrD,EAaoE,YAbpE,EAakF,IAblF,EAcrB,WAdqB,EAcR,KAdQ,EAcD,SAdC,EAcU,WAdV,EAcuB,OAdvB,EAcgC,YAdhC,EAc8C,QAd9C,EAcwD,WAdxD,EAcqE,QAdrE,EAc+E,OAd/E,EAerB,eAfqB,EAeJ,aAfI,EAeW,YAfX,EAeyB,OAfzB,EAekC,KAflC,EAeyC,UAfzC,EAeqD,eAfrD,EAesE,WAftE,EAgBrB,QAhBqB,EAgBX,aAhBW,EAgBI,WAhBJ,EAgBiB,QAhBjB,EAgB2B,OAhB3B,EAgBoC,QAhBpC,EAgB8C,UAhB9C,EAgB0D,QAhB1D,EAgBoE,aAhBpE,EAiBrB,WAjBqB,EAiBR,QAjBQ,EAiBE,QAjBF,EAiBY,aAjBZ,EAiB2B,WAjB3B,EAiBwC,QAjBxC,EAiBkD,QAjBlD,EAiB4D,QAjB5D,EAiBsE,aAjBtE,EAkBrB,WAlBqB,EAkBR,QAlBQ,EAkBE,QAlBF,EAkBY,QAlBZ,EAkBsB,QAlBtB,EAkBgC,aAlBhC,EAkB+C,WAlB/C,EAkB4D,QAlB5D,EAkBsE,QAlBtE,EAmBrB,WAnBqB,EAmBR,QAnBQ,EAmBE,QAnBF,EAmBY,aAnBZ,EAmB2B,WAnB3B,EAmBwC,QAnBxC,EAmBkD,OAnBlD,EAmB2D,QAnB3D,EAmBqE,UAnBrE,EAmBiF,QAnBjF,EAoBrB,aApBqB,EAoBN,WApBM,EAoBO,QApBP,EAoBiB,QApBjB,EAoB2B,aApB3B,EAoB0C,WApB1C,EAoBuD,QApBvD,EAoBiE,QApBjE,EAoB2E,QApB3E,EAqBrB,aArBqB,EAqBN,WArBM,EAqBO,QArBP,EAqBiB,QArBjB,EAqB2B,QArB3B,EAqBqC,QArBrC,EAqB+C,aArB/C,EAqB8D,WArB9D,EAqB2E,QArB3E,EAsBrB,QAtBqB,EAsBX,WAtBW,EAsBE,QAtBF,EAsBY,aAtBZ,EAsB2B,mBAtB3B,EAsBgD,gBAtBhD,EAsBkE,gBAtBlE,EAuBrB,gBAvBqB,EAuBH,YAvBG,EAuBW,mBAvBX,EAuBgC,oBAvBhC,EAuBsD,QAvBtD,EAuBgE,gBAvBhE,EAwBrB,cAxBqB,EAwBL,aAxBK,EAwBU,aAxBV,EAwByB,eAxBzB,EAwB0C,cAxB1C,EAwB0D,cAxB1D,EAwB0E,aAxB1E,EAyBrB,eAzBqB,EAyBJ,eAzBI,EAyBa,cAzBb,EAyB6B,eAzB7B,EAyB8C,qBAzB9C,EAyBqE,gBAzBrE,EA0BrB,eA1BqB,EA0BJ,WA1BI,EA0BS,WA1BT,EA0BsB,cA1BtB,EA0BsC,WA1BtC,EA0BmD,WA1BnD,EA0BgE,WA1BhE,EA0B6E,WA1B7E,EA2BrB,WA3BqB,EA2BR,WA3BQ,EA2BK,WA3BL,EA2BkB,WA3BlB,EA2B+B,WA3B/B,EA2B4C,WA3B5C,EA2ByD,IA3BzD,EA2B+D,KA3B/D,EA2BsE,KA3BtE,EA4BrB,mBA5BqB,EA4BA,oBA5BA,EA4BsB,iBA5BtB,EA4ByC,gBA5BzC,EA4B2D,YA5B3D,EA4ByE,QA5BzE,EA6BrB,QA7BqB,EA6BX,QA7BW,EA6BD,QA7BC,EA6BS,QA7BT,EA6BmB,QA7BnB,EA6B6B,QA7B7B,EA6BuC,QA7BvC,EA6BiD,QA7BjD,EA6B2D,QA7B3D,EA6BqE,QA7BrE,EA6B+E,QA7B/E,EA8BrB,QA9BqB,EA8BX,QA9BW,EA8BD,QA9BC,EA8BS,QA9BT,EA8BmB,QA9BnB,EA8B6B,QA9B7B,EA8BuC,QA9BvC,EA8BiD,QA9BjD,EA8B2D,QA9B3D,EA8BqE,QA9BrE,EA8B+E,QA9B/E,EA+BrB,QA/BqB,EA+BX,QA/BW,EA+BD,QA/BC,EA+BS,eA/BT,EA+B0B,WA/B1B,EA+BuC,QA/BvC,EA+BiD,YA/BjD,EA+B+D,iBA/B/D,EAgCrB,cAhCqB,EAgCL,aAhCK,EAgCU,aAhCV,EAgCyB,aAhCzB,EAgCwC,eAhCxC,EAgCyD,YAhCzD,EAgCuE,YAhCvE,EAiCrB,gBAjCqB,EAiCH,aAjCG,EAiCY,YAjCZ,EAiC0B,gBAjC1B,EAiC4C,aAjC5C,EAiC2D,WAjC3D,EAiCwE,cAjCxE,EAkCrB,mBAlCqB,EAkCA,WAlCA,EAkCa,cAlCb,EAkC6B,aAlC7B,EAkC4C,cAlC5C,EAkC4D,UAlC5D,EAkCwE,WAlCxE,EAmCrB,cAnCqB,EAmCL,cAnCK,EAmCW,cAnCX,EAmC2B,aAnC3B,EAmC0C,eAnC1C,EAmC2D,eAnC3D,EAmC4E,cAnC5E,EAoCrB,cApCqB,EAoCL,aApCK,EAoCU,aApCV,EAoCyB,eApCzB,EAoC0C,cApC1C,EAoC0D,cApC1D,EAoC0E,aApC1E,EAqCrB,eArCqB,EAqCJ,eArCI,EAqCa,cArCb,EAqC6B,cArC7B,EAqC6C,gBArC7C,EAqC+D,gBArC/D,EAsCrB,eAtCqB,EAsCJ,aAtCI,EAsCW,aAtCX,EAsC0B,kBAtC1B,EAsC8C,aAtC9C,EAsC6D,gBAtC7D,EAuCrB,YAvCqB,EAuCP,SAvCO,EAuCI,eAvCJ,EAuCqB,aAvCrB,EAuCoC,aAvCpC,EAuCmD,kBAvCnD,EAuCuE,gBAvCvE,EAwCrB,aAxCqB,EAwCN,aAxCM,EAwCS,kBAxCT,EAwC6B,gBAxC7B,EAwC+C,UAxC/C,EAwC2D,aAxC3D,EAwC0E,aAxC1E,EAyCrB,aAzCqB,EAyCN,kBAzCM,EAyCc,aAzCd,EAyC6B,gBAzC7B,EAyC+C,SAzC/C,EAyC0D,aAzC1D,EAyCyE,aAzCzE,EA0CrB,aA1CqB,EA0CN,kBA1CM,EA0Cc,gBA1Cd,EA0CgC,aA1ChC,EA0C+C,YA1C/C,EA0C6D,gBA1C7D,EA0C+E,SA1C/E,EA2CrB,SA3CqB,EA2CV,SA3CU,EA2CC,SA3CD,EA2CY,OA3CZ,EA2CqB,MA3CrB,EA2C6B,MA3C7B,EA2CqC,OA3CrC,EA2C8C,QA3C9C,EA2CwD,SA3CxD,EA2CmE,OA3CnE,EA2C4E,UA3C5E,CAAzB;AA6CA,YAAIC,mBAAmB,GAAG,CACtB,EADsB,EAClB,EADkB,EACd,EADc,EACV,EADU,EACN,EADM,EACF,EADE,EACE,EADF,EACM,EADN,EACU,EADV,EACc,EADd,EACkB,EADlB,EACsB,EADtB,EAC0B,EAD1B,EAC8B,EAD9B,EACkC,EADlC,EACsC,EADtC,EAC0C,EAD1C,EAC8C,EAD9C,EACkD,EADlD,EACsD,EADtD,EAC0D,EAD1D,EAC8D,EAD9D,EACkE,EADlE,EACsE,EADtE,EAC0E,EAD1E,EAC8E,EAD9E,EACkF,EADlF,EACsF,EADtF,EAEtB,EAFsB,EAElB,EAFkB,EAEd,EAFc,EAEV,EAFU,EAEN,OAFM,EAEG,QAFH,EAEa,UAFb,EAEyB,YAFzB,EAEuC,QAFvC,EAEiD,SAFjD,EAE4D,WAF5D,EAEyE,YAFzE,EAGtB,WAHsB,EAGT,YAHS,EAGK,UAHL,EAGiB,MAHjB,EAGyB,OAHzB,EAGkC,QAHlC,EAG4C,QAH5C,EAGsD,OAHtD,EAG+D,MAH/D,EAGuE,KAHvE,EAG8E,KAH9E,EAItB,OAJsB,EAIb,MAJa,EAIL,MAJK,EAIG,KAJH,EAIU,OAJV,EAImB,OAJnB,EAI4B,MAJ5B,EAIoC,OAJpC,EAI6C,WAJ7C,EAI0D,MAJ1D,EAIkE,OAJlE,EAI2E,SAJ3E,EAKtB,UALsB,EAKV,IALU,EAKJ,GALI,EAKC,GALD,EAKM,GALN,EAKW,GALX,EAKgB,GALhB,EAKqB,GALrB,EAK0B,GAL1B,EAK+B,GAL/B,EAKoC,GALpC,EAKyC,GALzC,EAK8C,GAL9C,EAKmD,GALnD,EAKwD,GALxD,EAK6D,GAL7D,EAKkE,GALlE,EAKuE,GALvE,EAK4E,GAL5E,EAKiF,GALjF,EAKsF,GALtF,EAMtB,GANsB,EAMjB,GANiB,EAMZ,GANY,EAMP,GANO,EAMF,GANE,EAMG,GANH,EAMQ,GANR,EAMa,aANb,EAM4B,WAN5B,EAMyC,cANzC,EAMyD,aANzD,EAMwE,YANxE,EAOtB,WAPsB,EAOT,GAPS,EAOJ,GAPI,EAOC,GAPD,EAOM,GAPN,EAOW,GAPX,EAOgB,GAPhB,EAOqB,GAPrB,EAO0B,GAP1B,EAO+B,GAP/B,EAOoC,GAPpC,EAOyC,GAPzC,EAO8C,GAP9C,EAOmD,GAPnD,EAOwD,GAPxD,EAO6D,GAP7D,EAOkE,GAPlE,EAOuE,GAPvE,EAO4E,GAP5E,EAOiF,GAPjF,EAOsF,GAPtF,EAQtB,GARsB,EAQjB,GARiB,EAQZ,GARY,EAQP,GARO,EAQF,GARE,EAQG,GARH,EAQQ,WARR,EAQqB,KARrB,EAQ4B,YAR5B,EAQ0C,YAR1C,EAQwD,EARxD,EAQ4D,EAR5D,EAQgE,EARhE,EAQoE,EARpE,EAQwE,EARxE,EAQ4E,EAR5E,EAQgF,EARhF,EAQoF,EARpF,EAStB,EATsB,EASlB,EATkB,EASd,EATc,EASV,EATU,EASN,EATM,EASF,EATE,EASE,EATF,EASM,EATN,EASU,EATV,EASc,EATd,EASkB,EATlB,EASsB,EATtB,EAS0B,EAT1B,EAS8B,EAT9B,EASkC,EATlC,EASsC,EATtC,EAS0C,EAT1C,EAS8C,EAT9C,EASkD,EATlD,EASsD,EATtD,EAS0D,EAT1D,EAS8D,EAT9D,EASkE,EATlE,EASsE,EATtE,EAS0E,EAT1E,EAS8E,EAT9E,EAUtB,YAVsB,EAUR,MAVQ,EAUA,UAVA,EAUY,UAVZ,EAUwB,KAVxB,EAU+B,QAV/B,EAUyC,SAVzC,EAUoD,UAVpD,EAUgE,aAVhE,EAWtB,cAXsB,EAWN,eAXM,EAWW,eAXX,EAW4B,gBAX5B,EAW8C,IAX9C,EAWoD,IAXpD,EAW0D,EAX1D,EAW8D,QAX9D,EAWwE,QAXxE,EAYtB,WAZsB,EAYT,gBAZS,EAYS,EAZT,EAYa,WAZb,EAY0B,QAZ1B,EAYoC,gBAZpC,EAYsD,cAZtD,EAYsE,eAZtE,EAatB,gBAbsB,EAaJ,UAbI,EAaQ,aAbR,EAauB,EAbvB,EAa2B,cAb3B,EAa2C,EAb3C,EAa+C,OAb/C,EAawD,OAbxD,EAaiE,YAbjE,EAa+E,OAb/E,EActB,QAdsB,EAcZ,OAdY,EAcH,WAdG,EAcU,UAdV,EAcsB,EAdtB,EAc0B,MAd1B,EAckC,SAdlC,EAc6C,EAd7C,EAciD,cAdjD,EAciE,QAdjE,EAc2E,OAd3E,EAetB,QAfsB,EAeZ,EAfY,EAeR,EAfQ,EAeJ,EAfI,EAeA,EAfA,EAeI,EAfJ,EAeQ,EAfR,EAeY,EAfZ,EAegB,EAfhB,EAeoB,EAfpB,EAewB,EAfxB,EAe4B,EAf5B,EAegC,EAfhC,EAeoC,EAfpC,EAewC,EAfxC,EAe4C,EAf5C,EAegD,EAfhD,EAeoD,IAfpD,EAe0D,EAf1D,EAe8D,aAf9D,EAe6E,EAf7E,EAeiF,EAfjF,EAeqF,EAfrF,EAgBtB,EAhBsB,EAgBlB,QAhBkB,EAgBR,QAhBQ,EAgBE,IAhBF,EAgBQ,cAhBR,EAgBwB,EAhBxB,EAgB4B,EAhB5B,EAgBgC,EAhBhC,EAgBoC,EAhBpC,EAgBwC,EAhBxC,EAgB4C,IAhB5C,EAgBkD,EAhBlD,EAgBsD,EAhBtD,EAgB0D,EAhB1D,EAgB8D,UAhB9D,EAgB0E,EAhB1E,EAgB8E,EAhB9E,EAiBtB,QAjBsB,EAiBZ,QAjBY,EAiBF,IAjBE,EAiBI,YAjBJ,CAA1B;AAmBA,YAAIC,iBAAiB,GAAG,CACpB,EADoB,EAChB,EADgB,EACZ,EADY,EACR,EADQ,EACJ,EADI,EACA,EADA,EACI,EADJ,EACQ,EADR,EACY,EADZ,EACgB,EADhB,EACoB,EADpB,EACwB,EADxB,EAC4B,EAD5B,EACgC,EADhC,EACoC,EADpC,EACwC,EADxC,EAC4C,EAD5C,EACgD,EADhD,EACoD,EADpD,EACwD,EADxD,EAC4D,EAD5D,EACgE,EADhE,EACoE,EADpE,EACwE,EADxE,EAC4E,EAD5E,EACgF,EADhF,EACoF,EADpF,EACwF,EADxF,EAEpB,EAFoB,EAEhB,EAFgB,EAEZ,EAFY,EAER,EAFQ,EAEJ,OAFI,EAEK,aAFL,EAEoB,mBAFpB,EAEyC,EAFzC,EAE6C,gBAF7C,EAE+D,gBAF/D,EAGpB,gBAHoB,EAGF,YAHE,EAGY,mBAHZ,EAGiC,oBAHjC,EAGuD,gBAHvD,EAGyE,gBAHzE,EAIpB,OAJoB,EAIX,QAJW,EAID,QAJC,EAIS,UAJT,EAIqB,cAJrB,EAIqC,aAJrC,EAIoD,aAJpD,EAImE,eAJnE,EAKpB,cALoB,EAKJ,cALI,EAKY,aALZ,EAK2B,eAL3B,EAK4C,eAL5C,EAK6D,cAL7D,EAK6E,OAL7E,EAMpB,WANoB,EAMP,eANO,EAMU,qBANV,EAMiC,gBANjC,EAMmD,eANnD,EAMoE,EANpE,EAMwE,WANxE,EAOpB,WAPoB,EAOP,cAPO,EAOS,WAPT,EAOsB,WAPtB,EAOmC,EAPnC,EAOuC,EAPvC,EAO2C,WAP3C,EAOwD,EAPxD,EAO4D,EAP5D,EAOgE,WAPhE,EAO6E,WAP7E,EAQpB,WARoB,EAQP,WARO,EAQM,EARN,EAQU,EARV,EAQc,WARd,EAQ2B,WAR3B,EAQwC,WARxC,EAQqD,EARrD,EAQyD,IARzD,EAQ+D,IAR/D,EAQqE,IARrE,EAQ2E,KAR3E,EAQkF,KARlF,EASpB,mBAToB,EASC,EATD,EASK,oBATL,EAS2B,iBAT3B,EAS8C,gBAT9C,EASgE,YAThE,EAS8E,QAT9E,EAUpB,QAVoB,EAUV,QAVU,EAUA,QAVA,EAUU,QAVV,EAUoB,QAVpB,EAU8B,QAV9B,EAUwC,QAVxC,EAUkD,QAVlD,EAU4D,QAV5D,EAUsE,QAVtE,EAUgF,QAVhF,EAWpB,QAXoB,EAWV,QAXU,EAWA,QAXA,EAWU,QAXV,EAWoB,QAXpB,EAW8B,QAX9B,EAWwC,QAXxC,EAWkD,QAXlD,EAW4D,QAX5D,EAWsE,QAXtE,EAWgF,QAXhF,EAYpB,QAZoB,EAYV,QAZU,EAYA,QAZA,EAYU,eAZV,EAY2B,WAZ3B,EAYwC,QAZxC,EAYkD,YAZlD,EAYgE,EAZhE,EAYoE,EAZpE,EAYwE,EAZxE,EAY4E,EAZ5E,EAYgF,EAZhF,EAYoF,EAZpF,EAYwF,EAZxF,EAapB,EAboB,EAahB,EAbgB,EAaZ,EAbY,EAaR,EAbQ,EAaJ,EAbI,EAaA,EAbA,EAaI,EAbJ,EAaQ,EAbR,EAaY,EAbZ,EAagB,EAbhB,EAaoB,EAbpB,EAawB,EAbxB,EAa4B,EAb5B,EAagC,EAbhC,EAaoC,EAbpC,EAawC,EAbxC,EAa4C,EAb5C,EAagD,EAbhD,EAaoD,EAbpD,EAawD,EAbxD,EAa4D,EAb5D,EAagE,EAbhE,EAaoE,EAbpE,EAawE,EAbxE,EAa4E,EAb5E,EAagF,EAbhF,EAaoF,EAbpF,EAcpB,iBAdoB,EAcD,cAdC,EAce,aAdf,EAc8B,EAd9B,EAckC,EAdlC,EAcsC,aAdtC,EAcqD,aAdrD,EAcoE,eAdpE,EAepB,YAfoB,EAeN,YAfM,EAeQ,EAfR,EAeY,gBAfZ,EAe8B,EAf9B,EAekC,EAflC,EAesC,aAftC,EAeqD,EAfrD,EAeyD,EAfzD,EAe6D,YAf7D,EAe2E,gBAf3E,EAgBpB,EAhBoB,EAgBhB,EAhBgB,EAgBZ,aAhBY,EAgBG,WAhBH,EAgBgB,cAhBhB,EAgBgC,EAhBhC,EAgBoC,EAhBpC,EAgBwC,EAhBxC,EAgB4C,YAhB5C,EAgB0D,SAhB1D,EAgBqE,eAhBrE,EAiBpB,mBAjBoB,EAiBC,WAjBD,EAiBc,cAjBd,EAiB8B,aAjB9B,EAiB6C,cAjB7C,EAiB6D,UAjB7D,EAiByE,WAjBzE,EAiBsF,EAjBtF,EAkBpB,EAlBoB,EAkBhB,cAlBgB,EAkBA,aAlBA,EAkBe,aAlBf,EAkB8B,eAlB9B,EAkB+C,cAlB/C,EAkB+D,cAlB/D,EAmBpB,aAnBoB,EAmBL,eAnBK,EAmBY,eAnBZ,EAmB6B,cAnB7B,EAmB6C,cAnB7C,EAmB6D,aAnB7D,EAmB4E,aAnB5E,EAoBpB,eApBoB,EAoBH,cApBG,EAoBa,cApBb,EAoB6B,aApB7B,EAoB4C,eApB5C,EAoB6D,eApB7D,EAqBpB,cArBoB,EAqBJ,cArBI,EAqBY,gBArBZ,EAqB8B,gBArB9B,EAqBgD,eArBhD,EAqBiE,aArBjE,EAsBpB,aAtBoB,EAsBL,kBAtBK,EAsBe,aAtBf,EAsB8B,gBAtB9B,EAsBgD,YAtBhD,EAsB8D,SAtB9D,EAsByE,eAtBzE,EAuBpB,aAvBoB,EAuBL,aAvBK,EAuBU,kBAvBV,EAuB8B,gBAvB9B,EAuBgD,aAvBhD,EAuB+D,aAvB/D,EAwBpB,kBAxBoB,EAwBA,gBAxBA,EAwBkB,UAxBlB,EAwB8B,aAxB9B,EAwB6C,aAxB7C,EAwB4D,aAxB5D,EAyBpB,kBAzBoB,EAyBA,aAzBA,EAyBe,gBAzBf,EAyBiC,SAzBjC,EAyB4C,aAzB5C,EAyB2D,aAzB3D,EAyB0E,aAzB1E,EA0BpB,kBA1BoB,EA0BA,gBA1BA,EA0BkB,aA1BlB,EA0BiC,YA1BjC,EA0B+C,gBA1B/C,CAAxB;AA4BA,YAAIC,aAAa,GAAG,CAChB,SADgB,EACL,OADK,EACI,kBADJ,EACwB,OADxB,EACiC,QADjC,EAC2C,UAD3C,EACuD,YADvD,EACqE,QADrE,EAC+E,SAD/E,EAEhB,WAFgB,EAEH,aAFG,EAEY,WAFZ,EAEyB,YAFzB,EAEuC,UAFvC,EAEmD,MAFnD,EAE2D,OAF3D,EAEoE,QAFpE,EAE8E,QAF9E,EAEwF,OAFxF,EAGhB,MAHgB,EAGR,KAHQ,EAGD,KAHC,EAGM,OAHN,EAGe,MAHf,EAGuB,MAHvB,EAG+B,KAH/B,EAGsC,OAHtC,EAG+C,OAH/C,EAGwD,MAHxD,EAGgE,OAHhE,EAGyE,WAHzE,EAGsF,MAHtF,EAIhB,OAJgB,EAIP,SAJO,EAII,UAJJ,EAIgB,IAJhB,EAIsB,GAJtB,EAI2B,GAJ3B,EAIgC,GAJhC,EAIqC,GAJrC,EAI0C,GAJ1C,EAI+C,GAJ/C,EAIoD,GAJpD,EAIyD,GAJzD,EAI8D,GAJ9D,EAImE,GAJnE,EAIwE,GAJxE,EAI6E,GAJ7E,EAIkF,GAJlF,EAIuF,GAJvF,EAI4F,GAJ5F,EAKhB,GALgB,EAKX,GALW,EAKN,GALM,EAKD,GALC,EAKI,GALJ,EAKS,GALT,EAKc,GALd,EAKmB,GALnB,EAKwB,GALxB,EAK6B,GAL7B,EAKkC,GALlC,EAKuC,aALvC,EAKsD,WALtD,EAKmE,cALnE,EAMhB,aANgB,EAMD,YANC,EAMa,OANb,EAMsB,GANtB,EAM2B,GAN3B,EAMgC,GANhC,EAMqC,GANrC,EAM0C,GAN1C,EAM+C,GAN/C,EAMoD,GANpD,EAMyD,GANzD,EAM8D,GAN9D,EAMmE,GANnE,EAMwE,GANxE,EAM6E,GAN7E,EAMkF,GANlF,EAMuF,GANvF,EAM4F,GAN5F,EAOhB,GAPgB,EAOX,GAPW,EAON,GAPM,EAOD,GAPC,EAOI,GAPJ,EAOS,GAPT,EAOc,GAPd,EAOmB,GAPnB,EAOwB,GAPxB,EAO6B,GAP7B,EAOkC,GAPlC,EAOuC,WAPvC,EAOoD,KAPpD,EAO2D,YAP3D,EAOyE,YAPzE,EAQhB,WARgB,EAQH,OARG,EAQM,UARN,EAQkB,QARlB,EAQ4B,QAR5B,EAQsC,WARtC,EAQmD,WARnD,EAQgE,QARhE,EAQ0E,QAR1E,EAShB,aATgB,EASD,WATC,EASY,QATZ,EASsB,OATtB,EAS+B,UAT/B,EAS2C,QAT3C,EASqD,QATrD,EAS+D,aAT/D,EAS8E,WAT9E,EAUhB,QAVgB,EAUN,QAVM,EAUI,aAVJ,EAUmB,WAVnB,EAUgC,QAVhC,EAU0C,QAV1C,EAUoD,QAVpD,EAU8D,aAV9D,EAU6E,WAV7E,EAWhB,QAXgB,EAWN,QAXM,EAWI,QAXJ,EAWc,aAXd,EAW6B,WAX7B,EAW0C,QAX1C,EAWoD,QAXpD,EAW8D,MAX9D,EAWsE,UAXtE,EAWkF,SAXlF,EAYhB,QAZgB,EAYN,WAZM,EAYO,YAZP,EAYqB,YAZrB,EAYmC,WAZnC,EAYgD,WAZhD,EAY6D,OAZ7D,EAYsE,UAZtE,EAYkF,UAZlF,EAahB,IAbgB,EAaV,QAbU,EAaA,UAbA,EAaY,WAbZ,EAayB,WAbzB,EAasC,cAbtC,EAasD,KAbtD,EAa6D,IAb7D,EAamE,aAbnE,EAakF,WAblF,EAchB,SAdgB,EAcL,IAdK,EAcC,UAdD,EAca,aAdb,EAc4B,cAd5B,EAc4C,OAd5C,EAcqD,IAdrD,EAc2D,QAd3D,EAcqE,cAdrE,EAehB,YAfgB,EAeF,YAfE,EAeY,SAfZ,EAeuB,QAfvB,EAeiC,aAfjC,EAegD,OAfhD,EAeyD,eAfzD,EAe0E,gBAf1E,EAgBhB,UAhBgB,EAgBJ,kBAhBI,EAgBgB,QAhBhB,EAgB0B,QAhB1B,EAgBoC,QAhBpC,EAgB8C,IAhB9C,EAgBoD,IAhBpD,EAgB0D,QAhB1D,EAgBoE,QAhBpE,EAgB8E,cAhB9E,EAiBhB,eAjBgB,EAiBC,WAjBD,EAiBc,YAjBd,EAiB4B,QAjB5B,EAiBsC,SAjBtC,EAiBiD,WAjBjD,EAiB8D,WAjB9D,EAiB2E,UAjB3E,EAkBhB,UAlBgB,EAkBJ,eAlBI,EAkBa,gBAlBb,EAkB+B,IAlB/B,EAkBqC,IAlBrC,EAkB2C,WAlB3C,EAkBwD,gBAlBxD,EAkB0E,gBAlB1E,EAmBhB,cAnBgB,EAmBA,aAnBA,EAmBe,aAnBf,EAmB8B,aAnB9B,EAmB6C,QAnB7C,EAmBuD,WAnBvD,EAmBoE,QAnBpE,EAmB8E,QAnB9E,EAoBhB,aApBgB,EAoBD,WApBC,EAoBY,QApBZ,EAoBsB,QApBtB,EAoBgC,aApBhC,EAoB+C,OApB/C,EAoBwD,QApBxD,EAoBkE,QApBlE,EAoB4E,aApB5E,EAqBhB,QArBgB,EAqBN,UArBM,EAqBM,YArBN,EAqBoB,OArBpB,EAqB6B,QArB7B,EAqBuC,OArBvC,EAqBgD,WArBhD,EAqB6D,MArB7D,EAqBqE,SArBrE,EAqBgF,cArBhF,EAsBhB,QAtBgB,EAsBN,OAtBM,EAsBG,QAtBH,EAsBa,QAtBb,EAsBuB,QAtBvB,EAsBiC,QAtBjC,EAsB2C,QAtB3C,EAsBqD,QAtBrD,EAsB+D,WAtB/D,EAsB4E,KAtB5E,EAsBmF,KAtBnF,EAuBhB,QAvBgB,EAuBN,QAvBM,EAuBI,OAvBJ,EAuBa,OAvBb,EAuBsB,OAvBtB,EAuB+B,UAvB/B,EAuB2C,aAvB3C,EAuB0D,aAvB1D,EAuByE,eAvBzE,EAwBhB,SAxBgB,EAwBL,YAxBK,EAwBS,eAxBT,EAwB0B,OAxB1B,EAwBmC,QAxBnC,EAwB6C,QAxB7C,EAwBuD,YAxBvD,EAwBqE,UAxBrE,EAwBiF,UAxBjF,EAyBhB,QAzBgB,EAyBN,QAzBM,EAyBI,QAzBJ,EAyBc,QAzBd,EAyBwB,QAzBxB,CAApB,CAjGyC,CA4HzC;AACA;AACA;;AACA,iBAASC,eAAT,CAAyBvB,IAAzB,EAA+B;AAC3B,eAAKA,IAAL,GAAYA,IAAZ;AACH;;AAEDuB,uBAAe,CAAChoC,SAAhB,CAA0B0mC,gBAA1B,GAA6C,UAAS7pC,CAAT,EAAY;AACrD,cAAI0uB,IAAI,GAAG1uB,CAAC,CAACorC,UAAF,CAAa,CAAb,CAAX;AACA,cAAIvc,MAAM,GAAG,KAAK+a,IAAL,CAAU/a,MAAvB;;AACA,cAAIA,MAAJ,EAAY;AACR,iBAAK,IAAI5tB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,MAAM,CAACxtB,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,kBAAI4yB,KAAK,GAAGhF,MAAM,CAACrrB,GAAP,CAAWvC,CAAX,CAAZ;;AACA,mBAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6xB,KAAK,CAACwX,QAAN,CAAehqC,MAAnC,EAA2CW,CAAC,IAAI,CAAhD,EAAmD;AAC/C,oBAAI6xB,KAAK,CAACwX,QAAN,CAAerpC,CAAf,MAAsB0sB,IAA1B,EAAgC;AAC5B,yBAAOztB,CAAP;AACH;AACJ;AACJ;AACJ,WATD,MASO;AACH,mBAAO,IAAP;AACH;AACJ,SAfD;;AAiBA,iBAASqqC,YAAT,CAAsBC,IAAtB,EAA4B;AACxB,eAAKA,IAAL,GAAYA,IAAZ;AACH;;AAEDD,oBAAY,CAACnoC,SAAb,CAAuB0mC,gBAAvB,GAA0C,UAAS7pC,CAAT,EAAY;AAClD,iBAAO,KAAKurC,IAAL,CAAUC,aAAV,CAAwBxrC,CAAC,CAACorC,UAAF,CAAa,CAAb,CAAxB,KAA4C,CAAnD;AACH,SAFD;;AAIA,iBAASK,WAAT,CAAqBC,QAArB,EAA+BC,OAA/B,EAAwC;AACpC,eAAKD,QAAL,GAAgBA,QAAhB;AACA,eAAKC,OAAL,GAAeA,OAAf;AACH;;AAEDF,mBAAW,CAACtoC,SAAZ,CAAsB0mC,gBAAtB,GAAyC,UAAShL,CAAT,EAAY;AACjD,cAAInQ,IAAI,GAAGmQ,CAAC,CAACuM,UAAF,CAAa,CAAb,CAAX;AACA,cAAIQ,QAAQ,GAAG,KAAKF,QAAL,CAAchd,IAAd,CAAf;AACA,iBAAO,KAAKid,OAAL,CAAa/jB,OAAb,CAAqBgkB,QAArB,CAAP;AACH,SAJD;;AAMA,iBAASC,UAAT,CAAoBC,IAApB,EAA0B;AACtB,cAAI7qC,CAAJ;;AACA,kBAAQ6qC,IAAI,CAACC,OAAb;AACA,iBAAK,CAAL;AACI,mBAAKC,KAAL,GAAan2B,OAAO,CAACq1B,aAAR,CAAsBr5B,KAAtB,EAAb;AACA;;AACJ,iBAAK,CAAL;AACI,mBAAKm6B,KAAL,GAAa,IAAIhrC,KAAJ,CAAU8qC,IAAI,CAACG,cAAf,CAAb;;AACA,mBAAKhrC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6qC,IAAI,CAACG,cAArB,EAAqChrC,CAAC,EAAtC,EAA0C;AACtC,oBAAI6qC,IAAI,CAACI,cAAL,CAAoBjrC,CAApB,IAAyB4U,OAAO,CAACq1B,aAAR,CAAsB7pC,MAAnD,EAA2D;AACvD,uBAAK2qC,KAAL,CAAW/qC,CAAX,IAAgB4U,OAAO,CAACq1B,aAAR,CAAsBY,IAAI,CAACI,cAAL,CAAoBjrC,CAApB,CAAtB,CAAhB;AACH,iBAFD,MAEO;AACH,uBAAK+qC,KAAL,CAAW/qC,CAAX,IAAgB6qC,IAAI,CAACE,KAAL,CAAWF,IAAI,CAACI,cAAL,CAAoBjrC,CAApB,IAAyB4U,OAAO,CAACq1B,aAAR,CAAsB7pC,MAA1D,CAAhB;AACH;AACJ;;AAED;;AACJ,iBAAK,GAAL;AACI,mBAAK2qC,KAAL,GAAa,IAAIhrC,KAAJ,CAAU8qC,IAAI,CAACG,cAAf,CAAb;;AACA,mBAAKhrC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6qC,IAAI,CAACG,cAArB,EAAqChrC,CAAC,EAAtC,EAA0C;AACtC,qBAAK+qC,KAAL,CAAW/qC,CAAX,IAAgB4U,OAAO,CAACq1B,aAAR,CAAsBjqC,CAAC,GAAG6qC,IAAI,CAACI,cAAL,CAAoBjrC,CAApB,CAA1B,CAAhB;AACH;;AAED;;AACJ,iBAAK,CAAL;AACI,mBAAK+qC,KAAL,GAAa,EAAb;AACA;AAxBJ;AA0BH;;AAEDH,kBAAU,CAAC1oC,SAAX,CAAqBgpC,gBAArB,GAAwC,UAASrmC,IAAT,EAAe;AACnD,iBAAO,KAAKkmC,KAAL,CAAWpkB,OAAX,CAAmB9hB,IAAnB,CAAP;AACH,SAFD;;AAIA+lC,kBAAU,CAAC1oC,SAAX,CAAqBipC,gBAArB,GAAwC,UAASC,GAAT,EAAc;AAClD,iBAAO,KAAKL,KAAL,CAAWK,GAAX,CAAP;AACH,SAFD;;AAIA,iBAASC,aAAT,CAAuB1C,IAAvB,EAA6B;AACzB,cAAI/V,KAAJ;AACA,cAAI2X,aAAa,GAAG5B,IAAI,CAAC2C,MAAL,CAAYhB,IAAZ,CAAiBC,aAArC;AACA,cAAIgB,SAAS,GAAGtpC,MAAM,CAACwtB,IAAP,CAAY8a,aAAZ,CAAhB;;AAEA,eAAK,IAAIvqC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGurC,SAAS,CAACnrC,MAA9B,EAAsCJ,CAAC,IAAI,CAA3C,EAA8C;AAC1C,gBAAIjB,CAAC,GAAGwsC,SAAS,CAACvrC,CAAD,CAAjB;AACA,gBAAIwrC,UAAU,GAAGjB,aAAa,CAACxrC,CAAD,CAA9B;AACA6zB,iBAAK,GAAG+V,IAAI,CAAC/a,MAAL,CAAYrrB,GAAZ,CAAgBipC,UAAhB,CAAR;AACA5Y,iBAAK,CAAC6Y,UAAN,CAAiBze,QAAQ,CAACjuB,CAAD,CAAzB;AACH;;AAED,eAAKiB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2oC,IAAI,CAAC/a,MAAL,CAAYxtB,MAA5B,EAAoCJ,CAAC,IAAI,CAAzC,EAA4C;AACxC4yB,iBAAK,GAAG+V,IAAI,CAAC/a,MAAL,CAAYrrB,GAAZ,CAAgBvC,CAAhB,CAAR;;AACA,gBAAI2oC,IAAI,CAAC+C,WAAT,EAAsB;AAClB9Y,mBAAK,CAAC/tB,IAAN,GAAa8jC,IAAI,CAAC+C,WAAL,CAAiBhB,OAAjB,CAAyB1qC,CAAzB,CAAb;AACH,aAFD,MAEO;AACH4yB,mBAAK,CAAC/tB,IAAN,GAAa8jC,IAAI,CAACgD,UAAL,CAAgBR,gBAAhB,CAAiCnrC,CAAjC,CAAb;AACH;AACJ;AACJ;;AAED4U,eAAO,CAACk1B,kBAAR,GAA6BA,kBAA7B;AACAl1B,eAAO,CAACm1B,mBAAR,GAA8BA,mBAA9B;AACAn1B,eAAO,CAACo1B,iBAAR,GAA4BA,iBAA5B;AACAp1B,eAAO,CAACq1B,aAAR,GAAwBA,aAAxB;AACAr1B,eAAO,CAACs1B,eAAR,GAA0BA,eAA1B;AACAt1B,eAAO,CAACy1B,YAAR,GAAuBA,YAAvB;AACAz1B,eAAO,CAAC41B,WAAR,GAAsBA,WAAtB;AACA51B,eAAO,CAACg2B,UAAR,GAAqBA,UAArB;AACAh2B,eAAO,CAACy2B,aAAR,GAAwBA,aAAxB;AAEC,OA7OO,EA6ON,EA7OM,CAhCmyB;AA6QryB,SAAE,CAAC,UAAS9rB,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACzC;AAEA;;AAEA,YAAIsP,IAAI,GAAG3E,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAIqsB,IAAI,GAAGrsB,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIkrB,QAAQ,GAAGlrB,OAAO,CAAC,YAAD,CAAtB;;AACA,YAAIssB,QAAQ,GAAGtsB,OAAO,CAAC,YAAD,CAAtB,CARyC,CAUzC;AACA;AACA;;;AACA,iBAASusB,IAAT,CAAcrgC,OAAd,EAAuB;AACnBA,iBAAO,GAAGA,OAAO,IAAI,EAArB,CADmB,CAGnB;;AACA,eAAKsgC,UAAL,GAAkBtgC,OAAO,CAACsgC,UAAR,IAAsB,GAAxC;AACA,eAAKC,SAAL,GAAiBvgC,OAAO,CAACugC,SAAR,IAAqB,GAAtC;AACA,eAAKC,QAAL,GAAgBxgC,OAAO,CAACwgC,QAAR,IAAoB,GAApC;AACA,eAAKC,WAAL,GAAmBzgC,OAAO,CAACygC,WAAR,IAAuB,GAA1C;AACA,eAAKC,YAAL,GAAoB1gC,OAAO,CAAC0gC,YAAR,IAAwB,GAA5C;AACA,eAAKC,eAAL,GAAuB3gC,OAAO,CAAC2gC,eAAR,IAA2B,GAAlD;AACA,eAAKC,OAAL,GAAe5gC,OAAO,CAAC4gC,OAAR,IAAmB,GAAlC;AACA,eAAKC,UAAL,GAAkB7gC,OAAO,CAAC6gC,UAAR,IAAsB,GAAxC;AACA,eAAKxB,OAAL,GAAer/B,OAAO,CAACq/B,OAAR,IAAmB,aAAlC;AACA,eAAKyB,WAAL,GAAmB9gC,OAAO,CAAC8gC,WAAR,IAAuB,GAA1C;AACA,eAAKC,SAAL,GAAiB/gC,OAAO,CAAC+gC,SAAR,IAAqB,GAAtC;AACA,eAAKC,SAAL,GAAiBhhC,OAAO,CAACghC,SAAR,IAAqB,GAAtC;AACA,eAAKC,UAAL,GAAkBjhC,OAAO,CAACihC,UAAR,IAAsB,IAAxC;AACA,eAAKC,QAAL,GAAgBlhC,OAAO,CAACkhC,QAAxB;AACA,eAAKC,SAAL,GAAiBnhC,OAAO,CAACmhC,SAAzB;AACA,eAAKC,SAAL,GAAiB,IAAjB,CAnBmB,CAmBI;;AACvB,eAAKjf,MAAL,GAAc,IAAIie,QAAQ,CAACiB,QAAb,CAAsB,IAAtB,EAA4BrhC,OAAO,CAACmiB,MAAR,IAAkB,EAA9C,CAAd;AACA,eAAK6c,QAAL,GAAgB,IAAIA,QAAQ,CAACP,eAAb,CAA6B,IAA7B,CAAhB;AACA,eAAKoB,MAAL,GAAc,EAAd;AACH,SApCwC,CAsCzC;;;AACAQ,YAAI,CAAC5pC,SAAL,CAAe6qC,OAAf,GAAyB,UAAShuC,CAAT,EAAY;AACjC,iBAAO,KAAK0rC,QAAL,CAAc7B,gBAAd,CAA+B7pC,CAA/B,MAAsC,IAA7C;AACH,SAFD,CAvCyC,CA2CzC;AACA;AACA;;;AACA+sC,YAAI,CAAC5pC,SAAL,CAAe0mC,gBAAf,GAAkC,UAAShL,CAAT,EAAY;AAC1C,iBAAO,KAAK6M,QAAL,CAAc7B,gBAAd,CAA+BhL,CAA/B,CAAP;AACH,SAFD,CA9CyC,CAkDzC;AACA;AACA;;;AACAkO,YAAI,CAAC5pC,SAAL,CAAe8qC,WAAf,GAA6B,UAASjuC,CAAT,EAAY;AACrC,cAAIysC,UAAU,GAAG,KAAK5C,gBAAL,CAAsB7pC,CAAtB,CAAjB;AACA,cAAI6zB,KAAK,GAAG,KAAKhF,MAAL,CAAYrrB,GAAZ,CAAgBipC,UAAhB,CAAZ;;AACA,cAAI,CAAC5Y,KAAL,EAAY;AACR;AACAA,iBAAK,GAAG,KAAKhF,MAAL,CAAYrrB,GAAZ,CAAgB,CAAhB,CAAR;AACH;;AAED,iBAAOqwB,KAAP;AACH,SATD,CArDyC,CAgEzC;AACA;AACA;AACA;;;AACAkZ,YAAI,CAAC5pC,SAAL,CAAe+qC,cAAf,GAAgC,UAASrP,CAAT,EAAY;AACxC,cAAIhQ,MAAM,GAAG,EAAb;;AACA,eAAK,IAAI5tB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG49B,CAAC,CAACx9B,MAAtB,EAA8BJ,CAAC,IAAI,CAAnC,EAAsC;AAClC,gBAAIjB,CAAC,GAAG6+B,CAAC,CAAC59B,CAAD,CAAT;AACA4tB,kBAAM,CAACttB,IAAP,CAAY,KAAK0sC,WAAL,CAAiBjuC,CAAjB,CAAZ;AACH;;AAED,iBAAO6uB,MAAP;AACH,SARD;;AAUAke,YAAI,CAAC5pC,SAAL,CAAegpC,gBAAf,GAAkC,UAASrmC,IAAT,EAAe;AAC7C,iBAAO,KAAK8mC,UAAL,CAAgBT,gBAAhB,CAAiCrmC,IAAjC,CAAP;AACH,SAFD;;AAIAinC,YAAI,CAAC5pC,SAAL,CAAegrC,WAAf,GAA6B,UAASroC,IAAT,EAAe;AACxC,cAAI2mC,UAAU,GAAG,KAAK2B,gBAAL,CAAsBtoC,IAAtB,CAAjB;AACA,cAAI+tB,KAAK,GAAG,KAAKhF,MAAL,CAAYrrB,GAAZ,CAAgBipC,UAAhB,CAAZ;;AACA,cAAI,CAAC5Y,KAAL,EAAY;AACR;AACAA,iBAAK,GAAG,KAAKhF,MAAL,CAAYrrB,GAAZ,CAAgB,CAAhB,CAAR;AACH;;AAED,iBAAOqwB,KAAP;AACH,SATD;;AAWAkZ,YAAI,CAAC5pC,SAAL,CAAeipC,gBAAf,GAAkC,UAASC,GAAT,EAAc;AAC5C,cAAI,CAAC,KAAKO,UAAL,CAAgBR,gBAArB,EAAuC;AACnC,mBAAO,EAAP;AACH;;AAED,iBAAO,KAAKQ,UAAL,CAAgBR,gBAAhB,CAAiCC,GAAjC,CAAP;AACH,SAND,CA7FyC,CAqGzC;AACA;AACA;AACA;;;AACAU,YAAI,CAAC5pC,SAAL,CAAekrC,eAAf,GAAiC,UAASC,SAAT,EAAoBC,UAApB,EAAgC;AAC7DD,mBAAS,GAAGA,SAAS,CAACl5B,KAAV,IAAmBk5B,SAA/B;AACAC,oBAAU,GAAGA,UAAU,CAACn5B,KAAX,IAAoBm5B,UAAjC;AACA,cAAIC,WAAW,GAAG,KAAKC,mBAAvB;AACA,iBAAOD,WAAW,GAAGA,WAAW,CAACF,SAAD,EAAYC,UAAZ,CAAd,GACb,KAAKG,YAAL,CAAkBJ,SAAS,GAAG,GAAZ,GAAkBC,UAApC,KAAmD,CADxD;AAEH,SAND,CAzGyC,CAiHzC;AACA;;;AACAxB,YAAI,CAAC5pC,SAAL,CAAewrC,YAAf,GAA8B,UAASrM,IAAT,EAAe7+B,CAAf,EAAkBC,CAAlB,EAAqBkrC,QAArB,EAA+BliC,OAA/B,EAAwCmiC,QAAxC,EAAkD;AAC5EprC,WAAC,GAAGA,CAAC,KAAKgS,SAAN,GAAkBhS,CAAlB,GAAsB,CAA1B;AACAC,WAAC,GAAGA,CAAC,KAAK+R,SAAN,GAAkB/R,CAAlB,GAAsB,CAA1B;AACAkrC,kBAAQ,GAAGA,QAAQ,KAAKn5B,SAAb,GAAyBm5B,QAAzB,GAAoC,EAA/C;AACAliC,iBAAO,GAAGA,OAAO,IAAI,EAArB;AACA,cAAIoiC,OAAO,GAAGpiC,OAAO,CAACoiC,OAAR,KAAoBr5B,SAApB,GAAgC,IAAhC,GAAuC/I,OAAO,CAACoiC,OAA7D;AACA,cAAIC,SAAS,GAAG,IAAI,KAAKpB,UAAT,GAAsBiB,QAAtC;AACA,cAAI/f,MAAM,GAAG,KAAKqf,cAAL,CAAoB5L,IAApB,CAAb;;AACA,eAAK,IAAIrhC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,MAAM,CAACxtB,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI4yB,KAAK,GAAGhF,MAAM,CAAC5tB,CAAD,CAAlB;AACA4tC,oBAAQ,CAAChb,KAAD,EAAQpwB,CAAR,EAAWC,CAAX,EAAckrC,QAAd,EAAwBliC,OAAxB,CAAR;;AACA,gBAAImnB,KAAK,CAACmb,YAAV,EAAwB;AACpBvrC,eAAC,IAAIowB,KAAK,CAACmb,YAAN,GAAqBD,SAA1B;AACH;;AAED,gBAAID,OAAO,IAAI7tC,CAAC,GAAG4tB,MAAM,CAACxtB,MAAP,GAAgB,CAAnC,EAAsC;AAClC,kBAAI4tC,YAAY,GAAG,KAAKZ,eAAL,CAAqBxa,KAArB,EAA4BhF,MAAM,CAAC5tB,CAAC,GAAG,CAAL,CAAlC,CAAnB;AACAwC,eAAC,IAAIwrC,YAAY,GAAGF,SAApB;AACH;AACJ;AACJ,SApBD,CAnHyC,CAyIzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAhC,YAAI,CAAC5pC,SAAL,CAAe+rC,OAAf,GAAyB,UAAS5M,IAAT,EAAe7+B,CAAf,EAAkBC,CAAlB,EAAqBkrC,QAArB,EAA+BliC,OAA/B,EAAwC;AAC7D,cAAIyiC,QAAQ,GAAG,IAAIhqB,IAAI,CAACiqB,IAAT,EAAf;AACA,eAAKT,YAAL,CAAkBrM,IAAlB,EAAwB7+B,CAAxB,EAA2BC,CAA3B,EAA8BkrC,QAA9B,EAAwCliC,OAAxC,EAAiD,UAASmnB,KAAT,EAAgBwb,EAAhB,EAAoBC,EAApB,EAAwBC,SAAxB,EAAmC;AAChF,gBAAIC,SAAS,GAAG3b,KAAK,CAACqb,OAAN,CAAcG,EAAd,EAAkBC,EAAlB,EAAsBC,SAAtB,CAAhB;AACAJ,oBAAQ,CAACla,MAAT,CAAgBua,SAAhB;AACH,WAHD;AAKA,iBAAOL,QAAP;AACH,SARD,CAnJyC,CA6JzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACApC,YAAI,CAAC5pC,SAAL,CAAessC,IAAf,GAAsB,UAAS/pC,GAAT,EAAc48B,IAAd,EAAoB7+B,CAApB,EAAuBC,CAAvB,EAA0BkrC,QAA1B,EAAoCliC,OAApC,EAA6C;AAC/D,eAAKwiC,OAAL,CAAa5M,IAAb,EAAmB7+B,CAAnB,EAAsBC,CAAtB,EAAyBkrC,QAAzB,EAAmCliC,OAAnC,EAA4C+iC,IAA5C,CAAiD/pC,GAAjD;AACH,SAFD,CAtKyC,CA0KzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAqnC,YAAI,CAAC5pC,SAAL,CAAeusC,UAAf,GAA4B,UAAShqC,GAAT,EAAc48B,IAAd,EAAoB7+B,CAApB,EAAuBC,CAAvB,EAA0BkrC,QAA1B,EAAoCliC,OAApC,EAA6C;AACrE,eAAKiiC,YAAL,CAAkBrM,IAAlB,EAAwB7+B,CAAxB,EAA2BC,CAA3B,EAA8BkrC,QAA9B,EAAwCliC,OAAxC,EAAiD,UAASmnB,KAAT,EAAgBwb,EAAhB,EAAoBC,EAApB,EAAwBC,SAAxB,EAAmC;AAChF1b,iBAAK,CAAC6b,UAAN,CAAiBhqC,GAAjB,EAAsB2pC,EAAtB,EAA0BC,EAA1B,EAA8BC,SAA9B;AACH,WAFD;AAGH,SAJD,CApLyC,CA0LzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAxC,YAAI,CAAC5pC,SAAL,CAAewsC,WAAf,GAA6B,UAASjqC,GAAT,EAAc48B,IAAd,EAAoB7+B,CAApB,EAAuBC,CAAvB,EAA0BkrC,QAA1B,EAAoCliC,OAApC,EAA6C;AACtE,eAAKiiC,YAAL,CAAkBrM,IAAlB,EAAwB7+B,CAAxB,EAA2BC,CAA3B,EAA8BkrC,QAA9B,EAAwCliC,OAAxC,EAAiD,UAASmnB,KAAT,EAAgBwb,EAAhB,EAAoBC,EAApB,EAAwBC,SAAxB,EAAmC;AAChF1b,iBAAK,CAAC8b,WAAN,CAAkBjqC,GAAlB,EAAuB2pC,EAAvB,EAA2BC,EAA3B,EAA+BC,SAA/B;AACH,WAFD;AAGH,SAJD,CAtMyC,CA4MzC;;;AACAxC,YAAI,CAAC5pC,SAAL,CAAe0+B,QAAf,GAA0B,YAAW;AACjC,cAAI+N,QAAQ,GAAG,EAAf;;AACA,cAAIC,KAAK,GAAG,IAAZ;;AAEA,mBAAStlB,MAAT,CAAgBogB,SAAhB,EAA2B9f,OAA3B,EAAoC;AAChC,gBAAI,CAAC8f,SAAL,EAAgB;AACZiF,sBAAQ,CAACruC,IAAT,CAAcspB,OAAd;AACH;AACJ;;AAED,mBAASilB,qBAAT,CAA+BC,QAA/B,EAAyC;AACrCxlB,kBAAM,CAACslB,KAAK,CAACE,QAAD,CAAL,IAAmBF,KAAK,CAACE,QAAD,CAAL,CAAgBC,IAAhB,GAAuB3uC,MAAvB,GAAgC,CAApD,EAAuD,QAAQ0uC,QAAR,GAAmB,aAA1E,CAAN;AACH,WAZgC,CAcjC;;;AACAD,+BAAqB,CAAC,YAAD,CAArB;AACAA,+BAAqB,CAAC,YAAD,CAArB;AACAA,+BAAqB,CAAC,cAAD,CAArB;AACAA,+BAAqB,CAAC,WAAD,CAArB;AACAA,+BAAqB,CAAC,SAAD,CAArB,CAnBiC,CAqBjC;;AACAvlB,gBAAM,CAAC,KAAKojB,UAAL,GAAkB,CAAnB,EAAsB,0BAAtB,CAAN;AACH,SAvBD,CA7MyC,CAsOzC;AACA;;;AACAZ,YAAI,CAAC5pC,SAAL,CAAe8sC,QAAf,GAA0B,YAAW;AACjC,iBAAOpD,IAAI,CAACqD,WAAL,CAAiB,IAAjB,CAAP;AACH,SAFD;;AAIAnD,YAAI,CAAC5pC,SAAL,CAAegtC,QAAf,GAA0B,YAAW;AACjC,cAAIC,SAAS,GAAG,KAAKH,QAAL,EAAhB;AACA,cAAII,KAAK,GAAGD,SAAS,CAACE,MAAV,EAAZ;AACA,cAAIC,MAAM,GAAG,IAAIzvC,WAAJ,CAAgBuvC,KAAK,CAAChvC,MAAtB,CAAb;AACA,cAAImvC,QAAQ,GAAG,IAAIC,UAAJ,CAAeF,MAAf,CAAf;;AACA,eAAK,IAAItvC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGovC,KAAK,CAAChvC,MAA1B,EAAkCJ,CAAC,EAAnC,EAAuC;AACnCuvC,oBAAQ,CAACvvC,CAAD,CAAR,GAAcovC,KAAK,CAACpvC,CAAD,CAAnB;AACH;;AAED,iBAAOsvC,MAAP;AACH,SAVD,CA5OyC,CAwPzC;;;AACAxD,YAAI,CAAC5pC,SAAL,CAAeutC,QAAf,GAA0B,YAAW;AACjC,cAAIC,QAAQ,GAAG,KAAK3D,UAAL,CAAgBpqB,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,IAAqC,GAArC,GAA2C,KAAKqqB,SAAhD,GAA4D,MAA3E;AACA,cAAIsD,MAAM,GAAG,KAAKJ,QAAL,EAAb;AAEA9L,gBAAM,CAACuM,iBAAP,GAA2BvM,MAAM,CAACuM,iBAAP,IAA4BvM,MAAM,CAACwM,uBAA9D;AACAxM,gBAAM,CAACuM,iBAAP,CAAyBvM,MAAM,CAACyM,SAAhC,EAA2CP,MAAM,CAACQ,UAAlD,EAA8D,UAASpkB,EAAT,EAAa;AACvEA,cAAE,CAAChW,IAAH,CAAQq6B,OAAR,CAAgBL,QAAhB,EAA0B;AAACM,oBAAM,EAAE;AAAT,aAA1B,EAA0C,UAASC,SAAT,EAAoB;AAC1DA,uBAAS,CAACC,YAAV,CAAuB,UAASC,MAAT,EAAiB;AACpC,oBAAIC,QAAQ,GAAG,IAAIC,QAAJ,CAAaf,MAAb,CAAf;AACA,oBAAIgB,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACH,QAAD,CAAT,EAAqB;AAACvkC,sBAAI,EAAE;AAAP,iBAArB,CAAX;AACAskC,sBAAM,CAACK,KAAP,CAAaF,IAAb;AAEAH,sBAAM,CAACM,gBAAP,CAAwB,UAAxB,EAAoC,YAAW;AAC3C;AACAC,0BAAQ,CAACC,IAAT,GAAgBV,SAAS,CAACW,KAAV,EAAhB;AACH,iBAHD,EAGG,KAHH;AAIH,eATD;AAUH,aAXD;AAYH,WAbD,EAeA,UAASC,GAAT,EAAc;AACV,kBAAMA,GAAN;AACH,WAjBD;AAkBH,SAvBD;;AAyBAj8B,eAAO,CAACk3B,IAAR,GAAeA,IAAf;AAEC,OApRO,EAoRN;AAAC,sBAAa,CAAd;AAAgB,sBAAa,CAA7B;AAA+B,kBAAS,CAAxC;AAA0C,yBAAgB;AAA1D,OApRM,CA7QmyB;AAiiB1uB,SAAE,CAAC,UAASvsB,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpG;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,SAAD,CAAnB;;AACA,YAAIivB,IAAI,GAAGjvB,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAI2E,IAAI,GAAG3E,OAAO,CAAC,QAAD,CAAlB;;AAEA,iBAASuxB,iBAAT,CAA2Ble,KAA3B,EAAkC1O,IAAlC,EAAwC;AACpC,cAAI6sB,KAAK,GAAG7sB,IAAI,IAAI;AAAE2b,oBAAQ,EAAE;AAAZ,WAApB;;AACA,iBAAO;AACHmR,wBAAY,EAAE,IADX;AAGHzuC,eAAG,EAAE,YAAW;AACZ,kBAAI,OAAOwuC,KAAP,KAAiB,UAArB,EAAiC;AAC7BA,qBAAK,GAAGA,KAAK,EAAb;AACH;;AAED,qBAAOA,KAAP;AACH,aATE;AAWHnuC,eAAG,EAAE,UAAStB,CAAT,EAAY;AACbyvC,mBAAK,GAAGzvC,CAAR;AACH;AAbE,WAAP;AAeH,SA1BmG,CA4BpG;AACA;AACA;AACA;AACA;;;AACA,iBAAS2vC,KAAT,CAAexlC,OAAf,EAAwB;AACpB;AACA;AACA,eAAKylC,qBAAL,CAA2BzlC,OAA3B;AACH;;AAEDwlC,aAAK,CAAC/uC,SAAN,CAAgBgvC,qBAAhB,GAAwC,UAASzlC,OAAT,EAAkB;AACtD,eAAK0I,KAAL,GAAa1I,OAAO,CAAC0I,KAAR,IAAiB,CAA9B,CADsD,CAGtD;;AACA,eAAKtP,IAAL,GAAY4G,OAAO,CAAC5G,IAAR,IAAgB,IAA5B;AACA,eAAKgkC,OAAL,GAAep9B,OAAO,CAACo9B,OAAR,IAAmBr0B,SAAlC;AACA,eAAK41B,QAAL,GAAgB3+B,OAAO,CAAC2+B,QAAR,IAAoB3+B,OAAO,CAACo9B,OAAR,KAAoBr0B,SAAxC,GAAoD,CAAC/I,OAAO,CAACo9B,OAAT,CAApD,GAAwE,EAAxF,CANsD,CAQtD;AACA;;AACA,cAAIp9B,OAAO,CAAC0lC,IAAZ,EAAkB;AACd,iBAAKA,IAAL,GAAY1lC,OAAO,CAAC0lC,IAApB;AACH;;AAED,cAAI1lC,OAAO,CAAC2lC,IAAZ,EAAkB;AACd,iBAAKA,IAAL,GAAY3lC,OAAO,CAAC2lC,IAApB;AACH;;AAED,cAAI3lC,OAAO,CAAC4lC,IAAZ,EAAkB;AACd,iBAAKA,IAAL,GAAY5lC,OAAO,CAAC4lC,IAApB;AACH;;AAED,cAAI5lC,OAAO,CAAC6lC,IAAZ,EAAkB;AACd,iBAAKA,IAAL,GAAY7lC,OAAO,CAAC6lC,IAApB;AACH;;AAED,cAAI7lC,OAAO,CAACsiC,YAAZ,EAA0B;AACtB,iBAAKA,YAAL,GAAoBtiC,OAAO,CAACsiC,YAA5B;AACH,WA5BqD,CA8BtD;AACA;AACA;;;AACA9rC,gBAAM,CAACsvC,cAAP,CAAsB,IAAtB,EAA4B,MAA5B,EAAoCT,iBAAiB,CAAC,IAAD,EAAOrlC,OAAO,CAACyY,IAAf,CAArD;AACH,SAlCD;;AAoCA+sB,aAAK,CAAC/uC,SAAN,CAAgBupC,UAAhB,GAA6B,UAAS5C,OAAT,EAAkB;AAC3C,cAAI,KAAKuB,QAAL,CAAchqC,MAAd,KAAyB,CAA7B,EAAgC;AAC5B,iBAAKyoC,OAAL,GAAeA,OAAf;AACH;;AAED,eAAKuB,QAAL,CAAc9pC,IAAd,CAAmBuoC,OAAnB;AACH,SAND,CA3EoG,CAmFpG;AACA;AACA;AACA;AACA;;;AACAoI,aAAK,CAAC/uC,SAAN,CAAgB+rC,OAAhB,GAA0B,UAASzrC,CAAT,EAAYC,CAAZ,EAAekrC,QAAf,EAAyB;AAC/CnrC,WAAC,GAAGA,CAAC,KAAKgS,SAAN,GAAkBhS,CAAlB,GAAsB,CAA1B;AACAC,WAAC,GAAGA,CAAC,KAAK+R,SAAN,GAAkB/R,CAAlB,GAAsB,CAA1B;AACAkrC,kBAAQ,GAAGA,QAAQ,KAAKn5B,SAAb,GAAyBm5B,QAAzB,GAAoC,EAA/C;AACA,cAAIrrC,KAAK,GAAG,IAAI,KAAK4hB,IAAL,CAAUwoB,UAAd,GAA2BiB,QAAvC;AACA,cAAIrsC,CAAC,GAAG,IAAI4iB,IAAI,CAACiqB,IAAT,EAAR;AACA,cAAItO,QAAQ,GAAG,KAAK3b,IAAL,CAAU2b,QAAzB;;AACA,eAAK,IAAI7/B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6/B,QAAQ,CAACz/B,MAA7B,EAAqCJ,CAAC,IAAI,CAA1C,EAA6C;AACzC,gBAAIwxC,GAAG,GAAG3R,QAAQ,CAAC7/B,CAAD,CAAlB;;AACA,gBAAIwxC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClBvK,eAAC,CAACsoC,MAAF,CAASpnC,CAAC,GAAIgvC,GAAG,CAAChvC,CAAJ,GAAQF,KAAtB,EAA8BG,CAAC,GAAI,CAAC+uC,GAAG,CAAC/uC,CAAL,GAASH,KAA5C;AACH,aAFD,MAEO,IAAIkvC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBvK,eAAC,CAACuoC,MAAF,CAASrnC,CAAC,GAAIgvC,GAAG,CAAChvC,CAAJ,GAAQF,KAAtB,EAA8BG,CAAC,GAAI,CAAC+uC,GAAG,CAAC/uC,CAAL,GAASH,KAA5C;AACH,aAFM,MAEA,IAAIkvC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBvK,eAAC,CAACmwC,gBAAF,CAAmBjvC,CAAC,GAAIgvC,GAAG,CAACrsC,EAAJ,GAAS7C,KAAjC,EAAyCG,CAAC,GAAI,CAAC+uC,GAAG,CAACxrB,EAAL,GAAU1jB,KAAxD,EACmBE,CAAC,GAAIgvC,GAAG,CAAChvC,CAAJ,GAAQF,KADhC,EACwCG,CAAC,GAAI,CAAC+uC,GAAG,CAAC/uC,CAAL,GAASH,KADtD;AAEH,aAHM,MAGA,IAAIkvC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBvK,eAAC,CAACowC,OAAF,CAAUlvC,CAAC,GAAIgvC,GAAG,CAACrsC,EAAJ,GAAS7C,KAAxB,EAAgCG,CAAC,GAAI,CAAC+uC,GAAG,CAACxrB,EAAL,GAAU1jB,KAA/C,EACUE,CAAC,GAAIgvC,GAAG,CAAC3rB,EAAJ,GAASvjB,KADxB,EACgCG,CAAC,GAAI,CAAC+uC,GAAG,CAACvrB,EAAL,GAAU3jB,KAD/C,EAEUE,CAAC,GAAIgvC,GAAG,CAAChvC,CAAJ,GAAQF,KAFvB,EAE+BG,CAAC,GAAI,CAAC+uC,GAAG,CAAC/uC,CAAL,GAASH,KAF7C;AAGH,aAJM,MAIA,IAAIkvC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBvK,eAAC,CAACqwC,SAAF;AACH;AACJ;;AAED,iBAAOrwC,CAAP;AACH,SA1BD,CAxFoG,CAoHpG;AACA;AACA;;;AACA2vC,aAAK,CAAC/uC,SAAN,CAAgB0vC,WAAhB,GAA8B,YAAW;AACrC,cAAI,KAAKp+B,MAAL,KAAgBgB,SAApB,EAA+B;AAC3B,mBAAO,EAAP;AACH;;AAED,cAAIq9B,QAAQ,GAAG,EAAf;AACA,cAAIC,cAAc,GAAG,EAArB;;AACA,eAAK,IAAI9xC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKwT,MAAL,CAAYpT,MAAhC,EAAwCJ,CAAC,IAAI,CAA7C,EAAgD;AAC5C,gBAAI+xC,EAAE,GAAG,KAAKv+B,MAAL,CAAYxT,CAAZ,CAAT;AACA8xC,0BAAc,CAACxxC,IAAf,CAAoByxC,EAApB;;AACA,gBAAIA,EAAE,CAACC,kBAAP,EAA2B;AACvBH,sBAAQ,CAACvxC,IAAT,CAAcwxC,cAAd;AACAA,4BAAc,GAAG,EAAjB;AACH;AACJ;;AAEDld,eAAK,CAAC6U,QAAN,CAAeqI,cAAc,CAAC1xC,MAAf,KAA0B,CAAzC,EAA4C,qDAA5C;AACA,iBAAOyxC,QAAP;AACH,SAlBD,CAvHoG,CA2IpG;;;AACAZ,aAAK,CAAC/uC,SAAN,CAAgB+vC,UAAhB,GAA6B,YAAW;AACpC,cAAIpS,QAAQ,GAAG,KAAK3b,IAAL,CAAU2b,QAAzB;AACA,cAAIqS,OAAO,GAAG,EAAd;AACA,cAAIC,OAAO,GAAG,EAAd;;AACA,eAAK,IAAInyC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6/B,QAAQ,CAACz/B,MAA7B,EAAqCJ,CAAC,IAAI,CAA1C,EAA6C;AACzC,gBAAIwxC,GAAG,GAAG3R,QAAQ,CAAC7/B,CAAD,CAAlB;;AACA,gBAAIwxC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClBqmC,qBAAO,CAAC5xC,IAAR,CAAakxC,GAAG,CAAChvC,CAAjB;AACA2vC,qBAAO,CAAC7xC,IAAR,CAAakxC,GAAG,CAAC/uC,CAAjB;AACH;;AAED,gBAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAb,IAAoB2lC,GAAG,CAAC3lC,IAAJ,KAAa,GAArC,EAA0C;AACtCqmC,qBAAO,CAAC5xC,IAAR,CAAakxC,GAAG,CAACrsC,EAAjB;AACAgtC,qBAAO,CAAC7xC,IAAR,CAAakxC,GAAG,CAACxrB,EAAjB;AACH;;AAED,gBAAIwrB,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClBqmC,qBAAO,CAAC5xC,IAAR,CAAakxC,GAAG,CAAC3rB,EAAjB;AACAssB,qBAAO,CAAC7xC,IAAR,CAAakxC,GAAG,CAACvrB,EAAjB;AACH;AACJ;;AAED,cAAImsB,OAAO,GAAG;AACVjB,gBAAI,EAAExyC,IAAI,CAACqM,GAAL,CAAS6qB,KAAT,CAAe,IAAf,EAAqBqc,OAArB,CADI;AAEVd,gBAAI,EAAEzyC,IAAI,CAACqM,GAAL,CAAS6qB,KAAT,CAAe,IAAf,EAAqBsc,OAArB,CAFI;AAGVd,gBAAI,EAAE1yC,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,IAAf,EAAqBqc,OAArB,CAHI;AAIVZ,gBAAI,EAAE3yC,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,IAAf,EAAqBsc,OAArB,CAJI;AAKVE,2BAAe,EAAE;AALP,WAAd;AAOAD,iBAAO,CAACE,gBAAR,GAA2B,KAAKvE,YAAL,GAAoBqE,OAAO,CAACC,eAA5B,IAA+CD,OAAO,CAACf,IAAR,GAAee,OAAO,CAACjB,IAAtE,CAA3B;AACA,iBAAOiB,OAAP;AACH,SA/BD,CA5IoG,CA6KpG;AACA;AACA;AACA;AACA;AACA;;;AACAnB,aAAK,CAAC/uC,SAAN,CAAgBssC,IAAhB,GAAuB,UAAS/pC,GAAT,EAAcjC,CAAd,EAAiBC,CAAjB,EAAoBkrC,QAApB,EAA8B;AACjD,eAAKM,OAAL,CAAazrC,CAAb,EAAgBC,CAAhB,EAAmBkrC,QAAnB,EAA6Ba,IAA7B,CAAkC/pC,GAAlC;AACH,SAFD,CAnLoG,CAuLpG;AACA;AACA;AACA;AACA;AACA;AACA;;;AACAwsC,aAAK,CAAC/uC,SAAN,CAAgBusC,UAAhB,GAA6B,UAAShqC,GAAT,EAAcjC,CAAd,EAAiBC,CAAjB,EAAoBkrC,QAApB,EAA8B;AAEvD,mBAAS4E,WAAT,CAAqBtgC,CAArB,EAAwBzP,CAAxB,EAA2BC,CAA3B,EAA8BH,KAA9B,EAAqC;AACjC,gBAAIkwC,KAAK,GAAG7zC,IAAI,CAACssB,EAAL,GAAU,CAAtB;AACAxmB,eAAG,CAACklC,SAAJ;;AACA,iBAAK,IAAI5oC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkR,CAAC,CAAC7R,MAAtB,EAA8BW,CAAC,IAAI,CAAnC,EAAsC;AAClC0D,iBAAG,CAACmlC,MAAJ,CAAWpnC,CAAC,GAAIyP,CAAC,CAAClR,CAAD,CAAD,CAAKyB,CAAL,GAASF,KAAzB,EAAiCG,CAAC,GAAIwP,CAAC,CAAClR,CAAD,CAAD,CAAK0B,CAAL,GAASH,KAA/C;AACAmC,iBAAG,CAACkW,GAAJ,CAAQnY,CAAC,GAAIyP,CAAC,CAAClR,CAAD,CAAD,CAAKyB,CAAL,GAASF,KAAtB,EAA8BG,CAAC,GAAIwP,CAAC,CAAClR,CAAD,CAAD,CAAK0B,CAAL,GAASH,KAA5C,EAAoD,CAApD,EAAuD,CAAvD,EAA0DkwC,KAA1D,EAAiE,KAAjE;AACH;;AAED/tC,eAAG,CAACktC,SAAJ;AACAltC,eAAG,CAACu+B,IAAJ;AACH;;AAEDxgC,WAAC,GAAGA,CAAC,KAAKgS,SAAN,GAAkBhS,CAAlB,GAAsB,CAA1B;AACAC,WAAC,GAAGA,CAAC,KAAK+R,SAAN,GAAkB/R,CAAlB,GAAsB,CAA1B;AACAkrC,kBAAQ,GAAGA,QAAQ,KAAKn5B,SAAb,GAAyBm5B,QAAzB,GAAoC,EAA/C;AACA,cAAIrrC,KAAK,GAAG,IAAI,KAAK4hB,IAAL,CAAUwoB,UAAd,GAA2BiB,QAAvC;AAEA,cAAI8E,WAAW,GAAG,EAAlB;AACA,cAAIC,UAAU,GAAG,EAAjB;AACA,cAAIxuB,IAAI,GAAG,KAAKA,IAAhB;;AACA,eAAK,IAAIlkB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkkB,IAAI,CAAC2b,QAAL,CAAcz/B,MAAlC,EAA0CJ,CAAC,IAAI,CAA/C,EAAkD;AAC9C,gBAAIwxC,GAAG,GAAGttB,IAAI,CAAC2b,QAAL,CAAc7/B,CAAd,CAAV;;AACA,gBAAIwxC,GAAG,CAAChvC,CAAJ,KAAUgS,SAAd,EAAyB;AACrBi+B,yBAAW,CAACnyC,IAAZ,CAAiB;AAACkC,iBAAC,EAAEgvC,GAAG,CAAChvC,CAAR;AAAWC,iBAAC,EAAE,CAAC+uC,GAAG,CAAC/uC;AAAnB,eAAjB;AACH;;AAED,gBAAI+uC,GAAG,CAACrsC,EAAJ,KAAWqP,SAAf,EAA0B;AACtBk+B,wBAAU,CAACpyC,IAAX,CAAgB;AAACkC,iBAAC,EAAEgvC,GAAG,CAACrsC,EAAR;AAAY1C,iBAAC,EAAE,CAAC+uC,GAAG,CAACxrB;AAApB,eAAhB;AACH;;AAED,gBAAIwrB,GAAG,CAAC3rB,EAAJ,KAAWrR,SAAf,EAA0B;AACtBk+B,wBAAU,CAACpyC,IAAX,CAAgB;AAACkC,iBAAC,EAAEgvC,GAAG,CAAC3rB,EAAR;AAAYpjB,iBAAC,EAAE,CAAC+uC,GAAG,CAACvrB;AAApB,eAAhB;AACH;AACJ;;AAEDxhB,aAAG,CAACkuC,SAAJ,GAAgB,MAAhB;AACAJ,qBAAW,CAACE,WAAD,EAAcjwC,CAAd,EAAiBC,CAAjB,EAAoBH,KAApB,CAAX;AACAmC,aAAG,CAACkuC,SAAJ,GAAgB,KAAhB;AACAJ,qBAAW,CAACG,UAAD,EAAalwC,CAAb,EAAgBC,CAAhB,EAAmBH,KAAnB,CAAX;AACH,SAzCD,CA9LoG,CAyOpG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA2uC,aAAK,CAAC/uC,SAAN,CAAgBwsC,WAAhB,GAA8B,UAASjqC,GAAT,EAAcjC,CAAd,EAAiBC,CAAjB,EAAoBkrC,QAApB,EAA8B;AACxD,cAAIrrC,KAAJ;AACAE,WAAC,GAAGA,CAAC,KAAKgS,SAAN,GAAkBhS,CAAlB,GAAsB,CAA1B;AACAC,WAAC,GAAGA,CAAC,KAAK+R,SAAN,GAAkB/R,CAAlB,GAAsB,CAA1B;AACAkrC,kBAAQ,GAAGA,QAAQ,KAAKn5B,SAAb,GAAyBm5B,QAAzB,GAAoC,EAA/C;AACArrC,eAAK,GAAG,IAAI,KAAK4hB,IAAL,CAAUwoB,UAAd,GAA2BiB,QAAnC;AACAlpC,aAAG,CAACmuC,SAAJ,GAAgB,CAAhB,CANwD,CAQxD;;AACAnuC,aAAG,CAACouC,WAAJ,GAAkB,OAAlB;AACArE,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAejC,CAAf,EAAkB,CAAC,KAAnB,EAA0BA,CAA1B,EAA6B,KAA7B;AACAgsC,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAe,CAAC,KAAhB,EAAuBhC,CAAvB,EAA0B,KAA1B,EAAiCA,CAAjC,EAXwD,CAaxD;AACA;;AACA,cAAI0uC,IAAI,GAAG,KAAKA,IAAL,IAAa,CAAxB;AACA,cAAIC,IAAI,GAAG,KAAKA,IAAL,IAAa,CAAxB;AACA,cAAIC,IAAI,GAAG,KAAKA,IAAL,IAAa,CAAxB;AACA,cAAIC,IAAI,GAAG,KAAKA,IAAL,IAAa,CAAxB;AACA,cAAIvD,YAAY,GAAG,KAAKA,YAAL,IAAqB,CAAxC,CAnBwD,CAqBxD;;AACAtpC,aAAG,CAACouC,WAAJ,GAAkB,MAAlB;AACArE,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAejC,CAAC,GAAI2uC,IAAI,GAAG7uC,KAA3B,EAAmC,CAAC,KAApC,EAA2CE,CAAC,GAAI2uC,IAAI,GAAG7uC,KAAvD,EAA+D,KAA/D;AACAksC,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAejC,CAAC,GAAI6uC,IAAI,GAAG/uC,KAA3B,EAAmC,CAAC,KAApC,EAA2CE,CAAC,GAAI6uC,IAAI,GAAG/uC,KAAvD,EAA+D,KAA/D;AACAksC,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAe,CAAC,KAAhB,EAAuBhC,CAAC,GAAI,CAAC2uC,IAAD,GAAQ9uC,KAApC,EAA4C,KAA5C,EAAmDG,CAAC,GAAI,CAAC2uC,IAAD,GAAQ9uC,KAAhE;AACAksC,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAe,CAAC,KAAhB,EAAuBhC,CAAC,GAAI,CAAC6uC,IAAD,GAAQhvC,KAApC,EAA4C,KAA5C,EAAmDG,CAAC,GAAI,CAAC6uC,IAAD,GAAQhvC,KAAhE,EA1BwD,CA4BxD;;AACAmC,aAAG,CAACouC,WAAJ,GAAkB,OAAlB;AACArE,cAAI,CAAC/hB,IAAL,CAAUhoB,GAAV,EAAejC,CAAC,GAAIurC,YAAY,GAAGzrC,KAAnC,EAA2C,CAAC,KAA5C,EAAmDE,CAAC,GAAIurC,YAAY,GAAGzrC,KAAvE,EAA+E,KAA/E;AACH,SA/BD;;AAiCAsS,eAAO,CAACq8B,KAAR,GAAgBA,KAAhB;AAEC,OArRkE,EAqRjE;AAAC,mBAAU,CAAX;AAAa,kBAAS,CAAtB;AAAwB,kBAAS;AAAjC,OArRiE,CAjiBwuB;AAszBpwB,SAAE,CAAC,UAAS1xB,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAC1E;AAEA;;AAEA,YAAIk+B,MAAM,GAAGvzB,OAAO,CAAC,SAAD,CAApB,CAL0E,CAO1E;AACA;AACA;;;AACA,iBAASutB,QAAT,CAAkBnE,IAAlB,EAAwB/a,MAAxB,EAAgC;AAC5B,eAAK+a,IAAL,GAAYA,IAAZ;AACA,eAAK/a,MAAL,GAAc,EAAd;;AACA,cAAI7tB,KAAK,CAACgzC,OAAN,CAAcnlB,MAAd,CAAJ,EAA2B;AACvB,iBAAK,IAAI5tB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,MAAM,CAACxtB,MAA3B,EAAmCJ,CAAC,EAApC,EAAwC;AACpC,mBAAK4tB,MAAL,CAAY5tB,CAAZ,IAAiB4tB,MAAM,CAAC5tB,CAAD,CAAvB;AACH;AACJ;;AAED,eAAKI,MAAL,GAAewtB,MAAM,IAAIA,MAAM,CAACxtB,MAAlB,IAA6B,CAA3C;AACH;;AAED0sC,gBAAQ,CAAC5qC,SAAT,CAAmBK,GAAnB,GAAyB,UAAS4R,KAAT,EAAgB;AACrC,cAAI,OAAO,KAAKyZ,MAAL,CAAYzZ,KAAZ,CAAP,KAA8B,UAAlC,EAA8C;AAC1C,iBAAKyZ,MAAL,CAAYzZ,KAAZ,IAAqB,KAAKyZ,MAAL,CAAYzZ,KAAZ,GAArB;AACH;;AAED,iBAAO,KAAKyZ,MAAL,CAAYzZ,KAAZ,CAAP;AACH,SAND;;AAQA24B,gBAAQ,CAAC5qC,SAAT,CAAmB5B,IAAnB,GAA0B,UAAS6T,KAAT,EAAgB6+B,MAAhB,EAAwB;AAC9C,eAAKplB,MAAL,CAAYzZ,KAAZ,IAAqB6+B,MAArB;AACA,eAAK5yC,MAAL;AACH,SAHD;;AAKA,iBAAS6yC,WAAT,CAAqBtK,IAArB,EAA2Bx0B,KAA3B,EAAkC;AAC9B,iBAAO,IAAI2+B,MAAM,CAAC7B,KAAX,CAAiB;AAAC98B,iBAAK,EAAEA,KAAR;AAAew0B,gBAAI,EAAEA;AAArB,WAAjB,CAAP;AACH;AAED;AACA;AACA;AACA;AACA;;;AAEA,iBAASuK,cAAT,CAAwBvK,IAAxB,EAA8Bx0B,KAA9B,EAAqCg/B,UAArC,EAAiDnuC,IAAjD,EAAuD4zB,QAAvD,EAAiEwa,SAAjE,EAA4E;AACxE,iBAAO,YAAW;AACd,gBAAIxgB,KAAK,GAAG,IAAIkgB,MAAM,CAAC7B,KAAX,CAAiB;AAAC98B,mBAAK,EAAEA,KAAR;AAAew0B,kBAAI,EAAEA;AAArB,aAAjB,CAAZ;;AAEA/V,iBAAK,CAAC1O,IAAN,GAAa,YAAW;AACpBivB,wBAAU,CAACvgB,KAAD,EAAQ5tB,IAAR,EAAc4zB,QAAd,CAAV;AACA,kBAAI1U,IAAI,GAAGkvB,SAAS,CAACzK,IAAI,CAAC/a,MAAN,EAAcgF,KAAd,CAApB;AACA1O,kBAAI,CAACwoB,UAAL,GAAkB/D,IAAI,CAAC+D,UAAvB;AACA,qBAAOxoB,IAAP;AACH,aALD;;AAOA,mBAAO0O,KAAP;AACH,WAXD;AAYH;;AAED,iBAASygB,cAAT,CAAwB1K,IAAxB,EAA8Bx0B,KAA9B,EAAqCm/B,kBAArC,EAAyDC,UAAzD,EAAqE;AACjE,iBAAO,YAAW;AACd,gBAAI3gB,KAAK,GAAG,IAAIkgB,MAAM,CAAC7B,KAAX,CAAiB;AAAC98B,mBAAK,EAAEA,KAAR;AAAew0B,kBAAI,EAAEA;AAArB,aAAjB,CAAZ;;AAEA/V,iBAAK,CAAC1O,IAAN,GAAa,YAAW;AACpB,kBAAIA,IAAI,GAAGovB,kBAAkB,CAAC3K,IAAD,EAAO/V,KAAP,EAAc2gB,UAAd,CAA7B;AACArvB,kBAAI,CAACwoB,UAAL,GAAkB/D,IAAI,CAAC+D,UAAvB;AACA,qBAAOxoB,IAAP;AACH,aAJD;;AAMA,mBAAO0O,KAAP;AACH,WAVD;AAWH;;AAEDhe,eAAO,CAACk4B,QAAR,GAAmBA,QAAnB;AACAl4B,eAAO,CAACq+B,WAAR,GAAsBA,WAAtB;AACAr+B,eAAO,CAACs+B,cAAR,GAAyBA,cAAzB;AACAt+B,eAAO,CAACy+B,cAAR,GAAyBA,cAAzB;AAEC,OA/EwC,EA+EvC;AAAC,mBAAU;AAAX,OA/EuC,CAtzBkwB;AAq4B1xB,SAAE,CAAC,UAAS9zB,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpD;AACA;AACA;AACA;;AAEA;AAEA;;AAEA,YAAI61B,QAAQ,GAAGlrB,OAAO,CAAC,YAAD,CAAtB;;AACA,YAAIi0B,KAAK,GAAGj0B,OAAO,CAAC,QAAD,CAAnB;;AACA,YAAIqT,KAAK,GAAGrT,OAAO,CAAC,SAAD,CAAnB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,SAAD,CAAnB;;AACA,YAAI2E,IAAI,GAAG3E,OAAO,CAAC,QAAD,CAAlB;;AAEA,YAAI+qB,IAAI,GAAG/qB,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIm0B,GAAG,GAAGn0B,OAAO,CAAC,cAAD,CAAjB;;AACA,YAAIo0B,IAAI,GAAGp0B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIq0B,IAAI,GAAGr0B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIs0B,IAAI,GAAGt0B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIu0B,IAAI,GAAGv0B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIw0B,IAAI,GAAGx0B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAIy0B,IAAI,GAAGz0B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAI00B,IAAI,GAAG10B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAI20B,IAAI,GAAG30B,OAAO,CAAC,eAAD,CAAlB;;AACA,YAAI40B,KAAK,GAAG50B,OAAO,CAAC,eAAD,CAAnB;;AACA,YAAI60B,GAAG,GAAG70B,OAAO,CAAC,cAAD,CAAjB;;AACA,YAAIsrB,IAAI,GAAGtrB,OAAO,CAAC,eAAD,CAAlB,CA5BoD,CA8BpD;AAEA;;;AACA,iBAAS80B,aAAT,CAAuB/E,MAAvB,EAA+B;AAC3B,cAAIgF,WAAW,GAAG,IAAIz0C,WAAJ,CAAgByvC,MAAM,CAAClvC,MAAvB,CAAlB;AACA,cAAI4E,IAAI,GAAG,IAAIwqC,UAAJ,CAAe8E,WAAf,CAAX;;AACA,eAAK,IAAIt0C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsvC,MAAM,CAAClvC,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvCgF,gBAAI,CAAChF,CAAD,CAAJ,GAAUsvC,MAAM,CAACtvC,CAAD,CAAhB;AACH;;AAED,iBAAOs0C,WAAP;AACH;;AAED,iBAASC,YAAT,CAAsBrwB,IAAtB,EAA4B0pB,QAA5B,EAAsC;AAClC,cAAIliB,EAAE,GAAGnM,OAAO,CAAC,IAAD,CAAhB;;AACAmM,YAAE,CAACwB,QAAH,CAAYhJ,IAAZ,EAAkB,UAAS2sB,GAAT,EAAcvB,MAAd,EAAsB;AACpC,gBAAIuB,GAAJ,EAAS;AACL,qBAAOjD,QAAQ,CAACiD,GAAG,CAACjnB,OAAL,CAAf;AACH;;AAEDgkB,oBAAQ,CAAC,IAAD,EAAOyG,aAAa,CAAC/E,MAAD,CAApB,CAAR;AACH,WAND;AAOH;;AAED,iBAASkF,WAAT,CAAqBC,GAArB,EAA0B7G,QAA1B,EAAoC;AAChC,cAAI8G,OAAO,GAAG,IAAIC,cAAJ,EAAd;AACAD,iBAAO,CAACE,IAAR,CAAa,KAAb,EAAoBH,GAApB,EAAyB,IAAzB;AACAC,iBAAO,CAACG,YAAR,GAAuB,aAAvB;;AACAH,iBAAO,CAACI,MAAR,GAAiB,YAAW;AACxB,gBAAIJ,OAAO,CAACK,MAAR,KAAmB,GAAvB,EAA4B;AACxB,qBAAOnH,QAAQ,CAAC,+BAA+B8G,OAAO,CAACM,UAAxC,CAAf;AACH;;AAED,mBAAOpH,QAAQ,CAAC,IAAD,EAAO8G,OAAO,CAACjtC,QAAf,CAAf;AACH,WAND;;AAQAitC,iBAAO,CAACO,IAAR;AACH,SAnEmD,CAqEpD;AAEA;AACA;;;AACA,iBAASC,WAAT,CAAqB5F,MAArB,EAA6B;AACzB,cAAI6F,gBAAJ;AACA,cAAIC,UAAJ;AACA,cAAIC,UAAJ;AACA,cAAIC,UAAJ;AACA,cAAIC,SAAJ;AACA,cAAIC,UAAJ;AACA,cAAIC,UAAJ,CAPyB,CASzB;AACA;AACA;;AAEA,cAAI9M,IAAI,GAAG,IAAI6K,KAAK,CAAC1H,IAAV,EAAX;AACA,cAAI9mC,IAAI,GAAG,IAAIqrC,QAAJ,CAAaf,MAAb,EAAqB,CAArB,CAAX;AAEA,cAAIxE,OAAO,GAAG2I,KAAK,CAACiC,QAAN,CAAe1wC,IAAf,EAAqB,CAArB,CAAd;;AACA,cAAI8lC,OAAO,KAAK,GAAhB,EAAqB;AACjBnC,gBAAI,CAACgN,cAAL,GAAsB,UAAtB;AACH,WAFD,MAEO;AACH7K,mBAAO,GAAG2I,KAAK,CAACmC,MAAN,CAAa5wC,IAAb,EAAmB,CAAnB,CAAV;;AACA,gBAAI8lC,OAAO,KAAK,MAAhB,EAAwB;AACpBnC,kBAAI,CAACgN,cAAL,GAAsB,KAAtB;AACH,aAFD,MAEO;AACH,oBAAM,IAAI7rB,KAAJ,CAAU,kCAAkCghB,OAA5C,CAAN;AACH;AACJ;;AAED,cAAI+K,SAAS,GAAGpC,KAAK,CAACqC,SAAN,CAAgB9wC,IAAhB,EAAsB,CAAtB,CAAhB,CA5ByB,CA8BzB;;AACA,cAAI1D,CAAC,GAAG,EAAR;;AACA,eAAK,IAAItB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG61C,SAApB,EAA+B71C,CAAC,IAAI,CAApC,EAAuC;AACnC,gBAAI+1C,GAAG,GAAGtC,KAAK,CAACmC,MAAN,CAAa5wC,IAAb,EAAmB1D,CAAnB,CAAV;AACA,gBAAIynB,MAAM,GAAG0qB,KAAK,CAACuC,QAAN,CAAehxC,IAAf,EAAqB1D,CAAC,GAAG,CAAzB,CAAb;;AACA,oBAAQy0C,GAAR;AACA,mBAAK,MAAL;AACIpN,oBAAI,CAAC2C,MAAL,CAAYhB,IAAZ,GAAmBA,IAAI,CAACmJ,KAAL,CAAWzuC,IAAX,EAAiB+jB,MAAjB,CAAnB;AACA4f,oBAAI,CAAC8B,QAAL,GAAgB,IAAIA,QAAQ,CAACJ,YAAb,CAA0B1B,IAAI,CAAC2C,MAAL,CAAYhB,IAAtC,CAAhB;AACA;;AACJ,mBAAK,MAAL;AACI3B,oBAAI,CAAC2C,MAAL,CAAYuI,IAAZ,GAAmBA,IAAI,CAACJ,KAAL,CAAWzuC,IAAX,EAAiB+jB,MAAjB,CAAnB;AACA4f,oBAAI,CAAC+D,UAAL,GAAkB/D,IAAI,CAAC2C,MAAL,CAAYuI,IAAZ,CAAiBnH,UAAnC;AACAyI,gCAAgB,GAAGxM,IAAI,CAAC2C,MAAL,CAAYuI,IAAZ,CAAiBsB,gBAApC;AACA;;AACJ,mBAAK,MAAL;AACIxM,oBAAI,CAAC2C,MAAL,CAAYwI,IAAZ,GAAmBA,IAAI,CAACL,KAAL,CAAWzuC,IAAX,EAAiB+jB,MAAjB,CAAnB;AACA4f,oBAAI,CAACgE,QAAL,GAAgBhE,IAAI,CAAC2C,MAAL,CAAYwI,IAAZ,CAAiBnH,QAAjC;AACAhE,oBAAI,CAACiE,SAAL,GAAiBjE,IAAI,CAAC2C,MAAL,CAAYwI,IAAZ,CAAiBlH,SAAlC;AACAjE,oBAAI,CAACsN,gBAAL,GAAwBtN,IAAI,CAAC2C,MAAL,CAAYwI,IAAZ,CAAiBmC,gBAAzC;AACA;;AACJ,mBAAK,MAAL;AACIb,0BAAU,GAAGrsB,MAAb;AACA;;AACJ,mBAAK,MAAL;AACI4f,oBAAI,CAAC2C,MAAL,CAAY4I,IAAZ,GAAmBA,IAAI,CAACT,KAAL,CAAWzuC,IAAX,EAAiB+jB,MAAjB,CAAnB;AACA4f,oBAAI,CAACuN,SAAL,GAAiBvN,IAAI,CAAC2C,MAAL,CAAY4I,IAAZ,CAAiBgC,SAAlC;AACA;;AACJ,mBAAK,MAAL;AACIvN,oBAAI,CAAC2C,MAAL,CAAYzmC,IAAZ,GAAmBsvC,KAAK,CAACV,KAAN,CAAYzuC,IAAZ,EAAkB+jB,MAAlB,CAAnB;AACA4f,oBAAI,CAACoD,UAAL,GAAkBpD,IAAI,CAAC2C,MAAL,CAAYzmC,IAAZ,CAAiBsxC,UAAnC;AACAxN,oBAAI,CAACqD,SAAL,GAAiBrD,IAAI,CAAC2C,MAAL,CAAYzmC,IAAZ,CAAiBuxC,aAAlC;AACA;;AACJ,mBAAK,MAAL;AACIzN,oBAAI,CAAC2C,MAAL,CAAY8I,GAAZ,GAAkBA,GAAG,CAACX,KAAJ,CAAUzuC,IAAV,EAAgB+jB,MAAhB,CAAlB;AACA;;AACJ,mBAAK,MAAL;AACI4f,oBAAI,CAAC2C,MAAL,CAAYT,IAAZ,GAAmBA,IAAI,CAAC4I,KAAL,CAAWzuC,IAAX,EAAiB+jB,MAAjB,CAAnB;AACA4f,oBAAI,CAACgD,UAAL,GAAkB,IAAIlB,QAAQ,CAACG,UAAb,CAAwBjC,IAAI,CAAC2C,MAAL,CAAYT,IAApC,CAAlB;AACA;;AACJ,mBAAK,MAAL;AACIwK,0BAAU,GAAGtsB,MAAb;AACA;;AACJ,mBAAK,MAAL;AACIusB,0BAAU,GAAGvsB,MAAb;AACA;;AACJ,mBAAK,MAAL;AACIwsB,yBAAS,GAAGxsB,MAAZ;AACA;;AACJ,mBAAK,MAAL;AACIysB,0BAAU,GAAGzsB,MAAb;AACA;;AACJ,mBAAK,MAAL;AACI0sB,0BAAU,GAAG1sB,MAAb;AACA;AAjDJ;;AAmDAznB,aAAC,IAAI,EAAL;AACH;;AAED,cAAI+zC,UAAU,IAAIC,UAAlB,EAA8B;AAC1B,gBAAIe,YAAY,GAAGlB,gBAAgB,KAAK,CAAxC;AACA,gBAAImB,SAAS,GAAGrC,IAAI,CAACR,KAAL,CAAWzuC,IAAX,EAAiBswC,UAAjB,EAA6B3M,IAAI,CAACuN,SAAlC,EAA6CG,YAA7C,CAAhB;AACA1N,gBAAI,CAAC/a,MAAL,GAAc+lB,IAAI,CAACF,KAAL,CAAWzuC,IAAX,EAAiBqwC,UAAjB,EAA6BiB,SAA7B,EAAwC3N,IAAxC,CAAd;AACAoL,gBAAI,CAACN,KAAL,CAAWzuC,IAAX,EAAiBowC,UAAjB,EAA6BzM,IAAI,CAACsN,gBAAlC,EAAoDtN,IAAI,CAACuN,SAAzD,EAAoEvN,IAAI,CAAC/a,MAAzE;AACA6c,oBAAQ,CAACY,aAAT,CAAuB1C,IAAvB;AACH,WAND,MAMO,IAAI4M,SAAJ,EAAe;AAClB7B,eAAG,CAACD,KAAJ,CAAUzuC,IAAV,EAAgBuwC,SAAhB,EAA2B5M,IAA3B;AACA8B,oBAAQ,CAACY,aAAT,CAAuB1C,IAAvB;AACH,WAHM,MAGA;AACH,kBAAM,IAAI7e,KAAJ,CAAU,iDAAV,CAAN;AACH;;AAED,cAAI0rB,UAAJ,EAAgB;AACZ7M,gBAAI,CAAC8E,YAAL,GAAoBuG,IAAI,CAACP,KAAL,CAAWzuC,IAAX,EAAiBwwC,UAAjB,CAApB;AACH,WAFD,MAEO;AACH7M,gBAAI,CAAC8E,YAAL,GAAoB,EAApB;AACH;;AAED,cAAIgI,UAAJ,EAAgB;AACZ7B,gBAAI,CAACH,KAAL,CAAWzuC,IAAX,EAAiBywC,UAAjB,EAA6B9M,IAA7B;AACH;;AAED,iBAAOA,IAAP;AACH,SA1LmD,CA4LpD;AACA;AACA;AACA;AACA;AACA;;;AACA,iBAASD,IAAT,CAAc+L,GAAd,EAAmB7G,QAAnB,EAA6B;AACzB,cAAI2I,MAAM,GAAG,OAAOnT,MAAP,KAAkB,WAA/B;AACA,cAAIoT,MAAM,GAAGD,MAAM,GAAGhC,YAAH,GAAkBC,WAArC;AACAgC,gBAAM,CAAC/B,GAAD,EAAM,UAAS5D,GAAT,EAAcyD,WAAd,EAA2B;AACnC,gBAAIzD,GAAJ,EAAS;AACL,qBAAOjD,QAAQ,CAACiD,GAAD,CAAf;AACH;;AAED,gBAAIlI,IAAI,GAAGuM,WAAW,CAACZ,WAAD,CAAtB;AACA,mBAAO1G,QAAQ,CAAC,IAAD,EAAOjF,IAAP,CAAf;AACH,WAPK,CAAN;AAQH,SA7MmD,CA+MpD;AACA;;;AACA,iBAAS8N,QAAT,CAAkBhC,GAAlB,EAAuB;AACnB,cAAI/oB,EAAE,GAAGnM,OAAO,CAAC,IAAD,CAAhB;;AACA,cAAI+vB,MAAM,GAAG5jB,EAAE,CAACgrB,YAAH,CAAgBjC,GAAhB,CAAb;AACA,iBAAOS,WAAW,CAACb,aAAa,CAAC/E,MAAD,CAAd,CAAlB;AACH;;AAED16B,eAAO,CAAC+hC,MAAR,GAAiBlD,KAAjB;AACA7+B,eAAO,CAACk3B,IAAR,GAAe0H,KAAK,CAAC1H,IAArB;AACAl3B,eAAO,CAACq8B,KAAR,GAAgBre,KAAK,CAACqe,KAAtB;AACAr8B,eAAO,CAACu5B,IAAR,GAAejqB,IAAI,CAACiqB,IAApB;AACAv5B,eAAO,CAAC6+B,KAAR,GAAgByB,WAAhB;AACAtgC,eAAO,CAAC8zB,IAAR,GAAeA,IAAf;AACA9zB,eAAO,CAAC6hC,QAAR,GAAmBA,QAAnB;AAEC,OA/NkB,EA+NjB;AAAC,sBAAa,CAAd;AAAgB,kBAAS,CAAzB;AAA2B,mBAAU,CAArC;AAAuC,mBAAU,CAAjD;AAAmD,kBAAS,CAA5D;AAA8D,wBAAe,EAA7E;AAAgF,yBAAgB,EAAhG;AAAmG,yBAAgB,EAAnH;AAAsH,yBAAgB,EAAtI;AAAyI,yBAAgB,EAAzJ;AAA4J,yBAAgB,EAA5K;AAA+K,yBAAgB,EAA/L;AAAkM,yBAAgB,EAAlN;AAAqN,yBAAgB,EAArO;AAAwO,yBAAgB,EAAxP;AAA2P,yBAAgB,EAA3Q;AAA8Q,wBAAe,EAA7R;AAAgS,yBAAgB,EAAhT;AAAmT,cAAKjiC;AAAxT,OA/NiB,CAr4BwxB;AAomCre,SAAE,CAAC,UAAS+K,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACzW;AAEA,qBAHyW,CAKzW;;AACAA,eAAO,CAACgiC,OAAR;AAAkB,mBAASA,OAAT,CAAiBxG,QAAjB,EAA2BrnB,MAA3B,EAAmC;AACjD,mBAAOqnB,QAAQ,CAACyG,QAAT,CAAkB9tB,MAAlB,CAAP;AACH;;AAFD,iBAA2B6tB,OAA3B;AAAA;;AAIAhiC,eAAO,CAACkiC,QAAR,GAAmBliC,OAAO,CAACgiC,OAA3B,CAVyW,CAYzW;AACA;;AACAhiC,eAAO,CAACkhC,SAAR,GAAoB,UAAS1F,QAAT,EAAmBrnB,MAAnB,EAA2B;AAC3C,iBAAOqnB,QAAQ,CAAC2G,SAAT,CAAmBhuB,MAAnB,EAA2B,KAA3B,CAAP;AACH,SAFD;;AAIAnU,eAAO,CAACoiC,SAAR,GAAoBpiC,OAAO,CAACkhC,SAA5B,CAlByW,CAoBzW;AACA;;AACAlhC,eAAO,CAACqiC,QAAR,GAAmB,UAAS7G,QAAT,EAAmBrnB,MAAnB,EAA2B;AAC1C,iBAAOqnB,QAAQ,CAAC8G,QAAT,CAAkBnuB,MAAlB,EAA0B,KAA1B,CAAP;AACH,SAFD,CAtByW,CA0BzW;AACA;;;AACAnU,eAAO,CAACohC,QAAR,GAAmB,UAAS5F,QAAT,EAAmBrnB,MAAnB,EAA2B;AAC1C,iBAAOqnB,QAAQ,CAAC+G,SAAT,CAAmBpuB,MAAnB,EAA2B,KAA3B,CAAP;AACH,SAFD,CA5ByW,CAgCzW;AACA;;;AACAnU,eAAO,CAAC8gC,QAAR,GAAmB,UAAStF,QAAT,EAAmBrnB,MAAnB,EAA2B;AAC1C,cAAIquB,OAAO,GAAGhH,QAAQ,CAAC8G,QAAT,CAAkBnuB,MAAlB,EAA0B,KAA1B,CAAd;AACA,cAAIE,QAAQ,GAAGmnB,QAAQ,CAAC2G,SAAT,CAAmBhuB,MAAM,GAAG,CAA5B,EAA+B,KAA/B,CAAf;AACA,iBAAOquB,OAAO,GAAGnuB,QAAQ,GAAG,KAA5B;AACH,SAJD,CAlCyW,CAwCzW;AACA;;;AACArU,eAAO,CAACghC,MAAR,GAAiB,UAASxF,QAAT,EAAmBrnB,MAAnB,EAA2B;AACxC,cAAIgtB,GAAG,GAAG,EAAV;;AACA,eAAK,IAAI/1C,CAAC,GAAG+oB,MAAb,EAAqB/oB,CAAC,GAAG+oB,MAAM,GAAG,CAAlC,EAAqC/oB,CAAC,IAAI,CAA1C,EAA6C;AACzC+1C,eAAG,IAAInrB,MAAM,CAACysB,YAAP,CAAoBjH,QAAQ,CAACkH,OAAT,CAAiBt3C,CAAjB,CAApB,CAAP;AACH;;AAED,iBAAO+1C,GAAP;AACH,SAPD,CA1CyW,CAmDzW;AACA;;;AACAnhC,eAAO,CAAC2iC,SAAR,GAAoB,UAASnH,QAAT,EAAmBrnB,MAAnB,EAA2ByuB,OAA3B,EAAoC;AACpD,cAAI34C,CAAC,GAAG,CAAR;;AACA,eAAK,IAAImB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGw3C,OAApB,EAA6Bx3C,CAAC,IAAI,CAAlC,EAAqC;AACjCnB,aAAC,KAAK,CAAN;AACAA,aAAC,IAAIuxC,QAAQ,CAACyG,QAAT,CAAkB9tB,MAAM,GAAG/oB,CAA3B,CAAL;AACH;;AAED,iBAAOnB,CAAP;AACH,SARD,CArDyW,CA+DzW;;;AACA+V,eAAO,CAAC6iC,QAAR,GAAmB,UAASrH,QAAT,EAAmBsH,WAAnB,EAAgCC,SAAhC,EAA2C;AAC1D,cAAIvI,KAAK,GAAG,EAAZ;;AACA,eAAK,IAAIpvC,CAAC,GAAG03C,WAAb,EAA0B13C,CAAC,GAAG23C,SAA9B,EAAyC33C,CAAC,IAAI,CAA9C,EAAiD;AAC7CovC,iBAAK,CAAC9uC,IAAN,CAAW8vC,QAAQ,CAACyG,QAAT,CAAkB72C,CAAlB,CAAX;AACH;;AAED,iBAAOovC,KAAP;AACH,SAPD,CAhEyW,CAyEzW;;;AACAx6B,eAAO,CAACgjC,aAAR,GAAwB,UAASxI,KAAT,EAAgB;AACpC,cAAIxR,CAAC,GAAG,EAAR;;AACA,eAAK,IAAI59B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGovC,KAAK,CAAChvC,MAA1B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0C;AACtC49B,aAAC,IAAIhT,MAAM,CAACysB,YAAP,CAAoBjI,KAAK,CAACpvC,CAAD,CAAzB,CAAL;AACH;;AAED,iBAAO49B,CAAP;AACH,SAPD;;AASA,YAAIia,WAAW,GAAG;AACd,kBAAM,CADQ;AAEdC,gBAAM,EAAE,CAFM;AAGd,mBAAO,CAHO;AAIdC,eAAK,EAAE,CAJO;AAKdC,eAAK,EAAE,CALO;AAMdC,sBAAY,EAAE,CANA;AAOdlC,aAAG,EAAE;AAPS,SAAlB,CAnFyW,CA6FzW;AACA;;AACA,iBAASmC,MAAT,CAAgBlzC,IAAhB,EAAsB+jB,MAAtB,EAA8B;AAC1B,eAAK/jB,IAAL,GAAYA,IAAZ;AACA,eAAK+jB,MAAL,GAAcA,MAAd;AACA,eAAKovB,cAAL,GAAsB,CAAtB;AACH;;AAEDD,cAAM,CAACh2C,SAAP,CAAiBk2C,SAAjB,GAA6B,YAAW;AACpC,cAAIv5C,CAAC,GAAG,KAAKmG,IAAL,CAAU6xC,QAAV,CAAmB,KAAK9tB,MAAL,GAAc,KAAKovB,cAAtC,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiBm2C,SAAjB,GAA6B,YAAW;AACpC,cAAIx5C,CAAC,GAAG,KAAKmG,IAAL,CAAUsyC,OAAV,CAAkB,KAAKvuB,MAAL,GAAc,KAAKovB,cAArC,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiBo2C,UAAjB,GAA8BJ,MAAM,CAACh2C,SAAP,CAAiBk2C,SAA/C;;AAEAF,cAAM,CAACh2C,SAAP,CAAiBq2C,WAAjB,GAA+B,YAAW;AACtC,cAAI15C,CAAC,GAAG,KAAKmG,IAAL,CAAU+xC,SAAV,CAAoB,KAAKhuB,MAAL,GAAc,KAAKovB,cAAvC,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiBs2C,WAAjB,GAA+BN,MAAM,CAACh2C,SAAP,CAAiBq2C,WAAhD;AACAL,cAAM,CAACh2C,SAAP,CAAiBu2C,QAAjB,GAA4BP,MAAM,CAACh2C,SAAP,CAAiBq2C,WAA7C;AACAL,cAAM,CAACh2C,SAAP,CAAiBw2C,aAAjB,GAAiCR,MAAM,CAACh2C,SAAP,CAAiBq2C,WAAlD;;AAEAL,cAAM,CAACh2C,SAAP,CAAiBy2C,UAAjB,GAA8B,YAAW;AACrC,cAAI95C,CAAC,GAAG,KAAKmG,IAAL,CAAUkyC,QAAV,CAAmB,KAAKnuB,MAAL,GAAc,KAAKovB,cAAtC,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiB02C,YAAjB,GAAgC,YAAW;AACvC,cAAI/5C,CAAC,GAAG,KAAKmG,IAAL,CAAUkyC,QAAV,CAAmB,KAAKnuB,MAAL,GAAc,KAAKovB,cAAtC,IAAwD,KAAhE;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiB22C,UAAjB,GAA8B,YAAW;AACrC,cAAIh6C,CAAC,GAAG+V,OAAO,CAACohC,QAAR,CAAiB,KAAKhxC,IAAtB,EAA4B,KAAK+jB,MAAL,GAAc,KAAKovB,cAA/C,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiB42C,UAAjB,GAA8B,YAAW;AACrC,cAAIj6C,CAAC,GAAG+V,OAAO,CAAC8gC,QAAR,CAAiB,KAAK1wC,IAAtB,EAA4B,KAAK+jB,MAAL,GAAc,KAAKovB,cAA/C,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiB62C,iBAAjB,GACAb,MAAM,CAACh2C,SAAP,CAAiB82C,eAAjB,GAAmC,UAAS3zB,KAAT,EAAgB;AAC/C,cAAI4zB,OAAO,GAAG,IAAIl5C,KAAJ,CAAUslB,KAAV,CAAd;AACA,cAAI+qB,QAAQ,GAAG,KAAKprC,IAApB;AACA,cAAI+jB,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKovB,cAAhC;;AACA,eAAK,IAAIn4C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqlB,KAApB,EAA2BrlB,CAAC,EAA5B,EAAgC;AAC5Bi5C,mBAAO,CAACj5C,CAAD,CAAP,GAAa4U,OAAO,CAACkhC,SAAR,CAAkB1F,QAAlB,EAA4BrnB,MAA5B,CAAb;AACAA,kBAAM,IAAI,CAAV;AACH;;AAED,eAAKovB,cAAL,IAAuB9yB,KAAK,GAAG,CAA/B;AACA,iBAAO4zB,OAAP;AACH,SAZD;;AAcAf,cAAM,CAACh2C,SAAP,CAAiBg3C,WAAjB,GAA+B,UAAS94C,MAAT,EAAiB;AAC5C,cAAIgwC,QAAQ,GAAG,KAAKprC,IAApB;AACA,cAAI+jB,MAAM,GAAG,KAAKA,MAAL,GAAc,KAAKovB,cAAhC;AACA,cAAIgB,MAAM,GAAG,EAAb;AACA,eAAKhB,cAAL,IAAuB/3C,MAAvB;;AACA,eAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,MAApB,EAA4BJ,CAAC,EAA7B,EAAiC;AAC7Bm5C,kBAAM,IAAIvuB,MAAM,CAACysB,YAAP,CAAoBjH,QAAQ,CAACyG,QAAT,CAAkB9tB,MAAM,GAAG/oB,CAA3B,CAApB,CAAV;AACH;;AAED,iBAAOm5C,MAAP;AACH,SAVD;;AAYAjB,cAAM,CAACh2C,SAAP,CAAiBk3C,QAAjB,GAA4B,YAAW;AACnC,iBAAO,KAAKF,WAAL,CAAiB,CAAjB,CAAP;AACH,SAFD,CA/KyW,CAmLzW;AACA;AACA;;;AACAhB,cAAM,CAACh2C,SAAP,CAAiBm3C,iBAAjB,GAAqC,YAAW;AAC5C,cAAIx6C,CAAC,GAAG+V,OAAO,CAACohC,QAAR,CAAiB,KAAKhxC,IAAtB,EAA4B,KAAK+jB,MAAL,GAAc,KAAKovB,cAAnB,GAAoC,CAAhE,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAP;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiB42C,UAAjB,GAA8B,YAAW;AACrC,cAAIj6C,CAAC,GAAG+V,OAAO,CAACohC,QAAR,CAAiB,KAAKhxC,IAAtB,EAA4B,KAAK+jB,MAAL,GAAc,KAAKovB,cAA/C,CAAR;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOt5C,CAAC,GAAG,KAAX;AACH,SAJD;;AAMAq5C,cAAM,CAACh2C,SAAP,CAAiBo3C,YAAjB,GAAgC,YAAW;AACvC,cAAIC,KAAK,GAAG3kC,OAAO,CAACkhC,SAAR,CAAkB,KAAK9wC,IAAvB,EAA6B,KAAK+jB,MAAL,GAAc,KAAKovB,cAAhD,CAAZ,CADuC,CAGvC;AACA;;AACA,cAAIqB,KAAK,GAAG5kC,OAAO,CAACkhC,SAAR,CAAkB,KAAK9wC,IAAvB,EAA6B,KAAK+jB,MAAL,GAAc,KAAKovB,cAAnB,GAAoC,CAAjE,CAAZ;AACA,eAAKA,cAAL,IAAuB,CAAvB;AACA,iBAAOoB,KAAK,GAAGC,KAAK,GAAG,MAAR,GAAiB,EAAhC;AACH,SARD;;AAUAtB,cAAM,CAACh2C,SAAP,CAAiBu3C,IAAjB,GAAwB,UAAS5tC,IAAT,EAAe6tC,MAAf,EAAuB;AAC3C,cAAIA,MAAM,KAAKllC,SAAf,EAA0B;AACtBklC,kBAAM,GAAG,CAAT;AACH;;AAED,eAAKvB,cAAL,IAAuBN,WAAW,CAAChsC,IAAD,CAAX,GAAoB6tC,MAA3C;AACH,SAND;;AAQA9kC,eAAO,CAACsjC,MAAR,GAAiBA,MAAjB;AAEC,OAtNuU,EAsNtU,EAtNsU,CApmCme;AA0zCryB,SAAE,CAAC,UAAS34B,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACzC;AAEA,qBAHyC,CAKzC;AACA;;AACA,iBAASu5B,IAAT,GAAgB;AACZ,eAAKtO,QAAL,GAAgB,EAAhB;AACA,eAAKmD,IAAL,GAAY,OAAZ;AACA,eAAK1iB,MAAL,GAAc,IAAd;AACA,eAAKq5B,WAAL,GAAmB,CAAnB;AACH;;AAEDxL,YAAI,CAACjsC,SAAL,CAAe0nC,MAAf,GAAwB,UAASpnC,CAAT,EAAYC,CAAZ,EAAe;AACnC,eAAKo9B,QAAL,CAAcv/B,IAAd,CAAmB;AACfuL,gBAAI,EAAE,GADS;AAEfrJ,aAAC,EAAEA,CAFY;AAGfC,aAAC,EAAEA;AAHY,WAAnB;AAKH,SAND;;AAQA0rC,YAAI,CAACjsC,SAAL,CAAe2nC,MAAf,GAAwB,UAASrnC,CAAT,EAAYC,CAAZ,EAAe;AACnC,eAAKo9B,QAAL,CAAcv/B,IAAd,CAAmB;AACfuL,gBAAI,EAAE,GADS;AAEfrJ,aAAC,EAAEA,CAFY;AAGfC,aAAC,EAAEA;AAHY,WAAnB;AAKH,SAND;;AAQA0rC,YAAI,CAACjsC,SAAL,CAAewvC,OAAf,GAAyBvD,IAAI,CAACjsC,SAAL,CAAe03C,aAAf,GAA+B,UAASz0C,EAAT,EAAa6gB,EAAb,EAAiBH,EAAjB,EAAqBI,EAArB,EAAyBzjB,CAAzB,EAA4BC,CAA5B,EAA+B;AACnF,eAAKo9B,QAAL,CAAcv/B,IAAd,CAAmB;AACfuL,gBAAI,EAAE,GADS;AAEf1G,cAAE,EAAEA,EAFW;AAGf6gB,cAAE,EAAEA,EAHW;AAIfH,cAAE,EAAEA,EAJW;AAKfI,cAAE,EAAEA,EALW;AAMfzjB,aAAC,EAAEA,CANY;AAOfC,aAAC,EAAEA;AAPY,WAAnB;AASH,SAVD;;AAYA0rC,YAAI,CAACjsC,SAAL,CAAe23C,MAAf,GAAwB1L,IAAI,CAACjsC,SAAL,CAAeuvC,gBAAf,GAAkC,UAAStsC,EAAT,EAAa6gB,EAAb,EAAiBxjB,CAAjB,EAAoBC,CAApB,EAAuB;AAC7E,eAAKo9B,QAAL,CAAcv/B,IAAd,CAAmB;AACfuL,gBAAI,EAAE,GADS;AAEf1G,cAAE,EAAEA,EAFW;AAGf6gB,cAAE,EAAEA,EAHW;AAIfxjB,aAAC,EAAEA,CAJY;AAKfC,aAAC,EAAEA;AALY,WAAnB;AAOH,SARD;;AAUA0rC,YAAI,CAACjsC,SAAL,CAAe43C,KAAf,GAAuB3L,IAAI,CAACjsC,SAAL,CAAeyvC,SAAf,GAA2B,YAAW;AACzD,eAAK9R,QAAL,CAAcv/B,IAAd,CAAmB;AACfuL,gBAAI,EAAE;AADS,WAAnB;AAGH,SAJD,CApDyC,CA0DzC;;;AACAsiC,YAAI,CAACjsC,SAAL,CAAe8xB,MAAf,GAAwB,UAAS+lB,cAAT,EAAyB;AAC7C,cAAIA,cAAc,CAACla,QAAnB,EAA6B;AACzBka,0BAAc,GAAGA,cAAc,CAACla,QAAhC;AACH;;AAED9/B,eAAK,CAACmC,SAAN,CAAgB5B,IAAhB,CAAqBu1B,KAArB,CAA2B,KAAKgK,QAAhC,EAA0Cka,cAA1C;AACH,SAND,CA3DyC,CAmEzC;;;AACA5L,YAAI,CAACjsC,SAAL,CAAessC,IAAf,GAAsB,UAAS/pC,GAAT,EAAc;AAChCA,aAAG,CAACklC,SAAJ;;AACA,eAAK,IAAI3pC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK6/B,QAAL,CAAcz/B,MAAlC,EAA0CJ,CAAC,IAAI,CAA/C,EAAkD;AAC9C,gBAAIwxC,GAAG,GAAG,KAAK3R,QAAL,CAAc7/B,CAAd,CAAV;;AACA,gBAAIwxC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClBpH,iBAAG,CAACmlC,MAAJ,CAAW4H,GAAG,CAAChvC,CAAf,EAAkBgvC,GAAG,CAAC/uC,CAAtB;AACH,aAFD,MAEO,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBpH,iBAAG,CAAColC,MAAJ,CAAW2H,GAAG,CAAChvC,CAAf,EAAkBgvC,GAAG,CAAC/uC,CAAtB;AACH,aAFM,MAEA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBpH,iBAAG,CAACm1C,aAAJ,CAAkBpI,GAAG,CAACrsC,EAAtB,EAA0BqsC,GAAG,CAACxrB,EAA9B,EAAkCwrB,GAAG,CAAC3rB,EAAtC,EAA0C2rB,GAAG,CAACvrB,EAA9C,EAAkDurB,GAAG,CAAChvC,CAAtD,EAAyDgvC,GAAG,CAAC/uC,CAA7D;AACH,aAFM,MAEA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBpH,iBAAG,CAACgtC,gBAAJ,CAAqBD,GAAG,CAACrsC,EAAzB,EAA6BqsC,GAAG,CAACxrB,EAAjC,EAAqCwrB,GAAG,CAAChvC,CAAzC,EAA4CgvC,GAAG,CAAC/uC,CAAhD;AACH,aAFM,MAEA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBpH,iBAAG,CAACktC,SAAJ;AACH;AACJ;;AAED,cAAI,KAAK3O,IAAT,EAAe;AACXv+B,eAAG,CAACkuC,SAAJ,GAAgB,KAAK3P,IAArB;AACAv+B,eAAG,CAACu+B,IAAJ;AACH;;AAED,cAAI,KAAK1iB,MAAT,EAAiB;AACb7b,eAAG,CAACouC,WAAJ,GAAkB,KAAKvyB,MAAvB;AACA7b,eAAG,CAACmuC,SAAJ,GAAgB,KAAK+G,WAArB;AACAl1C,eAAG,CAAC6b,MAAJ;AACH;AACJ,SA3BD,CApEyC,CAiGzC;AACA;AACA;AACA;;;AACA6tB,YAAI,CAACjsC,SAAL,CAAe83C,UAAf,GAA4B,UAASC,aAAT,EAAwB;AAChDA,uBAAa,GAAGA,aAAa,KAAKzlC,SAAlB,GAA8BylC,aAA9B,GAA8C,CAA9D;;AAEA,mBAASC,aAAT,CAAuBr7C,CAAvB,EAA0B;AACtB,gBAAIF,IAAI,CAAC4jB,KAAL,CAAW1jB,CAAX,MAAkBA,CAAtB,EAAyB;AACrB,qBAAO,KAAKF,IAAI,CAAC4jB,KAAL,CAAW1jB,CAAX,CAAZ;AACH,aAFD,MAEO;AACH,qBAAOA,CAAC,CAACs7C,OAAF,CAAUF,aAAV,CAAP;AACH;AACJ;;AAED,mBAASG,UAAT,GAAsB;AAClB,gBAAIxc,CAAC,GAAG,EAAR;;AACA,iBAAK,IAAI59B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG81B,SAAS,CAAC11B,MAA9B,EAAsCJ,CAAC,IAAI,CAA3C,EAA8C;AAC1C,kBAAInB,CAAC,GAAGi3B,SAAS,CAAC91B,CAAD,CAAjB;;AACA,kBAAInB,CAAC,IAAI,CAAL,IAAUmB,CAAC,GAAG,CAAlB,EAAqB;AACjB49B,iBAAC,IAAI,GAAL;AACH;;AAEDA,eAAC,IAAIsc,aAAa,CAACr7C,CAAD,CAAlB;AACH;;AAED,mBAAO++B,CAAP;AACH;;AAED,cAAIl7B,CAAC,GAAG,EAAR;;AACA,eAAK,IAAI1C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAK6/B,QAAL,CAAcz/B,MAAlC,EAA0CJ,CAAC,IAAI,CAA/C,EAAkD;AAC9C,gBAAIwxC,GAAG,GAAG,KAAK3R,QAAL,CAAc7/B,CAAd,CAAV;;AACA,gBAAIwxC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClBnJ,eAAC,IAAI,MAAM03C,UAAU,CAAC5I,GAAG,CAAChvC,CAAL,EAAQgvC,GAAG,CAAC/uC,CAAZ,CAArB;AACH,aAFD,MAEO,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBnJ,eAAC,IAAI,MAAM03C,UAAU,CAAC5I,GAAG,CAAChvC,CAAL,EAAQgvC,GAAG,CAAC/uC,CAAZ,CAArB;AACH,aAFM,MAEA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBnJ,eAAC,IAAI,MAAM03C,UAAU,CAAC5I,GAAG,CAACrsC,EAAL,EAASqsC,GAAG,CAACxrB,EAAb,EAAiBwrB,GAAG,CAAC3rB,EAArB,EAAyB2rB,GAAG,CAACvrB,EAA7B,EAAiCurB,GAAG,CAAChvC,CAArC,EAAwCgvC,GAAG,CAAC/uC,CAA5C,CAArB;AACH,aAFM,MAEA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBnJ,eAAC,IAAI,MAAM03C,UAAU,CAAC5I,GAAG,CAACrsC,EAAL,EAASqsC,GAAG,CAACxrB,EAAb,EAAiBwrB,GAAG,CAAChvC,CAArB,EAAwBgvC,GAAG,CAAC/uC,CAA5B,CAArB;AACH,aAFM,MAEA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBnJ,eAAC,IAAI,GAAL;AACH;AACJ;;AAED,iBAAOA,CAAP;AACH,SA1CD,CArGyC,CAiJzC;AACA;AACA;;;AACAyrC,YAAI,CAACjsC,SAAL,CAAem4C,KAAf,GAAuB,UAASJ,aAAT,EAAwB;AAC3C,cAAI5hB,GAAG,GAAG,WAAV;AACAA,aAAG,IAAI,KAAK2hB,UAAL,CAAgBC,aAAhB,CAAP;AACA5hB,aAAG,IAAI,GAAP;;AACA,cAAI,KAAK2K,IAAL,GAAY,KAAKA,IAAL,KAAc,OAA9B,EAAuC;AACnC,gBAAI,KAAKA,IAAL,KAAc,IAAlB,EAAwB;AACpB3K,iBAAG,IAAI,cAAP;AACH,aAFD,MAEO;AACHA,iBAAG,IAAI,YAAY,KAAK2K,IAAjB,GAAwB,GAA/B;AACH;AACJ;;AAED,cAAI,KAAK1iB,MAAT,EAAiB;AACb+X,eAAG,IAAI,cAAc,KAAK/X,MAAnB,GAA4B,kBAA5B,GAAiD,KAAKq5B,WAAtD,GAAoE,GAA3E;AACH;;AAEDthB,aAAG,IAAI,IAAP;AACA,iBAAOA,GAAP;AACH,SAlBD;;AAoBAzjB,eAAO,CAACu5B,IAAR,GAAeA,IAAf;AAEC,OA1KO,EA0KN,EA1KM,CA1zCmyB;AAo+CryB,UAAG,CAAC,UAAS5uB,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAC1C;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,SAAD,CAAnB;;AACA,YAAI8vB,MAAM,GAAG9vB,OAAO,CAAC,SAAD,CAAP,CAAmB8vB,MAAhC;;AACA,YAAIiL,MAAM,GAAG/6B,OAAO,CAAC,SAAD,CAAP,CAAmB+6B,MAAhC;;AAEA,iBAASC,KAAT,CAAeC,SAAf,EAA0BC,MAA1B,EAAkChvC,OAAlC,EAA2C;AACvC,cAAIzL,CAAJ;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGy6C,MAAM,CAACr6C,MAAvB,EAA+BJ,CAAC,IAAI,CAApC,EAAuC;AACnC,gBAAIqsB,KAAK,GAAGouB,MAAM,CAACz6C,CAAD,CAAlB;AACA,iBAAKqsB,KAAK,CAACxnB,IAAX,IAAmBwnB,KAAK,CAAC0F,KAAzB;AACH;;AAED,eAAKyoB,SAAL,GAAiBA,SAAjB;AACA,eAAKC,MAAL,GAAcA,MAAd;;AACA,cAAIhvC,OAAJ,EAAa;AACT,gBAAIivC,UAAU,GAAGz4C,MAAM,CAACwtB,IAAP,CAAYhkB,OAAZ,CAAjB;;AACA,iBAAKzL,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG06C,UAAU,CAACt6C,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,kBAAIwB,CAAC,GAAGk5C,UAAU,CAAC16C,CAAD,CAAlB;AACA,kBAAInB,CAAC,GAAG4M,OAAO,CAACjK,CAAD,CAAf;;AACA,kBAAI,KAAKA,CAAL,MAAYgT,SAAhB,EAA2B;AACvB,qBAAKhT,CAAL,IAAU3C,CAAV;AACH;AACJ;AACJ;AACJ;;AAED07C,aAAK,CAACr4C,SAAN,CAAgBo4C,MAAhB,GAAyB,YAAW;AAChC,cAAIz7C,CAAC,GAAG,CAAR;;AACA,eAAK,IAAImB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,KAAKy6C,MAAL,CAAYr6C,MAAhC,EAAwCJ,CAAC,IAAI,CAA7C,EAAgD;AAC5C,gBAAIqsB,KAAK,GAAG,KAAKouB,MAAL,CAAYz6C,CAAZ,CAAZ;AACA,gBAAI+xB,KAAK,GAAG,KAAK1F,KAAK,CAACxnB,IAAX,CAAZ;;AACA,gBAAIktB,KAAK,KAAKvd,SAAd,EAAyB;AACrBud,mBAAK,GAAG1F,KAAK,CAAC0F,KAAd;AACH;;AAED,gBAAI,OAAOA,KAAK,CAACuoB,MAAb,KAAwB,UAA5B,EAAwC;AACpCz7C,eAAC,IAAIkzB,KAAK,CAACuoB,MAAN,EAAL;AACH,aAFD,MAEO;AACH,kBAAIK,cAAc,GAAGL,MAAM,CAACjuB,KAAK,CAACxgB,IAAP,CAA3B;AACA+oB,mBAAK,CAACtL,MAAN,CAAa,OAAOqxB,cAAP,KAA0B,UAAvC,EAAmD,6CAA6CtuB,KAAK,CAACxnB,IAAtG;AACAhG,eAAC,IAAI87C,cAAc,CAAC5oB,KAAD,CAAnB;AACH;AACJ;;AAED,iBAAOlzB,CAAP;AACH,SAnBD;;AAqBA07C,aAAK,CAACr4C,SAAN,CAAgBmtC,MAAhB,GAAyB,YAAW;AAChC,iBAAOA,MAAM,CAACuL,KAAP,CAAa,IAAb,CAAP;AACH,SAFD;;AAIAhmC,eAAO,CAAC2lC,KAAR,GAAgBA,KAAhB;AAEC,OAzDQ,EAyDP;AAAC,mBAAU,CAAX;AAAa,mBAAU;AAAvB,OAzDO,CAp+CkyB;AA6hD7wB,UAAG,CAAC,UAASh7B,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAClE;AACA;AACA;AACA;AAEA;;AAEA,YAAI61B,QAAQ,GAAGlrB,OAAO,CAAC,aAAD,CAAtB;;AACA,YAAIssB,QAAQ,GAAGtsB,OAAO,CAAC,aAAD,CAAtB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAI2E,IAAI,GAAG3E,OAAO,CAAC,SAAD,CAAlB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CAZkE,CAclE;;;AACA,iBAASu7B,MAAT,CAAgB37C,CAAhB,EAAmBC,CAAnB,EAAsB;AAClB,cAAID,CAAC,KAAKC,CAAV,EAAa;AACT,mBAAO,IAAP;AACH,WAFD,MAEO,IAAIW,KAAK,CAACgzC,OAAN,CAAc5zC,CAAd,KAAoBY,KAAK,CAACgzC,OAAN,CAAc3zC,CAAd,CAAxB,EAA0C;AAC7C,gBAAID,CAAC,CAACiB,MAAF,KAAahB,CAAC,CAACgB,MAAnB,EAA2B;AACvB,qBAAO,KAAP;AACH;;AAED,iBAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGb,CAAC,CAACiB,MAAtB,EAA8BJ,CAAC,IAAI,CAAnC,EAAsC;AAClC,kBAAI,CAAC86C,MAAM,CAAC37C,CAAC,CAACa,CAAD,CAAF,EAAOZ,CAAC,CAACY,CAAD,CAAR,CAAX,EAAyB;AACrB,uBAAO,KAAP;AACH;AACJ;;AAED,mBAAO,IAAP;AACH,WAZM,MAYA;AACH,mBAAO,KAAP;AACH;AACJ,SAjCiE,CAmClE;AACA;;;AACA,iBAAS+6C,aAAT,CAAuB/1C,IAAvB,EAA6B2I,KAA7B,EAAoCqtC,YAApC,EAAkD;AAC9C;AACA,cAAI/B,OAAO,GAAG,EAAd;AACA,cAAIgC,OAAO,GAAG,EAAd;AACA,cAAI51B,KAAK,GAAGouB,KAAK,CAACuD,SAAN,CAAgBhyC,IAAhB,EAAsB2I,KAAtB,CAAZ;AACA,cAAI3N,CAAJ;AACA,cAAIk7C,YAAJ;AACA,cAAIvD,SAAJ;;AACA,cAAItyB,KAAK,KAAK,CAAd,EAAiB;AACb,gBAAI81B,UAAU,GAAG1H,KAAK,CAACmD,OAAN,CAAc5xC,IAAd,EAAoB2I,KAAK,GAAG,CAA5B,CAAjB;AACAutC,wBAAY,GAAGvtC,KAAK,GAAI,CAAC0X,KAAK,GAAG,CAAT,IAAc81B,UAAvB,GAAqC,CAApD;AACA,gBAAIC,GAAG,GAAGztC,KAAK,GAAG,CAAlB;;AACA,iBAAK3N,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGqlB,KAAK,GAAG,CAAxB,EAA2BrlB,CAAC,IAAI,CAAhC,EAAmC;AAC/Bi5C,qBAAO,CAAC34C,IAAR,CAAamzC,KAAK,CAAC8D,SAAN,CAAgBvyC,IAAhB,EAAsBo2C,GAAtB,EAA2BD,UAA3B,CAAb;AACAC,iBAAG,IAAID,UAAP;AACH,aAPY,CASb;;;AACAxD,qBAAS,GAAGuD,YAAY,GAAGjC,OAAO,CAAC5zB,KAAD,CAAlC;AACH,WAXD,MAWO;AACHsyB,qBAAS,GAAGhqC,KAAK,GAAG,CAApB;AACH;;AAED,eAAK3N,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGi5C,OAAO,CAAC74C,MAAR,GAAiB,CAAjC,EAAoCJ,CAAC,IAAI,CAAzC,EAA4C;AACxC,gBAAI+xB,KAAK,GAAG0hB,KAAK,CAACgE,QAAN,CAAezyC,IAAf,EAAqBk2C,YAAY,GAAGjC,OAAO,CAACj5C,CAAD,CAA3C,EAAgDk7C,YAAY,GAAGjC,OAAO,CAACj5C,CAAC,GAAG,CAAL,CAAtE,CAAZ;;AACA,gBAAIg7C,YAAJ,EAAkB;AACdjpB,mBAAK,GAAGipB,YAAY,CAACjpB,KAAD,CAApB;AACH;;AAEDkpB,mBAAO,CAAC36C,IAAR,CAAayxB,KAAb;AACH;;AAED,iBAAO;AAACkpB,mBAAO,EAAEA,OAAV;AAAmBvD,uBAAW,EAAE/pC,KAAhC;AAAuCgqC,qBAAS,EAAEA;AAAlD,WAAP;AACH,SAtEiE,CAwElE;;;AACA,iBAAS0D,iBAAT,CAA2BC,MAA3B,EAAmC;AAC/B,cAAI1d,CAAC,GAAG,EAAR;AACA,cAAI2d,GAAG,GAAG,EAAV;AACA,cAAIC,MAAM,GAAG,CAAC,GAAD,EAAM,GAAN,EAAW,GAAX,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,GAA/B,EAAoC,GAApC,EAAyC,GAAzC,EAA8C,GAA9C,EAAmD,GAAnD,EAAwD,GAAxD,EAA6D,IAA7D,EAAmE,IAAnE,EAAyE,GAAzE,CAAb;;AACA,iBAAO,IAAP,EAAa;AACT,gBAAIp8C,CAAC,GAAGk8C,MAAM,CAAClD,SAAP,EAAR;AACA,gBAAIqD,EAAE,GAAGr8C,CAAC,IAAI,CAAd;AACA,gBAAIyL,EAAE,GAAGzL,CAAC,GAAG,EAAb;;AAEA,gBAAIq8C,EAAE,KAAKF,GAAX,EAAgB;AACZ;AACH;;AAED3d,aAAC,IAAI4d,MAAM,CAACC,EAAD,CAAX;;AAEA,gBAAI5wC,EAAE,KAAK0wC,GAAX,EAAgB;AACZ;AACH;;AAED3d,aAAC,IAAI4d,MAAM,CAAC3wC,EAAD,CAAX;AACH;;AAED,iBAAOuY,UAAU,CAACwa,CAAD,CAAjB;AACH,SAhGiE,CAkGlE;;;AACA,iBAAS8d,YAAT,CAAsBJ,MAAtB,EAA8BK,EAA9B,EAAkC;AAC9B,cAAIC,EAAJ;AACA,cAAIC,EAAJ;AACA,cAAIC,EAAJ;AACA,cAAIC,EAAJ;;AACA,cAAIJ,EAAE,KAAK,EAAX,EAAe;AACXC,cAAE,GAAGN,MAAM,CAAClD,SAAP,EAAL;AACAyD,cAAE,GAAGP,MAAM,CAAClD,SAAP,EAAL;AACA,mBAAOwD,EAAE,IAAI,CAAN,GAAUC,EAAjB;AACH;;AAED,cAAIF,EAAE,KAAK,EAAX,EAAe;AACXC,cAAE,GAAGN,MAAM,CAAClD,SAAP,EAAL;AACAyD,cAAE,GAAGP,MAAM,CAAClD,SAAP,EAAL;AACA0D,cAAE,GAAGR,MAAM,CAAClD,SAAP,EAAL;AACA2D,cAAE,GAAGT,MAAM,CAAClD,SAAP,EAAL;AACA,mBAAOwD,EAAE,IAAI,EAAN,GAAWC,EAAE,IAAI,EAAjB,GAAsBC,EAAE,IAAI,CAA5B,GAAgCC,EAAvC;AACH;;AAED,cAAIJ,EAAE,KAAK,EAAX,EAAe;AACX,mBAAON,iBAAiB,CAACC,MAAD,CAAxB;AACH;;AAED,cAAIK,EAAE,IAAI,EAAN,IAAYA,EAAE,IAAI,GAAtB,EAA2B;AACvB,mBAAOA,EAAE,GAAG,GAAZ;AACH;;AAED,cAAIA,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAvB,EAA4B;AACxBC,cAAE,GAAGN,MAAM,CAAClD,SAAP,EAAL;AACA,mBAAO,CAACuD,EAAE,GAAG,GAAN,IAAa,GAAb,GAAmBC,EAAnB,GAAwB,GAA/B;AACH;;AAED,cAAID,EAAE,IAAI,GAAN,IAAaA,EAAE,IAAI,GAAvB,EAA4B;AACxBC,cAAE,GAAGN,MAAM,CAAClD,SAAP,EAAL;AACA,mBAAO,EAAEuD,EAAE,GAAG,GAAP,IAAc,GAAd,GAAoBC,EAApB,GAAyB,GAAhC;AACH;;AAED,gBAAM,IAAI9xB,KAAJ,CAAU,gBAAgB6xB,EAA1B,CAAN;AACH,SAzIiE,CA2IlE;AACA;;;AACA,iBAASK,eAAT,CAAyBC,OAAzB,EAAkC;AAC9B,cAAIzS,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIxpC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGi8C,OAAO,CAAC77C,MAA5B,EAAoCJ,CAAC,IAAI,CAAzC,EAA4C;AACxC,gBAAIqrB,GAAG,GAAG4wB,OAAO,CAACj8C,CAAD,CAAP,CAAW,CAAX,CAAV;AACA,gBAAIk8C,MAAM,GAAGD,OAAO,CAACj8C,CAAD,CAAP,CAAW,CAAX,CAAb;AACA,gBAAI+xB,KAAJ;;AACA,gBAAImqB,MAAM,CAAC97C,MAAP,KAAkB,CAAtB,EAAyB;AACrB2xB,mBAAK,GAAGmqB,MAAM,CAAC,CAAD,CAAd;AACH,aAFD,MAEO;AACHnqB,mBAAK,GAAGmqB,MAAR;AACH;;AAED,gBAAI1S,CAAC,CAAC5a,cAAF,CAAiBvD,GAAjB,CAAJ,EAA2B;AACvB,oBAAM,IAAIvB,KAAJ,CAAU,YAAY0f,CAAZ,GAAgB,mBAAhB,GAAsCne,GAAhD,CAAN;AACH;;AAEDme,aAAC,CAACne,GAAD,CAAD,GAAS0G,KAAT;AACH;;AAED,iBAAOyX,CAAP;AACH,SAjKiE,CAmKlE;AACA;;;AACA,iBAAS2S,YAAT,CAAsBn3C,IAAtB,EAA4B2I,KAA5B,EAAmC2qB,IAAnC,EAAyC;AACrC3qB,eAAK,GAAGA,KAAK,KAAK6G,SAAV,GAAsB7G,KAAtB,GAA8B,CAAtC;AACA,cAAI2tC,MAAM,GAAG,IAAI7H,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAb;AACA,cAAIsuC,OAAO,GAAG,EAAd;AACA,cAAIG,QAAQ,GAAG,EAAf;AACA9jB,cAAI,GAAGA,IAAI,KAAK9jB,SAAT,GAAqB8jB,IAArB,GAA4BtzB,IAAI,CAAC5E,MAAxC;;AAEA,iBAAOk7C,MAAM,CAACnD,cAAP,GAAwB7f,IAA/B,EAAqC;AACjC,gBAAI+jB,EAAE,GAAGf,MAAM,CAAClD,SAAP,EAAT,CADiC,CAGjC;AACA;;AACA,gBAAIiE,EAAE,IAAI,EAAV,EAAc;AACV;AACA,kBAAIA,EAAE,KAAK,EAAX,EAAe;AACXA,kBAAE,GAAG,OAAOf,MAAM,CAAClD,SAAP,EAAZ;AACH;;AAED6D,qBAAO,CAAC37C,IAAR,CAAa,CAAC+7C,EAAD,EAAKD,QAAL,CAAb;AACAA,sBAAQ,GAAG,EAAX;AACH,aARD,MAQO;AACH;AACA;AACAA,sBAAQ,CAAC97C,IAAT,CAAco7C,YAAY,CAACJ,MAAD,EAASe,EAAT,CAA1B;AACH;AACJ;;AAED,iBAAOL,eAAe,CAACC,OAAD,CAAtB;AACH,SAjMiE,CAmMlE;AACA;;;AACA,iBAASK,YAAT,CAAsBC,OAAtB,EAA+BpoC,KAA/B,EAAsC;AAClC,cAAIA,KAAK,IAAI,GAAb,EAAkB;AACdA,iBAAK,GAAGs2B,QAAQ,CAACX,kBAAT,CAA4B31B,KAA5B,CAAR;AACH,WAFD,MAEO;AACHA,iBAAK,GAAGooC,OAAO,CAACpoC,KAAK,GAAG,GAAT,CAAf;AACH;;AAED,iBAAOA,KAAP;AACH,SA7MiE,CA+MlE;AACA;;;AACA,iBAASqoC,aAAT,CAAuBC,IAAvB,EAA6BC,IAA7B,EAAmCH,OAAnC,EAA4C;AACxC,cAAII,OAAO,GAAG,EAAd,CADwC,CAGxC;AACA;;AACA,eAAK,IAAI38C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG08C,IAAI,CAACt8C,MAAzB,EAAiCJ,CAAC,IAAI,CAAtC,EAAyC;AACrC,gBAAI48C,CAAC,GAAGF,IAAI,CAAC18C,CAAD,CAAZ;AACA,gBAAI+xB,KAAK,GAAG0qB,IAAI,CAACG,CAAC,CAACP,EAAH,CAAhB;;AACA,gBAAItqB,KAAK,KAAKvd,SAAd,EAAyB;AACrBud,mBAAK,GAAG6qB,CAAC,CAAC7qB,KAAF,KAAYvd,SAAZ,GAAwBooC,CAAC,CAAC7qB,KAA1B,GAAkC,IAA1C;AACH;;AAED,gBAAI6qB,CAAC,CAAC/wC,IAAF,KAAW,KAAf,EAAsB;AAClBkmB,mBAAK,GAAGuqB,YAAY,CAACC,OAAD,EAAUxqB,KAAV,CAApB;AACH;;AAED4qB,mBAAO,CAACC,CAAC,CAAC/3C,IAAH,CAAP,GAAkBktB,KAAlB;AACH;;AAED,iBAAO4qB,OAAP;AACH,SArOiE,CAuOlE;;;AACA,iBAASE,cAAT,CAAwB73C,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAImvC,MAAM,GAAG,EAAb;AACAA,gBAAM,CAACC,WAAP,GAAqBtJ,KAAK,CAACqD,QAAN,CAAe9xC,IAAf,EAAqB2I,KAArB,CAArB;AACAmvC,gBAAM,CAACE,WAAP,GAAqBvJ,KAAK,CAACqD,QAAN,CAAe9xC,IAAf,EAAqB2I,KAAK,GAAG,CAA7B,CAArB;AACAmvC,gBAAM,CAACxkB,IAAP,GAAcmb,KAAK,CAACqD,QAAN,CAAe9xC,IAAf,EAAqB2I,KAAK,GAAG,CAA7B,CAAd;AACAmvC,gBAAM,CAAC3B,UAAP,GAAoB1H,KAAK,CAACqD,QAAN,CAAe9xC,IAAf,EAAqB2I,KAAK,GAAG,CAA7B,CAApB;AACAmvC,gBAAM,CAACpF,WAAP,GAAqB/pC,KAArB;AACAmvC,gBAAM,CAACnF,SAAP,GAAmBhqC,KAAK,GAAG,CAA3B;AACA,iBAAOmvC,MAAP;AACH;;AAED,YAAIG,aAAa,GAAG,CAChB;AAACp4C,cAAI,EAAE,SAAP;AAAkBw3C,YAAE,EAAE,CAAtB;AAAyBxwC,cAAI,EAAE;AAA/B,SADgB,EAEhB;AAAChH,cAAI,EAAE,QAAP;AAAiBw3C,YAAE,EAAE,CAArB;AAAwBxwC,cAAI,EAAE;AAA9B,SAFgB,EAGhB;AAAChH,cAAI,EAAE,WAAP;AAAoBw3C,YAAE,EAAE,IAAxB;AAA8BxwC,cAAI,EAAE;AAApC,SAHgB,EAIhB;AAAChH,cAAI,EAAE,UAAP;AAAmBw3C,YAAE,EAAE,CAAvB;AAA0BxwC,cAAI,EAAE;AAAhC,SAJgB,EAKhB;AAAChH,cAAI,EAAE,YAAP;AAAqBw3C,YAAE,EAAE,CAAzB;AAA4BxwC,cAAI,EAAE;AAAlC,SALgB,EAMhB;AAAChH,cAAI,EAAE,QAAP;AAAiBw3C,YAAE,EAAE,CAArB;AAAwBxwC,cAAI,EAAE;AAA9B,SANgB,EAOhB;AAAChH,cAAI,EAAE,cAAP;AAAuBw3C,YAAE,EAAE,IAA3B;AAAiCxwC,cAAI,EAAE,QAAvC;AAAiDkmB,eAAK,EAAE;AAAxD,SAPgB,EAQhB;AAACltB,cAAI,EAAE,aAAP;AAAsBw3C,YAAE,EAAE,IAA1B;AAAgCxwC,cAAI,EAAE,QAAtC;AAAgDkmB,eAAK,EAAE;AAAvD,SARgB,EAShB;AAACltB,cAAI,EAAE,mBAAP;AAA4Bw3C,YAAE,EAAE,IAAhC;AAAsCxwC,cAAI,EAAE,QAA5C;AAAsDkmB,eAAK,EAAE,CAAC;AAA9D,SATgB,EAUhB;AAACltB,cAAI,EAAE,oBAAP;AAA6Bw3C,YAAE,EAAE,IAAjC;AAAuCxwC,cAAI,EAAE,QAA7C;AAAuDkmB,eAAK,EAAE;AAA9D,SAVgB,EAWhB;AAACltB,cAAI,EAAE,WAAP;AAAoBw3C,YAAE,EAAE,IAAxB;AAA8BxwC,cAAI,EAAE,QAApC;AAA8CkmB,eAAK,EAAE;AAArD,SAXgB,EAYhB;AAACltB,cAAI,EAAE,gBAAP;AAAyBw3C,YAAE,EAAE,IAA7B;AAAmCxwC,cAAI,EAAE,QAAzC;AAAmDkmB,eAAK,EAAE;AAA1D,SAZgB,EAahB;AAACltB,cAAI,EAAE,YAAP;AAAqBw3C,YAAE,EAAE,IAAzB;AAA+BxwC,cAAI,EAAE,CAAC,MAAD,EAAS,MAAT,EAAiB,MAAjB,EAAyB,MAAzB,EAAiC,MAAjC,EAAyC,MAAzC,CAArC;AAAuFkmB,eAAK,EAAE,CAAC,KAAD,EAAQ,CAAR,EAAW,CAAX,EAAc,KAAd,EAAqB,CAArB,EAAwB,CAAxB;AAA9F,SAbgB,EAchB;AAACltB,cAAI,EAAE,UAAP;AAAmBw3C,YAAE,EAAE,EAAvB;AAA2BxwC,cAAI,EAAE;AAAjC,SAdgB,EAehB;AAAChH,cAAI,EAAE,UAAP;AAAmBw3C,YAAE,EAAE,CAAvB;AAA0BxwC,cAAI,EAAE,CAAC,QAAD,EAAW,QAAX,EAAqB,QAArB,EAA+B,QAA/B,CAAhC;AAA0EkmB,eAAK,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV;AAAjF,SAfgB,EAgBhB;AAACltB,cAAI,EAAE,aAAP;AAAsBw3C,YAAE,EAAE,IAA1B;AAAgCxwC,cAAI,EAAE,QAAtC;AAAgDkmB,eAAK,EAAE;AAAvD,SAhBgB,EAiBhB;AAACltB,cAAI,EAAE,MAAP;AAAew3C,YAAE,EAAE,EAAnB;AAAuBxwC,cAAI,EAAE,EAA7B;AAAiCkmB,eAAK,EAAE;AAAxC,SAjBgB,EAkBhB;AAACltB,cAAI,EAAE,SAAP;AAAkBw3C,YAAE,EAAE,EAAtB;AAA0BxwC,cAAI,EAAE,QAAhC;AAA0CkmB,eAAK,EAAE;AAAjD,SAlBgB,EAmBhB;AAACltB,cAAI,EAAE,UAAP;AAAmBw3C,YAAE,EAAE,EAAvB;AAA2BxwC,cAAI,EAAE,QAAjC;AAA2CkmB,eAAK,EAAE;AAAlD,SAnBgB,EAoBhB;AAACltB,cAAI,EAAE,aAAP;AAAsBw3C,YAAE,EAAE,EAA1B;AAA8BxwC,cAAI,EAAE,QAApC;AAA8CkmB,eAAK,EAAE;AAArD,SApBgB,EAqBhB;AAACltB,cAAI,EAAE,SAAP;AAAkBw3C,YAAE,EAAE,EAAtB;AAA0BxwC,cAAI,EAAE,CAAC,QAAD,EAAW,QAAX,CAAhC;AAAsDkmB,eAAK,EAAE,CAAC,CAAD,EAAI,CAAJ;AAA7D,SArBgB,CAApB;AAwBA,YAAImrB,iBAAiB,GAAG,CACpB;AAACr4C,cAAI,EAAE,OAAP;AAAgBw3C,YAAE,EAAE,EAApB;AAAwBxwC,cAAI,EAAE,QAA9B;AAAwCkmB,eAAK,EAAE;AAA/C,SADoB,EAEpB;AAACltB,cAAI,EAAE,eAAP;AAAwBw3C,YAAE,EAAE,EAA5B;AAAgCxwC,cAAI,EAAE,QAAtC;AAAgDkmB,eAAK,EAAE;AAAvD,SAFoB,EAGpB;AAACltB,cAAI,EAAE,eAAP;AAAwBw3C,YAAE,EAAE,EAA5B;AAAgCxwC,cAAI,EAAE,QAAtC;AAAgDkmB,eAAK,EAAE;AAAvD,SAHoB,CAAxB,CA3QkE,CAiRlE;AACA;;AACA,iBAASorB,eAAT,CAAyBn4C,IAAzB,EAA+Bu3C,OAA/B,EAAwC;AACpC,cAAIE,IAAI,GAAGN,YAAY,CAACn3C,IAAD,EAAO,CAAP,EAAUA,IAAI,CAAC8qC,UAAf,CAAvB;AACA,iBAAO0M,aAAa,CAACC,IAAD,EAAOQ,aAAP,EAAsBV,OAAtB,CAApB;AACH,SAtRiE,CAwRlE;;;AACA,iBAASa,mBAAT,CAA6Bp4C,IAA7B,EAAmC2I,KAAnC,EAA0C2qB,IAA1C,EAAgDikB,OAAhD,EAAyD;AACrD,cAAIE,IAAI,GAAGN,YAAY,CAACn3C,IAAD,EAAO2I,KAAP,EAAc2qB,IAAd,CAAvB;AACA,iBAAOkkB,aAAa,CAACC,IAAD,EAAOS,iBAAP,EAA0BX,OAA1B,CAApB;AACH,SA5RiE,CA8RlE;AACA;AACA;;;AACA,iBAASc,eAAT,CAAyBr4C,IAAzB,EAA+B2I,KAA/B,EAAsC2vC,OAAtC,EAA+Cf,OAA/C,EAAwD;AACpD,cAAIv8C,CAAJ;AACA,cAAIu9C,GAAJ;AACA,cAAIl4B,KAAJ;AACA,cAAIi2B,MAAM,GAAG,IAAI7H,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAb,CAJoD,CAMpD;;AACA2vC,iBAAO,IAAI,CAAX;AACA,cAAI5S,OAAO,GAAG,CAAC,SAAD,CAAd;AAEA,cAAI8S,MAAM,GAAGlC,MAAM,CAAChD,UAAP,EAAb;;AACA,cAAIkF,MAAM,KAAK,CAAf,EAAkB;AACd,iBAAKx9C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGs9C,OAAhB,EAAyBt9C,CAAC,IAAI,CAA9B,EAAiC;AAC7Bu9C,iBAAG,GAAGjC,MAAM,CAAC7C,QAAP,EAAN;AACA/N,qBAAO,CAACpqC,IAAR,CAAag8C,YAAY,CAACC,OAAD,EAAUgB,GAAV,CAAzB;AACH;AACJ,WALD,MAKO,IAAIC,MAAM,KAAK,CAAf,EAAkB;AACrB,mBAAO9S,OAAO,CAACtqC,MAAR,IAAkBk9C,OAAzB,EAAkC;AAC9BC,iBAAG,GAAGjC,MAAM,CAAC7C,QAAP,EAAN;AACApzB,mBAAK,GAAGi2B,MAAM,CAAChD,UAAP,EAAR;;AACA,mBAAKt4C,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIqlB,KAAjB,EAAwBrlB,CAAC,IAAI,CAA7B,EAAgC;AAC5B0qC,uBAAO,CAACpqC,IAAR,CAAag8C,YAAY,CAACC,OAAD,EAAUgB,GAAV,CAAzB;AACAA,mBAAG,IAAI,CAAP;AACH;AACJ;AACJ,WATM,MASA,IAAIC,MAAM,KAAK,CAAf,EAAkB;AACrB,mBAAO9S,OAAO,CAACtqC,MAAR,IAAkBk9C,OAAzB,EAAkC;AAC9BC,iBAAG,GAAGjC,MAAM,CAAC7C,QAAP,EAAN;AACApzB,mBAAK,GAAGi2B,MAAM,CAAC9C,WAAP,EAAR;;AACA,mBAAKx4C,CAAC,GAAG,CAAT,EAAYA,CAAC,IAAIqlB,KAAjB,EAAwBrlB,CAAC,IAAI,CAA7B,EAAgC;AAC5B0qC,uBAAO,CAACpqC,IAAR,CAAag8C,YAAY,CAACC,OAAD,EAAUgB,GAAV,CAAzB;AACAA,mBAAG,IAAI,CAAP;AACH;AACJ;AACJ,WATM,MASA;AACH,kBAAM,IAAIzzB,KAAJ,CAAU,4BAA4B0zB,MAAtC,CAAN;AACH;;AAED,iBAAO9S,OAAP;AACH,SAxUiE,CA0UlE;AACA;;;AACA,iBAAS+S,gBAAT,CAA0Bz4C,IAA1B,EAAgC2I,KAAhC,EAAuC+8B,OAAvC,EAAgD;AAC5C,cAAI1qC,CAAJ;AACA,cAAIytB,IAAJ;AACA,cAAIiwB,GAAG,GAAG,EAAV;AACA,cAAIpC,MAAM,GAAG,IAAI7H,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAb;AACA,cAAI6vC,MAAM,GAAGlC,MAAM,CAAChD,UAAP,EAAb;;AACA,cAAIkF,MAAM,KAAK,CAAf,EAAkB;AACd,gBAAIG,MAAM,GAAGrC,MAAM,CAAChD,UAAP,EAAb;;AACA,iBAAKt4C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG29C,MAAhB,EAAwB39C,CAAC,IAAI,CAA7B,EAAgC;AAC5BytB,kBAAI,GAAG6tB,MAAM,CAAChD,UAAP,EAAP;AACAoF,iBAAG,CAACjwB,IAAD,CAAH,GAAYztB,CAAZ;AACH;AACJ,WAND,MAMO,IAAIw9C,MAAM,KAAK,CAAf,EAAkB;AACrB,gBAAII,OAAO,GAAGtC,MAAM,CAAChD,UAAP,EAAd;AACA7qB,gBAAI,GAAG,CAAP;;AACA,iBAAKztB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG49C,OAAhB,EAAyB59C,CAAC,IAAI,CAA9B,EAAiC;AAC7B,kBAAI+T,KAAK,GAAGunC,MAAM,CAAChD,UAAP,EAAZ;AACA,kBAAIuF,KAAK,GAAGvC,MAAM,CAAChD,UAAP,EAAZ;;AACA,mBAAK,IAAIv3C,CAAC,GAAGgT,KAAb,EAAoBhT,CAAC,IAAIgT,KAAK,GAAG8pC,KAAjC,EAAwC98C,CAAC,IAAI,CAA7C,EAAgD;AAC5C28C,mBAAG,CAAC38C,CAAD,CAAH,GAAS0sB,IAAT;AACAA,oBAAI,IAAI,CAAR;AACH;AACJ;AACJ,WAXM,MAWA;AACH,kBAAM,IAAI3D,KAAJ,CAAU,6BAA6B0zB,MAAvC,CAAN;AACH;;AAED,iBAAO,IAAI/S,QAAQ,CAACD,WAAb,CAAyBkT,GAAzB,EAA8BhT,OAA9B,CAAP;AACH,SAxWiE,CA0WlE;AACA;AACA;;;AACA,iBAAS4I,kBAAT,CAA4B3K,IAA5B,EAAkC/V,KAAlC,EAAyCnF,IAAzC,EAA+C;AAC3C,cAAIqwB,GAAJ;AACA,cAAIC,GAAJ;AACA,cAAIC,GAAJ;AACA,cAAIC,GAAJ;AACA,cAAI38C,CAAC,GAAG,IAAI4iB,IAAI,CAACiqB,IAAT,EAAR;AACA,cAAIjb,KAAK,GAAG,EAAZ;AACA,cAAIgrB,MAAM,GAAG,CAAb;AACA,cAAIC,SAAS,GAAG,KAAhB;AACA,cAAI55C,KAAK,GAAGokC,IAAI,CAACyV,aAAjB;AACA,cAAIxJ,IAAI,GAAG,KAAX;AACA,cAAIpyC,CAAC,GAAG,CAAR;AACA,cAAIC,CAAC,GAAG,CAAR;;AAEA,mBAAS47C,UAAT,CAAoB77C,CAApB,EAAuBC,CAAvB,EAA0B;AACtB,gBAAImyC,IAAJ,EAAU;AACNtzC,eAAC,CAACqwC,SAAF;AACH;;AAEDrwC,aAAC,CAACsoC,MAAF,CAASpnC,CAAT,EAAYC,CAAZ;AACAmyC,gBAAI,GAAG,IAAP;AACH;;AAED,mBAAS0J,UAAT,GAAsB;AAClB,gBAAIC,WAAJ,CADkB,CAGlB;AACA;;AACAA,uBAAW,GAAGrrB,KAAK,CAAC9yB,MAAN,GAAe,CAAf,KAAqB,CAAnC;;AACA,gBAAIm+C,WAAW,IAAI,CAACJ,SAApB,EAA+B;AAC3B55C,mBAAK,GAAG2uB,KAAK,CAACsrB,KAAN,KAAgB7V,IAAI,CAAC8V,aAA7B;AACH;;AAEDP,kBAAM,IAAIhrB,KAAK,CAAC9yB,MAAN,IAAgB,CAA1B;AACA8yB,iBAAK,CAAC9yB,MAAN,GAAe,CAAf;AACA+9C,qBAAS,GAAG,IAAZ;AACH;;AAED,mBAAS1K,KAAT,CAAehmB,IAAf,EAAqB;AACjB,gBAAImuB,EAAJ;AACA,gBAAIC,EAAJ;AACA,gBAAIC,EAAJ;AACA,gBAAIC,EAAJ;AACA,gBAAI2C,SAAJ;AACA,gBAAIC,QAAJ;AACA,gBAAIC,GAAJ;AACA,gBAAIC,GAAJ;AACA,gBAAIC,GAAJ;AACA,gBAAIC,GAAJ;AACA,gBAAIC,GAAJ;AACA,gBAAIC,GAAJ;AAEA,gBAAIj/C,CAAC,GAAG,CAAR;;AACA,mBAAOA,CAAC,GAAGytB,IAAI,CAACrtB,MAAhB,EAAwB;AACpB,kBAAIvB,CAAC,GAAG4uB,IAAI,CAACztB,CAAD,CAAZ;AACAA,eAAC,IAAI,CAAL;;AACA,sBAAQnB,CAAR;AACA,qBAAK,CAAL;AAAQ;AACJy/C,4BAAU;AACV;;AACJ,qBAAK,CAAL;AAAQ;AACJA,4BAAU;AACV;;AACJ,qBAAK,CAAL;AAAQ;AACJ,sBAAIprB,KAAK,CAAC9yB,MAAN,GAAe,CAAf,IAAoB,CAAC+9C,SAAzB,EAAoC;AAChC55C,yBAAK,GAAG2uB,KAAK,CAACsrB,KAAN,KAAgB7V,IAAI,CAAC8V,aAA7B;AACAN,6BAAS,GAAG,IAAZ;AACH;;AAED17C,mBAAC,IAAIywB,KAAK,CAAC/a,GAAN,EAAL;AACAkmC,4BAAU,CAAC77C,CAAD,EAAIC,CAAJ,CAAV;AACA;;AACJ,qBAAK,CAAL;AAAQ;AACJ,yBAAOywB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrBoC,qBAAC,IAAI0wB,KAAK,CAACsrB,KAAN,EAAL;AACA/7C,qBAAC,IAAIywB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,qBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;AACH;;AAED;;AACJ,qBAAK,CAAL;AAAQ;AACJ,yBAAOywB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrBoC,qBAAC,IAAI0wB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,qBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;;AACA,wBAAIywB,KAAK,CAAC9yB,MAAN,KAAiB,CAArB,EAAwB;AACpB;AACH;;AAEDqC,qBAAC,IAAIywB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,qBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;AACH;;AAED;;AACJ,qBAAK,CAAL;AAAQ;AACJ,yBAAOywB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrBqC,qBAAC,IAAIywB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,qBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;;AACA,wBAAIywB,KAAK,CAAC9yB,MAAN,KAAiB,CAArB,EAAwB;AACpB;AACH;;AAEDoC,qBAAC,IAAI0wB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,qBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;AACH;;AAED;;AACJ,qBAAK,CAAL;AAAQ;AACJ,yBAAOywB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrB09C,uBAAG,GAAGt7C,CAAC,GAAG0wB,KAAK,CAACsrB,KAAN,EAAV;AACAT,uBAAG,GAAGt7C,CAAC,GAAGywB,KAAK,CAACsrB,KAAN,EAAV;AACAR,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,qBAAC,GAAGw7C,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAV;AACA/7C,qBAAC,GAAGw7C,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAV;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACLi8C,2BAAS,GAAGxrB,KAAK,CAAC/a,GAAN,KAAcwwB,IAAI,CAACuW,SAA/B;AACAP,0BAAQ,GAAGhW,IAAI,CAACwW,KAAL,CAAWT,SAAX,CAAX;;AACA,sBAAIC,QAAJ,EAAc;AACVlL,yBAAK,CAACkL,QAAD,CAAL;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACL;;AACJ,qBAAK,EAAL;AAAS;AACL9/C,mBAAC,GAAG4uB,IAAI,CAACztB,CAAD,CAAR;AACAA,mBAAC,IAAI,CAAL;;AACA,0BAAQnB,CAAR;AACA,yBAAK,EAAL;AAAS;AACL;AACAi/C,yBAAG,GAAGt7C,CAAC,GAAK0wB,KAAK,CAACsrB,KAAN,EAAZ,CAFJ,CAEkC;;AAC9BT,yBAAG,GAAGt7C,CAAC,GAAKywB,KAAK,CAACsrB,KAAN,EAAZ,CAHJ,CAGkC;;AAC9BR,yBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ,CAJJ,CAIkC;;AAC9BP,yBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ,CALJ,CAKkC;;AAC9BI,yBAAG,GAAGZ,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAZ,CANJ,CAMkC;;AAC9BK,yBAAG,GAAGZ,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAZ,CAPJ,CAOkC;;AAC9BM,yBAAG,GAAGF,GAAG,GAAG1rB,KAAK,CAACsrB,KAAN,EAAZ,CARJ,CAQkC;;AAC9BO,yBAAG,GAAGF,GAAG,GAAG3rB,KAAK,CAACsrB,KAAN,EAAZ,CATJ,CASkC;;AAC9BQ,yBAAG,GAAGF,GAAG,GAAG5rB,KAAK,CAACsrB,KAAN,EAAZ,CAVJ,CAUkC;;AAC9BS,yBAAG,GAAGF,GAAG,GAAG7rB,KAAK,CAACsrB,KAAN,EAAZ,CAXJ,CAWkC;;AAC9Bh8C,uBAAC,GAAGw8C,GAAG,GAAG9rB,KAAK,CAACsrB,KAAN,EAAV,CAZJ,CAYkC;;AAC9B/7C,uBAAC,GAAGw8C,GAAG,GAAG/rB,KAAK,CAACsrB,KAAN,EAAV,CAbJ,CAakC;;AAC9BtrB,2BAAK,CAACsrB,KAAN,GAdJ,CAckC;;AAC9Bl9C,uBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BW,GAA9B,EAAmCC,GAAnC;AACAv9C,uBAAC,CAACowC,OAAF,CAAUoN,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz8C,CAA9B,EAAiCC,CAAjC;AACA;;AACJ,yBAAK,EAAL;AAAS;AACL;AACAq7C,yBAAG,GAAGt7C,CAAC,GAAK0wB,KAAK,CAACsrB,KAAN,EAAZ,CAFJ,CAEkC;;AAC9BT,yBAAG,GAAGt7C,CAAN,CAHJ,CAGkC;;AAC9Bu7C,yBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ,CAJJ,CAIkC;;AAC9BP,yBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ,CALJ,CAKkC;;AAC9BI,yBAAG,GAAGZ,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAZ,CANJ,CAMkC;;AAC9BK,yBAAG,GAAGZ,GAAN,CAPJ,CAOkC;;AAC9Ba,yBAAG,GAAGF,GAAG,GAAG1rB,KAAK,CAACsrB,KAAN,EAAZ,CARJ,CAQkC;;AAC9BO,yBAAG,GAAGd,GAAN,CATJ,CASkC;;AAC9Be,yBAAG,GAAGF,GAAG,GAAG5rB,KAAK,CAACsrB,KAAN,EAAZ,CAVJ,CAUkC;;AAC9BS,yBAAG,GAAGx8C,CAAN,CAXJ,CAWkC;;AAC9BD,uBAAC,GAAGw8C,GAAG,GAAG9rB,KAAK,CAACsrB,KAAN,EAAV,CAZJ,CAYkC;;AAC9Bl9C,uBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BW,GAA9B,EAAmCC,GAAnC;AACAv9C,uBAAC,CAACowC,OAAF,CAAUoN,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz8C,CAA9B,EAAiCC,CAAjC;AACA;;AACJ,yBAAK,EAAL;AAAS;AACL;AACAq7C,yBAAG,GAAGt7C,CAAC,GAAK0wB,KAAK,CAACsrB,KAAN,EAAZ,CAFJ,CAEkC;;AAC9BT,yBAAG,GAAGt7C,CAAC,GAAKywB,KAAK,CAACsrB,KAAN,EAAZ,CAHJ,CAGkC;;AAC9BR,yBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ,CAJJ,CAIkC;;AAC9BP,yBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ,CALJ,CAKkC;;AAC9BI,yBAAG,GAAGZ,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAZ,CANJ,CAMkC;;AAC9BK,yBAAG,GAAGZ,GAAN,CAPJ,CAOkC;;AAC9Ba,yBAAG,GAAGF,GAAG,GAAG1rB,KAAK,CAACsrB,KAAN,EAAZ,CARJ,CAQkC;;AAC9BO,yBAAG,GAAGd,GAAN,CATJ,CASkC;;AAC9Be,yBAAG,GAAGF,GAAG,GAAG5rB,KAAK,CAACsrB,KAAN,EAAZ,CAVJ,CAUkC;;AAC9BS,yBAAG,GAAGF,GAAG,GAAG7rB,KAAK,CAACsrB,KAAN,EAAZ,CAXJ,CAWkC;;AAC9Bh8C,uBAAC,GAAGw8C,GAAG,GAAG9rB,KAAK,CAACsrB,KAAN,EAAV,CAZJ,CAYkC;;AAC9Bl9C,uBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BW,GAA9B,EAAmCC,GAAnC;AACAv9C,uBAAC,CAACowC,OAAF,CAAUoN,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz8C,CAA9B,EAAiCC,CAAjC;AACA;;AACJ,yBAAK,EAAL;AAAS;AACL;AACAq7C,yBAAG,GAAGt7C,CAAC,GAAK0wB,KAAK,CAACsrB,KAAN,EAAZ,CAFJ,CAEkC;;AAC9BT,yBAAG,GAAGt7C,CAAC,GAAKywB,KAAK,CAACsrB,KAAN,EAAZ,CAHJ,CAGkC;;AAC9BR,yBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ,CAJJ,CAIkC;;AAC9BP,yBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ,CALJ,CAKkC;;AAC9BI,yBAAG,GAAGZ,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAZ,CANJ,CAMkC;;AAC9BK,yBAAG,GAAGZ,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAZ,CAPJ,CAOkC;;AAC9BM,yBAAG,GAAGF,GAAG,GAAG1rB,KAAK,CAACsrB,KAAN,EAAZ,CARJ,CAQkC;;AAC9BO,yBAAG,GAAGF,GAAG,GAAG3rB,KAAK,CAACsrB,KAAN,EAAZ,CATJ,CASkC;;AAC9BQ,yBAAG,GAAGF,GAAG,GAAG5rB,KAAK,CAACsrB,KAAN,EAAZ,CAVJ,CAUkC;;AAC9BS,yBAAG,GAAGF,GAAG,GAAG7rB,KAAK,CAACsrB,KAAN,EAAZ,CAXJ,CAWkC;;AAC9B,0BAAI7/C,IAAI,CAAC4P,GAAL,CAASywC,GAAG,GAAGx8C,CAAf,IAAoB7D,IAAI,CAAC4P,GAAL,CAAS0wC,GAAG,GAAGx8C,CAAf,CAAxB,EAA2C;AACvCD,yBAAC,GAAGw8C,GAAG,GAAG9rB,KAAK,CAACsrB,KAAN,EAAV;AACH,uBAFD,MAEO;AACH/7C,yBAAC,GAAGw8C,GAAG,GAAG/rB,KAAK,CAACsrB,KAAN,EAAV;AACH;;AAEDl9C,uBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8BW,GAA9B,EAAmCC,GAAnC;AACAv9C,uBAAC,CAACowC,OAAF,CAAUoN,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz8C,CAA9B,EAAiCC,CAAjC;AACA;;AACJ;AACIkI,6BAAO,CAAC1L,GAAR,CAAY,WAAW2zB,KAAK,CAACze,KAAjB,GAAyB,qBAAzB,GAAiD,IAAjD,GAAwDtV,CAApE;AACAq0B,2BAAK,CAAC9yB,MAAN,GAAe,CAAf;AA1EJ;;AA4EA;;AACJ,qBAAK,EAAL;AAAS;AACL,sBAAI8yB,KAAK,CAAC9yB,MAAN,GAAe,CAAf,IAAoB,CAAC+9C,SAAzB,EAAoC;AAChC55C,yBAAK,GAAG2uB,KAAK,CAACsrB,KAAN,KAAgB7V,IAAI,CAAC8V,aAA7B;AACAN,6BAAS,GAAG,IAAZ;AACH;;AAED,sBAAIvJ,IAAJ,EAAU;AACNtzC,qBAAC,CAACqwC,SAAF;AACAiD,wBAAI,GAAG,KAAP;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACL0J,4BAAU;AACV;;AACJ,qBAAK,EAAL,CAvKA,CAuKS;;AACT,qBAAK,EAAL;AAAS;AACLA,4BAAU;AACVt+C,mBAAC,IAAKk+C,MAAM,GAAG,CAAV,IAAgB,CAArB;AACA;;AACJ,qBAAK,EAAL;AAAS;AACL,sBAAIhrB,KAAK,CAAC9yB,MAAN,GAAe,CAAf,IAAoB,CAAC+9C,SAAzB,EAAoC;AAChC55C,yBAAK,GAAG2uB,KAAK,CAACsrB,KAAN,KAAgB7V,IAAI,CAAC8V,aAA7B;AACAN,6BAAS,GAAG,IAAZ;AACH;;AAED17C,mBAAC,IAAIywB,KAAK,CAAC/a,GAAN,EAAL;AACA3V,mBAAC,IAAI0wB,KAAK,CAAC/a,GAAN,EAAL;AACAkmC,4BAAU,CAAC77C,CAAD,EAAIC,CAAJ,CAAV;AACA;;AACJ,qBAAK,EAAL;AAAS;AACL,sBAAIywB,KAAK,CAAC9yB,MAAN,GAAe,CAAf,IAAoB,CAAC+9C,SAAzB,EAAoC;AAChC55C,yBAAK,GAAG2uB,KAAK,CAACsrB,KAAN,KAAgB7V,IAAI,CAAC8V,aAA7B;AACAN,6BAAS,GAAG,IAAZ;AACH;;AAED37C,mBAAC,IAAI0wB,KAAK,CAAC/a,GAAN,EAAL;AACAkmC,4BAAU,CAAC77C,CAAD,EAAIC,CAAJ,CAAV;AACA;;AACJ,qBAAK,EAAL;AAAS;AACL67C,4BAAU;AACV;;AACJ,qBAAK,EAAL;AAAS;AACL,yBAAOprB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrB09C,uBAAG,GAAGt7C,CAAC,GAAG0wB,KAAK,CAACsrB,KAAN,EAAV;AACAT,uBAAG,GAAGt7C,CAAC,GAAGywB,KAAK,CAACsrB,KAAN,EAAV;AACAR,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,qBAAC,GAAGw7C,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAV;AACA/7C,qBAAC,GAAGw7C,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAV;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACH;;AAEDD,mBAAC,IAAI0wB,KAAK,CAACsrB,KAAN,EAAL;AACA/7C,mBAAC,IAAIywB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,mBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;AACA;;AACJ,qBAAK,EAAL;AAAS;AACL,yBAAOywB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrBoC,qBAAC,IAAI0wB,KAAK,CAACsrB,KAAN,EAAL;AACA/7C,qBAAC,IAAIywB,KAAK,CAACsrB,KAAN,EAAL;AACAl9C,qBAAC,CAACuoC,MAAF,CAASrnC,CAAT,EAAYC,CAAZ;AACH;;AAEDq7C,qBAAG,GAAGt7C,CAAC,GAAG0wB,KAAK,CAACsrB,KAAN,EAAV;AACAT,qBAAG,GAAGt7C,CAAC,GAAGywB,KAAK,CAACsrB,KAAN,EAAV;AACAR,qBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,qBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,mBAAC,GAAGw7C,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAV;AACA/7C,mBAAC,GAAGw7C,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAV;AACAl9C,mBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACA;;AACJ,qBAAK,EAAL;AAAS;AACL,sBAAIywB,KAAK,CAAC9yB,MAAN,GAAe,CAAnB,EAAsB;AAClBoC,qBAAC,IAAI0wB,KAAK,CAACsrB,KAAN,EAAL;AACH;;AAED,yBAAOtrB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrB09C,uBAAG,GAAGt7C,CAAN;AACAu7C,uBAAG,GAAGt7C,CAAC,GAAGywB,KAAK,CAACsrB,KAAN,EAAV;AACAR,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,qBAAC,GAAGw7C,GAAJ;AACAv7C,qBAAC,GAAGw7C,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAV;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACL,sBAAIywB,KAAK,CAAC9yB,MAAN,GAAe,CAAnB,EAAsB;AAClBqC,qBAAC,IAAIywB,KAAK,CAACsrB,KAAN,EAAL;AACH;;AAED,yBAAOtrB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrB09C,uBAAG,GAAGt7C,CAAC,GAAG0wB,KAAK,CAACsrB,KAAN,EAAV;AACAT,uBAAG,GAAGt7C,CAAN;AACAu7C,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,qBAAC,GAAGw7C,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAV;AACA/7C,qBAAC,GAAGw7C,GAAJ;AACA38C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACLm5C,oBAAE,GAAGnuB,IAAI,CAACztB,CAAD,CAAT;AACA67C,oBAAE,GAAGpuB,IAAI,CAACztB,CAAC,GAAG,CAAL,CAAT;AACAkzB,uBAAK,CAAC5yB,IAAN,CAAW,CAAEs7C,EAAE,IAAI,EAAP,GAAcC,EAAE,IAAI,EAArB,KAA6B,EAAxC;AACA77C,mBAAC,IAAI,CAAL;AACA;;AACJ,qBAAK,EAAL;AAAS;AACL0+C,2BAAS,GAAGxrB,KAAK,CAAC/a,GAAN,KAAcwwB,IAAI,CAACyW,UAA/B;AACAT,0BAAQ,GAAGhW,IAAI,CAAC0W,MAAL,CAAYX,SAAZ,CAAX;;AACA,sBAAIC,QAAJ,EAAc;AACVlL,yBAAK,CAACkL,QAAD,CAAL;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACL,yBAAOzrB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrB09C,uBAAG,GAAGt7C,CAAN;AACAu7C,uBAAG,GAAGt7C,CAAC,GAAGywB,KAAK,CAACsrB,KAAN,EAAV;AACAR,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,qBAAC,GAAGw7C,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAV;AACA/7C,qBAAC,GAAGw7C,GAAG,IAAI/qB,KAAK,CAAC9yB,MAAN,KAAiB,CAAjB,GAAqB8yB,KAAK,CAACsrB,KAAN,EAArB,GAAqC,CAAzC,CAAP;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;;AACA,wBAAIywB,KAAK,CAAC9yB,MAAN,KAAiB,CAArB,EAAwB;AACpB;AACH;;AAED09C,uBAAG,GAAGt7C,CAAC,GAAG0wB,KAAK,CAACsrB,KAAN,EAAV;AACAT,uBAAG,GAAGt7C,CAAN;AACAu7C,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACA/7C,qBAAC,GAAGw7C,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAV;AACAh8C,qBAAC,GAAGw7C,GAAG,IAAI9qB,KAAK,CAAC9yB,MAAN,KAAiB,CAAjB,GAAqB8yB,KAAK,CAACsrB,KAAN,EAArB,GAAqC,CAAzC,CAAP;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACH;;AAED;;AACJ,qBAAK,EAAL;AAAS;AACL,yBAAOywB,KAAK,CAAC9yB,MAAN,GAAe,CAAtB,EAAyB;AACrB09C,uBAAG,GAAGt7C,CAAC,GAAG0wB,KAAK,CAACsrB,KAAN,EAAV;AACAT,uBAAG,GAAGt7C,CAAN;AACAu7C,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACA/7C,qBAAC,GAAGw7C,GAAG,GAAG/qB,KAAK,CAACsrB,KAAN,EAAV;AACAh8C,qBAAC,GAAGw7C,GAAG,IAAI9qB,KAAK,CAAC9yB,MAAN,KAAiB,CAAjB,GAAqB8yB,KAAK,CAACsrB,KAAN,EAArB,GAAqC,CAAzC,CAAP;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;;AACA,wBAAIywB,KAAK,CAAC9yB,MAAN,KAAiB,CAArB,EAAwB;AACpB;AACH;;AAED09C,uBAAG,GAAGt7C,CAAN;AACAu7C,uBAAG,GAAGt7C,CAAC,GAAGywB,KAAK,CAACsrB,KAAN,EAAV;AACAR,uBAAG,GAAGF,GAAG,GAAG5qB,KAAK,CAACsrB,KAAN,EAAZ;AACAP,uBAAG,GAAGF,GAAG,GAAG7qB,KAAK,CAACsrB,KAAN,EAAZ;AACAh8C,qBAAC,GAAGw7C,GAAG,GAAG9qB,KAAK,CAACsrB,KAAN,EAAV;AACA/7C,qBAAC,GAAGw7C,GAAG,IAAI/qB,KAAK,CAAC9yB,MAAN,KAAiB,CAAjB,GAAqB8yB,KAAK,CAACsrB,KAAN,EAArB,GAAqC,CAAzC,CAAP;AACAl9C,qBAAC,CAACowC,OAAF,CAAUoM,GAAV,EAAeC,GAAf,EAAoBC,GAApB,EAAyBC,GAAzB,EAA8Bz7C,CAA9B,EAAiCC,CAAjC;AACH;;AAED;;AACJ;AACI,sBAAI5D,CAAC,GAAG,EAAR,EAAY;AACR8L,2BAAO,CAAC1L,GAAR,CAAY,WAAW2zB,KAAK,CAACze,KAAjB,GAAyB,qBAAzB,GAAiDtV,CAA7D;AACH,mBAFD,MAEO,IAAIA,CAAC,GAAG,GAAR,EAAa;AAChBq0B,yBAAK,CAAC5yB,IAAN,CAAWzB,CAAC,GAAG,GAAf;AACH,mBAFM,MAEA,IAAIA,CAAC,GAAG,GAAR,EAAa;AAChB+8C,sBAAE,GAAGnuB,IAAI,CAACztB,CAAD,CAAT;AACAA,qBAAC,IAAI,CAAL;AACAkzB,yBAAK,CAAC5yB,IAAN,CAAW,CAACzB,CAAC,GAAG,GAAL,IAAY,GAAZ,GAAkB+8C,EAAlB,GAAuB,GAAlC;AACH,mBAJM,MAIA,IAAI/8C,CAAC,GAAG,GAAR,EAAa;AAChB+8C,sBAAE,GAAGnuB,IAAI,CAACztB,CAAD,CAAT;AACAA,qBAAC,IAAI,CAAL;AACAkzB,yBAAK,CAAC5yB,IAAN,CAAW,EAAEzB,CAAC,GAAG,GAAN,IAAa,GAAb,GAAmB+8C,EAAnB,GAAwB,GAAnC;AACH,mBAJM,MAIA;AACHA,sBAAE,GAAGnuB,IAAI,CAACztB,CAAD,CAAT;AACA67C,sBAAE,GAAGpuB,IAAI,CAACztB,CAAC,GAAG,CAAL,CAAT;AACA87C,sBAAE,GAAGruB,IAAI,CAACztB,CAAC,GAAG,CAAL,CAAT;AACA+7C,sBAAE,GAAGtuB,IAAI,CAACztB,CAAC,GAAG,CAAL,CAAT;AACAA,qBAAC,IAAI,CAAL;AACAkzB,yBAAK,CAAC5yB,IAAN,CAAW,CAAEs7C,EAAE,IAAI,EAAP,GAAcC,EAAE,IAAI,EAApB,GAA2BC,EAAE,IAAI,CAAjC,GAAsCC,EAAvC,IAA6C,KAAxD;AACH;;AAhVL;AAkVH;AACJ;;AAEDtI,eAAK,CAAChmB,IAAD,CAAL;AAEAmF,eAAK,CAACmb,YAAN,GAAqBxpC,KAArB;AACA,iBAAOjD,CAAP;AACH,SA9vBiE,CAgwBlE;AACA;;;AACA,iBAASg+C,qBAAT,CAA+BH,KAA/B,EAAsC;AAClC,cAAIl5C,IAAJ;;AACA,cAAIk5C,KAAK,CAAC/+C,MAAN,GAAe,IAAnB,EAAyB;AACrB6F,gBAAI,GAAG,GAAP;AACH,WAFD,MAEO,IAAIk5C,KAAK,CAAC/+C,MAAN,GAAe,KAAnB,EAA0B;AAC7B6F,gBAAI,GAAG,IAAP;AACH,WAFM,MAEA;AACHA,gBAAI,GAAG,KAAP;AACH;;AAED,iBAAOA,IAAP;AACH,SA7wBiE,CA+wBlE;;;AACA,iBAASs5C,aAAT,CAAuBv6C,IAAvB,EAA6B2I,KAA7B,EAAoCg7B,IAApC,EAA0C;AACtCA,cAAI,CAAC2C,MAAL,CAAYoI,GAAZ,GAAkB,EAAlB;AACA,cAAIoJ,MAAM,GAAGD,cAAc,CAAC73C,IAAD,EAAO2I,KAAP,CAA3B;AACA,cAAI6xC,SAAS,GAAGzE,aAAa,CAAC/1C,IAAD,EAAO83C,MAAM,CAACnF,SAAd,EAAyBlE,KAAK,CAACmE,aAA/B,CAA7B;AACA,cAAI6H,YAAY,GAAG1E,aAAa,CAAC/1C,IAAD,EAAOw6C,SAAS,CAAC7H,SAAjB,CAAhC;AACA,cAAI+H,WAAW,GAAG3E,aAAa,CAAC/1C,IAAD,EAAOy6C,YAAY,CAAC9H,SAApB,EAA+BlE,KAAK,CAACmE,aAArC,CAA/B;AACA,cAAI+H,eAAe,GAAG5E,aAAa,CAAC/1C,IAAD,EAAO06C,WAAW,CAAC/H,SAAnB,CAAnC;AACAhP,cAAI,CAAC0W,MAAL,GAAcM,eAAe,CAAC1E,OAA9B;AACAtS,cAAI,CAACyW,UAAL,GAAkBE,qBAAqB,CAAC3W,IAAI,CAAC0W,MAAN,CAAvC;AAEA,cAAIO,WAAW,GAAG,IAAIvP,QAAJ,CAAa,IAAIb,UAAJ,CAAeiQ,YAAY,CAACxE,OAAb,CAAqB,CAArB,CAAf,EAAwC3L,MAArD,CAAlB;AACA,cAAIuQ,OAAO,GAAG1C,eAAe,CAACyC,WAAD,EAAcF,WAAW,CAACzE,OAA1B,CAA7B;AACAtS,cAAI,CAAC2C,MAAL,CAAYoI,GAAZ,CAAgBmM,OAAhB,GAA0BA,OAA1B;AAEA,cAAIC,iBAAiB,GAAGnyC,KAAK,GAAGkyC,OAAO,CAAC,SAAD,CAAP,CAAmB,CAAnB,CAAhC;AACA,cAAIE,WAAW,GAAG3C,mBAAmB,CAACp4C,IAAD,EAAO86C,iBAAP,EAA0BD,OAAO,CAAC,SAAD,CAAP,CAAmB,CAAnB,CAA1B,EAAiDH,WAAW,CAACzE,OAA7D,CAArC;AACAtS,cAAI,CAACyV,aAAL,GAAqB2B,WAAW,CAAC3B,aAAjC;AACAzV,cAAI,CAAC8V,aAAL,GAAqBsB,WAAW,CAACtB,aAAjC;;AAEA,cAAIsB,WAAW,CAACZ,KAAZ,KAAsB,CAA1B,EAA6B;AACzB,gBAAIa,UAAU,GAAGF,iBAAiB,GAAGC,WAAW,CAACZ,KAAjD;AACA,gBAAIc,SAAS,GAAGlF,aAAa,CAAC/1C,IAAD,EAAOg7C,UAAP,CAA7B;AACArX,gBAAI,CAACwW,KAAL,GAAac,SAAS,CAAChF,OAAvB;AACAtS,gBAAI,CAACuW,SAAL,GAAiBI,qBAAqB,CAAC3W,IAAI,CAACwW,KAAN,CAAtC;AACH,WALD,MAKO;AACHxW,gBAAI,CAACwW,KAAL,GAAa,EAAb;AACAxW,gBAAI,CAACuW,SAAL,GAAiB,CAAjB;AACH,WA3BqC,CA6BtC;;;AACA,cAAIgB,gBAAgB,GAAGnF,aAAa,CAAC/1C,IAAD,EAAO2I,KAAK,GAAGkyC,OAAO,CAACM,WAAvB,CAApC;AACAxX,cAAI,CAAC2U,OAAL,GAAe4C,gBAAgB,CAACjF,OAAjB,CAAyB76C,MAAxC;AAEA,cAAIsqC,OAAO,GAAG2S,eAAe,CAACr4C,IAAD,EAAO2I,KAAK,GAAGkyC,OAAO,CAACnV,OAAvB,EAAgC/B,IAAI,CAAC2U,OAArC,EAA8CoC,WAAW,CAACzE,OAA1D,CAA7B;;AACA,cAAI4E,OAAO,CAACpV,QAAR,KAAqB,CAAzB,EAA4B;AAAE;AAC1B9B,gBAAI,CAAC+C,WAAL,GAAmB,IAAIjB,QAAQ,CAACD,WAAb,CAAyBC,QAAQ,CAACV,mBAAlC,EAAuDW,OAAvD,CAAnB;AACH,WAFD,MAEO,IAAImV,OAAO,CAACpV,QAAR,KAAqB,CAAzB,EAA4B;AAAE;AACjC9B,gBAAI,CAAC+C,WAAL,GAAmB,IAAIjB,QAAQ,CAACD,WAAb,CAAyBC,QAAQ,CAACT,iBAAlC,EAAqDU,OAArD,CAAnB;AACH,WAFM,MAEA;AACH/B,gBAAI,CAAC+C,WAAL,GAAmB+R,gBAAgB,CAACz4C,IAAD,EAAO2I,KAAK,GAAGkyC,OAAO,CAACpV,QAAvB,EAAiCC,OAAjC,CAAnC;AACH,WAxCqC,CA0CtC;;;AACA/B,cAAI,CAAC8B,QAAL,GAAgB9B,IAAI,CAAC8B,QAAL,IAAiB9B,IAAI,CAAC+C,WAAtC;AAEA/C,cAAI,CAAC/a,MAAL,GAAc,IAAIie,QAAQ,CAACiB,QAAb,CAAsBnE,IAAtB,CAAd;;AACA,eAAK,IAAI3oC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2oC,IAAI,CAAC2U,OAAzB,EAAkCt9C,CAAC,IAAI,CAAvC,EAA0C;AACtC,gBAAIogD,UAAU,GAAGF,gBAAgB,CAACjF,OAAjB,CAAyBj7C,CAAzB,CAAjB;AACA2oC,gBAAI,CAAC/a,MAAL,CAAYttB,IAAZ,CAAiBN,CAAjB,EAAoB6rC,QAAQ,CAACwH,cAAT,CAAwB1K,IAAxB,EAA8B3oC,CAA9B,EAAiCszC,kBAAjC,EAAqD8M,UAArD,CAApB;AACH;AACJ,SAl0BiE,CAo0BlE;AACA;;;AACA,iBAASC,YAAT,CAAsBziB,CAAtB,EAAyB2e,OAAzB,EAAkC;AAC9B,cAAIgB,GAAJ,CAD8B,CAG9B;;AACA,cAAIv9C,CAAC,GAAGyqC,QAAQ,CAACX,kBAAT,CAA4BnjB,OAA5B,CAAoCiX,CAApC,CAAR;;AACA,cAAI59B,CAAC,IAAI,CAAT,EAAY;AACRu9C,eAAG,GAAGv9C,CAAN;AACH,WAP6B,CAS9B;;;AACAA,WAAC,GAAGu8C,OAAO,CAAC51B,OAAR,CAAgBiX,CAAhB,CAAJ;;AACA,cAAI59B,CAAC,IAAI,CAAT,EAAY;AACRu9C,eAAG,GAAGv9C,CAAC,GAAGyqC,QAAQ,CAACX,kBAAT,CAA4B1pC,MAAtC;AACH,WAFD,MAEO;AACHm9C,eAAG,GAAG9S,QAAQ,CAACX,kBAAT,CAA4B1pC,MAA5B,GAAqCm8C,OAAO,CAACn8C,MAAnD;AACAm8C,mBAAO,CAACj8C,IAAR,CAAas9B,CAAb;AACH;;AAED,iBAAO2f,GAAP;AACH;;AAED,iBAAS+C,UAAT,GAAsB;AAClB,iBAAO,IAAIzF,KAAK,CAACN,KAAV,CAAgB,QAAhB,EAA0B,CAC7B;AAAC11C,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,OAAtB;AAA+BkmB,iBAAK,EAAE;AAAtC,WAD6B,EAE7B;AAACltB,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,OAAtB;AAA+BkmB,iBAAK,EAAE;AAAtC,WAF6B,EAG7B;AAACltB,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAH6B,EAI7B;AAACltB,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,OAAtB;AAA+BkmB,iBAAK,EAAE;AAAtC,WAJ6B,CAA1B,CAAP;AAMH;;AAED,iBAASwuB,aAAT,CAAuBC,SAAvB,EAAkC;AAC9B,cAAI5zC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,YAAhB,EAA8B,CAClC;AAAC11C,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,OAAtB;AAA+BkmB,iBAAK,EAAE;AAAtC,WADkC,CAA9B,CAAR;AAGAnlB,WAAC,CAACm+B,KAAF,GAAU,EAAV;;AACA,eAAK,IAAI/qC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwgD,SAAS,CAACpgD,MAA9B,EAAsCJ,CAAC,IAAI,CAA3C,EAA8C;AAC1C4M,aAAC,CAACm+B,KAAF,CAAQzqC,IAAR,CAAa;AAACuE,kBAAI,EAAE,UAAU7E,CAAjB;AAAoB6L,kBAAI,EAAE,MAA1B;AAAkCkmB,mBAAK,EAAEyuB,SAAS,CAACxgD,CAAD;AAAlD,aAAb;AACH;;AAED,iBAAO4M,CAAP;AACH,SA92BiE,CAg3BlE;;;AACA,iBAAS6zC,QAAT,CAAkB/D,IAAlB,EAAwBgE,KAAxB,EAA+BnE,OAA/B,EAAwC;AACpC,cAAIK,CAAC,GAAG,EAAR;;AACA,eAAK,IAAI58C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG08C,IAAI,CAACt8C,MAAzB,EAAiCJ,CAAC,IAAI,CAAtC,EAAyC;AACrC,gBAAI0sB,KAAK,GAAGgwB,IAAI,CAAC18C,CAAD,CAAhB;AACA,gBAAI+xB,KAAK,GAAG2uB,KAAK,CAACh0B,KAAK,CAAC7nB,IAAP,CAAjB;;AACA,gBAAIktB,KAAK,KAAKvd,SAAV,IAAuB,CAACsmC,MAAM,CAAC/oB,KAAD,EAAQrF,KAAK,CAACqF,KAAd,CAAlC,EAAwD;AACpD,kBAAIrF,KAAK,CAAC7gB,IAAN,KAAe,KAAnB,EAA0B;AACtBkmB,qBAAK,GAAGsuB,YAAY,CAACtuB,KAAD,EAAQwqB,OAAR,CAApB;AACH;;AAEDK,eAAC,CAAClwB,KAAK,CAAC2vB,EAAP,CAAD,GAAc;AAACx3C,oBAAI,EAAE6nB,KAAK,CAAC7nB,IAAb;AAAmBgH,oBAAI,EAAE6gB,KAAK,CAAC7gB,IAA/B;AAAqCkmB,qBAAK,EAAEA;AAA5C,eAAd;AACH;AACJ;;AAED,iBAAO6qB,CAAP;AACH,SAh4BiE,CAk4BlE;;;AACA,iBAAS+D,WAAT,CAAqBD,KAArB,EAA4BnE,OAA5B,EAAqC;AACjC,cAAI3vC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,UAAhB,EAA4B,CAChC;AAAC11C,gBAAI,EAAE,MAAP;AAAegH,gBAAI,EAAE,MAArB;AAA6BkmB,iBAAK,EAAE;AAApC,WADgC,CAA5B,CAAR;AAGAnlB,WAAC,CAAC6vC,IAAF,GAASgE,QAAQ,CAACxD,aAAD,EAAgByD,KAAhB,EAAuBnE,OAAvB,CAAjB;AACA,iBAAO3vC,CAAP;AACH;;AAED,iBAASg0C,gBAAT,CAA0Bf,OAA1B,EAAmC;AAC/B,cAAIjzC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,gBAAhB,EAAkC,CACtC;AAAC11C,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,OAAzB;AAAkCkmB,iBAAK,EAAE;AAAzC,WADsC,CAAlC,CAAR;AAGAnlB,WAAC,CAACi0C,QAAF,GAAa,CAAC;AAACh8C,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,OAA1B;AAAmCkmB,iBAAK,EAAE8tB;AAA1C,WAAD,CAAb;AACA,iBAAOjzC,CAAP;AACH;;AAED,iBAASk0C,eAAT,CAAyBvE,OAAzB,EAAkC;AAC9B,cAAI3vC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,cAAhB,EAAgC,CACpC;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WADoC,CAAhC,CAAR;AAGAnlB,WAAC,CAAC2vC,OAAF,GAAY,EAAZ;;AACA,eAAK,IAAIv8C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGu8C,OAAO,CAACn8C,MAA5B,EAAoCJ,CAAC,IAAI,CAAzC,EAA4C;AACxC4M,aAAC,CAAC2vC,OAAF,CAAUj8C,IAAV,CAAe;AAACuE,kBAAI,EAAE,YAAY7E,CAAnB;AAAsB6L,kBAAI,EAAE,QAA5B;AAAsCkmB,mBAAK,EAAEwqB,OAAO,CAACv8C,CAAD;AAApD,aAAf;AACH;;AAED,iBAAO4M,CAAP;AACH;;AAED,iBAASm0C,mBAAT,GAA+B;AAC3B;AACA,iBAAO,IAAIlG,KAAK,CAACN,KAAV,CAAgB,mBAAhB,EAAqC,CACxC;AAAC11C,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,OAAtB;AAA+BkmB,iBAAK,EAAE;AAAtC,WADwC,CAArC,CAAP;AAGH;;AAED,iBAASivB,YAAT,CAAsBrV,UAAtB,EAAkC4Q,OAAlC,EAA2C;AACvC,cAAI3vC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,UAAhB,EAA4B,CAChC;AAAC11C,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,OAAvB;AAAgCkmB,iBAAK,EAAE;AAAvC,WADgC,CAA5B,CAAR;;AAGA,eAAK,IAAI/xB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2rC,UAAU,CAACvrC,MAA/B,EAAuCJ,CAAC,IAAI,CAA5C,EAA+C;AAC3C,gBAAIihD,SAAS,GAAGtV,UAAU,CAAC3rC,CAAD,CAA1B;AACA,gBAAIkhD,QAAQ,GAAGb,YAAY,CAACY,SAAD,EAAY1E,OAAZ,CAA3B;AACA3vC,aAAC,CAAC6tC,MAAF,CAASn6C,IAAT,CAAc;AAACuE,kBAAI,EAAE,WAAW7E,CAAlB;AAAqB6L,kBAAI,EAAE,KAA3B;AAAkCkmB,mBAAK,EAAEmvB;AAAzC,aAAd;AACH;;AAED,iBAAOt0C,CAAP;AACH;;AAED,iBAASu0C,UAAT,CAAoBvuB,KAApB,EAA2B;AACvB,cAAIwuB,GAAG,GAAG,EAAV;AACA,cAAIl9B,IAAI,GAAG0O,KAAK,CAAC1O,IAAjB;AACAk9B,aAAG,CAAC9gD,IAAJ,CAAS;AAACuE,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,QAAtB;AAAgCkmB,iBAAK,EAAEa,KAAK,CAACmb;AAA7C,WAAT;AACA,cAAIvrC,CAAC,GAAG,CAAR;AACA,cAAIC,CAAC,GAAG,CAAR;;AACA,eAAK,IAAIzC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkkB,IAAI,CAAC2b,QAAL,CAAcz/B,MAAlC,EAA0CJ,CAAC,IAAI,CAA/C,EAAkD;AAC9C,gBAAI4D,EAAJ;AACA,gBAAIC,EAAJ;AACA,gBAAI2tC,GAAG,GAAGttB,IAAI,CAAC2b,QAAL,CAAc7/B,CAAd,CAAV;;AACA,gBAAIwxC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClB;AACA,kBAAIw1C,GAAG,GAAG,IAAI,CAAd;;AACA,kBAAIC,GAAG,GAAG,IAAI,CAAd,CAHkB,CAKlB;;;AACA9P,iBAAG,GAAG;AACF3lC,oBAAI,EAAE,GADJ;AAEFrJ,iBAAC,EAAEgvC,GAAG,CAAChvC,CAFL;AAGFC,iBAAC,EAAE+uC,GAAG,CAAC/uC,CAHL;AAIF0C,kBAAE,EAAEk8C,GAAG,GAAG7+C,CAAN,GAAU8+C,GAAG,GAAG9P,GAAG,CAACrsC,EAJtB;AAKF6gB,kBAAE,EAAEq7B,GAAG,GAAG5+C,CAAN,GAAU6+C,GAAG,GAAG9P,GAAG,CAACxrB,EALtB;AAMFH,kBAAE,EAAEw7B,GAAG,GAAG7P,GAAG,CAAChvC,CAAV,GAAc8+C,GAAG,GAAG9P,GAAG,CAACrsC,EAN1B;AAOF8gB,kBAAE,EAAEo7B,GAAG,GAAG7P,GAAG,CAAC/uC,CAAV,GAAc6+C,GAAG,GAAG9P,GAAG,CAACxrB;AAP1B,eAAN;AASH;;AAED,gBAAIwrB,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AAClBjI,gBAAE,GAAGjF,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAChvC,CAAJ,GAAQA,CAAnB,CAAL;AACAqB,gBAAE,GAAGlF,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC/uC,CAAJ,GAAQA,CAAnB,CAAL;AACA2+C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,IAAP;AAAagH,oBAAI,EAAE,QAAnB;AAA6BkmB,qBAAK,EAAEnuB;AAApC,eAAT;AACAw9C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,IAAP;AAAagH,oBAAI,EAAE,QAAnB;AAA6BkmB,qBAAK,EAAEluB;AAApC,eAAT;AACAu9C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,SAAP;AAAkBgH,oBAAI,EAAE,IAAxB;AAA8BkmB,qBAAK,EAAE;AAArC,eAAT;AACAvvB,eAAC,GAAG7D,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAChvC,CAAf,CAAJ;AACAC,eAAC,GAAG9D,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC/uC,CAAf,CAAJ;AACH,aARD,MAQO,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzBjI,gBAAE,GAAGjF,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAChvC,CAAJ,GAAQA,CAAnB,CAAL;AACAqB,gBAAE,GAAGlF,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC/uC,CAAJ,GAAQA,CAAnB,CAAL;AACA2+C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,IAAP;AAAagH,oBAAI,EAAE,QAAnB;AAA6BkmB,qBAAK,EAAEnuB;AAApC,eAAT;AACAw9C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,IAAP;AAAagH,oBAAI,EAAE,QAAnB;AAA6BkmB,qBAAK,EAAEluB;AAApC,eAAT;AACAu9C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,SAAP;AAAkBgH,oBAAI,EAAE,IAAxB;AAA8BkmB,qBAAK,EAAE;AAArC,eAAT;AACAvvB,eAAC,GAAG7D,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAChvC,CAAf,CAAJ;AACAC,eAAC,GAAG9D,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC/uC,CAAf,CAAJ;AACH,aARM,MAQA,IAAI+uC,GAAG,CAAC3lC,IAAJ,KAAa,GAAjB,EAAsB;AACzB,kBAAI01C,GAAG,GAAG5iD,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAACrsC,EAAJ,GAAS3C,CAApB,CAAV;AACA,kBAAIg/C,GAAG,GAAG7iD,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAACxrB,EAAJ,GAASvjB,CAApB,CAAV;AACA,kBAAIg/C,GAAG,GAAG9iD,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC3rB,EAAJ,GAAS2rB,GAAG,CAACrsC,EAAxB,CAAV;AACA,kBAAIu8C,GAAG,GAAG/iD,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAACvrB,EAAJ,GAASurB,GAAG,CAACxrB,EAAxB,CAAV;AACApiB,gBAAE,GAAGjF,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAChvC,CAAJ,GAAQgvC,GAAG,CAAC3rB,EAAvB,CAAL;AACAhiB,gBAAE,GAAGlF,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC/uC,CAAJ,GAAQ+uC,GAAG,CAACvrB,EAAvB,CAAL;AACAm7B,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,KAAP;AAAcgH,oBAAI,EAAE,QAApB;AAA8BkmB,qBAAK,EAAEwvB;AAArC,eAAT;AACAH,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,KAAP;AAAcgH,oBAAI,EAAE,QAApB;AAA8BkmB,qBAAK,EAAEyvB;AAArC,eAAT;AACAJ,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,KAAP;AAAcgH,oBAAI,EAAE,QAApB;AAA8BkmB,qBAAK,EAAE0vB;AAArC,eAAT;AACAL,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,KAAP;AAAcgH,oBAAI,EAAE,QAApB;AAA8BkmB,qBAAK,EAAE2vB;AAArC,eAAT;AACAN,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,IAAP;AAAagH,oBAAI,EAAE,QAAnB;AAA6BkmB,qBAAK,EAAEnuB;AAApC,eAAT;AACAw9C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,IAAP;AAAagH,oBAAI,EAAE,QAAnB;AAA6BkmB,qBAAK,EAAEluB;AAApC,eAAT;AACAu9C,iBAAG,CAAC9gD,IAAJ,CAAS;AAACuE,oBAAI,EAAE,WAAP;AAAoBgH,oBAAI,EAAE,IAA1B;AAAgCkmB,qBAAK,EAAE;AAAvC,eAAT;AACAvvB,eAAC,GAAG7D,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAChvC,CAAf,CAAJ;AACAC,eAAC,GAAG9D,IAAI,CAAC4jB,KAAL,CAAWivB,GAAG,CAAC/uC,CAAf,CAAJ;AACH,aArD6C,CAuD9C;;AAEH;;AAED2+C,aAAG,CAAC9gD,IAAJ,CAAS;AAACuE,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,IAAxB;AAA8BkmB,iBAAK,EAAE;AAArC,WAAT;AACA,iBAAOqvB,GAAP;AACH;;AAED,iBAASO,oBAAT,CAA8B/zB,MAA9B,EAAsC;AAClC,cAAIhhB,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,mBAAhB,EAAqC,CACzC;AAAC11C,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,OAA5B;AAAqCkmB,iBAAK,EAAE;AAA5C,WADyC,CAArC,CAAR;;AAIA,eAAK,IAAI/xB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,MAAM,CAACxtB,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI4yB,KAAK,GAAGhF,MAAM,CAACrrB,GAAP,CAAWvC,CAAX,CAAZ;AACA,gBAAIohD,GAAG,GAAGD,UAAU,CAACvuB,KAAD,CAApB;AACAhmB,aAAC,CAACuzC,WAAF,CAAc7/C,IAAd,CAAmB;AAACuE,kBAAI,EAAE+tB,KAAK,CAAC/tB,IAAb;AAAmBgH,kBAAI,EAAE,YAAzB;AAAuCkmB,mBAAK,EAAEqvB;AAA9C,aAAnB;AACH;;AAED,iBAAOx0C,CAAP;AACH;;AAED,iBAASg1C,eAAT,CAAyBlB,KAAzB,EAAgCnE,OAAhC,EAAyC;AACrC,cAAI3vC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,cAAhB,EAAgC,CACpC;AAAC11C,gBAAI,EAAE,MAAP;AAAegH,gBAAI,EAAE,MAArB;AAA6BkmB,iBAAK,EAAE;AAApC,WADoC,CAAhC,CAAR;AAGAnlB,WAAC,CAAC6vC,IAAF,GAASgE,QAAQ,CAACvD,iBAAD,EAAoBwD,KAApB,EAA2BnE,OAA3B,CAAjB;AACA,iBAAO3vC,CAAP;AACH;;AAED,iBAASi1C,oBAAT,CAA8B9B,WAA9B,EAA2C;AACvC,cAAInzC,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,oBAAhB,EAAsC,CAC1C;AAAC11C,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAD0C,CAAtC,CAAR;AAGAnlB,WAAC,CAACk1C,YAAF,GAAiB,CAAC;AAACj9C,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,OAA9B;AAAuCkmB,iBAAK,EAAEguB;AAA9C,WAAD,CAAjB;AACA,iBAAOnzC,CAAP;AACH;;AAED,iBAASm1C,YAAT,CAAsBn0B,MAAtB,EAA8BniB,OAA9B,EAAuC;AACnC,cAAImB,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC5B;AAAC11C,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE;AAAvB,WAD4B,EAE5B;AAAChH,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE;AAA1B,WAF4B,EAG5B;AAAChH,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE;AAA7B,WAH4B,EAI5B;AAAChH,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE;AAA5B,WAJ4B,EAK5B;AAAChH,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE;AAAhC,WAL4B,EAM5B;AAAChH,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE;AAAzB,WAN4B,EAO5B;AAAChH,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE;AAAjC,WAP4B,EAQ5B;AAAChH,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE;AAAjC,WAR4B,CAAxB,CAAR;AAWA,cAAIiiC,SAAS,GAAG,IAAIriC,OAAO,CAACihC,UAA5B,CAZmC,CAanC;AACA;AACA;;AACA,cAAIgU,KAAK,GAAG;AACR5V,mBAAO,EAAEr/B,OAAO,CAACq/B,OADT;AAERkX,oBAAQ,EAAEv2C,OAAO,CAACu2C,QAFV;AAGRjW,sBAAU,EAAEtgC,OAAO,CAACsgC,UAHZ;AAIRjb,kBAAM,EAAErlB,OAAO,CAACw2C,UAJR;AAKRC,sBAAU,EAAE,CAACpU,SAAD,EAAY,CAAZ,EAAe,CAAf,EAAkBA,SAAlB,EAA6B,CAA7B,EAAgC,CAAhC,CALJ;AAMRpD,mBAAO,EAAE,GAND;AAORD,oBAAQ,EAAE,CAPF;AAQR0V,uBAAW,EAAE,GARL;AASR,uBAAS,CAAC,CAAD,EAAI,GAAJ;AATD,WAAZ;AAYA,cAAIgC,YAAY,GAAG,EAAnB;AAEA,cAAIxW,UAAU,GAAG,EAAjB;AACA,cAAI/Y,KAAJ,CA/BmC,CAiCnC;;AACA,eAAK,IAAI5yB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,MAAM,CAACxtB,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC4yB,iBAAK,GAAGhF,MAAM,CAACrrB,GAAP,CAAWvC,CAAX,CAAR;AACA2rC,sBAAU,CAACrrC,IAAX,CAAgBsyB,KAAK,CAAC/tB,IAAtB;AACH;;AAED,cAAI03C,OAAO,GAAG,EAAd;AAEA3vC,WAAC,CAACkwC,MAAF,GAAWwD,UAAU,EAArB;AACA1zC,WAAC,CAAC4yC,SAAF,GAAce,aAAa,CAAC,CAAC90C,OAAO,CAAC22C,cAAT,CAAD,CAA3B;AACA,cAAIvC,OAAO,GAAGc,WAAW,CAACD,KAAD,EAAQnE,OAAR,CAAzB;AACA3vC,WAAC,CAAC6yC,YAAF,GAAiBmB,gBAAgB,CAACf,OAAD,CAAjC;AACAjzC,WAAC,CAAC+yC,eAAF,GAAoBoB,mBAAmB,EAAvC;AACAn0C,WAAC,CAACy1C,QAAF,GAAarB,YAAY,CAACrV,UAAD,EAAa4Q,OAAb,CAAzB;AACA3vC,WAAC,CAACszC,gBAAF,GAAqByB,oBAAoB,CAAC/zB,MAAD,CAAzC;AACA,cAAImyB,WAAW,GAAG6B,eAAe,CAACO,YAAD,EAAe5F,OAAf,CAAjC;AACA3vC,WAAC,CAAC01C,gBAAF,GAAqBT,oBAAoB,CAAC9B,WAAD,CAAzC,CAjDmC,CAmDnC;;AACAnzC,WAAC,CAAC8yC,WAAF,GAAgBoB,eAAe,CAACvE,OAAD,CAA/B;AAEA,cAAI7E,WAAW,GAAG9qC,CAAC,CAACkwC,MAAF,CAASxC,MAAT,KACd1tC,CAAC,CAAC4yC,SAAF,CAAYlF,MAAZ,EADc,GAEd1tC,CAAC,CAAC6yC,YAAF,CAAenF,MAAf,EAFc,GAGd1tC,CAAC,CAAC8yC,WAAF,CAAcpF,MAAd,EAHc,GAId1tC,CAAC,CAAC+yC,eAAF,CAAkBrF,MAAlB,EAJJ;AAKAoG,eAAK,CAAChW,OAAN,GAAgBgN,WAAhB,CA3DmC,CA6DnC;;AACAgJ,eAAK,CAACjW,QAAN,GAAiB,CAAjB;AACAiW,eAAK,CAACP,WAAN,GAAoBO,KAAK,CAAChW,OAAN,GAAgB99B,CAAC,CAACy1C,QAAF,CAAW/H,MAAX,EAApC;AACAoG,eAAK,CAAC6B,OAAN,CAAc,CAAd,IAAmB7B,KAAK,CAACP,WAAN,GAAoBvzC,CAAC,CAACszC,gBAAF,CAAmB5F,MAAnB,EAAvC,CAhEmC,CAkEnC;;AACAuF,iBAAO,GAAGc,WAAW,CAACD,KAAD,EAAQnE,OAAR,CAArB;AACA3vC,WAAC,CAAC6yC,YAAF,GAAiBmB,gBAAgB,CAACf,OAAD,CAAjC;AAEA,iBAAOjzC,CAAP;AACH;;AAEDgI,eAAO,CAAC6+B,KAAR,GAAgB8L,aAAhB;AACA3qC,eAAO,CAAC4tC,IAAR,GAAeT,YAAf;AAEC,OAlmCgC,EAkmC/B;AAAC,uBAAc,CAAf;AAAiB,uBAAc,CAA/B;AAAiC,oBAAW,CAA5C;AAA8C,mBAAU,CAAxD;AAA0D,oBAAW;AAArE,OAlmC+B,CA7hD0wB;AA+nF/tB,UAAG,CAAC,UAASxiC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAChH;AACA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CARgH,CAUhH;AACA;AACA;;;AACA,iBAASkjC,cAAT,CAAwBz9C,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAI3N,CAAJ;AACA,cAAIsqC,IAAI,GAAG,EAAX;AACAA,cAAI,CAACQ,OAAL,GAAe2I,KAAK,CAACqC,SAAN,CAAgB9wC,IAAhB,EAAsB2I,KAAtB,CAAf;AACAinB,eAAK,CAAC6U,QAAN,CAAea,IAAI,CAACQ,OAAL,KAAiB,CAAhC,EAAmC,iCAAnC,EAJiC,CAMjC;AACA;;AACAR,cAAI,CAACuL,SAAL,GAAiBpC,KAAK,CAACqC,SAAN,CAAgB9wC,IAAhB,EAAsB2I,KAAK,GAAG,CAA9B,CAAjB;AACA,cAAIob,MAAM,GAAG,CAAC,CAAd;;AACA,eAAK/oB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGsqC,IAAI,CAACuL,SAArB,EAAgC71C,CAAC,IAAI,CAArC,EAAwC;AACpC,gBAAI0iD,UAAU,GAAGjP,KAAK,CAACqC,SAAN,CAAgB9wC,IAAhB,EAAsB2I,KAAK,GAAG,CAAR,GAAa3N,CAAC,GAAG,CAAvC,CAAjB;AACA,gBAAI2iD,UAAU,GAAGlP,KAAK,CAACqC,SAAN,CAAgB9wC,IAAhB,EAAsB2I,KAAK,GAAG,CAAR,GAAa3N,CAAC,GAAG,CAAjB,GAAsB,CAA5C,CAAjB;;AACA,gBAAI0iD,UAAU,KAAK,CAAf,KAAqBC,UAAU,KAAK,CAAf,IAAoBA,UAAU,KAAK,CAAxD,CAAJ,EAAgE;AAC5D55B,oBAAM,GAAG0qB,KAAK,CAACuC,QAAN,CAAehxC,IAAf,EAAqB2I,KAAK,GAAG,CAAR,GAAa3N,CAAC,GAAG,CAAjB,GAAsB,CAA3C,CAAT;AACA;AACH;AACJ;;AAED,cAAI+oB,MAAM,KAAK,CAAC,CAAhB,EAAmB;AACf;AACA;AACA,mBAAO,IAAP;AACH;;AAED,cAAIznB,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAK,GAAGob,MAA/B,CAAR;AACAuhB,cAAI,CAACkT,MAAL,GAAcl8C,CAAC,CAACi3C,WAAF,EAAd;AACA3jB,eAAK,CAAC6U,QAAN,CAAea,IAAI,CAACkT,MAAL,KAAgB,CAA/B,EAAkC,0CAAlC,EA3BiC,CA6BjC;;AACAlT,cAAI,CAAClqC,MAAL,GAAckB,CAAC,CAACi3C,WAAF,EAAd;AACAjO,cAAI,CAACsY,QAAL,GAAgBthD,CAAC,CAACi3C,WAAF,EAAhB,CA/BiC,CAiCjC;;AACA,cAAIsK,QAAJ;AACAvY,cAAI,CAACuY,QAAL,GAAgBA,QAAQ,GAAGvhD,CAAC,CAACi3C,WAAF,MAAmB,CAA9C,CAnCiC,CAqCjC;;AACAj3C,WAAC,CAACm4C,IAAF,CAAO,QAAP,EAAiB,CAAjB,EAtCiC,CAwCjC;;AACAnP,cAAI,CAACC,aAAL,GAAqB,EAArB;AAEA,cAAIuY,cAAc,GAAG,IAAIrP,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAK,GAAGob,MAAR,GAAiB,EAAxC,CAArB;AACA,cAAIg6B,gBAAgB,GAAG,IAAItP,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAK,GAAGob,MAAR,GAAiB,EAAjB,GAAsB85B,QAAQ,GAAG,CAAxD,CAAvB;AACA,cAAIG,aAAa,GAAG,IAAIvP,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAK,GAAGob,MAAR,GAAiB,EAAjB,GAAsB85B,QAAQ,GAAG,CAAxD,CAApB;AACA,cAAII,mBAAmB,GAAG,IAAIxP,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAK,GAAGob,MAAR,GAAiB,EAAjB,GAAsB85B,QAAQ,GAAG,CAAxD,CAA1B;AACA,cAAIK,gBAAgB,GAAGv1C,KAAK,GAAGob,MAAR,GAAiB,EAAjB,GAAsB85B,QAAQ,GAAG,CAAxD;;AACA,eAAK7iD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6iD,QAAQ,GAAG,CAA3B,EAA8B7iD,CAAC,IAAI,CAAnC,EAAsC;AAClC,gBAAIwrC,UAAJ;AACA,gBAAI2X,QAAQ,GAAGL,cAAc,CAACvK,WAAf,EAAf;AACA,gBAAI6K,UAAU,GAAGL,gBAAgB,CAACxK,WAAjB,EAAjB;AACA,gBAAI8K,OAAO,GAAGL,aAAa,CAACrK,UAAd,EAAd;AACA,gBAAI2K,aAAa,GAAGL,mBAAmB,CAAC1K,WAApB,EAApB;;AACA,iBAAK,IAAIx5C,CAAC,GAAGqkD,UAAb,EAAyBrkD,CAAC,IAAIokD,QAA9B,EAAwCpkD,CAAC,IAAI,CAA7C,EAAgD;AAC5C,kBAAIukD,aAAa,KAAK,CAAtB,EAAyB;AACrB;AACA;AACAJ,gCAAgB,GAAID,mBAAmB,CAACl6B,MAApB,GAA6Bk6B,mBAAmB,CAAC9K,cAAjD,GAAkE,CAAtF,CAHqB,CAKrB;;AACA+K,gCAAgB,IAAII,aAApB,CANqB,CAQrB;;AACAJ,gCAAgB,IAAI,CAACnkD,CAAC,GAAGqkD,UAAL,IAAmB,CAAvC;AACA5X,0BAAU,GAAGiI,KAAK,CAACqC,SAAN,CAAgB9wC,IAAhB,EAAsBk+C,gBAAtB,CAAb;;AACA,oBAAI1X,UAAU,KAAK,CAAnB,EAAsB;AAClBA,4BAAU,GAAIA,UAAU,GAAG6X,OAAd,GAAyB,MAAtC;AACH;AACJ,eAdD,MAcO;AACH7X,0BAAU,GAAIzsC,CAAC,GAAGskD,OAAL,GAAgB,MAA7B;AACH;;AAED/Y,kBAAI,CAACC,aAAL,CAAmBxrC,CAAnB,IAAwBysC,UAAxB;AACH;AACJ;;AAED,iBAAOlB,IAAP;AACH;;AAED,iBAASiZ,UAAT,CAAoB32C,CAApB,EAAuB6gB,IAAvB,EAA6B+d,UAA7B,EAAyC;AACrC5+B,WAAC,CAAC0vB,QAAF,CAAWh8B,IAAX,CAAgB;AACZwN,eAAG,EAAE2f,IADO;AAEZ9f,iBAAK,EAAE8f,IAFK;AAGZnI,iBAAK,EAAE,EAAEmI,IAAI,GAAG+d,UAAT,CAHK;AAIZziB,kBAAM,EAAE;AAJI,WAAhB;AAMH;;AAED,iBAASy6B,oBAAT,CAA8B52C,CAA9B,EAAiC;AAC7BA,WAAC,CAAC0vB,QAAF,CAAWh8B,IAAX,CAAgB;AACZwN,eAAG,EAAE,MADO;AAEZH,iBAAK,EAAE,MAFK;AAGZ2X,iBAAK,EAAE,CAHK;AAIZyD,kBAAM,EAAE;AAJI,WAAhB;AAMH;;AAED,iBAAS06B,aAAT,CAAuB71B,MAAvB,EAA+B;AAC3B,cAAI5tB,CAAJ;AACA,cAAI4M,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC5B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,QAAxB;AAAkCkmB,iBAAK,EAAE;AAAzC,WAD4B,EAE5B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,QAA1B;AAAoCkmB,iBAAK,EAAE;AAA3C,WAF4B,EAG5B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAH4B,EAI5B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAJ4B,EAK5B;AAACltB,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,OAAvB;AAAgCkmB,iBAAK,EAAE;AAAvC,WAL4B,EAM5B;AAACltB,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAN4B,EAO5B;AAACltB,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAP4B,EAQ5B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,QAAzB;AAAmCkmB,iBAAK,EAAE;AAA1C,WAR4B,EAS5B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAT4B,EAU5B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,QAA5B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAV4B,EAW5B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,QAA9B;AAAwCkmB,iBAAK,EAAE;AAA/C,WAX4B,EAY5B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAZ4B,CAAxB,CAAR;AAeAnlB,WAAC,CAAC0vB,QAAF,GAAa,EAAb;;AACA,eAAKt8B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4tB,MAAM,CAACxtB,MAAvB,EAA+BJ,CAAC,IAAI,CAApC,EAAuC;AACnC,gBAAI4yB,KAAK,GAAGhF,MAAM,CAACrrB,GAAP,CAAWvC,CAAX,CAAZ;;AACA,iBAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6xB,KAAK,CAACwX,QAAN,CAAehqC,MAAnC,EAA2CW,CAAC,IAAI,CAAhD,EAAmD;AAC/CwiD,wBAAU,CAAC32C,CAAD,EAAIgmB,KAAK,CAACwX,QAAN,CAAerpC,CAAf,CAAJ,EAAuBf,CAAvB,CAAV;AACH;;AAED4M,aAAC,CAAC0vB,QAAF,GAAa1vB,CAAC,CAAC0vB,QAAF,CAAWjqB,IAAX,CAAgB,UAASlT,CAAT,EAAYC,CAAZ,EAAe;AACxC,qBAAOD,CAAC,CAACwO,KAAF,GAAUvO,CAAC,CAACuO,KAAnB;AACH,aAFY,CAAb;AAGH;;AAED61C,8BAAoB,CAAC52C,CAAD,CAApB;AAEA,cAAIi2C,QAAJ;AACAA,kBAAQ,GAAGj2C,CAAC,CAAC0vB,QAAF,CAAWl8B,MAAtB;AACAwM,WAAC,CAAC82C,UAAF,GAAeb,QAAQ,GAAG,CAA1B;AACAj2C,WAAC,CAAC+2C,WAAF,GAAgBhlD,IAAI,CAACuM,GAAL,CAAS,CAAT,EAAYvM,IAAI,CAACW,KAAL,CAAWX,IAAI,CAACM,GAAL,CAAS4jD,QAAT,IAAqBlkD,IAAI,CAACM,GAAL,CAAS,CAAT,CAAhC,CAAZ,IAA4D,CAA5E;AACA2N,WAAC,CAACg3C,aAAF,GAAkBjlD,IAAI,CAACM,GAAL,CAAS2N,CAAC,CAAC+2C,WAAF,GAAgB,CAAzB,IAA8BhlD,IAAI,CAACM,GAAL,CAAS,CAAT,CAAhD;AACA2N,WAAC,CAACi3C,UAAF,GAAej3C,CAAC,CAAC82C,UAAF,GAAe92C,CAAC,CAAC+2C,WAAhC,CApC2B,CAsC3B;;AACA,cAAIG,SAAS,GAAG,EAAhB;AACA,cAAIC,WAAW,GAAG,EAAlB;AACA,cAAIC,QAAQ,GAAG,EAAf;AACA,cAAIC,cAAc,GAAG,EAArB;AACA,cAAIC,QAAQ,GAAG,EAAf;;AAEA,eAAKlkD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6iD,QAAhB,EAA0B7iD,CAAC,IAAI,CAA/B,EAAkC;AAC9B,gBAAIw/B,OAAO,GAAG5yB,CAAC,CAAC0vB,QAAF,CAAWt8B,CAAX,CAAd;AACA8jD,qBAAS,GAAGA,SAAS,CAAC9kC,MAAV,CAAiB;AAACna,kBAAI,EAAE,SAAS7E,CAAhB;AAAmB6L,kBAAI,EAAE,QAAzB;AAAmCkmB,mBAAK,EAAEyN,OAAO,CAAC1xB;AAAlD,aAAjB,CAAZ;AACAi2C,uBAAW,GAAGA,WAAW,CAAC/kC,MAAZ,CAAmB;AAACna,kBAAI,EAAE,WAAW7E,CAAlB;AAAqB6L,kBAAI,EAAE,QAA3B;AAAqCkmB,mBAAK,EAAEyN,OAAO,CAAC7xB;AAApD,aAAnB,CAAd;AACAq2C,oBAAQ,GAAGA,QAAQ,CAAChlC,MAAT,CAAgB;AAACna,kBAAI,EAAE,aAAa7E,CAApB;AAAuB6L,kBAAI,EAAE,OAA7B;AAAsCkmB,mBAAK,EAAEyN,OAAO,CAACla;AAArD,aAAhB,CAAX;AACA2+B,0BAAc,GAAGA,cAAc,CAACjlC,MAAf,CAAsB;AAACna,kBAAI,EAAE,mBAAmB7E,CAA1B;AAA6B6L,kBAAI,EAAE,QAAnC;AAA6CkmB,mBAAK,EAAEyN,OAAO,CAACzW;AAA5D,aAAtB,CAAjB;;AACA,gBAAIyW,OAAO,CAAC2kB,OAAR,KAAoB3vC,SAAxB,EAAmC;AAC/B0vC,sBAAQ,GAAGA,QAAQ,CAACllC,MAAT,CAAgB;AAACna,oBAAI,EAAE,WAAW7E,CAAlB;AAAqB6L,oBAAI,EAAE,QAA3B;AAAqCkmB,qBAAK,EAAEyN,OAAO,CAAC2kB;AAApD,eAAhB,CAAX;AACH;AACJ;;AAEDv3C,WAAC,CAAC6tC,MAAF,GAAW7tC,CAAC,CAAC6tC,MAAF,CAASz7B,MAAT,CAAgB8kC,SAAhB,CAAX;AACAl3C,WAAC,CAAC6tC,MAAF,CAASn6C,IAAT,CAAc;AAACuE,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,QAA5B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAAd;AACAnlB,WAAC,CAAC6tC,MAAF,GAAW7tC,CAAC,CAAC6tC,MAAF,CAASz7B,MAAT,CAAgB+kC,WAAhB,CAAX;AACAn3C,WAAC,CAAC6tC,MAAF,GAAW7tC,CAAC,CAAC6tC,MAAF,CAASz7B,MAAT,CAAgBglC,QAAhB,CAAX;AACAp3C,WAAC,CAAC6tC,MAAF,GAAW7tC,CAAC,CAAC6tC,MAAF,CAASz7B,MAAT,CAAgBilC,cAAhB,CAAX;AACAr3C,WAAC,CAAC6tC,MAAF,GAAW7tC,CAAC,CAAC6tC,MAAF,CAASz7B,MAAT,CAAgBklC,QAAhB,CAAX;AAEAt3C,WAAC,CAACxM,MAAF,GAAW,KAAK;AACZ0jD,mBAAS,CAAC1jD,MAAV,GAAmB,CADZ,GAEP,CAFO,GAEH;AACJ2jD,qBAAW,CAAC3jD,MAAZ,GAAqB,CAHd,GAIP4jD,QAAQ,CAAC5jD,MAAT,GAAkB,CAJX,GAKP6jD,cAAc,CAAC7jD,MAAf,GAAwB,CALjB,GAMP8jD,QAAQ,CAAC9jD,MAAT,GAAkB,CANtB;AAQA,iBAAOwM,CAAP;AACH;;AAEDgI,eAAO,CAAC6+B,KAAR,GAAgBgP,cAAhB;AACA7tC,eAAO,CAAC4tC,IAAR,GAAeiB,aAAf;AAEC,OA5L8E,EA4L7E;AAAC,oBAAW,CAAZ;AAAc,oBAAW,CAAzB;AAA2B,oBAAW;AAAtC,OA5L6E,CA/nF4tB;AA2zF9vB,UAAG,CAAC,UAASlkC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACjF;AACA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIssB,QAAQ,GAAGtsB,OAAO,CAAC,aAAD,CAAtB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAI2E,IAAI,GAAG3E,OAAO,CAAC,SAAD,CAAlB,CATiF,CAWjF;;;AACA,iBAAS6kC,oBAAT,CAA8B9iD,CAA9B,EAAiC+iD,IAAjC,EAAuCC,aAAvC,EAAsDC,kBAAtD,EAA0EC,WAA1E,EAAuF;AACnF,cAAI3lD,CAAJ;;AACA,cAAI,CAACwlD,IAAI,GAAGE,kBAAR,IAA8B,CAAlC,EAAqC;AACjC;AACA1lD,aAAC,GAAGyC,CAAC,CAAC82C,SAAF,EAAJ,CAFiC,CAGjC;;AACA,gBAAI,CAACiM,IAAI,GAAGG,WAAR,MAAyB,CAA7B,EAAgC;AAC5B3lD,eAAC,GAAG,CAACA,CAAL;AACH;;AAEDA,aAAC,GAAGylD,aAAa,GAAGzlD,CAApB;AACH,WATD,MASO;AACH;AACA;AACA,gBAAI,CAACwlD,IAAI,GAAGG,WAAR,IAAuB,CAA3B,EAA8B;AAC1B3lD,eAAC,GAAGylD,aAAJ;AACH,aAFD,MAEO;AACH;AACAzlD,eAAC,GAAGylD,aAAa,GAAGhjD,CAAC,CAACq3C,UAAF,EAApB;AACH;AACJ;;AAED,iBAAO95C,CAAP;AACH,SAnCgF,CAqCjF;;;AACA,iBAASs0C,UAAT,CAAoBvgB,KAApB,EAA2B5tB,IAA3B,EAAiC2I,KAAjC,EAAwC;AACpC,cAAIrM,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACAilB,eAAK,CAAC6xB,gBAAN,GAAyBnjD,CAAC,CAACq3C,UAAF,EAAzB;AACA/lB,eAAK,CAACue,IAAN,GAAa7vC,CAAC,CAACq3C,UAAF,EAAb;AACA/lB,eAAK,CAACwe,IAAN,GAAa9vC,CAAC,CAACq3C,UAAF,EAAb;AACA/lB,eAAK,CAACye,IAAN,GAAa/vC,CAAC,CAACq3C,UAAF,EAAb;AACA/lB,eAAK,CAAC0e,IAAN,GAAahwC,CAAC,CAACq3C,UAAF,EAAb;AACA,cAAI+L,KAAJ;AACA,cAAIL,IAAJ;;AACA,cAAIzxB,KAAK,CAAC6xB,gBAAN,GAAyB,CAA7B,EAAgC;AAC5B,gBAAIzkD,CAAJ,CAD4B,CAE5B;;AACA,gBAAI2kD,eAAe,GAAG/xB,KAAK,CAAC+xB,eAAN,GAAwB,EAA9C;;AACA,iBAAK3kD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4yB,KAAK,CAAC6xB,gBAAtB,EAAwCzkD,CAAC,IAAI,CAA7C,EAAgD;AAC5C2kD,6BAAe,CAACrkD,IAAhB,CAAqBgB,CAAC,CAACi3C,WAAF,EAArB;AACH;;AAED3lB,iBAAK,CAACgyB,iBAAN,GAA0BtjD,CAAC,CAACi3C,WAAF,EAA1B;AACA3lB,iBAAK,CAACiyB,YAAN,GAAqB,EAArB;;AACA,iBAAK7kD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4yB,KAAK,CAACgyB,iBAAtB,EAAyC5kD,CAAC,IAAI,CAA9C,EAAiD;AAC7C4yB,mBAAK,CAACiyB,YAAN,CAAmBvkD,IAAnB,CAAwBgB,CAAC,CAAC82C,SAAF,EAAxB;AACH;;AAED,gBAAI0M,mBAAmB,GAAGH,eAAe,CAACA,eAAe,CAACvkD,MAAhB,GAAyB,CAA1B,CAAf,GAA8C,CAAxE;AACAskD,iBAAK,GAAG,EAAR;;AACA,iBAAK1kD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8kD,mBAAhB,EAAqC9kD,CAAC,IAAI,CAA1C,EAA6C;AACzCqkD,kBAAI,GAAG/iD,CAAC,CAAC82C,SAAF,EAAP;AACAsM,mBAAK,CAACpkD,IAAN,CAAW+jD,IAAX,EAFyC,CAGzC;;AACA,kBAAI,CAACA,IAAI,GAAG,CAAR,IAAa,CAAjB,EAAoB;AAChB,oBAAIU,WAAW,GAAGzjD,CAAC,CAAC82C,SAAF,EAAlB;;AACA,qBAAK,IAAIr3C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgkD,WAApB,EAAiChkD,CAAC,IAAI,CAAtC,EAAyC;AACrC2jD,uBAAK,CAACpkD,IAAN,CAAW+jD,IAAX;AACArkD,mBAAC,IAAI,CAAL;AACH;AACJ;AACJ;;AAED40B,iBAAK,CAAC6U,QAAN,CAAeib,KAAK,CAACtkD,MAAN,KAAiB0kD,mBAAhC,EAAqD,YAArD;;AAEA,gBAAIH,eAAe,CAACvkD,MAAhB,GAAyB,CAA7B,EAAgC;AAC5B,kBAAIoT,MAAM,GAAG,EAAb;AACA,kBAAII,KAAJ,CAF4B,CAG5B;;AACA,kBAAIkxC,mBAAmB,GAAG,CAA1B,EAA6B;AACzB,qBAAK9kD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8kD,mBAAhB,EAAqC9kD,CAAC,IAAI,CAA1C,EAA6C;AACzCqkD,sBAAI,GAAGK,KAAK,CAAC1kD,CAAD,CAAZ;AACA4T,uBAAK,GAAG,EAAR;AACAA,uBAAK,CAACoxC,OAAN,GAAgB,CAAC,EAAEX,IAAI,GAAG,CAAT,CAAjB;AACAzwC,uBAAK,CAACo+B,kBAAN,GAA2B2S,eAAe,CAACh+B,OAAhB,CAAwB3mB,CAAxB,KAA8B,CAAzD;AACAwT,wBAAM,CAAClT,IAAP,CAAYsT,KAAZ;AACH;;AAED,oBAAIqxC,EAAE,GAAG,CAAT;;AACA,qBAAKjlD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8kD,mBAAhB,EAAqC9kD,CAAC,IAAI,CAA1C,EAA6C;AACzCqkD,sBAAI,GAAGK,KAAK,CAAC1kD,CAAD,CAAZ;AACA4T,uBAAK,GAAGJ,MAAM,CAACxT,CAAD,CAAd;AACA4T,uBAAK,CAACpR,CAAN,GAAU4hD,oBAAoB,CAAC9iD,CAAD,EAAI+iD,IAAJ,EAAUY,EAAV,EAAc,CAAd,EAAiB,EAAjB,CAA9B;AACAA,oBAAE,GAAGrxC,KAAK,CAACpR,CAAX;AACH;;AAED,oBAAI0iD,EAAE,GAAG,CAAT;;AACA,qBAAKllD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG8kD,mBAAhB,EAAqC9kD,CAAC,IAAI,CAA1C,EAA6C;AACzCqkD,sBAAI,GAAGK,KAAK,CAAC1kD,CAAD,CAAZ;AACA4T,uBAAK,GAAGJ,MAAM,CAACxT,CAAD,CAAd;AACA4T,uBAAK,CAACnR,CAAN,GAAU2hD,oBAAoB,CAAC9iD,CAAD,EAAI+iD,IAAJ,EAAUa,EAAV,EAAc,CAAd,EAAiB,EAAjB,CAA9B;AACAA,oBAAE,GAAGtxC,KAAK,CAACnR,CAAX;AACH;AACJ;;AAEDmwB,mBAAK,CAACpf,MAAN,GAAeA,MAAf;AACH,aA/BD,MA+BO;AACHof,mBAAK,CAACpf,MAAN,GAAe,EAAf;AACH;AACJ,WAjED,MAiEO,IAAIof,KAAK,CAAC6xB,gBAAN,KAA2B,CAA/B,EAAkC;AACrC7xB,iBAAK,CAACpf,MAAN,GAAe,EAAf;AACH,WAFM,MAEA;AACHof,iBAAK,CAACuyB,WAAN,GAAoB,IAApB;AACAvyB,iBAAK,CAACpf,MAAN,GAAe,EAAf;AACAof,iBAAK,CAACoP,UAAN,GAAmB,EAAnB;AACA,gBAAIojB,cAAc,GAAG,IAArB;;AACA,mBAAOA,cAAP,EAAuB;AACnBV,mBAAK,GAAGpjD,CAAC,CAACi3C,WAAF,EAAR;AACA,kBAAInW,SAAS,GAAG;AACZoJ,0BAAU,EAAElqC,CAAC,CAACi3C,WAAF,EADA;AAEZ8M,sBAAM,EAAE,CAFI;AAGZC,uBAAO,EAAE,CAHG;AAIZC,uBAAO,EAAE,CAJG;AAKZC,sBAAM,EAAE,CALI;AAMZ5hD,kBAAE,EAAE,CANQ;AAOZC,kBAAE,EAAE;AAPQ,eAAhB;;AASA,kBAAI,CAAC6gD,KAAK,GAAG,CAAT,IAAc,CAAlB,EAAqB;AACjB;AACAtiB,yBAAS,CAACx+B,EAAV,GAAetC,CAAC,CAACq3C,UAAF,EAAf;AACAvW,yBAAS,CAACv+B,EAAV,GAAevC,CAAC,CAACq3C,UAAF,EAAf;AACH,eAJD,MAIO;AACH;AACAvW,yBAAS,CAACx+B,EAAV,GAAetC,CAAC,CAAC+2C,SAAF,EAAf;AACAjW,yBAAS,CAACv+B,EAAV,GAAevC,CAAC,CAAC+2C,SAAF,EAAf;AACH;;AAED,kBAAI,CAACqM,KAAK,GAAG,CAAT,IAAc,CAAlB,EAAqB;AACjB;AACAtiB,yBAAS,CAACijB,MAAV,GAAmBjjB,SAAS,CAACojB,MAAV,GAAmBlkD,CAAC,CAACs3C,YAAF,EAAtC;AACH,eAHD,MAGO,IAAI,CAAC8L,KAAK,GAAG,EAAT,IAAe,CAAnB,EAAsB;AACzB;AACAtiB,yBAAS,CAACijB,MAAV,GAAmB/jD,CAAC,CAACs3C,YAAF,EAAnB;AACAxW,yBAAS,CAACojB,MAAV,GAAmBlkD,CAAC,CAACs3C,YAAF,EAAnB;AACH,eAJM,MAIA,IAAI,CAAC8L,KAAK,GAAG,GAAT,IAAgB,CAApB,EAAuB;AAC1B;AACAtiB,yBAAS,CAACijB,MAAV,GAAmB/jD,CAAC,CAACs3C,YAAF,EAAnB;AACAxW,yBAAS,CAACkjB,OAAV,GAAoBhkD,CAAC,CAACs3C,YAAF,EAApB;AACAxW,yBAAS,CAACmjB,OAAV,GAAoBjkD,CAAC,CAACs3C,YAAF,EAApB;AACAxW,yBAAS,CAACojB,MAAV,GAAmBlkD,CAAC,CAACs3C,YAAF,EAAnB;AACH;;AAEDhmB,mBAAK,CAACoP,UAAN,CAAiB1hC,IAAjB,CAAsB8hC,SAAtB;AACAgjB,4BAAc,GAAG,CAAC,EAAEV,KAAK,GAAG,EAAV,CAAlB;AACH;AACJ;AACJ,SA/JgF,CAiKjF;;;AACA,iBAASe,eAAT,CAAyBjyC,MAAzB,EAAiC2yB,SAAjC,EAA4C;AACxC,cAAIxyB,SAAS,GAAG,EAAhB;;AACA,eAAK,IAAI3T,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwT,MAAM,CAACpT,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI+xC,EAAE,GAAGv+B,MAAM,CAACxT,CAAD,CAAf;AACA,gBAAI0lD,KAAK,GAAG;AACRljD,eAAC,EAAE2jC,SAAS,CAACkf,MAAV,GAAmBtT,EAAE,CAACvvC,CAAtB,GAA0B2jC,SAAS,CAACmf,OAAV,GAAoBvT,EAAE,CAACtvC,CAAjD,GAAqD0jC,SAAS,CAACviC,EAD1D;AAERnB,eAAC,EAAE0jC,SAAS,CAACof,OAAV,GAAoBxT,EAAE,CAACvvC,CAAvB,GAA2B2jC,SAAS,CAACqf,MAAV,GAAmBzT,EAAE,CAACtvC,CAAjD,GAAqD0jC,SAAS,CAACtiC,EAF1D;AAGRmhD,qBAAO,EAAEjT,EAAE,CAACiT,OAHJ;AAIRhT,gCAAkB,EAAED,EAAE,CAACC;AAJf,aAAZ;AAMAr+B,qBAAS,CAACrT,IAAV,CAAeolD,KAAf;AACH;;AAED,iBAAO/xC,SAAP;AACH;;AAED,iBAASi+B,WAAT,CAAqBp+B,MAArB,EAA6B;AACzB,cAAIq+B,QAAQ,GAAG,EAAf;AACA,cAAIC,cAAc,GAAG,EAArB;;AACA,eAAK,IAAI9xC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwT,MAAM,CAACpT,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI+xC,EAAE,GAAGv+B,MAAM,CAACxT,CAAD,CAAf;AACA8xC,0BAAc,CAACxxC,IAAf,CAAoByxC,EAApB;;AACA,gBAAIA,EAAE,CAACC,kBAAP,EAA2B;AACvBH,sBAAQ,CAACvxC,IAAT,CAAcwxC,cAAd;AACAA,4BAAc,GAAG,EAAjB;AACH;AACJ;;AAEDld,eAAK,CAAC6U,QAAN,CAAeqI,cAAc,CAAC1xC,MAAf,KAA0B,CAAzC,EAA4C,qDAA5C;AACA,iBAAOyxC,QAAP;AACH,SAhMgF,CAkMjF;;;AACA,iBAAS5D,OAAT,CAAiBz6B,MAAjB,EAAyB;AACrB,cAAIlS,CAAC,GAAG,IAAI4iB,IAAI,CAACiqB,IAAT,EAAR;;AACA,cAAI,CAAC36B,MAAL,EAAa;AACT,mBAAOlS,CAAP;AACH;;AAED,cAAIuwC,QAAQ,GAAGD,WAAW,CAACp+B,MAAD,CAA1B;;AACA,eAAK,IAAIxT,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6xC,QAAQ,CAACzxC,MAA7B,EAAqCJ,CAAC,IAAI,CAA1C,EAA6C;AACzC,gBAAI2lD,OAAO,GAAG9T,QAAQ,CAAC7xC,CAAD,CAAtB;AACA,gBAAI4lD,OAAO,GAAGD,OAAO,CAAC,CAAD,CAArB;AACA,gBAAIE,MAAM,GAAGF,OAAO,CAACA,OAAO,CAACvlD,MAAR,GAAiB,CAAlB,CAApB;AACA,gBAAI0lD,OAAJ;AACA,gBAAIC,cAAJ;;AACA,gBAAIH,OAAO,CAACZ,OAAZ,EAAqB;AACjBc,qBAAO,GAAG,IAAV,CADiB,CAEjB;AACA;;AACAC,4BAAc,GAAG,IAAjB;AACH,aALD,MAKO;AACH,kBAAIF,MAAM,CAACb,OAAX,EAAoB;AAChB;AACA;AACAY,uBAAO,GAAGC,MAAV;AACH,eAJD,MAIO;AACH;AACAD,uBAAO,GAAG;AAAEpjD,mBAAC,EAAE,CAACojD,OAAO,CAACpjD,CAAR,GAAYqjD,MAAM,CAACrjD,CAApB,IAAyB,CAA9B;AAAiCC,mBAAC,EAAE,CAACmjD,OAAO,CAACnjD,CAAR,GAAYojD,MAAM,CAACpjD,CAApB,IAAyB;AAA7D,iBAAV;AACH;;AAEDqjD,qBAAO,GAAGF,OAAV,CAVG,CAWH;;AACAG,4BAAc,GAAG,KAAjB;AACH;;AAEDzkD,aAAC,CAACsoC,MAAF,CAASgc,OAAO,CAACpjD,CAAjB,EAAoBojD,OAAO,CAACnjD,CAA5B;;AAEA,iBAAK,IAAI1B,CAAC,GAAGglD,cAAc,GAAG,CAAH,GAAO,CAAlC,EAAqChlD,CAAC,GAAG4kD,OAAO,CAACvlD,MAAjD,EAAyDW,CAAC,IAAI,CAA9D,EAAiE;AAC7D,kBAAIgxC,EAAE,GAAG4T,OAAO,CAAC5kD,CAAD,CAAhB;AACA,kBAAIilD,MAAM,GAAGjlD,CAAC,KAAK,CAAN,GAAU6kD,OAAV,GAAoBD,OAAO,CAAC5kD,CAAC,GAAG,CAAL,CAAxC;;AACA,kBAAIilD,MAAM,CAAChB,OAAP,IAAkBjT,EAAE,CAACiT,OAAzB,EAAkC;AAC9B;AACA1jD,iBAAC,CAACuoC,MAAF,CAASkI,EAAE,CAACvvC,CAAZ,EAAeuvC,EAAE,CAACtvC,CAAlB;AACH,eAHD,MAGO,IAAIujD,MAAM,CAAChB,OAAP,IAAkB,CAACjT,EAAE,CAACiT,OAA1B,EAAmC;AACtCc,uBAAO,GAAG/T,EAAV;AACH,eAFM,MAEA,IAAI,CAACiU,MAAM,CAAChB,OAAR,IAAmB,CAACjT,EAAE,CAACiT,OAA3B,EAAoC;AACvC,oBAAIiB,KAAK,GAAG;AAAEzjD,mBAAC,EAAE,CAACwjD,MAAM,CAACxjD,CAAP,GAAWuvC,EAAE,CAACvvC,CAAf,IAAoB,CAAzB;AAA4BC,mBAAC,EAAE,CAACujD,MAAM,CAACvjD,CAAP,GAAWsvC,EAAE,CAACtvC,CAAf,IAAoB;AAAnD,iBAAZ;AACAnB,iBAAC,CAACmwC,gBAAF,CAAmBuU,MAAM,CAACxjD,CAA1B,EAA6BwjD,MAAM,CAACvjD,CAApC,EAAuCwjD,KAAK,CAACzjD,CAA7C,EAAgDyjD,KAAK,CAACxjD,CAAtD;AACAqjD,uBAAO,GAAG/T,EAAV;AACH,eAJM,MAIA,IAAI,CAACiU,MAAM,CAAChB,OAAR,IAAmBjT,EAAE,CAACiT,OAA1B,EAAmC;AACtC;AACA1jD,iBAAC,CAACmwC,gBAAF,CAAmBqU,OAAO,CAACtjD,CAA3B,EAA8BsjD,OAAO,CAACrjD,CAAtC,EAAyCsvC,EAAE,CAACvvC,CAA5C,EAA+CuvC,EAAE,CAACtvC,CAAlD;AACAqjD,uBAAO,GAAG,IAAV;AACH,eAJM,MAIA;AACH,sBAAM,IAAIh8B,KAAJ,CAAU,gBAAV,CAAN;AACH;AACJ;;AAED,gBAAI87B,OAAO,KAAKC,MAAhB,EAAwB;AACpB;AACA,kBAAIC,OAAJ,EAAa;AACTxkD,iBAAC,CAACmwC,gBAAF,CAAmBqU,OAAO,CAACtjD,CAA3B,EAA8BsjD,OAAO,CAACrjD,CAAtC,EAAyCmjD,OAAO,CAACpjD,CAAjD,EAAoDojD,OAAO,CAACnjD,CAA5D;AACH,eAFD,MAEO;AACHnB,iBAAC,CAACuoC,MAAF,CAAS+b,OAAO,CAACpjD,CAAjB,EAAoBojD,OAAO,CAACnjD,CAA5B;AACH;AACJ;AACJ;;AAEDnB,WAAC,CAACqwC,SAAF;AACA,iBAAOrwC,CAAP;AACH;;AAED,iBAAS8xC,SAAT,CAAmBxlB,MAAnB,EAA2BgF,KAA3B,EAAkC;AAC9B,cAAIA,KAAK,CAACuyB,WAAV,EAAuB;AACnB,iBAAK,IAAIpkD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6xB,KAAK,CAACoP,UAAN,CAAiB5hC,MAArC,EAA6CW,CAAC,IAAI,CAAlD,EAAqD;AACjD,kBAAIqhC,SAAS,GAAGxP,KAAK,CAACoP,UAAN,CAAiBjhC,CAAjB,CAAhB;AACA,kBAAImlD,cAAc,GAAGt4B,MAAM,CAACrrB,GAAP,CAAW6/B,SAAS,CAACoJ,UAArB,CAArB;;AACA,kBAAI0a,cAAc,CAAC1yC,MAAnB,EAA2B;AACvB,oBAAI2yC,iBAAiB,GAAGV,eAAe,CAACS,cAAc,CAAC1yC,MAAhB,EAAwB4uB,SAAxB,CAAvC;AACAxP,qBAAK,CAACpf,MAAN,GAAeof,KAAK,CAACpf,MAAN,CAAawL,MAAb,CAAoBmnC,iBAApB,CAAf;AACH;AACJ;AACJ;;AAED,iBAAOlY,OAAO,CAACrb,KAAK,CAACpf,MAAP,CAAd;AACH,SAtRgF,CAwRjF;;;AACA,iBAAS4yC,cAAT,CAAwBphD,IAAxB,EAA8B2I,KAA9B,EAAqCsmC,IAArC,EAA2CtL,IAA3C,EAAiD;AAC7C,cAAI/a,MAAM,GAAG,IAAIie,QAAQ,CAACiB,QAAb,CAAsBnE,IAAtB,CAAb;AACA,cAAI3oC,CAAJ,CAF6C,CAI7C;;AACA,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGi0C,IAAI,CAAC7zC,MAAL,GAAc,CAA9B,EAAiCJ,CAAC,IAAI,CAAtC,EAAyC;AACrC,gBAAI+oB,MAAM,GAAGkrB,IAAI,CAACj0C,CAAD,CAAjB;AACA,gBAAIqmD,UAAU,GAAGpS,IAAI,CAACj0C,CAAC,GAAG,CAAL,CAArB;;AACA,gBAAI+oB,MAAM,KAAKs9B,UAAf,EAA2B;AACvBz4B,oBAAM,CAACttB,IAAP,CAAYN,CAAZ,EAAe6rC,QAAQ,CAACqH,cAAT,CAAwBvK,IAAxB,EAA8B3oC,CAA9B,EAAiCmzC,UAAjC,EAA6CnuC,IAA7C,EAAmD2I,KAAK,GAAGob,MAA3D,EAAmEqqB,SAAnE,CAAf;AACH,aAFD,MAEO;AACHxlB,oBAAM,CAACttB,IAAP,CAAYN,CAAZ,EAAe6rC,QAAQ,CAACoH,WAAT,CAAqBtK,IAArB,EAA2B3oC,CAA3B,CAAf;AACH;AACJ;;AAED,iBAAO4tB,MAAP;AACH;;AAEDhZ,eAAO,CAAC6+B,KAAR,GAAgB2S,cAAhB;AAEC,OA7S+C,EA6S9C;AAAC,oBAAW,CAAZ;AAAc,uBAAc,CAA5B;AAA8B,oBAAW,CAAzC;AAA2C,mBAAU;AAArD,OA7S8C,CA3zF2vB;AAwmGhvB,UAAG,CAAC,UAAS7mC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAC/F;AACA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB,CAP+F,CAS/F;AACA;;;AACA,iBAAS+mC,oBAAT,CAA8BthD,IAA9B,EAAoC2I,KAApC,EAA2C;AACvC,cAAIrM,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAIhO,CAAC,GAAG2B,CAAC,CAACi3C,WAAF,EAAR;AACA,cAAIgO,IAAI,GAAG,EAAX;;AACA,eAAK,IAAIvmD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,CAApB,EAAuBK,CAAC,EAAxB,EAA4B;AACxBumD,gBAAI,CAACjlD,CAAC,CAAC83C,QAAF,EAAD,CAAJ,GAAqB;AAAErwB,oBAAM,EAAEznB,CAAC,CAACi3C,WAAF;AAAV,aAArB;AACH;;AAED,iBAAOgO,IAAP;AACH,SApB8F,CAsB/F;AACA;AACA;;;AACA,iBAASC,kBAAT,CAA4BxhD,IAA5B,EAAkC2I,KAAlC,EAAyC;AACrC,cAAIrM,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAI6vC,MAAM,GAAGl8C,CAAC,CAACi3C,WAAF,EAAb;AACA,cAAIlzB,KAAK,GAAI/jB,CAAC,CAACi3C,WAAF,EAAb;;AACA,cAAIiF,MAAM,KAAK,CAAf,EAAkB;AACd,mBAAOl8C,CAAC,CAAC03C,eAAF,CAAkB3zB,KAAlB,CAAP;AACH,WAFD,MAGK,IAAIm4B,MAAM,KAAK,CAAf,EAAkB;AACnB,gBAAIiJ,QAAQ,GAAG,EAAf;;AACA,mBAAOphC,KAAK,EAAZ,GAAiB;AACb,kBAAIqhC,KAAK,GAAGplD,CAAC,CAACi3C,WAAF,EAAZ;AACA,kBAAIzqC,GAAG,GAAGxM,CAAC,CAACi3C,WAAF,EAAV;AACA,kBAAIpkC,KAAK,GAAG7S,CAAC,CAACi3C,WAAF,EAAZ;;AACA,mBAAK,IAAIv4C,CAAC,GAAG0mD,KAAb,EAAoB1mD,CAAC,IAAI8N,GAAzB,EAA8B9N,CAAC,EAA/B,EAAmC;AAC/BymD,wBAAQ,CAACtyC,KAAK,EAAN,CAAR,GAAoBnU,CAApB;AACH;AACJ;;AAED,mBAAOymD,QAAP;AACH;AACJ,SA7C8F,CA+C/F;AACA;;;AACA,iBAASE,kBAAT,CAA4B3hD,IAA5B,EAAkC2I,KAAlC,EAAyC;AACrC,cAAIrM,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAI6vC,MAAM,GAAGl8C,CAAC,CAACi3C,WAAF,EAAb;;AACA,cAAIiF,MAAM,KAAK,CAAf,EAAkB;AACd;AACA,gBAAIoJ,UAAU,GAAGtlD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAIsO,UAAU,GAAGvlD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAIuO,OAAO,GAAGxlD,CAAC,CAAC03C,eAAF,CAAkB6N,UAAlB,CAAd;AACA,mBAAO,UAASE,OAAT,EAAkB;AACrB,qBAAOD,OAAO,CAACC,OAAO,GAAGH,UAAX,CAAP,IAAiC,CAAxC;AACH,aAFD;AAGH,WARD,MASK,IAAIpJ,MAAM,KAAK,CAAf,EAAkB;AACnB;AACA,gBAAIwJ,UAAU,GAAG1lD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAI0O,WAAW,GAAG,EAAlB;AACA,gBAAIC,SAAS,GAAG,EAAhB;AACA,gBAAIC,WAAW,GAAG,EAAlB;;AACA,iBAAK,IAAInnD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgnD,UAApB,EAAgChnD,CAAC,EAAjC,EAAqC;AACjCinD,yBAAW,CAACjnD,CAAD,CAAX,GAAiBsB,CAAC,CAACi3C,WAAF,EAAjB;AACA2O,uBAAS,CAAClnD,CAAD,CAAT,GAAesB,CAAC,CAACi3C,WAAF,EAAf;AACA4O,yBAAW,CAACnnD,CAAD,CAAX,GAAiBsB,CAAC,CAACi3C,WAAF,EAAjB;AACH;;AAED,mBAAO,UAASwO,OAAT,EAAkB;AACrB,kBAAI90C,CAAC,GAAG,CAAR;AACA,kBAAInT,CAAC,GAAGmoD,WAAW,CAAC7mD,MAAZ,GAAqB,CAA7B;;AACA,qBAAO6R,CAAC,GAAGnT,CAAX,EAAc;AACV,oBAAIC,CAAC,GAAIkT,CAAC,GAAGnT,CAAJ,GAAQ,CAAT,IAAe,CAAvB;;AACA,oBAAIioD,OAAO,GAAGE,WAAW,CAACloD,CAAD,CAAzB,EAA8B;AAC1BD,mBAAC,GAAGC,CAAC,GAAG,CAAR;AACH,iBAFD,MAEO;AACHkT,mBAAC,GAAGlT,CAAJ;AACH;AACJ;;AAED,kBAAIkoD,WAAW,CAACh1C,CAAD,CAAX,IAAkB80C,OAAlB,IAA6BA,OAAO,IAAIG,SAAS,CAACj1C,CAAD,CAArD,EAA0D;AACtD,uBAAOk1C,WAAW,CAACl1C,CAAD,CAAX,IAAkB,CAAzB;AACH;;AAED,qBAAO,CAAP;AACH,aAjBD;AAkBH;AACJ,SA5F8F,CA8F/F;AACA;;;AACA,iBAASm1C,oBAAT,CAA8BpiD,IAA9B,EAAoC2I,KAApC,EAA2C;AACvC,cAAIrM,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR,CADuC,CAEvC;;AACA,cAAI6vC,MAAM,GAAGl8C,CAAC,CAACi3C,WAAF,EAAb;AACA,cAAI8O,cAAc,GAAG/lD,CAAC,CAACi3C,WAAF,EAArB;AACA,cAAIkO,QAAQ,GAAGD,kBAAkB,CAACxhD,IAAD,EAAO2I,KAAK,GAAG05C,cAAf,CAAjC,CALuC,CAMvC;AACA;;AACA,cAAIC,YAAY,GAAGhmD,CAAC,CAACi3C,WAAF,EAAnB;AACA,cAAIgP,YAAY,GAAGjmD,CAAC,CAACi3C,WAAF,EAAnB;AACA,cAAIiP,MAAJ;AACA,cAAIC,MAAJ;AACA,cAAIH,YAAY,KAAK,CAAjB,IAAsBC,YAAY,KAAK,CAA3C,EAA8C;AAC9C,cAAIG,cAAc,GAAG,EAArB;;AACA,cAAIlK,MAAM,KAAK,CAAf,EAAkB;AACd;AACA,gBAAImK,YAAY,GAAGrmD,CAAC,CAACi3C,WAAF,EAAnB;AACA,gBAAIqP,OAAO,GAAG,EAAd,CAHc,CAId;;AACA,gBAAIC,cAAc,GAAGvmD,CAAC,CAACy3C,iBAAF,CAAoB4O,YAApB,CAArB;;AACA,iBAAK,IAAIG,UAAU,GAAG,CAAtB,EAAyBA,UAAU,GAAGH,YAAtC,EAAoDG,UAAU,EAA9D,EAAkE;AAC9D,kBAAIC,aAAa,GAAGF,cAAc,CAACC,UAAD,CAAlC;AACA,kBAAIE,aAAa,GAAGN,cAAc,CAACK,aAAD,CAAlC;;AACA,kBAAI,CAACC,aAAL,EAAoB;AAChB;AACAA,6BAAa,GAAG,EAAhB;AACA1mD,iBAAC,CAAC62C,cAAF,GAAmB4P,aAAnB;AACA,oBAAIE,cAAc,GAAG3mD,CAAC,CAACi3C,WAAF,EAArB;;AACA,uBAAO0P,cAAc,EAArB,GAA0B;AACtB,sBAAIC,WAAW,GAAG5mD,CAAC,CAACi3C,WAAF,EAAlB;AACA,sBAAI+O,YAAJ,EAAkBE,MAAM,GAAGlmD,CAAC,CAACq3C,UAAF,EAAT;AAClB,sBAAI4O,YAAJ,EAAkBE,MAAM,GAAGnmD,CAAC,CAACq3C,UAAF,EAAT,CAHI,CAItB;AACA;;AACAqP,+BAAa,CAACE,WAAD,CAAb,GAA6BV,MAA7B;AACH;AACJ;;AAEDI,qBAAO,CAACnB,QAAQ,CAACqB,UAAD,CAAT,CAAP,GAAgCE,aAAhC;AACH;;AAED,mBAAO,UAAS3a,SAAT,EAAoBC,UAApB,EAAgC;AACnC,kBAAI1K,KAAK,GAAGglB,OAAO,CAACva,SAAD,CAAnB;AACA,kBAAIzK,KAAJ,EAAW,OAAOA,KAAK,CAAC0K,UAAD,CAAZ;AACd,aAHD;AAIH,WA/BD,MAgCK,IAAIkQ,MAAM,KAAK,CAAf,EAAkB;AACnB;AACA,gBAAI2K,eAAe,GAAG7mD,CAAC,CAACi3C,WAAF,EAAtB;AACA,gBAAI6P,eAAe,GAAG9mD,CAAC,CAACi3C,WAAF,EAAtB;AACA,gBAAI8P,WAAW,GAAG/mD,CAAC,CAACi3C,WAAF,EAAlB;AACA,gBAAI+P,WAAW,GAAGhnD,CAAC,CAACi3C,WAAF,EAAlB;AACA,gBAAIgQ,SAAS,GAAG5B,kBAAkB,CAAC3hD,IAAD,EAAO2I,KAAK,GAAGw6C,eAAf,CAAlC;AACA,gBAAIK,SAAS,GAAG7B,kBAAkB,CAAC3hD,IAAD,EAAO2I,KAAK,GAAGy6C,eAAf,CAAlC,CAPmB,CASnB;;AACA,gBAAIK,aAAa,GAAG,EAApB;;AACA,iBAAK,IAAIzoD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqoD,WAApB,EAAiCroD,CAAC,EAAlC,EAAsC;AAClC,kBAAI0oD,UAAU,GAAGD,aAAa,CAACzoD,CAAD,CAAb,GAAmB,EAApC;;AACA,mBAAK,IAAIe,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGunD,WAApB,EAAiCvnD,CAAC,EAAlC,EAAsC;AAClC,oBAAIumD,YAAJ,EAAkBE,MAAM,GAAGlmD,CAAC,CAACq3C,UAAF,EAAT;AAClB,oBAAI4O,YAAJ,EAAkBE,MAAM,GAAGnmD,CAAC,CAACq3C,UAAF,EAAT,CAFgB,CAGlC;AACA;;AACA+P,0BAAU,CAAC3nD,CAAD,CAAV,GAAgBymD,MAAhB;AACH;AACJ,aApBkB,CAsBnB;;;AACA,gBAAImB,OAAO,GAAG,EAAd;;AACA,iBAAK3oD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGymD,QAAQ,CAACrmD,MAAzB,EAAiCJ,CAAC,EAAlC;AAAsC2oD,qBAAO,CAAClC,QAAQ,CAACzmD,CAAD,CAAT,CAAP,GAAuB,CAAvB;AAAtC,aAxBmB,CA0BnB;;;AACA,mBAAO,UAASqtC,SAAT,EAAoBC,UAApB,EAAgC;AACnC,kBAAI,CAACqb,OAAO,CAACtb,SAAD,CAAZ,EAAyB;AACzB,kBAAIub,MAAM,GAAGL,SAAS,CAAClb,SAAD,CAAtB;AACA,kBAAIwb,MAAM,GAAGL,SAAS,CAAClb,UAAD,CAAtB;AACA,kBAAIob,UAAU,GAAGD,aAAa,CAACG,MAAD,CAA9B;;AAEA,kBAAIF,UAAJ,EAAgB;AACZ,uBAAOA,UAAU,CAACG,MAAD,CAAjB;AACH;AACJ,aATD;AAUH;AACJ,SApL8F,CAsL/F;;;AACA,iBAASC,gBAAT,CAA0B9jD,IAA1B,EAAgC2I,KAAhC,EAAuC;AACnC,cAAIrM,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAIo7C,UAAU,GAAGznD,CAAC,CAACi3C,WAAF,EAAjB;AACA,cAAIyQ,UAAU,GAAG1nD,CAAC,CAACi3C,WAAF,EAAjB;AACA,cAAI0Q,mBAAmB,GAAGD,UAAU,GAAG,IAAvC;AACA,cAAIE,aAAa,GAAG5nD,CAAC,CAACi3C,WAAF,EAApB;AACA,cAAI4Q,eAAe,GAAG7nD,CAAC,CAACy3C,iBAAF,CAAoBmQ,aAApB,CAAtB;AACA,cAAIrO,KAAK,GAAG;AACRkO,sBAAU,EAAEA,UADJ;AAERC,sBAAU,EAAEA,UAFJ;AAGRI,4BAAgB,EAAEH,mBAAmB,GAAG3nD,CAAC,CAACi3C,WAAF,EAAH,GAAqB,CAAC;AAHnD,WAAZ,CAPmC,CAYnC;;AACA,cAAIwQ,UAAU,KAAK,CAAnB,EAAsB;AAClB,gBAAIM,SAAS,GAAG,EAAhB;;AACA,iBAAK,IAAIrpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkpD,aAApB,EAAmClpD,CAAC,EAApC,EAAwC;AACpCqpD,uBAAS,CAAC/oD,IAAV,CAAe8mD,oBAAoB,CAACpiD,IAAD,EAAO2I,KAAK,GAAGw7C,eAAe,CAACnpD,CAAD,CAA9B,CAAnC;AACH,aAJiB,CAKlB;;;AACA66C,iBAAK,CAACzN,eAAN,GAAwB,UAASC,SAAT,EAAoBC,UAApB,EAAgC;AACpD,mBAAK,IAAIttC,CAAC,GAAGqpD,SAAS,CAACjpD,MAAvB,EAA+BJ,CAAC,EAAhC,GAAqC;AACjC,oBAAI+xB,KAAK,GAAGs3B,SAAS,CAACrpD,CAAD,CAAT,CAAaqtC,SAAb,EAAwBC,UAAxB,CAAZ;AACA,oBAAIvb,KAAK,KAAKvd,SAAd,EAAyB,OAAOud,KAAP;AAC5B;;AAED,qBAAO,CAAP;AACH,aAPD;AAQH;;AAED,iBAAO8oB,KAAP;AACH,SArN8F,CAuN/F;AACA;;;AACA,iBAASyO,cAAT,CAAwBtkD,IAAxB,EAA8B2I,KAA9B,EAAqCg7B,IAArC,EAA2C;AACvC,cAAIrnC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAI47C,YAAY,GAAGjoD,CAAC,CAACw3C,UAAF,EAAnB;AACAlkB,eAAK,CAAC6U,QAAN,CAAe8f,YAAY,KAAK,CAAhC,EAAmC,iCAAnC,EAHuC,CAKvC;;AACAjD,8BAAoB,CAACthD,IAAD,EAAO2I,KAAK,GAAGrM,CAAC,CAACi3C,WAAF,EAAf,CAApB,CANuC,CAOvC;;AACA+N,8BAAoB,CAACthD,IAAD,EAAO2I,KAAK,GAAGrM,CAAC,CAACi3C,WAAF,EAAf,CAApB,CARuC,CAUvC;;AACA,cAAIiR,gBAAgB,GAAGloD,CAAC,CAACi3C,WAAF,EAAvB;AACAj3C,WAAC,CAAC62C,cAAF,GAAmBqR,gBAAnB;AACA,cAAIC,WAAW,GAAGnoD,CAAC,CAACi3C,WAAF,EAAlB;AACA,cAAImR,kBAAkB,GAAGpoD,CAAC,CAACy3C,iBAAF,CAAoB0Q,WAApB,CAAzB;AACA,cAAIE,wBAAwB,GAAGh8C,KAAK,GAAG67C,gBAAvC;;AACA,eAAK,IAAIxpD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGypD,WAApB,EAAiCzpD,CAAC,EAAlC,EAAsC;AAClC,gBAAI66C,KAAK,GAAGiO,gBAAgB,CAAC9jD,IAAD,EAAO2kD,wBAAwB,GAAGD,kBAAkB,CAAC1pD,CAAD,CAApD,CAA5B;AACA,gBAAI66C,KAAK,CAACkO,UAAN,KAAqB,CAArB,IAA0B,CAACpgB,IAAI,CAAC6E,mBAApC,EAAyD7E,IAAI,CAAC6E,mBAAL,GAA2BqN,KAAK,CAACzN,eAAjC;AAC5D;AACJ;;AAEDx4B,eAAO,CAAC6+B,KAAR,GAAgB6V,cAAhB;AAEC,OAjP6D,EAiP5D;AAAC,oBAAW,CAAZ;AAAc,oBAAW;AAAzB,OAjP4D,CAxmG6uB;AAy1G5wB,UAAG,CAAC,UAAS/pC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACnE;AACA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CARmE,CAUnE;;;AACA,iBAASqqC,cAAT,CAAwB5kD,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAIkmC,IAAI,GAAG,EAAX;AACA,cAAIvyC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACAkmC,cAAI,CAAC/I,OAAL,GAAexpC,CAAC,CAACg4C,YAAF,EAAf;AACAzF,cAAI,CAACgW,YAAL,GAAoBlrD,IAAI,CAAC4jB,KAAL,CAAWjhB,CAAC,CAACw3C,UAAF,KAAiB,IAA5B,IAAoC,IAAxD;AACAjF,cAAI,CAACiW,kBAAL,GAA0BxoD,CAAC,CAACu3C,UAAF,EAA1B;AACAhF,cAAI,CAACkW,WAAL,GAAmBzoD,CAAC,CAACu3C,UAAF,EAAnB;AACAjkB,eAAK,CAAC6U,QAAN,CAAeoK,IAAI,CAACkW,WAAL,KAAqB,UAApC,EAAgD,qCAAhD;AACAlW,cAAI,CAAC6Q,KAAL,GAAapjD,CAAC,CAACi3C,WAAF,EAAb;AACA1E,cAAI,CAACnH,UAAL,GAAkBprC,CAAC,CAACi3C,WAAF,EAAlB;AACA1E,cAAI,CAACmW,OAAL,GAAe1oD,CAAC,CAAC+3C,iBAAF,EAAf;AACAxF,cAAI,CAACvvB,QAAL,GAAgBhjB,CAAC,CAAC+3C,iBAAF,EAAhB;AACAxF,cAAI,CAAC1C,IAAL,GAAY7vC,CAAC,CAACq3C,UAAF,EAAZ;AACA9E,cAAI,CAACzC,IAAL,GAAY9vC,CAAC,CAACq3C,UAAF,EAAZ;AACA9E,cAAI,CAACxC,IAAL,GAAY/vC,CAAC,CAACq3C,UAAF,EAAZ;AACA9E,cAAI,CAACvC,IAAL,GAAYhwC,CAAC,CAACq3C,UAAF,EAAZ;AACA9E,cAAI,CAACoW,QAAL,GAAgB3oD,CAAC,CAACi3C,WAAF,EAAhB;AACA1E,cAAI,CAACqW,aAAL,GAAqB5oD,CAAC,CAACi3C,WAAF,EAArB;AACA1E,cAAI,CAACsW,iBAAL,GAAyB7oD,CAAC,CAACq3C,UAAF,EAAzB;AACA9E,cAAI,CAACsB,gBAAL,GAAwB7zC,CAAC,CAACq3C,UAAF,EAAxB,CAnBiC,CAmBW;;AAC5C9E,cAAI,CAACuW,eAAL,GAAuB9oD,CAAC,CAACq3C,UAAF,EAAvB;AACA,iBAAO9E,IAAP;AACH;;AAED,iBAASwW,aAAT,CAAuB5+C,OAAvB,EAAgC;AAC5B,iBAAO,IAAIovC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC3B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAD2B,EAE3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAF2B,EAG3B;AAACltB,gBAAI,EAAE,oBAAP;AAA6BgH,gBAAI,EAAE,OAAnC;AAA4CkmB,iBAAK,EAAE;AAAnD,WAH2B,EAI3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,OAA5B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAJ2B,EAK3B;AAACltB,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,QAAtB;AAAgCkmB,iBAAK,EAAE;AAAvC,WAL2B,EAM3B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAN2B,EAO3B;AAACltB,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,cAAxB;AAAwCkmB,iBAAK,EAAE;AAA/C,WAP2B,EAQ3B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,cAAzB;AAAyCkmB,iBAAK,EAAE;AAAhD,WAR2B,EAS3B;AAACltB,gBAAI,EAAE,MAAP;AAAegH,gBAAI,EAAE,OAArB;AAA8BkmB,iBAAK,EAAE;AAArC,WAT2B,EAU3B;AAACltB,gBAAI,EAAE,MAAP;AAAegH,gBAAI,EAAE,OAArB;AAA8BkmB,iBAAK,EAAE;AAArC,WAV2B,EAW3B;AAACltB,gBAAI,EAAE,MAAP;AAAegH,gBAAI,EAAE,OAArB;AAA8BkmB,iBAAK,EAAE;AAArC,WAX2B,EAY3B;AAACltB,gBAAI,EAAE,MAAP;AAAegH,gBAAI,EAAE,OAArB;AAA8BkmB,iBAAK,EAAE;AAArC,WAZ2B,EAa3B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,QAAzB;AAAmCkmB,iBAAK,EAAE;AAA1C,WAb2B,EAc3B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,QAA9B;AAAwCkmB,iBAAK,EAAE;AAA/C,WAd2B,EAe3B;AAACltB,gBAAI,EAAE,mBAAP;AAA4BgH,gBAAI,EAAE,OAAlC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAf2B,EAgB3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,OAAjC;AAA0CkmB,iBAAK,EAAE;AAAjD,WAhB2B,EAiB3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WAjB2B,CAAxB,EAkBJtmB,OAlBI,CAAP;AAmBH;;AAEDmJ,eAAO,CAAC6+B,KAAR,GAAgBmW,cAAhB;AACAh1C,eAAO,CAAC4tC,IAAR,GAAe6H,aAAf;AAEC,OA5DiC,EA4DhC;AAAC,oBAAW,CAAZ;AAAc,oBAAW,CAAzB;AAA2B,oBAAW;AAAtC,OA5DgC,CAz1GywB;AAq5G9vB,UAAG,CAAC,UAAS9qC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACjF;AACA;AAEA;;AAEA,YAAI6+B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CAPiF,CASjF;;;AACA,iBAAS+qC,cAAT,CAAwBtlD,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAImmC,IAAI,GAAG,EAAX;AACA,cAAIxyC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACAmmC,cAAI,CAAChJ,OAAL,GAAexpC,CAAC,CAACg4C,YAAF,EAAf;AACAxF,cAAI,CAACnH,QAAL,GAAgBrrC,CAAC,CAACq3C,UAAF,EAAhB;AACA7E,cAAI,CAAClH,SAAL,GAAiBtrC,CAAC,CAACq3C,UAAF,EAAjB;AACA7E,cAAI,CAACyW,OAAL,GAAejpD,CAAC,CAACq3C,UAAF,EAAf;AACA7E,cAAI,CAAC0W,eAAL,GAAuBlpD,CAAC,CAACi3C,WAAF,EAAvB;AACAzE,cAAI,CAAC2W,kBAAL,GAA0BnpD,CAAC,CAACq3C,UAAF,EAA1B;AACA7E,cAAI,CAAC4W,mBAAL,GAA2BppD,CAAC,CAACq3C,UAAF,EAA3B;AACA7E,cAAI,CAAC6W,UAAL,GAAkBrpD,CAAC,CAACq3C,UAAF,EAAlB;AACA7E,cAAI,CAAC8W,cAAL,GAAsBtpD,CAAC,CAACq3C,UAAF,EAAtB;AACA7E,cAAI,CAAC+W,aAAL,GAAqBvpD,CAAC,CAACq3C,UAAF,EAArB;AACA7E,cAAI,CAACgX,WAAL,GAAmBxpD,CAAC,CAACq3C,UAAF,EAAnB;AACAr3C,WAAC,CAAC62C,cAAF,IAAoB,CAApB;AACArE,cAAI,CAACiX,gBAAL,GAAwBzpD,CAAC,CAACq3C,UAAF,EAAxB;AACA7E,cAAI,CAACmC,gBAAL,GAAwB30C,CAAC,CAACi3C,WAAF,EAAxB;AACA,iBAAOzE,IAAP;AACH;;AAED,iBAASkX,aAAT,CAAuBv/C,OAAvB,EAAgC;AAC5B,iBAAO,IAAIovC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC3B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAD2B,EAE3B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,OAAzB;AAAkCkmB,iBAAK,EAAE;AAAzC,WAF2B,EAG3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,OAA1B;AAAmCkmB,iBAAK,EAAE;AAA1C,WAH2B,EAI3B;AAACltB,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAJ2B,EAK3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,QAAhC;AAA0CkmB,iBAAK,EAAE;AAAjD,WAL2B,EAM3B;AAACltB,gBAAI,EAAE,oBAAP;AAA6BgH,gBAAI,EAAE,OAAnC;AAA4CkmB,iBAAK,EAAE;AAAnD,WAN2B,EAO3B;AAACltB,gBAAI,EAAE,qBAAP;AAA8BgH,gBAAI,EAAE,OAApC;AAA6CkmB,iBAAK,EAAE;AAApD,WAP2B,EAQ3B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,OAA3B;AAAoCkmB,iBAAK,EAAE;AAA3C,WAR2B,EAS3B;AAACltB,gBAAI,EAAE,gBAAP;AAAyBgH,gBAAI,EAAE,OAA/B;AAAwCkmB,iBAAK,EAAE;AAA/C,WAT2B,EAU3B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,OAA9B;AAAuCkmB,iBAAK,EAAE;AAA9C,WAV2B,EAW3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,OAA5B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAX2B,EAY3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,OAA1B;AAAmCkmB,iBAAK,EAAE;AAA1C,WAZ2B,EAa3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,OAA1B;AAAmCkmB,iBAAK,EAAE;AAA1C,WAb2B,EAc3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,OAA1B;AAAmCkmB,iBAAK,EAAE;AAA1C,WAd2B,EAe3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,OAA1B;AAAmCkmB,iBAAK,EAAE;AAA1C,WAf2B,EAgB3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,OAAjC;AAA0CkmB,iBAAK,EAAE;AAAjD,WAhB2B,EAiB3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,QAAjC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAjB2B,CAAxB,EAkBJtmB,OAlBI,CAAP;AAmBH;;AAEDmJ,eAAO,CAAC6+B,KAAR,GAAgB6W,cAAhB;AACA11C,eAAO,CAAC4tC,IAAR,GAAewI,aAAf;AAEC,OAvD+C,EAuD9C;AAAC,oBAAW,CAAZ;AAAc,oBAAW;AAAzB,OAvD8C,CAr5G2vB;AA48G3wB,UAAG,CAAC,UAASzrC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpE;AACA;AAEA;;AAEA,YAAI6+B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CAPoE,CASpE;AACA;;;AACA,iBAAS0rC,cAAT,CAAwBjmD,IAAxB,EAA8B2I,KAA9B,EAAqCu9C,UAArC,EAAiDhV,SAAjD,EAA4DtoB,MAA5D,EAAoE;AAChE,cAAImgB,YAAJ;AACA,cAAIsE,eAAJ;AACA,cAAI/wC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;;AACA,eAAK,IAAI3N,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk2C,SAApB,EAA+Bl2C,CAAC,IAAI,CAApC,EAAuC;AACnC;AACA,gBAAIA,CAAC,GAAGkrD,UAAR,EAAoB;AAChBnd,0BAAY,GAAGzsC,CAAC,CAACi3C,WAAF,EAAf;AACAlG,6BAAe,GAAG/wC,CAAC,CAACq3C,UAAF,EAAlB;AACH;;AAED,gBAAI/lB,KAAK,GAAGhF,MAAM,CAACrrB,GAAP,CAAWvC,CAAX,CAAZ;AACA4yB,iBAAK,CAACmb,YAAN,GAAqBA,YAArB;AACAnb,iBAAK,CAACyf,eAAN,GAAwBA,eAAxB;AACH;AACJ;;AAED,iBAAS8Y,aAAT,CAAuBv9B,MAAvB,EAA+B;AAC3B,cAAIhhB,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,EAAxB,CAAR;;AACA,eAAK,IAAIv6C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG4tB,MAAM,CAACxtB,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI4yB,KAAK,GAAGhF,MAAM,CAACrrB,GAAP,CAAWvC,CAAX,CAAZ;AACA,gBAAI+tC,YAAY,GAAGnb,KAAK,CAACmb,YAAN,IAAsB,CAAzC;AACA,gBAAIsE,eAAe,GAAGzf,KAAK,CAACyf,eAAN,IAAyB,CAA/C;AACAzlC,aAAC,CAAC6tC,MAAF,CAASn6C,IAAT,CAAc;AAACuE,kBAAI,EAAE,kBAAkB7E,CAAzB;AAA4B6L,kBAAI,EAAE,QAAlC;AAA4CkmB,mBAAK,EAAEgc;AAAnD,aAAd;AACAnhC,aAAC,CAAC6tC,MAAF,CAASn6C,IAAT,CAAc;AAACuE,kBAAI,EAAE,qBAAqB7E,CAA5B;AAA+B6L,kBAAI,EAAE,OAArC;AAA8CkmB,mBAAK,EAAEsgB;AAArD,aAAd;AACH;;AAED,iBAAOzlC,CAAP;AACH;;AAEDgI,eAAO,CAAC6+B,KAAR,GAAgBwX,cAAhB;AACAr2C,eAAO,CAAC4tC,IAAR,GAAe2I,aAAf;AAEC,OA5CkC,EA4CjC;AAAC,oBAAW,CAAZ;AAAc,oBAAW;AAAzB,OA5CiC,CA58GwwB;AAw/G3wB,UAAG,CAAC,UAAS5rC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpE;AACA;AACA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB,CARoE,CAUpE;;;AACA,iBAAS6rC,cAAT,CAAwBpmD,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAIi1B,KAAK,GAAG,EAAZ;AACA,cAAIthC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAI47C,YAAY,GAAGjoD,CAAC,CAACi3C,WAAF,EAAnB;AACA3jB,eAAK,CAAC6U,QAAN,CAAe8f,YAAY,KAAK,CAAhC,EAAmC,iCAAnC,EAJiC,CAKjC;;AACAjoD,WAAC,CAACm4C,IAAF,CAAO,QAAP,EAAiB,CAAjB;AACA,cAAI4R,eAAe,GAAG/pD,CAAC,CAACi3C,WAAF,EAAtB;AACA3jB,eAAK,CAAC6U,QAAN,CAAe4hB,eAAe,KAAK,CAAnC,EAAsC,qCAAtC,EARiC,CASjC;;AACA/pD,WAAC,CAACm4C,IAAF,CAAO,QAAP,EAAiB,CAAjB;AACA,cAAI6R,MAAM,GAAGhqD,CAAC,CAACi3C,WAAF,EAAb,CAXiC,CAYjC;;AACAj3C,WAAC,CAACm4C,IAAF,CAAO,QAAP,EAAiB,CAAjB;;AACA,eAAK,IAAIz5C,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsrD,MAApB,EAA4BtrD,CAAC,IAAI,CAAjC,EAAoC;AAChC,gBAAIurD,SAAS,GAAGjqD,CAAC,CAACi3C,WAAF,EAAhB;AACA,gBAAIiT,UAAU,GAAGlqD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAIxmB,KAAK,GAAGzwB,CAAC,CAACq3C,UAAF,EAAZ;AACA/V,iBAAK,CAAC2oB,SAAS,GAAG,GAAZ,GAAkBC,UAAnB,CAAL,GAAsCz5B,KAAtC;AACH;;AAED,iBAAO6Q,KAAP;AACH;;AAEDhuB,eAAO,CAAC6+B,KAAR,GAAgB2X,cAAhB;AAEC,OArCkC,EAqCjC;AAAC,oBAAW,CAAZ;AAAc,oBAAW;AAAzB,OArCiC,CAx/GwwB;AA6hH5wB,UAAG,CAAC,UAAS7rC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACnE;AACA;AAEA;;AAEA,YAAI6+B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB,CANmE,CAQnE;AACA;AACA;AACA;AACA;AACA;;;AACA,iBAASksC,cAAT,CAAwBzmD,IAAxB,EAA8B2I,KAA9B,EAAqCuoC,SAArC,EAAgDG,YAAhD,EAA8D;AAC1D,cAAI/0C,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAI+9C,OAAO,GAAGrV,YAAY,GAAG/0C,CAAC,CAACi3C,WAAL,GAAmBj3C,CAAC,CAACu3C,UAA/C,CAF0D,CAG1D;AACA;;AACA,cAAI8S,YAAY,GAAG,EAAnB;;AACA,eAAK,IAAI3rD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGk2C,SAAS,GAAG,CAAhC,EAAmCl2C,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI4rD,WAAW,GAAGF,OAAO,CAACtpD,IAAR,CAAad,CAAb,CAAlB;;AACA,gBAAI+0C,YAAJ,EAAkB;AACd;AACAuV,yBAAW,IAAI,CAAf;AACH;;AAEDD,wBAAY,CAACrrD,IAAb,CAAkBsrD,WAAlB;AACH;;AAED,iBAAOD,YAAP;AACH;;AAED/2C,eAAO,CAAC6+B,KAAR,GAAgBgY,cAAhB;AAEC,OAnCiC,EAmChC;AAAC,oBAAW;AAAZ,OAnCgC,CA7hHywB;AAgkHzxB,UAAG,CAAC,UAASlsC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACtD;AACA;AACA;AAEA;;AAEA,YAAI6+B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CARsD,CAUtD;;;AACA,iBAASssC,cAAT,CAAwB7mD,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAIumC,IAAI,GAAG,EAAX;AACA,cAAI5yC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACAumC,cAAI,CAACpJ,OAAL,GAAexpC,CAAC,CAACg4C,YAAF,EAAf;AACApF,cAAI,CAACgC,SAAL,GAAiB50C,CAAC,CAACi3C,WAAF,EAAjB;;AACA,cAAIrE,IAAI,CAACpJ,OAAL,KAAiB,GAArB,EAA0B;AACtBoJ,gBAAI,CAAC4X,SAAL,GAAiBxqD,CAAC,CAACi3C,WAAF,EAAjB;AACArE,gBAAI,CAAC6X,WAAL,GAAmBzqD,CAAC,CAACi3C,WAAF,EAAnB;AACArE,gBAAI,CAAC8X,kBAAL,GAA0B1qD,CAAC,CAACi3C,WAAF,EAA1B;AACArE,gBAAI,CAAC+X,oBAAL,GAA4B3qD,CAAC,CAACi3C,WAAF,EAA5B;AACArE,gBAAI,CAACgY,QAAL,GAAgB5qD,CAAC,CAACi3C,WAAF,EAAhB;AACArE,gBAAI,CAACiY,iBAAL,GAAyB7qD,CAAC,CAACi3C,WAAF,EAAzB;AACArE,gBAAI,CAACkY,UAAL,GAAkB9qD,CAAC,CAACi3C,WAAF,EAAlB;AACArE,gBAAI,CAACmY,eAAL,GAAuB/qD,CAAC,CAACi3C,WAAF,EAAvB;AACArE,gBAAI,CAACoY,kBAAL,GAA0BhrD,CAAC,CAACi3C,WAAF,EAA1B;AACArE,gBAAI,CAACqY,gBAAL,GAAwBjrD,CAAC,CAACi3C,WAAF,EAAxB;AACArE,gBAAI,CAACsY,qBAAL,GAA6BlrD,CAAC,CAACi3C,WAAF,EAA7B;AACArE,gBAAI,CAACuY,oBAAL,GAA4BnrD,CAAC,CAACi3C,WAAF,EAA5B;AACArE,gBAAI,CAACwY,iBAAL,GAAyBprD,CAAC,CAACi3C,WAAF,EAAzB;AACH;;AAED,iBAAOrE,IAAP;AACH;;AAED,iBAASyY,aAAT,CAAuBzW,SAAvB,EAAkC;AAC9B,iBAAO,IAAI2E,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC3B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAD2B,EAE3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,QAA1B;AAAoCkmB,iBAAK,EAAEmkB;AAA3C,WAF2B,CAAxB,CAAP;AAIH;;AAEDthC,eAAO,CAAC6+B,KAAR,GAAgBoY,cAAhB;AACAj3C,eAAO,CAAC4tC,IAAR,GAAemK,aAAf;AAEC,OA7CoB,EA6CnB;AAAC,oBAAW,CAAZ;AAAc,oBAAW;AAAzB,OA7CmB,CAhkHsxB;AA6mH3wB,UAAG,CAAC,UAASptC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpE;AACA;AAEA;;AAEA,YAAIy6B,MAAM,GAAG9vB,OAAO,CAAC,UAAD,CAAP,CAAoB8vB,MAAjC;;AACA,YAAIoE,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CARoE,CAUpE;;;AACA,YAAIqtC,cAAc,GAAG,CACjB,WADiB,EACS;AAC1B,oBAFiB,EAES;AAC1B,uBAHiB,EAGS;AAC1B,kBAJiB,EAIS;AAC1B,kBALiB,EAKS;AAC1B,iBANiB,EAMS;AAC1B,wBAPiB,EAOS;AAC1B,mBARiB,EAQS;AAC1B,sBATiB,EASS;AAC1B,kBAViB,EAUS;AAC1B,qBAXiB,EAWS;AAC1B,yBAZiB,EAYS;AAC1B,qBAbiB,EAaS;AAC1B,iBAdiB,EAcS;AAC1B,oBAfiB,EAeS;AAC1B,kBAhBiB,EAgBS;AAC1B,yBAjBiB,EAiBS;AAC1B,4BAlBiB,EAkBS;AAC1B,4BAnBiB,EAmBS;AAC1B,oBApBiB,EAoBS;AAC1B,gCArBiB,EAqBS;AAC1B,mBAtBiB,EAsBS;AAC1B,sBAvBiB,CAuBS;AAvBT,SAArB,CAXoE,CAqCpE;AACA;AACA;;AACA,iBAASC,cAAT,CAAwB7nD,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAI9I,IAAI,GAAG,EAAX;AACA,cAAIvD,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA9I,cAAI,CAAC24C,MAAL,GAAcl8C,CAAC,CAACi3C,WAAF,EAAd;AACA,cAAIlzB,KAAK,GAAG/jB,CAAC,CAACi3C,WAAF,EAAZ;AACA,cAAIuU,YAAY,GAAGxrD,CAAC,CAACynB,MAAF,GAAWznB,CAAC,CAACi3C,WAAF,EAA9B;AACA,cAAIwU,YAAY,GAAG,CAAnB;;AACA,eAAK,IAAI/sD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqlB,KAApB,EAA2BrlB,CAAC,EAA5B,EAAgC;AAC5B,gBAAIgtD,UAAU,GAAG1rD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAI0U,UAAU,GAAG3rD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAI2U,UAAU,GAAG5rD,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAI4U,MAAM,GAAG7rD,CAAC,CAACi3C,WAAF,EAAb;AACA,gBAAI6U,QAAQ,GAAGR,cAAc,CAACO,MAAD,CAA7B;AACA,gBAAIrd,UAAU,GAAGxuC,CAAC,CAACi3C,WAAF,EAAjB;AACA,gBAAIxvB,MAAM,GAAGznB,CAAC,CAACi3C,WAAF,EAAb,CAP4B,CAQ5B;AACA;AACA;;AACA,gBAAIyU,UAAU,KAAK,CAAf,IAAoBC,UAAU,KAAK,CAAnC,IAAwCC,UAAU,KAAK,KAA3D,EAAkE;AAC9D,kBAAIG,UAAU,GAAG,EAAjB;AACA,kBAAIjtD,MAAM,GAAG0vC,UAAU,GAAG,CAA1B;;AACA,mBAAK,IAAI/uC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGX,MAApB,EAA4BW,CAAC,IAAIgoB,MAAM,IAAI,CAA3C,EAA8C;AAC1CskC,0BAAU,CAACtsD,CAAD,CAAV,GAAgB0yC,KAAK,CAACwD,QAAN,CAAejyC,IAAf,EAAqB8nD,YAAY,GAAG/jC,MAApC,CAAhB;AACH;;AAED,kBAAI+D,GAAG,GAAGlC,MAAM,CAACysB,YAAP,CAAoBxhB,KAApB,CAA0B,IAA1B,EAAgCw3B,UAAhC,CAAV;;AACA,kBAAID,QAAJ,EAAc;AACVvoD,oBAAI,CAACuoD,QAAD,CAAJ,GAAiBtgC,GAAjB;AACH,eAFD,MAGK;AACDigC,4BAAY;AACZloD,oBAAI,CAAC,YAAYkoD,YAAb,CAAJ,GAAiCjgC,GAAjC;AACH;AACJ;AAEJ;;AAED,cAAIjoB,IAAI,CAAC24C,MAAL,KAAgB,CAApB,EAAuB;AACnB34C,gBAAI,CAACyoD,YAAL,GAAoBhsD,CAAC,CAACi3C,WAAF,EAApB;AACH;;AAED,iBAAO1zC,IAAP;AACH;;AAED,iBAAS0oD,cAAT,CAAwBP,UAAxB,EAAoCC,UAApC,EAAgDC,UAAhD,EAA4DC,MAA5D,EAAoE/sD,MAApE,EAA4E2oB,MAA5E,EAAoF;AAChF,iBAAO,IAAI8xB,KAAK,CAACN,KAAV,CAAgB,YAAhB,EAA8B,CACjC;AAAC11C,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAEi7B;AAA5C,WADiC,EAEjC;AAACnoD,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAEk7B;AAA5C,WAFiC,EAGjC;AAACpoD,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAEm7B;AAA5C,WAHiC,EAIjC;AAACroD,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAEo7B;AAAxC,WAJiC,EAKjC;AAACtoD,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAE3xB;AAAxC,WALiC,EAMjC;AAACyE,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAEhJ;AAAxC,WANiC,CAA9B,CAAP;AAQH;;AAED,iBAASykC,sBAAT,CAAgC5gD,CAAhC,EAAmC6gD,QAAnC,EAA6C7vB,CAA7C,EAAgD7U,MAAhD,EAAwD;AACpD;AACA,cAAI2kC,WAAW,GAAGre,MAAM,CAACse,MAAP,CAAc/vB,CAAd,CAAlB;AACAhxB,WAAC,CAACghD,OAAF,CAAUttD,IAAV,CAAeitD,cAAc,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAUE,QAAV,EAAoBC,WAAW,CAACttD,MAAhC,EAAwC2oB,MAAxC,CAA7B;AACAnc,WAAC,CAAC2vC,OAAF,CAAUj8C,IAAV,CAAeotD,WAAf;AACA3kC,gBAAM,IAAI2kC,WAAW,CAACttD,MAAtB;AACA,iBAAO2oB,MAAP;AACH;;AAED,iBAAS8kC,oBAAT,CAA8BjhD,CAA9B,EAAiC6gD,QAAjC,EAA2C7vB,CAA3C,EAA8C7U,MAA9C,EAAsD;AAClD;AACA,cAAI+kC,UAAU,GAAGze,MAAM,CAAC0e,KAAP,CAAanwB,CAAb,CAAjB;AACAhxB,WAAC,CAACghD,OAAF,CAAUttD,IAAV,CAAeitD,cAAc,CAAC,CAAD,EAAI,CAAJ,EAAO,MAAP,EAAeE,QAAf,EAAyBK,UAAU,CAAC1tD,MAApC,EAA4C2oB,MAA5C,CAA7B;AACAnc,WAAC,CAAC2vC,OAAF,CAAUj8C,IAAV,CAAewtD,UAAf;AACA/kC,gBAAM,IAAI+kC,UAAU,CAAC1tD,MAArB;AACA,iBAAO2oB,MAAP;AACH;;AAED,iBAASilC,aAAT,CAAuBviD,OAAvB,EAAgC;AAC5B,cAAImB,CAAC,GAAG,IAAIiuC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC5B;AAAC11C,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAD4B,EAE5B;AAACltB,gBAAI,EAAE,OAAP;AAAgBgH,gBAAI,EAAE,QAAtB;AAAgCkmB,iBAAK,EAAE;AAAvC,WAF4B,EAG5B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,QAA7B;AAAuCkmB,iBAAK,EAAE;AAA9C,WAH4B,CAAxB,CAAR;AAKAnlB,WAAC,CAACghD,OAAF,GAAY,EAAZ;AACAhhD,WAAC,CAAC2vC,OAAF,GAAY,EAAZ;AACA,cAAIxzB,MAAM,GAAG,CAAb;AACA,cAAI/oB,CAAJ;AACA,cAAI49B,CAAJ,CAV4B,CAW5B;;AACA,eAAK59B,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4sD,cAAc,CAACxsD,MAA/B,EAAuCJ,CAAC,IAAI,CAA5C,EAA+C;AAC3C,gBAAIyL,OAAO,CAACmhD,cAAc,CAAC5sD,CAAD,CAAf,CAAP,KAA+BwU,SAAnC,EAA8C;AAC1CopB,eAAC,GAAGnyB,OAAO,CAACmhD,cAAc,CAAC5sD,CAAD,CAAf,CAAX;AACA+oB,oBAAM,GAAGykC,sBAAsB,CAAC5gD,CAAD,EAAI5M,CAAJ,EAAO49B,CAAP,EAAU7U,MAAV,CAA/B;AACH;AACJ,WAjB2B,CAkB5B;;;AACA,eAAK/oB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4sD,cAAc,CAACxsD,MAA/B,EAAuCJ,CAAC,IAAI,CAA5C,EAA+C;AAC3C,gBAAIyL,OAAO,CAACmhD,cAAc,CAAC5sD,CAAD,CAAf,CAAP,KAA+BwU,SAAnC,EAA8C;AAC1CopB,eAAC,GAAGnyB,OAAO,CAACmhD,cAAc,CAAC5sD,CAAD,CAAf,CAAX;AACA+oB,oBAAM,GAAG8kC,oBAAoB,CAACjhD,CAAD,EAAI5M,CAAJ,EAAO49B,CAAP,EAAU7U,MAAV,CAA7B;AACH;AACJ;;AAEDnc,WAAC,CAACyY,KAAF,GAAUzY,CAAC,CAACghD,OAAF,CAAUxtD,MAApB;AACAwM,WAAC,CAACkgD,YAAF,GAAiB,IAAIlgD,CAAC,CAACyY,KAAF,GAAU,EAA/B;;AACA,eAAKrlB,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4M,CAAC,CAACghD,OAAF,CAAUxtD,MAA1B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0C;AACtC4M,aAAC,CAAC6tC,MAAF,CAASn6C,IAAT,CAAc;AAACuE,kBAAI,EAAE,YAAY7E,CAAnB;AAAsB6L,kBAAI,EAAE,OAA5B;AAAqCkmB,mBAAK,EAAEnlB,CAAC,CAACghD,OAAF,CAAU5tD,CAAV;AAA5C,aAAd;AACH;;AAED,eAAKA,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG4M,CAAC,CAAC2vC,OAAF,CAAUn8C,MAA1B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0C;AACtC4M,aAAC,CAAC6tC,MAAF,CAASn6C,IAAT,CAAc;AAACuE,kBAAI,EAAE,YAAY7E,CAAnB;AAAsB6L,kBAAI,EAAE,SAA5B;AAAuCkmB,mBAAK,EAAEnlB,CAAC,CAAC2vC,OAAF,CAAUv8C,CAAV;AAA9C,aAAd;AACH;;AAED,iBAAO4M,CAAP;AACH;;AAEDgI,eAAO,CAAC6+B,KAAR,GAAgBoZ,cAAhB;AACAj4C,eAAO,CAAC4tC,IAAR,GAAewL,aAAf;AAEC,OA3JkC,EA2JjC;AAAC,oBAAW,CAAZ;AAAc,oBAAW,EAAzB;AAA4B,oBAAW;AAAvC,OA3JiC,CA7mHwwB;AAwwH7vB,UAAG,CAAC,UAASzuC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAClF;AACA;AAEA;;AAEA,YAAI6+B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB;;AAEA,YAAI0uC,aAAa,GAAG,CAChB;AAACvH,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SADgB,EACc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAFgB,EAEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAHgB,EAGc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAJgB,EAIc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SALgB,EAKc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SANgB,EAMc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAPgB,EAOc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SARgB,EAQc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SATgB,EASc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAVgB,EAUc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAXgB,EAWc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAZgB,EAYc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAbgB,EAac;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAdgB,EAcc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAfgB,EAec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAhBgB,EAgBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjBgB,EAiBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlBgB,EAkBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnBgB,EAmBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApBgB,EAoBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArBgB,EAqBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAtBgB,EAsBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAvBgB,EAuBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAxBgB,EAwBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAzBgB,EAyBc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA1BgB,EA0Bc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA3BgB,EA2Bc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA5BgB,EA4Bc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA7BgB,EA6Bc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA9BgB,EA8Bc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA/BgB,EA+Bc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAhCgB,EAgCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjCgB,EAiCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlCgB,EAkCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnCgB,EAmCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApCgB,EAoCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArCgB,EAqCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAtCgB,EAsCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAvCgB,EAuCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAxCgB,EAwCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAzCgB,EAyCc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA1CgB,EA0Cc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA3CgB,EA2Cc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA5CgB,EA4Cc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA7CgB,EA6Cc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA9CgB,EA8Cc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA/CgB,EA+Cc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAhDgB,EAgDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjDgB,EAiDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlDgB,EAkDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnDgB,EAmDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApDgB,EAoDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArDgB,EAqDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAtDgB,EAsDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAvDgB,EAuDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAxDgB,EAwDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAzDgB,EAyDc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA1DgB,EA0Dc;AAC9B;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA3DgB,EA2DgB;AAChC;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA5DgB,EA4Dc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA7DgB,EA6Dc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA9DgB,EA8Dc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA/DgB,EA+Dc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAhEgB,EAgEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjEgB,EAiEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlEgB,EAkEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnEgB,EAmEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApEgB,EAoEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArEgB,EAqEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAtEgB,EAsEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAvEgB,EAuEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAxEgB,EAwEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAzEgB,EAyEc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA1EgB,EA0Ec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA3EgB,EA2Ec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA5EgB,EA4Ec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA7EgB,EA6Ec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA9EgB,EA8Ec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA/EgB,EA+Ec;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAhFgB,EAgFc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjFgB,EAiFc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlFgB,EAkFc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnFgB,EAmFc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApFgB,EAoFc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArFgB,EAqFc;AAC9B;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAtFgB,EAsFgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAvFgB,EAuFgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAxFgB,EAwFgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAzFgB,EAyFgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA1FgB,EA0FgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA3FgB,EA2FgB;AAChC;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA5FgB,EA4Fc;AAC9B;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA7FgB,EA6FgB;AAChC;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA9FgB,EA8Fc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SA/FgB,EA+Fc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAhGgB,EAgGc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjGgB,EAiGc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlGgB,EAkGc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnGgB,EAmGc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApGgB,EAoGc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArGgB,EAqGc;AAC9B;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAtGgB,EAsGgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAvGgB,EAuGgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAxGgB,EAwGgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAzGgB,EAyGgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA1GgB,EA0GgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA3GgB,EA2GgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA5GgB,EA4GgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA7GgB,EA6GgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA9GgB,EA8GgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA/GgB,EA+GgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAhHgB,EAgHgB;AAChC;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAjHgB,EAiHc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAlHgB,EAkHc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAnHgB,EAmHc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SApHgB,EAoHc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SArHgB,EAqHc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAtHgB,EAsHc;AAC9B;AAAC44C,eAAK,EAAE,MAAR;AAAgB54C,aAAG,EAAE;AAArB,SAvHgB,EAuHc;AAC9B;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAxHgB,EAwHgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SAzHgB,EAyHgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA1HgB,EA0HgB;AAChC;AAAC44C,eAAK,EAAE,OAAR;AAAiB54C,aAAG,EAAE;AAAtB,SA3HgB,CA2HgB;AA3HhB,SAApB;;AA8HA,iBAASogD,eAAT,CAAyBrlB,OAAzB,EAAkC;AAC9B,eAAK,IAAI7oC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiuD,aAAa,CAAC7tD,MAAlC,EAA0CJ,CAAC,IAAI,CAA/C,EAAkD;AAC9C,gBAAI02B,KAAK,GAAGu3B,aAAa,CAACjuD,CAAD,CAAzB;;AACA,gBAAI6oC,OAAO,IAAInS,KAAK,CAACgwB,KAAjB,IAA0B7d,OAAO,GAAGnS,KAAK,CAAC5oB,GAA9C,EAAmD;AAC/C,qBAAO9N,CAAP;AACH;AACJ;;AAED,iBAAO,CAAC,CAAR;AACH,SAhJiF,CAkJlF;;;AACA,iBAASmuD,aAAT,CAAuBnpD,IAAvB,EAA6B2I,KAA7B,EAAoC;AAChC,cAAIymC,GAAG,GAAG,EAAV;AACA,cAAI9yC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACAymC,aAAG,CAACtJ,OAAJ,GAAcxpC,CAAC,CAACi3C,WAAF,EAAd;AACAnE,aAAG,CAACga,aAAJ,GAAoB9sD,CAAC,CAACq3C,UAAF,EAApB;AACAvE,aAAG,CAACia,aAAJ,GAAoB/sD,CAAC,CAACi3C,WAAF,EAApB;AACAnE,aAAG,CAACka,YAAJ,GAAmBhtD,CAAC,CAACi3C,WAAF,EAAnB;AACAnE,aAAG,CAACma,MAAJ,GAAajtD,CAAC,CAACi3C,WAAF,EAAb;AACAnE,aAAG,CAACoa,eAAJ,GAAsBltD,CAAC,CAACq3C,UAAF,EAAtB;AACAvE,aAAG,CAACqa,eAAJ,GAAsBntD,CAAC,CAACq3C,UAAF,EAAtB;AACAvE,aAAG,CAACsa,iBAAJ,GAAwBptD,CAAC,CAACq3C,UAAF,EAAxB;AACAvE,aAAG,CAACua,iBAAJ,GAAwBrtD,CAAC,CAACq3C,UAAF,EAAxB;AACAvE,aAAG,CAACwa,iBAAJ,GAAwBttD,CAAC,CAACq3C,UAAF,EAAxB;AACAvE,aAAG,CAACya,iBAAJ,GAAwBvtD,CAAC,CAACq3C,UAAF,EAAxB;AACAvE,aAAG,CAAC0a,mBAAJ,GAA0BxtD,CAAC,CAACq3C,UAAF,EAA1B;AACAvE,aAAG,CAAC2a,mBAAJ,GAA0BztD,CAAC,CAACq3C,UAAF,EAA1B;AACAvE,aAAG,CAAC4a,cAAJ,GAAqB1tD,CAAC,CAACq3C,UAAF,EAArB;AACAvE,aAAG,CAAC6a,kBAAJ,GAAyB3tD,CAAC,CAACq3C,UAAF,EAAzB;AACAvE,aAAG,CAAC8a,YAAJ,GAAmB5tD,CAAC,CAACq3C,UAAF,EAAnB;AACAvE,aAAG,CAAC+a,MAAJ,GAAa,EAAb;;AACA,eAAK,IAAInvD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,EAApB,EAAwBA,CAAC,EAAzB,EAA6B;AACzBo0C,eAAG,CAAC+a,MAAJ,CAAWnvD,CAAX,IAAgBsB,CAAC,CAAC82C,SAAF,EAAhB;AACH;;AAEDhE,aAAG,CAACgb,eAAJ,GAAsB9tD,CAAC,CAACu3C,UAAF,EAAtB;AACAzE,aAAG,CAACib,eAAJ,GAAsB/tD,CAAC,CAACu3C,UAAF,EAAtB;AACAzE,aAAG,CAACkb,eAAJ,GAAsBhuD,CAAC,CAACu3C,UAAF,EAAtB;AACAzE,aAAG,CAACmb,eAAJ,GAAsBjuD,CAAC,CAACu3C,UAAF,EAAtB;AACAzE,aAAG,CAACob,SAAJ,GAAgB5kC,MAAM,CAACysB,YAAP,CAAoB/1C,CAAC,CAAC82C,SAAF,EAApB,EAAmC92C,CAAC,CAAC82C,SAAF,EAAnC,EAAkD92C,CAAC,CAAC82C,SAAF,EAAlD,EAAiE92C,CAAC,CAAC82C,SAAF,EAAjE,CAAhB;AACAhE,aAAG,CAACqb,WAAJ,GAAkBnuD,CAAC,CAACi3C,WAAF,EAAlB;AACAnE,aAAG,CAACsb,gBAAJ,GAAuBpuD,CAAC,CAACi3C,WAAF,EAAvB;AACAnE,aAAG,CAACub,eAAJ,GAAsBruD,CAAC,CAACi3C,WAAF,EAAtB;AACAnE,aAAG,CAACwb,aAAJ,GAAoBtuD,CAAC,CAACq3C,UAAF,EAApB;AACAvE,aAAG,CAACyb,cAAJ,GAAqBvuD,CAAC,CAACq3C,UAAF,EAArB;AACAvE,aAAG,CAAC0b,YAAJ,GAAmBxuD,CAAC,CAACq3C,UAAF,EAAnB;AACAvE,aAAG,CAAC2b,WAAJ,GAAkBzuD,CAAC,CAACi3C,WAAF,EAAlB;AACAnE,aAAG,CAAC4b,YAAJ,GAAmB1uD,CAAC,CAACi3C,WAAF,EAAnB;;AACA,cAAInE,GAAG,CAACtJ,OAAJ,IAAe,CAAnB,EAAsB;AAClBsJ,eAAG,CAAC6b,gBAAJ,GAAuB3uD,CAAC,CAACu3C,UAAF,EAAvB;AACAzE,eAAG,CAAC8b,gBAAJ,GAAuB5uD,CAAC,CAACu3C,UAAF,EAAvB;AACH;;AAED,cAAIzE,GAAG,CAACtJ,OAAJ,IAAe,CAAnB,EAAsB;AAClBsJ,eAAG,CAAC+b,QAAJ,GAAe7uD,CAAC,CAACq3C,UAAF,EAAf;AACAvE,eAAG,CAACgc,UAAJ,GAAiB9uD,CAAC,CAACq3C,UAAF,EAAjB;AACAvE,eAAG,CAACic,aAAJ,GAAoB/uD,CAAC,CAACi3C,WAAF,EAApB;AACAnE,eAAG,CAACkc,WAAJ,GAAkBhvD,CAAC,CAACi3C,WAAF,EAAlB;AACAnE,eAAG,CAACmc,YAAJ,GAAmBjvD,CAAC,CAACi3C,WAAF,EAAnB;AACH;;AAED,iBAAOnE,GAAP;AACH;;AAED,iBAASoc,YAAT,CAAsB/kD,OAAtB,EAA+B;AAC3B,iBAAO,IAAIovC,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC3B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,QAAxB;AAAkCkmB,iBAAK,EAAE;AAAzC,WAD2B,EAE3B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,OAA9B;AAAuCkmB,iBAAK,EAAE;AAA9C,WAF2B,EAG3B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,QAA9B;AAAwCkmB,iBAAK,EAAE;AAA/C,WAH2B,EAI3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,QAA7B;AAAuCkmB,iBAAK,EAAE;AAA9C,WAJ2B,EAK3B;AAACltB,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,QAAvB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAL2B,EAM3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WAN2B,EAO3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WAP2B,EAQ3B;AAACltB,gBAAI,EAAE,mBAAP;AAA4BgH,gBAAI,EAAE,OAAlC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAR2B,EAS3B;AAACltB,gBAAI,EAAE,mBAAP;AAA4BgH,gBAAI,EAAE,OAAlC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAT2B,EAU3B;AAACltB,gBAAI,EAAE,mBAAP;AAA4BgH,gBAAI,EAAE,OAAlC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAV2B,EAW3B;AAACltB,gBAAI,EAAE,mBAAP;AAA4BgH,gBAAI,EAAE,OAAlC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAX2B,EAY3B;AAACltB,gBAAI,EAAE,qBAAP;AAA8BgH,gBAAI,EAAE,OAApC;AAA6CkmB,iBAAK,EAAE;AAApD,WAZ2B,EAa3B;AAACltB,gBAAI,EAAE,qBAAP;AAA8BgH,gBAAI,EAAE,OAApC;AAA6CkmB,iBAAK,EAAE;AAApD,WAb2B,EAc3B;AAACltB,gBAAI,EAAE,gBAAP;AAAyBgH,gBAAI,EAAE,OAA/B;AAAwCkmB,iBAAK,EAAE;AAA/C,WAd2B,EAe3B;AAACltB,gBAAI,EAAE,oBAAP;AAA6BgH,gBAAI,EAAE,OAAnC;AAA4CkmB,iBAAK,EAAE;AAAnD,WAf2B,EAgB3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAhB2B,EAiB3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,MAA5B;AAAoCkmB,iBAAK,EAAE;AAA3C,WAjB2B,EAkB3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,MAA5B;AAAoCkmB,iBAAK,EAAE;AAA3C,WAlB2B,EAmB3B;AAACltB,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,MAAxB;AAAgCkmB,iBAAK,EAAE;AAAvC,WAnB2B,EAoB3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,MAA5B;AAAoCkmB,iBAAK,EAAE;AAA3C,WApB2B,EAqB3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,MAA1B;AAAkCkmB,iBAAK,EAAE;AAAzC,WArB2B,EAsB3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,MAAjC;AAAyCkmB,iBAAK,EAAE;AAAhD,WAtB2B,EAuB3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,MAA1B;AAAkCkmB,iBAAK,EAAE;AAAzC,WAvB2B,EAwB3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,MAA5B;AAAoCkmB,iBAAK,EAAE;AAA3C,WAxB2B,EAyB3B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,MAAzB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAzB2B,EA0B3B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,MAAzB;AAAiCkmB,iBAAK,EAAE;AAAxC,WA1B2B,EA2B3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WA3B2B,EA4B3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WA5B2B,EA6B3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WA7B2B,EA8B3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,OAAhC;AAAyCkmB,iBAAK,EAAE;AAAhD,WA9B2B,EA+B3B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,WAA1B;AAAuCkmB,iBAAK,EAAE;AAA9C,WA/B2B,EAgC3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,QAA5B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAhC2B,EAiC3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,QAAjC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAjC2B,EAkC3B;AAACltB,gBAAI,EAAE,iBAAP;AAA0BgH,gBAAI,EAAE,QAAhC;AAA0CkmB,iBAAK,EAAE;AAAjD,WAlC2B,EAmC3B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,OAA9B;AAAuCkmB,iBAAK,EAAE;AAA9C,WAnC2B,EAoC3B;AAACltB,gBAAI,EAAE,gBAAP;AAAyBgH,gBAAI,EAAE,OAA/B;AAAwCkmB,iBAAK,EAAE;AAA/C,WApC2B,EAqC3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WArC2B,EAsC3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,QAA5B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAtC2B,EAuC3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,QAA7B;AAAuCkmB,iBAAK,EAAE;AAA9C,WAvC2B,EAwC3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,OAAjC;AAA0CkmB,iBAAK,EAAE;AAAjD,WAxC2B,EAyC3B;AAACltB,gBAAI,EAAE,kBAAP;AAA2BgH,gBAAI,EAAE,OAAjC;AAA0CkmB,iBAAK,EAAE;AAAjD,WAzC2B,EA0C3B;AAACltB,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,OAAzB;AAAkCkmB,iBAAK,EAAE;AAAzC,WA1C2B,EA2C3B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,OAA3B;AAAoCkmB,iBAAK,EAAE;AAA3C,WA3C2B,EA4C3B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,QAA9B;AAAwCkmB,iBAAK,EAAE;AAA/C,WA5C2B,EA6C3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,QAA5B;AAAsCkmB,iBAAK,EAAE;AAA7C,WA7C2B,EA8C3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,QAA7B;AAAuCkmB,iBAAK,EAAE;AAA9C,WA9C2B,CAAxB,EA+CJtmB,OA/CI,CAAP;AAgDH;;AAEDmJ,eAAO,CAACq5C,aAAR,GAAwBA,aAAxB;AACAr5C,eAAO,CAACs5C,eAAR,GAA0BA,eAA1B;AACAt5C,eAAO,CAAC6+B,KAAR,GAAgB0a,aAAhB;AACAv5C,eAAO,CAAC4tC,IAAR,GAAegO,YAAf;AAEC,OAhQgD,EAgQ/C;AAAC,oBAAW,CAAZ;AAAc,oBAAW;AAAzB,OAhQ+C,CAxwH0vB;AAwgI3wB,UAAG,CAAC,UAASjxC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpE;AACA;AAEA;;AAEA,YAAI61B,QAAQ,GAAGlrB,OAAO,CAAC,aAAD,CAAtB;;AACA,YAAIk0B,KAAK,GAAGl0B,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB,CARoE,CAUpE;;;AACA,iBAASkxC,cAAT,CAAwBzrD,IAAxB,EAA8B2I,KAA9B,EAAqC;AACjC,cAAIk9B,IAAI,GAAG,EAAX;AACA,cAAIvpC,CAAC,GAAG,IAAImyC,KAAK,CAACyE,MAAV,CAAiBlzC,IAAjB,EAAuB2I,KAAvB,CAAR;AACA,cAAI3N,CAAJ;AACA6qC,cAAI,CAACC,OAAL,GAAexpC,CAAC,CAACg4C,YAAF,EAAf;AACAzO,cAAI,CAAC6lB,WAAL,GAAmBpvD,CAAC,CAACw3C,UAAF,EAAnB;AACAjO,cAAI,CAAC8lB,iBAAL,GAAyBrvD,CAAC,CAACq3C,UAAF,EAAzB;AACA9N,cAAI,CAAC+lB,kBAAL,GAA0BtvD,CAAC,CAACq3C,UAAF,EAA1B;AACA9N,cAAI,CAACgmB,YAAL,GAAoBvvD,CAAC,CAACu3C,UAAF,EAApB;AACAhO,cAAI,CAACimB,YAAL,GAAoBxvD,CAAC,CAACu3C,UAAF,EAApB;AACAhO,cAAI,CAACkmB,YAAL,GAAoBzvD,CAAC,CAACu3C,UAAF,EAApB;AACAhO,cAAI,CAACmmB,WAAL,GAAmB1vD,CAAC,CAACu3C,UAAF,EAAnB;AACAhO,cAAI,CAAComB,WAAL,GAAmB3vD,CAAC,CAACu3C,UAAF,EAAnB;;AACA,kBAAQhO,IAAI,CAACC,OAAb;AACA,iBAAK,CAAL;AACID,kBAAI,CAACE,KAAL,GAAaN,QAAQ,CAACR,aAAT,CAAuBr5B,KAAvB,EAAb;AACA;;AACJ,iBAAK,CAAL;AACIi6B,kBAAI,CAACG,cAAL,GAAsB1pC,CAAC,CAACi3C,WAAF,EAAtB;AACA1N,kBAAI,CAACI,cAAL,GAAsB,IAAIlrC,KAAJ,CAAU8qC,IAAI,CAACG,cAAf,CAAtB;;AACA,mBAAKhrC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6qC,IAAI,CAACG,cAArB,EAAqChrC,CAAC,EAAtC,EAA0C;AACtC6qC,oBAAI,CAACI,cAAL,CAAoBjrC,CAApB,IAAyBsB,CAAC,CAACi3C,WAAF,EAAzB;AACH;;AAED1N,kBAAI,CAACE,KAAL,GAAa,EAAb;;AACA,mBAAK/qC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6qC,IAAI,CAACG,cAArB,EAAqChrC,CAAC,EAAtC,EAA0C;AACtC,oBAAI6qC,IAAI,CAACI,cAAL,CAAoBjrC,CAApB,KAA0ByqC,QAAQ,CAACR,aAAT,CAAuB7pC,MAArD,EAA6D;AACzD,sBAAI8wD,UAAU,GAAG5vD,CAAC,CAAC+2C,SAAF,EAAjB;AACAxN,sBAAI,CAACE,KAAL,CAAWzqC,IAAX,CAAgBgB,CAAC,CAAC43C,WAAF,CAAcgY,UAAd,CAAhB;AACH;AACJ;;AAED;;AACJ,iBAAK,GAAL;AACIrmB,kBAAI,CAACG,cAAL,GAAsB1pC,CAAC,CAACi3C,WAAF,EAAtB;AACA1N,kBAAI,CAAC9hB,MAAL,GAAc,IAAIhpB,KAAJ,CAAU8qC,IAAI,CAACG,cAAf,CAAd;;AACA,mBAAKhrC,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG6qC,IAAI,CAACG,cAArB,EAAqChrC,CAAC,EAAtC,EAA0C;AACtC6qC,oBAAI,CAAC9hB,MAAL,CAAY/oB,CAAZ,IAAiBsB,CAAC,CAAC+2C,SAAF,EAAjB;AACH;;AAED;AA3BJ;;AA6BA,iBAAOxN,IAAP;AACH;;AAED,iBAASsmB,aAAT,GAAyB;AACrB,iBAAO,IAAItW,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC3B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,OAAxB;AAAiCkmB,iBAAK,EAAE;AAAxC,WAD2B,EAE3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,OAA5B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAF2B,EAG3B;AAACltB,gBAAI,EAAE,mBAAP;AAA4BgH,gBAAI,EAAE,OAAlC;AAA2CkmB,iBAAK,EAAE;AAAlD,WAH2B,EAI3B;AAACltB,gBAAI,EAAE,oBAAP;AAA6BgH,gBAAI,EAAE,OAAnC;AAA4CkmB,iBAAK,EAAE;AAAnD,WAJ2B,EAK3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAL2B,EAM3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAN2B,EAO3B;AAACltB,gBAAI,EAAE,cAAP;AAAuBgH,gBAAI,EAAE,OAA7B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAP2B,EAQ3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,OAA5B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAR2B,EAS3B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,OAA5B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAT2B,CAAxB,CAAP;AAWH;;AAEDnd,eAAO,CAAC6+B,KAAR,GAAgBgd,cAAhB;AACA77C,eAAO,CAAC4tC,IAAR,GAAe2O,aAAf;AAEC,OAzEkC,EAyEjC;AAAC,uBAAc,CAAf;AAAiB,oBAAW,CAA5B;AAA8B,oBAAW;AAAzC,OAzEiC,CAxgIwwB;AAilI3vB,UAAG,CAAC,UAAS5xC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AACpF;AACA;AACA;AACA;AACA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,UAAD,CAAnB;;AACA,YAAIs7B,KAAK,GAAGt7B,OAAO,CAAC,UAAD,CAAnB;;AAEA,YAAI+qB,IAAI,GAAG/qB,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAIm0B,GAAG,GAAGn0B,OAAO,CAAC,OAAD,CAAjB;;AACA,YAAIs0B,IAAI,GAAGt0B,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAIu0B,IAAI,GAAGv0B,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAIw0B,IAAI,GAAGx0B,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAI20B,IAAI,GAAG30B,OAAO,CAAC,QAAD,CAAlB;;AACA,YAAI40B,KAAK,GAAG50B,OAAO,CAAC,QAAD,CAAnB;;AACA,YAAI60B,GAAG,GAAG70B,OAAO,CAAC,OAAD,CAAjB;;AACA,YAAIsrB,IAAI,GAAGtrB,OAAO,CAAC,QAAD,CAAlB;;AAEA,iBAAS6xC,IAAT,CAAcvyD,CAAd,EAAiB;AACb,iBAAOF,IAAI,CAACM,GAAL,CAASJ,CAAT,IAAcF,IAAI,CAACM,GAAL,CAAS,CAAT,CAAd,GAA4B,CAAnC;AACH;;AAED,iBAASoyD,eAAT,CAAyBjiB,KAAzB,EAAgC;AAC5B,iBAAOA,KAAK,CAAChvC,MAAN,GAAe,CAAf,KAAqB,CAA5B,EAA+B;AAC3BgvC,iBAAK,CAAC9uC,IAAN,CAAW,CAAX;AACH;;AAED,cAAI63B,GAAG,GAAG,CAAV;;AACA,eAAK,IAAIn4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGovC,KAAK,CAAChvC,MAA1B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0C;AACtCm4B,eAAG,IAAI,CAACiX,KAAK,CAACpvC,CAAD,CAAL,IAAY,EAAb,KACFovC,KAAK,CAACpvC,CAAC,GAAG,CAAL,CAAL,IAAgB,EADd,KAEFovC,KAAK,CAACpvC,CAAC,GAAG,CAAL,CAAL,IAAgB,CAFd,IAGFovC,KAAK,CAACpvC,CAAC,GAAG,CAAL,CAHV;AAIH;;AAEDm4B,aAAG,IAAIx5B,IAAI,CAACuM,GAAL,CAAS,CAAT,EAAY,EAAZ,CAAP;AACA,iBAAOitB,GAAP;AACH;;AAED,iBAASm5B,eAAT,CAAyBvb,GAAzB,EAA8Bwb,QAA9B,EAAwCxoC,MAAxC,EAAgD3oB,MAAhD,EAAwD;AACpD,iBAAO,IAAIy6C,KAAK,CAACN,KAAV,CAAgB,cAAhB,EAAgC,CACnC;AAAC11C,gBAAI,EAAE,KAAP;AAAcgH,gBAAI,EAAE,KAApB;AAA2BkmB,iBAAK,EAAEgkB,GAAG,KAAKvhC,SAAR,GAAoBuhC,GAApB,GAA0B;AAA5D,WADmC,EAEnC;AAAClxC,gBAAI,EAAE,UAAP;AAAmBgH,gBAAI,EAAE,OAAzB;AAAkCkmB,iBAAK,EAAEw/B,QAAQ,KAAK/8C,SAAb,GAAyB+8C,QAAzB,GAAoC;AAA7E,WAFmC,EAGnC;AAAC1sD,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,OAAvB;AAAgCkmB,iBAAK,EAAEhJ,MAAM,KAAKvU,SAAX,GAAuBuU,MAAvB,GAAgC;AAAvE,WAHmC,EAInC;AAAClkB,gBAAI,EAAE,QAAP;AAAiBgH,gBAAI,EAAE,OAAvB;AAAgCkmB,iBAAK,EAAE3xB,MAAM,KAAKoU,SAAX,GAAuBpU,MAAvB,GAAgC;AAAvE,WAJmC,CAAhC,CAAP;AAMH;;AAED,iBAASoxD,aAAT,CAAuBlmB,MAAvB,EAA+B;AAC3B,cAAIM,IAAI,GAAG,IAAIiP,KAAK,CAACN,KAAV,CAAgB,MAAhB,EAAwB,CAC/B;AAAC11C,gBAAI,EAAE,SAAP;AAAkBgH,gBAAI,EAAE,KAAxB;AAA+BkmB,iBAAK,EAAE;AAAtC,WAD+B,EAE/B;AAACltB,gBAAI,EAAE,WAAP;AAAoBgH,gBAAI,EAAE,QAA1B;AAAoCkmB,iBAAK,EAAE;AAA3C,WAF+B,EAG/B;AAACltB,gBAAI,EAAE,aAAP;AAAsBgH,gBAAI,EAAE,QAA5B;AAAsCkmB,iBAAK,EAAE;AAA7C,WAH+B,EAI/B;AAACltB,gBAAI,EAAE,eAAP;AAAwBgH,gBAAI,EAAE,QAA9B;AAAwCkmB,iBAAK,EAAE;AAA/C,WAJ+B,EAK/B;AAACltB,gBAAI,EAAE,YAAP;AAAqBgH,gBAAI,EAAE,QAA3B;AAAqCkmB,iBAAK,EAAE;AAA5C,WAL+B,CAAxB,CAAX;AAOA6Z,cAAI,CAACN,MAAL,GAAcA,MAAd;AACAM,cAAI,CAACiK,SAAL,GAAiBvK,MAAM,CAAClrC,MAAxB;AACA,cAAIqxD,eAAe,GAAG9yD,IAAI,CAACuM,GAAL,CAAS,CAAT,EAAYkmD,IAAI,CAACxlB,IAAI,CAACiK,SAAN,CAAhB,CAAtB;AACAjK,cAAI,CAAC+X,WAAL,GAAmB,KAAK8N,eAAxB;AACA7lB,cAAI,CAACgY,aAAL,GAAqBwN,IAAI,CAACK,eAAD,CAAzB;AACA7lB,cAAI,CAACiY,UAAL,GAAkBjY,IAAI,CAACiK,SAAL,GAAiB,EAAjB,GAAsBjK,IAAI,CAAC+X,WAA7C;AAEA,cAAI+N,YAAY,GAAG,EAAnB;AACA,cAAIC,WAAW,GAAG,EAAlB;AAEA,cAAI5oC,MAAM,GAAG6iB,IAAI,CAAC0O,MAAL,KAAiBgX,eAAe,GAAGhX,MAAlB,KAA6B1O,IAAI,CAACiK,SAAhE;;AACA,iBAAO9sB,MAAM,GAAG,CAAT,KAAe,CAAtB,EAAyB;AACrBA,kBAAM,IAAI,CAAV;AACA4oC,uBAAW,CAACrxD,IAAZ,CAAiB;AAACuE,kBAAI,EAAE,SAAP;AAAkBgH,kBAAI,EAAE,MAAxB;AAAgCkmB,mBAAK,EAAE;AAAvC,aAAjB;AACH;;AAED,eAAK,IAAI/xB,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsrC,MAAM,CAAClrC,MAA3B,EAAmCJ,CAAC,IAAI,CAAxC,EAA2C;AACvC,gBAAI4M,CAAC,GAAG0+B,MAAM,CAACtrC,CAAD,CAAd;AACA40B,iBAAK,CAAC6U,QAAN,CAAe78B,CAAC,CAAC4tC,SAAF,CAAYp6C,MAAZ,KAAuB,CAAtC,EAAyC,eAAewM,CAAC,CAAC4tC,SAAjB,GAA6B,cAAtE;AACA,gBAAIoX,WAAW,GAAGhlD,CAAC,CAAC0tC,MAAF,EAAlB;AACA,gBAAIuX,WAAW,GAAGP,eAAe,CAAC1kD,CAAC,CAAC4tC,SAAH,EAAc6W,eAAe,CAACzkD,CAAC,CAACyiC,MAAF,EAAD,CAA7B,EAA2CtmB,MAA3C,EAAmD6oC,WAAnD,CAAjC;AACAF,wBAAY,CAACpxD,IAAb,CAAkB;AAACuE,kBAAI,EAAEgtD,WAAW,CAAC9b,GAAZ,GAAkB,eAAzB;AAA0ClqC,kBAAI,EAAE,OAAhD;AAAyDkmB,mBAAK,EAAE8/B;AAAhE,aAAlB;AACAF,uBAAW,CAACrxD,IAAZ,CAAiB;AAACuE,kBAAI,EAAE+H,CAAC,CAAC4tC,SAAF,GAAc,QAArB;AAA+B3uC,kBAAI,EAAE,OAArC;AAA8CkmB,mBAAK,EAAEnlB;AAArD,aAAjB;AACAmc,kBAAM,IAAI6oC,WAAV;AACAh9B,iBAAK,CAAC6U,QAAN,CAAe,CAAC7pC,KAAK,CAACmpB,MAAD,CAArB,EAA+B,8CAA/B;;AACA,mBAAOA,MAAM,GAAG,CAAT,KAAe,CAAtB,EAAyB;AACrBA,oBAAM,IAAI,CAAV;AACA4oC,yBAAW,CAACrxD,IAAZ,CAAiB;AAACuE,oBAAI,EAAE,SAAP;AAAkBgH,oBAAI,EAAE,MAAxB;AAAgCkmB,qBAAK,EAAE;AAAvC,eAAjB;AACH;AACJ,WArC0B,CAuC3B;;;AACA2/B,sBAAY,CAACr/C,IAAb,CAAkB,UAASy/C,EAAT,EAAaC,EAAb,EAAiB;AAC/B,gBAAID,EAAE,CAAC//B,KAAH,CAASgkB,GAAT,GAAegc,EAAE,CAAChgC,KAAH,CAASgkB,GAA5B,EAAiC;AAC7B,qBAAO,CAAP;AACH,aAFD,MAEO;AACH,qBAAO,CAAC,CAAR;AACH;AACJ,WAND;AAQAnK,cAAI,CAAC6O,MAAL,GAAc7O,IAAI,CAAC6O,MAAL,CAAYz7B,MAAZ,CAAmB0yC,YAAnB,CAAd;AACA9lB,cAAI,CAAC6O,MAAL,GAAc7O,IAAI,CAAC6O,MAAL,CAAYz7B,MAAZ,CAAmB2yC,WAAnB,CAAd;AACA,iBAAO/lB,IAAP;AACH,SAvGmF,CAyGpF;AACA;AACA;;;AACA,iBAASomB,cAAT,CAAwBrpB,IAAxB,EAA8BspB,KAA9B,EAAqCC,eAArC,EAAsD;AAClD,eAAK,IAAIlyD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiyD,KAAK,CAAC7xD,MAA1B,EAAkCJ,CAAC,IAAI,CAAvC,EAA0C;AACtC,gBAAIwrC,UAAU,GAAG7C,IAAI,CAACC,gBAAL,CAAsBqpB,KAAK,CAACjyD,CAAD,CAA3B,CAAjB;;AACA,gBAAIwrC,UAAU,GAAG,CAAjB,EAAoB;AAChB,kBAAI5Y,KAAK,GAAG+V,IAAI,CAAC/a,MAAL,CAAYrrB,GAAZ,CAAgBipC,UAAhB,CAAZ;AACA,qBAAO5Y,KAAK,CAACqf,UAAN,EAAP;AACH;AACJ;;AAED,iBAAOigB,eAAP;AACH;;AAED,iBAASC,OAAT,CAAiBC,EAAjB,EAAqB;AACjB,cAAIj6B,GAAG,GAAG,CAAV;;AACA,eAAK,IAAIn4B,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGoyD,EAAE,CAAChyD,MAAvB,EAA+BJ,CAAC,IAAI,CAApC,EAAuC;AACnCm4B,eAAG,IAAIi6B,EAAE,CAACpyD,CAAD,CAAT;AACH;;AAED,iBAAOm4B,GAAG,GAAGi6B,EAAE,CAAChyD,MAAhB;AACH,SA/HmF,CAiIpF;AACA;;;AACA,iBAASiyD,eAAT,CAAyB1pB,IAAzB,EAA+B;AAC3B,cAAI2pB,KAAK,GAAG,EAAZ;AACA,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,KAAK,GAAG,EAAZ;AACA,cAAIC,aAAa,GAAG,EAApB;AACA,cAAIC,gBAAgB,GAAG,EAAvB;AACA,cAAIC,iBAAiB,GAAG,EAAxB;AACA,cAAIC,cAAJ;AACA,cAAIC,aAAa,GAAG,CAApB;AACA,cAAI1D,eAAe,GAAG,CAAtB;AACA,cAAIC,eAAe,GAAG,CAAtB;AACA,cAAIC,eAAe,GAAG,CAAtB;AACA,cAAIC,eAAe,GAAG,CAAtB;;AAEA,eAAK,IAAIvvD,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2oC,IAAI,CAAC/a,MAAL,CAAYxtB,MAAhC,EAAwCJ,CAAC,IAAI,CAA7C,EAAgD;AAC5C,gBAAI4yB,KAAK,GAAG+V,IAAI,CAAC/a,MAAL,CAAYrrB,GAAZ,CAAgBvC,CAAhB,CAAZ;AACA,gBAAI6oC,OAAO,GAAGjW,KAAK,CAACiW,OAAN,GAAgB,CAA9B;;AACA,gBAAIgqB,cAAc,GAAGhqB,OAAjB,IAA4BgqB,cAAc,KAAK,IAAnD,EAAyD;AACrDA,4BAAc,GAAGhqB,OAAjB;AACH;;AAED,gBAAIiqB,aAAa,GAAGjqB,OAApB,EAA6B;AACzBiqB,2BAAa,GAAGjqB,OAAhB;AACH;;AAED,gBAAIjQ,QAAQ,GAAGwb,GAAG,CAAC8Z,eAAJ,CAAoBrlB,OAApB,CAAf;;AACA,gBAAIjQ,QAAQ,GAAG,EAAf,EAAmB;AACfw2B,6BAAe,IAAI,KAAKx2B,QAAxB;AACH,aAFD,MAEO,IAAIA,QAAQ,GAAG,EAAf,EAAmB;AACtBy2B,6BAAe,IAAI,KAAKz2B,QAAQ,GAAG,EAAnC;AACH,aAFM,MAEA,IAAIA,QAAQ,GAAG,EAAf,EAAmB;AACtB02B,6BAAe,IAAI,KAAK12B,QAAQ,GAAG,EAAnC;AACH,aAFM,MAEA,IAAIA,QAAQ,GAAG,GAAf,EAAoB;AACvB22B,6BAAe,IAAI,KAAK32B,QAAQ,GAAG,EAAnC;AACH,aAFM,MAEA;AACH,oBAAM,IAAI9O,KAAJ,CAAU,2DAAV,CAAN;AACH,aAtB2C,CAuB5C;;;AACA,gBAAI8I,KAAK,CAAC/tB,IAAN,KAAe,SAAnB,EAA8B;AAC9B,gBAAIutC,OAAO,GAAGxf,KAAK,CAACqf,UAAN,EAAd;AACAqgB,iBAAK,CAAChyD,IAAN,CAAW8xC,OAAO,CAACjB,IAAnB;AACAohB,iBAAK,CAACjyD,IAAN,CAAW8xC,OAAO,CAAChB,IAAnB;AACAohB,iBAAK,CAAClyD,IAAN,CAAW8xC,OAAO,CAACf,IAAnB;AACAohB,iBAAK,CAACnyD,IAAN,CAAW8xC,OAAO,CAACd,IAAnB;AACAqhB,4BAAgB,CAACryD,IAAjB,CAAsB8xC,OAAO,CAACC,eAA9B;AACAugB,6BAAiB,CAACtyD,IAAlB,CAAuB8xC,OAAO,CAACE,gBAA/B;AACAogB,yBAAa,CAACpyD,IAAd,CAAmBsyB,KAAK,CAACmb,YAAzB;AACH;;AAED,cAAIglB,OAAO,GAAG;AACV5hB,gBAAI,EAAExyC,IAAI,CAACqM,GAAL,CAAS6qB,KAAT,CAAe,IAAf,EAAqBy8B,KAArB,CADI;AAEVlhB,gBAAI,EAAEzyC,IAAI,CAACqM,GAAL,CAAS6qB,KAAT,CAAe,IAAf,EAAqB08B,KAArB,CAFI;AAGVlhB,gBAAI,EAAE1yC,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,IAAf,EAAqB28B,KAArB,CAHI;AAIVlhB,gBAAI,EAAE3yC,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,IAAf,EAAqB48B,KAArB,CAJI;AAKVjI,2BAAe,EAAE7rD,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,IAAf,EAAqB68B,aAArB,CALP;AAMVM,2BAAe,EAAEb,OAAO,CAACO,aAAD,CANd;AAOVjI,8BAAkB,EAAE9rD,IAAI,CAACqM,GAAL,CAAS6qB,KAAT,CAAe,IAAf,EAAqB88B,gBAArB,CAPV;AAQVM,8BAAkB,EAAEt0D,IAAI,CAACoM,GAAL,CAAS8qB,KAAT,CAAe,IAAf,EAAqB88B,gBAArB,CARV;AASVjI,+BAAmB,EAAE/rD,IAAI,CAACqM,GAAL,CAAS6qB,KAAT,CAAe,IAAf,EAAqB+8B,iBAArB;AATX,WAAd;AAWAG,iBAAO,CAACpmB,QAAR,GAAmBhE,IAAI,CAACgE,QAAL,KAAkBn4B,SAAlB,GAA8Bm0B,IAAI,CAACgE,QAAnC,GAA8ComB,OAAO,CAACzhB,IAAzE;AACAyhB,iBAAO,CAACnmB,SAAR,GAAoBjE,IAAI,CAACiE,SAAL,KAAmBp4B,SAAnB,GAA+Bm0B,IAAI,CAACiE,SAApC,GAAgDmmB,OAAO,CAAC3hB,IAA5E;AAEA,cAAI8hB,SAAS,GAAGrf,IAAI,CAAC2O,IAAL,CAAU;AACtB9V,sBAAU,EAAE/D,IAAI,CAAC+D,UADK;AAEtByE,gBAAI,EAAE4hB,OAAO,CAAC5hB,IAFQ;AAGtBC,gBAAI,EAAE2hB,OAAO,CAAC3hB,IAHQ;AAItBC,gBAAI,EAAE0hB,OAAO,CAAC1hB,IAJQ;AAKtBC,gBAAI,EAAEyhB,OAAO,CAACzhB;AALQ,WAAV,CAAhB;AAQA,cAAI6hB,SAAS,GAAGrf,IAAI,CAAC0O,IAAL,CAAU;AACtB7V,oBAAQ,EAAEomB,OAAO,CAACpmB,QADI;AAEtBC,qBAAS,EAAEmmB,OAAO,CAACnmB,SAFG;AAGtB4d,2BAAe,EAAEuI,OAAO,CAACvI,eAHH;AAItBC,8BAAkB,EAAEsI,OAAO,CAACtI,kBAJN;AAKtBC,+BAAmB,EAAEqI,OAAO,CAACrI,mBALP;AAMtBC,sBAAU,EAAEoI,OAAO,CAACE,kBAAR,IAA8BF,OAAO,CAAC1hB,IAAR,GAAe0hB,OAAO,CAAC5hB,IAArD,CANU;AAOtB8E,4BAAgB,EAAEtN,IAAI,CAAC/a,MAAL,CAAYxtB;AAPR,WAAV,CAAhB;AAUA,cAAIgzD,SAAS,GAAGlf,IAAI,CAACsO,IAAL,CAAU7Z,IAAI,CAAC/a,MAAL,CAAYxtB,MAAtB,CAAhB;AAEA,cAAIizD,QAAQ,GAAGjf,GAAG,CAACoO,IAAJ,CAAS;AACpB4L,yBAAa,EAAEzvD,IAAI,CAAC4jB,KAAL,CAAWwwC,OAAO,CAACC,eAAnB,CADK;AAEpB3E,yBAAa,EAAE,GAFK;AAEA;AACpBC,wBAAY,EAAE,CAHM;AAGH;AACjBoB,4BAAgB,EAAEmD,cAJE;AAKpBlD,2BAAe,EAAEmD,aALG;AAMpB1D,2BAAe,EAAEA,eANG;AAOpBC,2BAAe,EAAEA,eAPG;AAQpBC,2BAAe,EAAEA,eARG;AASpBC,2BAAe,EAAEA,eATG;AAUpB;AACA;AACA;AACA;AACAK,yBAAa,EAAEmD,OAAO,CAACpmB,QAdH;AAepBkjB,0BAAc,EAAEkD,OAAO,CAACnmB,SAfJ;AAgBpBkjB,wBAAY,EAAE,CAhBM;AAiBpBC,uBAAW,EAAEgD,OAAO,CAACpmB,QAjBD;AAkBpBqjB,wBAAY,EAAE,CAAC+C,OAAO,CAACnmB,SAlBH;AAmBpBujB,oBAAQ,EAAE6B,cAAc,CAACrpB,IAAD,EAAO,MAAP,EAAe;AAAC2I,kBAAI,EAAE;AAAP,aAAf,CAAd,CAAwCA,IAnB9B;AAoBpB8e,sBAAU,EAAE4B,cAAc,CAACrpB,IAAD,EAAO,2BAAP,EAAoCoqB,OAApC,CAAd,CAA2DzhB,IApBnD;AAqBpBgf,uBAAW,EAAE3nB,IAAI,CAACoE,OAAL,CAAa,GAAb,IAAoB,EAApB,GAAyB,CArBlB,CAqBoB;;AArBpB,WAAT,CAAf;AAwBA,cAAIumB,SAAS,GAAGvf,IAAI,CAACyO,IAAL,CAAU7Z,IAAI,CAAC/a,MAAf,CAAhB;AACA,cAAI2lC,SAAS,GAAGjpB,IAAI,CAACkY,IAAL,CAAU7Z,IAAI,CAAC/a,MAAf,CAAhB;AAEA,cAAIo0B,QAAQ,GAAGrZ,IAAI,CAACoD,UAAL,GAAkB,GAAlB,GAAwBpD,IAAI,CAACqD,SAA5C;AACA,cAAIoW,cAAc,GAAGzZ,IAAI,CAACoD,UAAL,CAAgBpqB,OAAhB,CAAwB,KAAxB,EAA+B,EAA/B,IAAqC,GAArC,GAA2CgnB,IAAI,CAACqD,SAArE;;AACA,cAAIwnB,SAAS,GAAGrf,KAAK,CAACqO,IAAN,CAAW;AACvBhW,qBAAS,EAAE7D,IAAI,CAAC6D,SADO;AAEvB2J,sBAAU,EAAExN,IAAI,CAACoD,UAFM;AAGvBqK,yBAAa,EAAEzN,IAAI,CAACqD,SAHG;AAIvBynB,oBAAQ,EAAE9qB,IAAI,CAACwD,YAAL,GAAoB,GAApB,GAA0B6V,QAJb;AAKvBA,oBAAQ,EAAEA,QALa;AAMvBlX,mBAAO,EAAEnC,IAAI,CAACmC,OANS;AAOvBsX,0BAAc,EAAEA,cAPO;AAQvB3V,qBAAS,EAAE9D,IAAI,CAAC8D,SARO;AASvBN,wBAAY,EAAExD,IAAI,CAACwD,YATI;AAUvBF,oBAAQ,EAAEtD,IAAI,CAACsD,QAVQ;AAWvBM,uBAAW,EAAE5D,IAAI,CAAC4D,WAXK;AAYvBH,2BAAe,EAAEzD,IAAI,CAACyD,eAZC;AAavBF,uBAAW,EAAEvD,IAAI,CAACuD,WAbK;AAcvBG,mBAAO,EAAE1D,IAAI,CAAC0D,OAdS;AAevBC,sBAAU,EAAE3D,IAAI,CAAC2D,UAfM;AAgBvBonB,2BAAe,EAAE/qB,IAAI,CAACoD,UAhBC;AAiBvB4nB,8BAAkB,EAAEhrB,IAAI,CAACqD;AAjBF,WAAX,CAAhB;;AAmBA,cAAI4nB,SAAS,GAAG/oB,IAAI,CAAC2X,IAAL,EAAhB;AACA,cAAIqR,QAAQ,GAAGngB,GAAG,CAAC8O,IAAJ,CAAS7Z,IAAI,CAAC/a,MAAd,EAAsB;AACjCkd,mBAAO,EAAEnC,IAAI,CAACmC,OADmB;AAEjCkX,oBAAQ,EAAEA,QAFuB;AAGjCjW,sBAAU,EAAEpD,IAAI,CAACoD,UAHgB;AAIjCkW,sBAAU,EAAEtZ,IAAI,CAACqD,SAJgB;AAKjCoW,0BAAc,EAAEA,cALiB;AAMjC1V,sBAAU,EAAE/D,IAAI,CAAC+D;AANgB,WAAtB,CAAf,CArI2B,CA6I3B;;AACA,cAAIpB,MAAM,GAAG,CAAC4nB,SAAD,EAAYC,SAAZ,EAAuBC,SAAvB,EAAkCC,QAAlC,EAA4CG,SAA5C,EAAuDD,SAAvD,EAAkEK,SAAlE,EAA6EC,QAA7E,EAAuFP,SAAvF,CAAb;AAEA,cAAInkB,SAAS,GAAGqiB,aAAa,CAAClmB,MAAD,CAA7B,CAhJ2B,CAkJ3B;;AACA,cAAI8D,KAAK,GAAGD,SAAS,CAACE,MAAV,EAAZ;AACA,cAAIkiB,QAAQ,GAAGF,eAAe,CAACjiB,KAAD,CAA9B;AACA,cAAIuiB,WAAW,GAAGxiB,SAAS,CAACsL,MAA5B;AACA,cAAIqZ,gBAAgB,GAAG,KAAvB;;AACA,eAAK9zD,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAG2xD,WAAW,CAACvxD,MAA5B,EAAoCJ,CAAC,IAAI,CAAzC,EAA4C;AACxC,gBAAI2xD,WAAW,CAAC3xD,CAAD,CAAX,CAAe6E,IAAf,KAAwB,YAA5B,EAA0C;AACtC8sD,yBAAW,CAAC3xD,CAAD,CAAX,CAAe+xB,KAAf,CAAqB+3B,kBAArB,GAA0C,aAAayH,QAAvD;AACAuC,8BAAgB,GAAG,IAAnB;AACA;AACH;AACJ;;AAED,cAAI,CAACA,gBAAL,EAAuB;AACnB,kBAAM,IAAIhqC,KAAJ,CAAU,oDAAV,CAAN;AACH;;AAED,iBAAOqlB,SAAP;AACH;;AAEDv6B,eAAO,CAACy8C,eAAR,GAA0BA,eAA1B;AACAz8C,eAAO,CAAC4tC,IAAR,GAAegP,aAAf;AACA58C,eAAO,CAACq6B,WAAR,GAAsBojB,eAAtB;AAEC,OA7SkD,EA6SjD;AAAC,oBAAW,CAAZ;AAAc,oBAAW,EAAzB;AAA4B,iBAAQ,EAApC;AAAuC,kBAAS,EAAhD;AAAmD,kBAAS,EAA5D;AAA+D,kBAAS,EAAxE;AAA2E,kBAAS,EAApF;AAAuF,kBAAS,EAAhG;AAAmG,kBAAS,EAA5G;AAA+G,iBAAQ,EAAvH;AAA0H,kBAAS;AAAnI,OA7SiD,CAjlIwvB;AA83IjqB,UAAG,CAAC,UAAS9yC,OAAT,EAAiB5K,MAAjB,EAAwBC,OAAxB,EAAgC;AAC9K;AACA;;AAEA;AAEA;;AAEA,YAAIggB,KAAK,GAAGrV,OAAO,CAAC,SAAD,CAAnB;;AAEA,YAAIw0C,OAAO,GAAG,KAAd,CAV8K,CAUzJ;;AACrB,YAAIC,OAAO,GAAG,UAAd,CAX8K,CAWpJ;;AAE1B,YAAIC,MAAM,GAAG,EAAb;AACA,YAAI5kB,MAAM,GAAG,EAAb;AACA,YAAIiL,MAAM,GAAG,EAAb,CAf8K,CAiB9K;;AACA,iBAAS4Z,QAAT,CAAkBr1D,CAAlB,EAAqB;AACjB,iBAAO,YAAW;AACd,mBAAOA,CAAP;AACH,WAFD;AAGH,SAtB6K,CAwB9K;AAEA;;;AACAwwC,cAAM,CAAC8kB,IAAP,GAAc,UAASt1D,CAAT,EAAY;AACtB+1B,eAAK,CAAC6U,QAAN,CAAe5qC,CAAC,IAAI,CAAL,IAAUA,CAAC,IAAI,GAA9B,EAAmC,yCAAnC;AACA,iBAAO,CAACA,CAAD,CAAP;AACH,SAHD;;AAKAy7C,cAAM,CAAC6Z,IAAP,GAAcD,QAAQ,CAAC,CAAD,CAAtB,CAhC8K,CAkC9K;;AACA7kB,cAAM,CAAC+kB,IAAP,GAAc,UAASv1D,CAAT,EAAY;AACtB,iBAAO,CAACA,CAAC,CAACsrC,UAAF,CAAa,CAAb,CAAD,CAAP;AACH,SAFD;;AAIAmQ,cAAM,CAAC8Z,IAAP,GAAcF,QAAQ,CAAC,CAAD,CAAtB,CAvC8K,CAyC9K;;AACA7kB,cAAM,CAACglB,SAAP,GAAmB,UAASx1D,CAAT,EAAY;AAC3B,cAAIO,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnB,CAAC,CAACuB,MAAtB,EAA8BJ,CAAC,IAAI,CAAnC,EAAsC;AAClCZ,aAAC,CAACkB,IAAF,CAAOzB,CAAC,CAACsrC,UAAF,CAAanqC,CAAb,CAAP;AACH;;AAED,iBAAOZ,CAAP;AACH,SAPD;;AASAk7C,cAAM,CAAC+Z,SAAP,GAAmB,UAASx1D,CAAT,EAAY;AAC3B,iBAAOA,CAAC,CAACuB,MAAT;AACH,SAFD,CAnD8K,CAuD9K;;;AACAivC,cAAM,CAACilB,MAAP,GAAgB,UAASz1D,CAAT,EAAY;AACxB,iBAAO,CAAEA,CAAC,IAAI,CAAN,GAAW,IAAZ,EAAkBA,CAAC,GAAG,IAAtB,CAAP;AACH,SAFD;;AAIAy7C,cAAM,CAACga,MAAP,GAAgBJ,QAAQ,CAAC,CAAD,CAAxB,CA5D8K,CA8D9K;;AACA7kB,cAAM,CAACklB,KAAP,GAAe,UAAS11D,CAAT,EAAY;AACvB;AACA,cAAIA,CAAC,IAAIk1D,OAAT,EAAkB;AACdl1D,aAAC,GAAG,EAAE,IAAIk1D,OAAJ,GAAcl1D,CAAhB,CAAJ;AACH;;AAED,iBAAO,CAAEA,CAAC,IAAI,CAAN,GAAW,IAAZ,EAAkBA,CAAC,GAAG,IAAtB,CAAP;AACH,SAPD;;AASAy7C,cAAM,CAACia,KAAP,GAAeL,QAAQ,CAAC,CAAD,CAAvB,CAxE8K,CA0E9K;;AACA7kB,cAAM,CAACmlB,MAAP,GAAgB,UAAS31D,CAAT,EAAY;AACxB,iBAAO,CAAEA,CAAC,IAAI,EAAN,GAAY,IAAb,EAAoBA,CAAC,IAAI,CAAN,GAAW,IAA9B,EAAoCA,CAAC,GAAG,IAAxC,CAAP;AACH,SAFD;;AAIAy7C,cAAM,CAACka,MAAP,GAAgBN,QAAQ,CAAC,CAAD,CAAxB,CA/E8K,CAiF9K;;AACA7kB,cAAM,CAAColB,KAAP,GAAe,UAAS51D,CAAT,EAAY;AACvB,iBAAO,CAAEA,CAAC,IAAI,EAAN,GAAY,IAAb,EAAoBA,CAAC,IAAI,EAAN,GAAY,IAA/B,EAAsCA,CAAC,IAAI,CAAN,GAAW,IAAhD,EAAsDA,CAAC,GAAG,IAA1D,CAAP;AACH,SAFD;;AAIAy7C,cAAM,CAACma,KAAP,GAAeP,QAAQ,CAAC,CAAD,CAAvB,CAtF8K,CAwF9K;;AACA7kB,cAAM,CAACqlB,IAAP,GAAc,UAAS71D,CAAT,EAAY;AACtB;AACA,cAAIA,CAAC,IAAIm1D,OAAT,EAAkB;AACdn1D,aAAC,GAAG,EAAE,IAAIm1D,OAAJ,GAAcn1D,CAAhB,CAAJ;AACH;;AAED,iBAAO,CAAEA,CAAC,IAAI,EAAN,GAAY,IAAb,EAAoBA,CAAC,IAAI,EAAN,GAAY,IAA/B,EAAsCA,CAAC,IAAI,CAAN,GAAW,IAAhD,EAAsDA,CAAC,GAAG,IAA1D,CAAP;AACH,SAPD;;AASAy7C,cAAM,CAACoa,IAAP,GAAcR,QAAQ,CAAC,CAAD,CAAtB;AAEA7kB,cAAM,CAACslB,KAAP,GAAetlB,MAAM,CAAColB,KAAtB;AACAna,cAAM,CAACqa,KAAP,GAAera,MAAM,CAACma,KAAtB;AAEAplB,cAAM,CAACulB,KAAP,GAAevlB,MAAM,CAACklB,KAAtB;AACAja,cAAM,CAACsa,KAAP,GAAeta,MAAM,CAACia,KAAtB;AAEAllB,cAAM,CAACwlB,MAAP,GAAgBxlB,MAAM,CAACilB,MAAvB;AACAha,cAAM,CAACua,MAAP,GAAgBva,MAAM,CAACga,MAAvB,CA3G8K,CA6G9K;;AACAjlB,cAAM,CAACylB,YAAP,GAAsB,YAAW;AAC7B,iBAAO,CAAC,CAAD,EAAI,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa,CAAb,EAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAAP;AACH,SAFD;;AAIAxa,cAAM,CAACwa,YAAP,GAAsBZ,QAAQ,CAAC,CAAD,CAA9B,CAlH8K,CAoH9K;;AACA7kB,cAAM,CAAC0lB,GAAP,GAAa,UAASl2D,CAAT,EAAY;AACrB+1B,eAAK,CAAC6U,QAAN,CAAe5qC,CAAC,CAACuB,MAAF,KAAa,CAA5B,EAA+B,2CAA/B;AACA,iBAAO,CAACvB,CAAC,CAACsrC,UAAF,CAAa,CAAb,CAAD,EACCtrC,CAAC,CAACsrC,UAAF,CAAa,CAAb,CADD,EAECtrC,CAAC,CAACsrC,UAAF,CAAa,CAAb,CAFD,EAGCtrC,CAAC,CAACsrC,UAAF,CAAa,CAAb,CAHD,CAAP;AAIH,SAND;;AAQAmQ,cAAM,CAACya,GAAP,GAAab,QAAQ,CAAC,CAAD,CAArB,CA7H8K,CA+H9K;;AAEA7kB,cAAM,CAAC2lB,KAAP,GAAe3lB,MAAM,CAAC8kB,IAAtB;AACA7Z,cAAM,CAAC0a,KAAP,GAAe1a,MAAM,CAAC6Z,IAAtB;AAEA9kB,cAAM,CAAC4lB,MAAP,GAAgB5lB,MAAM,CAACilB,MAAvB;AACAha,cAAM,CAAC2a,MAAP,GAAgB3a,MAAM,CAACga,MAAvB;AAEAjlB,cAAM,CAAC6lB,OAAP,GAAiB7lB,MAAM,CAAC8kB,IAAxB;AACA7Z,cAAM,CAAC4a,OAAP,GAAiB5a,MAAM,CAAC6Z,IAAxB;AAEA9kB,cAAM,CAAC8lB,GAAP,GAAa9lB,MAAM,CAACilB,MAApB;AACAha,cAAM,CAAC6a,GAAP,GAAa7a,MAAM,CAACga,MAApB,CA3I8K,CA6I9K;;AACAjlB,cAAM,CAAC+lB,MAAP,GAAgB,UAASv2D,CAAT,EAAY;AACxB,cAAIA,CAAC,IAAI,CAAC,GAAN,IAAaA,CAAC,IAAI,GAAtB,EAA2B;AACvB,mBAAO,CAACA,CAAC,GAAG,GAAL,CAAP;AACH,WAFD,MAEO,IAAIA,CAAC,IAAI,GAAL,IAAYA,CAAC,IAAI,IAArB,EAA2B;AAC9BA,aAAC,GAAGA,CAAC,GAAG,GAAR;AACA,mBAAO,CAAC,CAACA,CAAC,IAAI,CAAN,IAAW,GAAZ,EAAiBA,CAAC,GAAG,IAArB,CAAP;AACH,WAHM,MAGA,IAAIA,CAAC,IAAI,CAAC,IAAN,IAAcA,CAAC,IAAI,CAAC,GAAxB,EAA6B;AAChCA,aAAC,GAAG,CAACA,CAAD,GAAK,GAAT;AACA,mBAAO,CAAC,CAACA,CAAC,IAAI,CAAN,IAAW,GAAZ,EAAiBA,CAAC,GAAG,IAArB,CAAP;AACH,WAHM,MAGA,IAAIA,CAAC,IAAI,CAAC,KAAN,IAAeA,CAAC,IAAI,KAAxB,EAA+B;AAClC,mBAAOwwC,MAAM,CAACgmB,QAAP,CAAgBx2D,CAAhB,CAAP;AACH,WAFM,MAEA;AACH,mBAAOwwC,MAAM,CAACimB,QAAP,CAAgBz2D,CAAhB,CAAP;AACH;AACJ,SAdD;;AAgBAy7C,cAAM,CAAC8a,MAAP,GAAgB,UAASv2D,CAAT,EAAY;AACxB,iBAAOwwC,MAAM,CAAC+lB,MAAP,CAAcv2D,CAAd,EAAiBuB,MAAxB;AACH,SAFD,CA9J8K,CAkK9K;AACA;;;AACAivC,cAAM,CAACgmB,QAAP,GAAkB,UAASx2D,CAAT,EAAY;AAC1B,iBAAO,CAAC,EAAD,EAAMA,CAAC,IAAI,CAAN,GAAW,IAAhB,EAAsBA,CAAC,GAAG,IAA1B,CAAP;AACH,SAFD;;AAIAy7C,cAAM,CAAC+a,QAAP,GAAkBnB,QAAQ,CAAC,CAAD,CAA1B,CAxK8K,CA0K9K;AACA;AACA;;AACA7kB,cAAM,CAACimB,QAAP,GAAkB,UAASz2D,CAAT,EAAY;AAC1B,iBAAO,CAAC,EAAD,EAAMA,CAAC,IAAI,EAAN,GAAY,IAAjB,EAAwBA,CAAC,IAAI,EAAN,GAAY,IAAnC,EAA0CA,CAAC,IAAI,CAAN,GAAW,IAApD,EAA0DA,CAAC,GAAG,IAA9D,CAAP;AACH,SAFD;;AAIAy7C,cAAM,CAACgb,QAAP,GAAkBpB,QAAQ,CAAC,CAAD,CAA1B;;AAEA7kB,cAAM,CAACkmB,IAAP,GAAc,UAAS12D,CAAT,EAAY;AACtB,cAAIkzB,KAAK,GAAGlzB,CAAC,CAACsD,QAAF,EAAZ,CADsB,CAGtB;AACA;;AACA,cAAIy6C,CAAC,GAAG,gDAAgD4Y,IAAhD,CAAqDzjC,KAArD,CAAR;;AACA,cAAI6qB,CAAJ,EAAO;AACH,gBAAI6Y,OAAO,GAAGryC,UAAU,CAAC,QAAQ,CAACw5B,CAAC,CAAC,CAAD,CAAD,GAAO,CAACA,CAAC,CAAC,CAAD,CAAT,GAAe,CAAhB,IAAqBA,CAAC,CAAC,CAAD,CAAD,CAAKx8C,MAAlC,CAAD,CAAxB;AACA2xB,iBAAK,GAAG,CAACpzB,IAAI,CAAC4jB,KAAL,CAAW1jB,CAAC,GAAG42D,OAAf,IAA0BA,OAA3B,EAAoCtzD,QAApC,EAAR;AACH;;AAED,cAAIuzD,OAAO,GAAG,EAAd;AACA,cAAI11D,CAAJ;AACA,cAAI21D,EAAJ;;AACA,eAAK31D,CAAC,GAAG,CAAJ,EAAO21D,EAAE,GAAG5jC,KAAK,CAAC3xB,MAAvB,EAA+BJ,CAAC,GAAG21D,EAAnC,EAAuC31D,CAAC,IAAI,CAA5C,EAA+C;AAC3C,gBAAIjB,CAAC,GAAGgzB,KAAK,CAAC/xB,CAAD,CAAb;;AACA,gBAAIjB,CAAC,KAAK,GAAV,EAAe;AACX22D,qBAAO,IAAI3jC,KAAK,CAAC,EAAE/xB,CAAH,CAAL,KAAe,GAAf,GAAqB,GAArB,GAA2B,GAAtC;AACH,aAFD,MAEO,IAAIjB,CAAC,KAAK,GAAV,EAAe;AAClB22D,qBAAO,IAAI,GAAX;AACH,aAFM,MAEA,IAAI32D,CAAC,KAAK,GAAV,EAAe;AAClB22D,qBAAO,IAAI,GAAX;AACH,aAFM,MAEA;AACHA,qBAAO,IAAI32D,CAAX;AACH;AACJ;;AAED22D,iBAAO,IAAKA,OAAO,CAACt1D,MAAR,GAAiB,CAAlB,GAAuB,GAAvB,GAA6B,IAAxC;AACA,cAAIw7B,GAAG,GAAG,CAAC,EAAD,CAAV;;AACA,eAAK57B,CAAC,GAAG,CAAJ,EAAO21D,EAAE,GAAGD,OAAO,CAACt1D,MAAzB,EAAiCJ,CAAC,GAAG21D,EAArC,EAAyC31D,CAAC,IAAI,CAA9C,EAAiD;AAC7C47B,eAAG,CAACt7B,IAAJ,CAAS0sB,QAAQ,CAAC0oC,OAAO,CAACzoC,MAAR,CAAejtB,CAAf,EAAkB,CAAlB,CAAD,EAAuB,EAAvB,CAAjB;AACH;;AAED,iBAAO47B,GAAP;AACH,SAlCD;;AAoCA0e,cAAM,CAACib,IAAP,GAAc,UAAS12D,CAAT,EAAY;AACtB,iBAAOwwC,MAAM,CAACkmB,IAAP,CAAY12D,CAAZ,EAAeuB,MAAtB;AACH,SAFD;;AAIAivC,cAAM,CAACumB,IAAP,GAAcvmB,MAAM,CAACglB,SAArB;AACA/Z,cAAM,CAACsb,IAAP,GAActb,MAAM,CAAC+Z,SAArB;AAEAhlB,cAAM,CAACse,MAAP,GAAgBte,MAAM,CAACglB,SAAvB;AACA/Z,cAAM,CAACqT,MAAP,GAAgBrT,MAAM,CAAC+Z,SAAvB,CA/N8K,CAiO9K;;AACAhlB,cAAM,CAAC0e,KAAP,GAAe,UAASlvD,CAAT,EAAY;AACvB,cAAIO,CAAC,GAAG,EAAR;;AACA,eAAK,IAAIY,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGnB,CAAC,CAACuB,MAAtB,EAA8BJ,CAAC,IAAI,CAAnC,EAAsC;AAClC,gBAAIuvB,SAAS,GAAG1wB,CAAC,CAACsrC,UAAF,CAAanqC,CAAb,CAAhB;AACAZ,aAAC,CAACkB,IAAF,CAAQivB,SAAS,IAAI,CAAd,GAAmB,IAA1B;AACAnwB,aAAC,CAACkB,IAAF,CAAOivB,SAAS,GAAG,IAAnB;AACH;;AAED,iBAAOnwB,CAAP;AACH,SATD;;AAWAk7C,cAAM,CAACyT,KAAP,GAAe,UAASlvD,CAAT,EAAY;AACvB,iBAAOA,CAAC,CAACuB,MAAF,GAAW,CAAlB;AACH,SAFD,CA7O8K,CAiP9K;AACA;;;AACAivC,cAAM,CAACwmB,KAAP,GAAe,UAAS5jD,CAAT,EAAY;AACvB,cAAIjS,CAAJ,CADuB,CAEvB;AACA;AACA;AACA;AACA;;AACA,cAAI+oB,MAAM,GAAG,CAAb,CAPuB,CAOP;;AAChB,cAAIkwB,OAAO,GAAG,CAAClwB,MAAD,CAAd;AACA,cAAI/jB,IAAI,GAAG,EAAX;AACA,cAAI8wD,QAAQ,GAAG,CAAf;;AACA,eAAK91D,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGiS,CAAC,CAAC7R,MAAlB,EAA0BJ,CAAC,IAAI,CAA/B,EAAkC;AAC9B,gBAAInB,CAAC,GAAGwwC,MAAM,CAAC0mB,MAAP,CAAc9jD,CAAC,CAACjS,CAAD,CAAf,CAAR;AACAD,iBAAK,CAACmC,SAAN,CAAgB5B,IAAhB,CAAqBu1B,KAArB,CAA2B7wB,IAA3B,EAAiCnG,CAAjC;AACAi3D,oBAAQ,IAAIj3D,CAAC,CAACuB,MAAd;AACA2oB,kBAAM,IAAIlqB,CAAC,CAACuB,MAAZ;AACA64C,mBAAO,CAAC34C,IAAR,CAAayoB,MAAb;AACH;;AAED,cAAI/jB,IAAI,CAAC5E,MAAL,KAAgB,CAApB,EAAuB;AACnB,mBAAO,CAAC,CAAD,EAAI,CAAJ,CAAP;AACH;;AAED,cAAI41D,cAAc,GAAG,EAArB;AACA,cAAIxe,OAAO,GAAI,IAAI74C,IAAI,CAACW,KAAL,CAAWX,IAAI,CAACM,GAAL,CAAS62D,QAAT,IAAqBn3D,IAAI,CAACM,GAAL,CAAS,CAAT,CAAhC,IAA+C,CAApD,GAAyD,CAAvE;AACA,cAAIg3D,aAAa,GAAG,CAACzhD,SAAD,EAAY66B,MAAM,CAAC8kB,IAAnB,EAAyB9kB,MAAM,CAACilB,MAAhC,EAAwCjlB,MAAM,CAACmlB,MAA/C,EAAuDnlB,MAAM,CAAColB,KAA9D,EAAqEjd,OAArE,CAApB;;AACA,eAAKx3C,CAAC,GAAG,CAAT,EAAYA,CAAC,GAAGi5C,OAAO,CAAC74C,MAAxB,EAAgCJ,CAAC,IAAI,CAArC,EAAwC;AACpC,gBAAIk2D,aAAa,GAAGD,aAAa,CAAChd,OAAO,CAACj5C,CAAD,CAAR,CAAjC;AACAD,iBAAK,CAACmC,SAAN,CAAgB5B,IAAhB,CAAqBu1B,KAArB,CAA2BmgC,cAA3B,EAA2CE,aAA3C;AACH;;AAED,iBAAOn2D,KAAK,CAACmC,SAAN,CAAgB8c,MAAhB,CAAuBqwB,MAAM,CAAC4lB,MAAP,CAAchjD,CAAC,CAAC7R,MAAhB,CAAvB,EACgBivC,MAAM,CAAC6lB,OAAP,CAAe1d,OAAf,CADhB,EAEgBwe,cAFhB,EAGgBhxD,IAHhB,CAAP;AAIH,SAnCD;;AAqCAs1C,cAAM,CAACub,KAAP,GAAe,UAASh3D,CAAT,EAAY;AACvB,iBAAOwwC,MAAM,CAACwmB,KAAP,CAAah3D,CAAb,EAAgBuB,MAAvB;AACH,SAFD,CAxR8K,CA4R9K;AACA;AACA;;;AACAivC,cAAM,CAAC8mB,IAAP,GAAc,UAASvZ,CAAT,EAAY;AACtB,cAAIl6C,CAAC,GAAG,EAAR;AACA,cAAI+sB,IAAI,GAAGxtB,MAAM,CAACwtB,IAAP,CAAYmtB,CAAZ,CAAX;AACA,cAAIx8C,MAAM,GAAGqvB,IAAI,CAACrvB,MAAlB;;AAEA,eAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,MAApB,EAA4BJ,CAAC,IAAI,CAAjC,EAAoC;AAChC;AACA,gBAAIwB,CAAC,GAAGwrB,QAAQ,CAACyC,IAAI,CAACzvB,CAAD,CAAL,EAAU,CAAV,CAAhB;AACA,gBAAInB,CAAC,GAAG+9C,CAAC,CAACp7C,CAAD,CAAT,CAHgC,CAIhC;;AACAkB,aAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAAC+mB,OAAP,CAAev3D,CAAC,CAACkzB,KAAjB,EAAwBlzB,CAAC,CAACgN,IAA1B,CAAT,CAAJ;AACAnJ,aAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAACgnB,QAAP,CAAgB70D,CAAhB,CAAT,CAAJ;AACH;;AAED,iBAAOkB,CAAP;AACH,SAfD;;AAiBA43C,cAAM,CAAC6b,IAAP,GAAc,UAASvZ,CAAT,EAAY;AACtB,iBAAOvN,MAAM,CAAC8mB,IAAP,CAAYvZ,CAAZ,EAAex8C,MAAtB;AACH,SAFD;;AAIAivC,cAAM,CAACgnB,QAAP,GAAkB,UAASx3D,CAAT,EAAY;AAC1B,cAAIA,CAAC,GAAG,IAAR,EAAc;AACV,mBAAO,CAACA,CAAD,CAAP;AACH,WAFD,MAEO;AACH,mBAAO,CAAC,EAAD,EAAKA,CAAC,GAAG,IAAT,CAAP;AACH;AACJ,SAND;;AAQAwwC,cAAM,CAAC+mB,OAAP,GAAiB,UAASv3D,CAAT,EAAYgN,IAAZ,EAAkB;AAC/B,cAAInJ,CAAC,GAAG,EAAR;;AACA,cAAI3C,KAAK,CAACgzC,OAAN,CAAclnC,IAAd,CAAJ,EAAyB;AACrB,iBAAK,IAAI7L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6L,IAAI,CAACzL,MAAzB,EAAiCJ,CAAC,IAAI,CAAtC,EAAyC;AACrC40B,mBAAK,CAAC6U,QAAN,CAAe5qC,CAAC,CAACuB,MAAF,KAAayL,IAAI,CAACzL,MAAjC,EAAyC,wCAAwCyL,IAAjF;AACAnJ,eAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAAC+mB,OAAP,CAAev3D,CAAC,CAACmB,CAAD,CAAhB,EAAqB6L,IAAI,CAAC7L,CAAD,CAAzB,CAAT,CAAJ;AACH;AACJ,WALD,MAKO;AACH,gBAAI6L,IAAI,KAAK,KAAb,EAAoB;AAChBnJ,eAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAAC+lB,MAAP,CAAcv2D,CAAd,CAAT,CAAJ;AACH,aAFD,MAEO,IAAIgN,IAAI,KAAK,QAAb,EAAuB;AAC1B;AACA;AACAnJ,eAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAACimB,QAAP,CAAgBz2D,CAAhB,CAAT,CAAJ;AACH,aAJM,MAIA,IAAIgN,IAAI,KAAK,QAAb,EAAuB;AAC1BnJ,eAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAAC+lB,MAAP,CAAcv2D,CAAd,CAAT,CAAJ;AACH,aAFM,MAEA,IAAIgN,IAAI,KAAK,MAAb,EAAqB;AACxBnJ,eAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAACkmB,IAAP,CAAY12D,CAAZ,CAAT,CAAJ;AACH,aAFM,MAEA;AACH,oBAAM,IAAIirB,KAAJ,CAAU,0BAA0Bje,IAApC,CAAN,CADG,CAEH;AACH;AACJ;;AAED,iBAAOnJ,CAAP;AACH,SAzBD;;AA2BA2sC,cAAM,CAACinB,EAAP,GAAYjnB,MAAM,CAAC8kB,IAAnB;AACA7Z,cAAM,CAACgc,EAAP,GAAYhc,MAAM,CAAC6Z,IAAnB,CAxV8K,CA0V9K;;AACA,YAAIoC,GAAG,GAAG,OAAOC,OAAP,KAAmB,UAAnB,IAAiC,IAAIA,OAAJ,EAA3C,CA3V8K,CA4V9K;;AACAnnB,cAAM,CAAConB,UAAP,GAAoB,UAASrV,GAAT,EAAc;AAC9B,cAAImV,GAAG,IAAIA,GAAG,CAACG,GAAJ,CAAQtV,GAAR,CAAX,EAAyB;AACrB,mBAAOmV,GAAG,CAACh0D,GAAJ,CAAQ6+C,GAAR,CAAP;AACH;;AAED,cAAI1+C,CAAC,GAAG,EAAR;AACA,cAAItC,MAAM,GAAGghD,GAAG,CAAChhD,MAAjB;;AAEA,eAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,MAApB,EAA4BJ,CAAC,IAAI,CAAjC,EAAoC;AAChC,gBAAIq8C,EAAE,GAAG+E,GAAG,CAACphD,CAAD,CAAZ;AACA0C,aAAC,GAAGA,CAAC,CAACsc,MAAF,CAASqwB,MAAM,CAACgN,EAAE,CAACxwC,IAAJ,CAAN,CAAgBwwC,EAAE,CAACtqB,KAAnB,CAAT,CAAJ;AACH;;AAED,cAAIwkC,GAAJ,EAAS;AACLA,eAAG,CAAC3zD,GAAJ,CAAQw+C,GAAR,EAAa1+C,CAAb;AACH;;AAED,iBAAOA,CAAP;AACH,SAlBD;;AAoBA43C,cAAM,CAACmc,UAAP,GAAoB,UAASrV,GAAT,EAAc;AAC9B,iBAAO/R,MAAM,CAAConB,UAAP,CAAkBrV,GAAlB,EAAuBhhD,MAA9B;AACH,SAFD,CAjX8K,CAqX9K;AAEA;;;AACAivC,cAAM,CAAC0mB,MAAP,GAAgB,UAASl3D,CAAT,EAAY;AACxB,cAAI83D,gBAAgB,GAAGtnB,MAAM,CAACxwC,CAAC,CAACgN,IAAH,CAA7B;AACA+oB,eAAK,CAAC6U,QAAN,CAAektB,gBAAgB,KAAKniD,SAApC,EAA+C,mCAAmC3V,CAAC,CAACgN,IAApF;AACA,iBAAO8qD,gBAAgB,CAAC93D,CAAC,CAACkzB,KAAH,CAAvB;AACH,SAJD;;AAMAuoB,cAAM,CAACyb,MAAP,GAAgB,UAASl3D,CAAT,EAAY;AACxB,cAAI87C,cAAc,GAAGL,MAAM,CAACz7C,CAAC,CAACgN,IAAH,CAA3B;AACA+oB,eAAK,CAAC6U,QAAN,CAAekR,cAAc,KAAKnmC,SAAlC,EAA6C,iCAAiC3V,CAAC,CAACgN,IAAhF;AACA,iBAAO8uC,cAAc,CAAC97C,CAAC,CAACkzB,KAAH,CAArB;AACH,SAJD,CA9X8K,CAoY9K;AACA;AACA;;;AACAsd,cAAM,CAACuL,KAAP,GAAe,UAASC,KAAT,EAAgB;AAC3B,cAAIn4C,CAAC,GAAG,EAAR;AACA,cAAItC,MAAM,GAAGy6C,KAAK,CAACJ,MAAN,CAAar6C,MAA1B;;AAEA,eAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,MAApB,EAA4BJ,CAAC,IAAI,CAAjC,EAAoC;AAChC,gBAAIqsB,KAAK,GAAGwuB,KAAK,CAACJ,MAAN,CAAaz6C,CAAb,CAAZ;AACA,gBAAI22D,gBAAgB,GAAGtnB,MAAM,CAAChjB,KAAK,CAACxgB,IAAP,CAA7B;AACA+oB,iBAAK,CAAC6U,QAAN,CAAektB,gBAAgB,KAAKniD,SAApC,EAA+C,yCAAyC6X,KAAK,CAACxgB,IAA9F;AACA,gBAAIkmB,KAAK,GAAG8oB,KAAK,CAACxuB,KAAK,CAACxnB,IAAP,CAAjB;;AACA,gBAAIktB,KAAK,KAAKvd,SAAd,EAAyB;AACrBud,mBAAK,GAAG1F,KAAK,CAAC0F,KAAd;AACH;;AAED,gBAAIqd,KAAK,GAAGunB,gBAAgB,CAAC5kC,KAAD,CAA5B;AACArvB,aAAC,GAAGA,CAAC,CAACsc,MAAF,CAASowB,KAAT,CAAJ;AACH;;AAED,iBAAO1sC,CAAP;AACH,SAlBD;;AAoBA43C,cAAM,CAACM,KAAP,GAAe,UAASC,KAAT,EAAgB;AAC3B,cAAI+b,QAAQ,GAAG,CAAf;AACA,cAAIx2D,MAAM,GAAGy6C,KAAK,CAACJ,MAAN,CAAar6C,MAA1B;;AAEA,eAAK,IAAIJ,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGI,MAApB,EAA4BJ,CAAC,IAAI,CAAjC,EAAoC;AAChC,gBAAIqsB,KAAK,GAAGwuB,KAAK,CAACJ,MAAN,CAAaz6C,CAAb,CAAZ;AACA,gBAAI26C,cAAc,GAAGL,MAAM,CAACjuB,KAAK,CAACxgB,IAAP,CAA3B;AACA+oB,iBAAK,CAAC6U,QAAN,CAAekR,cAAc,KAAKnmC,SAAlC,EAA6C,uCAAuC6X,KAAK,CAACxgB,IAA1F;AACA,gBAAIkmB,KAAK,GAAG8oB,KAAK,CAACxuB,KAAK,CAACxnB,IAAP,CAAjB;;AACA,gBAAIktB,KAAK,KAAKvd,SAAd,EAAyB;AACrBud,mBAAK,GAAG1F,KAAK,CAAC0F,KAAd;AACH;;AAED6kC,oBAAQ,IAAIjc,cAAc,CAAC5oB,KAAD,CAA1B;AACH;;AAED,iBAAO6kC,QAAP;AACH,SAjBD,CA3Z8K,CA8a9K;;;AACAvnB,cAAM,CAACwnB,OAAP,GAAiB,UAASh4D,CAAT,EAAY;AACzB,iBAAOA,CAAP;AACH,SAFD;;AAIAy7C,cAAM,CAACuc,OAAP,GAAiB,UAASh4D,CAAT,EAAY;AACzB,iBAAOA,CAAC,CAACuB,MAAT;AACH,SAFD;;AAIAwU,eAAO,CAACq/C,MAAR,GAAiBA,MAAjB;AACAr/C,eAAO,CAACy6B,MAAR,GAAiBA,MAAjB;AACAz6B,eAAO,CAAC0lC,MAAR,GAAiBA,MAAjB;AAEC,OA3b4I,EA2b3I;AAAC,mBAAU;AAAX,OA3b2I;AA93I8pB,KAA3b,EAyzJ9V,EAzzJ8V,EAyzJ3V,CAAC,CAAD,CAzzJ2V,EAyzJtV,CAzzJsV,CAAP;AA0zJxW,GA1zJD;;;;;;;;;;;;ACAA,IAAIta,aAAJ;AAAkBrrB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACib,eAAa,EAAC,UAASnhC,CAAT,EAAW;AAACmhC,iBAAa,GAACnhC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAIkiC,aAAJ;AAAkBpsB,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACgc,eAAa,EAAC,UAASliC,CAAT,EAAW;AAACkiC,iBAAa,GAACliC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAI2lC,YAAJ;AAAiB7vB,MAAM,CAACoQ,IAAP,CAAY,qBAAZ,EAAkC;AAACyf,cAAY,EAAC,UAAS3lC,CAAT,EAAW;AAAC2lC,gBAAY,GAAC3lC,CAAb;AAAe;AAAzC,CAAlC,EAA6E,CAA7E;AAAgF,IAAIqmC,UAAJ;AAAevwB,MAAM,CAACoQ,IAAP,CAAY,mBAAZ,EAAgC;AAACmgB,YAAU,EAAC,UAASrmC,CAAT,EAAW;AAACqmC,cAAU,GAACrmC,CAAX;AAAa;AAArC,CAAhC,EAAuE,CAAvE;AAA0E,IAAIwpC,SAAJ;AAAc1zB,MAAM,CAACoQ,IAAP,CAAY,kBAAZ,EAA+B;AAACsjB,WAAS,EAAC,UAASxpC,CAAT,EAAW;AAACwpC,aAAS,GAACxpC,CAAV;AAAY;AAAnC,CAA/B,EAAoE,CAApE;AAAuE,IAAIiqC,YAAJ;AAAiBn0B,MAAM,CAACoQ,IAAP,CAAY,qBAAZ,EAAkC;AAAC+jB,cAAY,EAAC,UAASjqC,CAAT,EAAW;AAACiqC,gBAAY,GAACjqC,CAAb;AAAe;AAAzC,CAAlC,EAA6E,CAA7E;AAAgF,IAAIuqC,aAAJ;AAAkBz0B,MAAM,CAACoQ,IAAP,CAAY,sBAAZ,EAAmC;AAACqkB,eAAa,EAAC,UAASvqC,CAAT,EAAW;AAACuqC,iBAAa,GAACvqC,CAAd;AAAgB;AAA3C,CAAnC,EAAgF,CAAhF;AAAmF,IAAIyqB,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAA0D,IAAI4sB,MAAJ;AAAW9W,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAAC0G,QAAM,EAAC,UAAS5sB,CAAT,EAAW;AAAC4sB,UAAM,GAAC5sB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAU/uBqhC,OAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4B4R,SAA5B;AAEA,IAAMme,MAAM,GAAG;AACbmP,UAAQ,EAAEf,aADG;AAEbzd,SAAO,EAAEkhB,YAFI;AAGbqC,OAAK,EAAE3B,UAHM;AAIbhhB,MAAI,EAAEmkB,SAJO;AAKbxnB,SAAO,EAAEioB,YALI;AAMbhW,UAAQ,EAAEsW;AANG,CAAf;AAQA,IAAM0tB,KAAK,GAAG,CAAC,MAAD,EAAS,SAAT,EAAoB,SAApB,EAA+B,UAA/B,EAA2C,OAA3C,EAAoD,UAApD,CAAd;AACA,IAAIC,UAAU,GAAGviD,SAAjB;AACA,IAAIwiD,SAAS,GAAGxiD,SAAhB;AACA,IAAIwsB,KAAK,GAAG,IAAIhB,aAAJ,EAAZ;;AAEA,IAAMi3B,WAAW,GAAG,UAAC7pD,MAAD,EAASq8B,QAAT,EAAsB;AACxCA,UAAQ,GAAGA,QAAQ,IAAIvJ,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAvB;AACA2nB,QAAM,CAAC9nB,IAAP,CAAYgL,MAAZ,EAAoBq8B,QAApB,EAA8B,UAAS5f,KAAT,EAAgB7kB,IAAhB,EAAsB;AAClDskB,UAAM,CAAC,CAACO,KAAF,EAASA,KAAT,CAAN;AACAqW,WAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4BoC,IAA5B;AACAo+B,UAAM,CAACsN,QAAP,CAAgBwmB,IAAhB,GAAuBC,kBAAkB,CAACnyD,IAAI,CAAC4b,SAAN,CAAzC;AACD,GAJD;AAKD,CAPD;;AASA,IAAMw2C,qBAAqB,GAAG,UAACvrD,IAAD,EAAU;AACtC5J,QAAM,CAACwtB,IAAP,CAAYyQ,OAAO,CAACzQ,IAApB,EAA0B3O,MAA1B,CAAiC,UAACte,CAAD;AAAA,WAAOA,CAAC,CAAC60D,UAAF,aAAuBxrD,IAAvB,OAAP;AAAA,GAAjC,EAC0BoV,GAD1B,CAC8B,UAACze,CAAD;AAAA,WAAO09B,OAAO,CAACt9B,GAAR,CAAYJ,CAAZ,EAAegS,SAAf,CAAP;AAAA,GAD9B;AAED,CAHD;;AAKA,IAAM8iD,cAAc,GAAG,UAACzrD,IAAD,EAAU;AAC/B,MAAM+mB,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,MAAMuvB,OAAO,GAAGc,KAAK,CAACD,MAAN,CAAa9mB,IAAb,CAAhB;;AACA,MAAI,CAACimB,OAAD,IAAYA,OAAO,CAACgD,QAAxB,EAAkC;AAChClC,SAAK,CAACD,MAAN,CAAa9mB,IAAb,IAAqB,IAArB;AACD;;AACDurD,uBAAqB,CAACp2B,KAAK,CAACn1B,IAAP,CAArB;AACAm1B,OAAK,GAAG,IAAIrO,MAAM,CAAC9mB,IAAD,CAAV,CAAiB+mB,KAAjB,CAAR;AACAtJ,QAAM,CAAC0X,KAAK,CAACn1B,IAAN,KAAeA,IAAhB,CAAN;AACAm1B,OAAK,CAACM,YAAN,GAAqBA,YAArB;AACAN,OAAK,CAACM,YAAN,CAAmB;AAAK;AAAxB;AACD,CAXD;;AAaA,IAAMA,YAAY,GAAG,UAACi2B,oBAAD,EAA0B;AAC7C,MAAM3kC,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACAy+B,OAAK,CAACL,SAAN,CAAgB/N,KAAK,CAAChS,SAAtB,EAAiCgS,KAAK,CAACF,QAAvC;AACA,MAAI8kC,MAAM,GAAGx2B,KAAK,CAACV,cAAN,EAAb;AACA,MAAMxO,OAAO,GAAGc,KAAK,CAACD,MAAN,CAAaqO,KAAK,CAACn1B,IAAnB,CAAhB;;AACA,MAAI0rD,oBAAoB,KAAK,CAACzlC,OAAD,IAAYA,OAAO,CAACgD,QAAzB,CAAxB,EAA4D;AAC1D0iC,UAAM,GAAG;AAAC1iC,cAAQ,EAAE;AAAX,KAAT;AACD;;AACD,MAAI,CAAC1F,CAAC,CAACqoC,OAAF,CAAUD,MAAV,EAAkB1lC,OAAlB,CAAL,EAAiC;AAC/Bc,SAAK,CAACD,MAAN,CAAaqO,KAAK,CAACn1B,IAAnB,IAA2B2rD,MAA3B;;AACA,QAAI,CAACA,MAAD,IAAW,CAAC1lC,OAAZ,IAAuBkP,KAAK,CAACb,gBAAN,CAAuBq3B,MAAvB,EAA+B1lC,OAA/B,CAA3B,EAAoE;AAClE,WAAK,IAAI9xB,CAAC,GAAG82D,KAAK,CAACnwC,OAAN,CAAcqa,KAAK,CAACn1B,IAApB,IAA4B,CAAzC,EAA4C7L,CAAC,GAAG82D,KAAK,CAAC12D,MAAtD,EAA8DJ,CAAC,EAA/D,EAAmE;AACjE4yB,aAAK,CAACD,MAAN,CAAamkC,KAAK,CAAC92D,CAAD,CAAlB,IAAyB,IAAzB;AACD;AACF;;AACDkgC,WAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4BgwB,KAA5B;AACD;AACF,CAjBD;;AAmBA,IAAM8kC,cAAc,GAAG,UAAChe,MAAD,EAAY;AACjC,MAAMvlC,KAAK,GAAG2iD,KAAK,CAACnwC,OAAN,CAAcqa,KAAK,CAACn1B,IAApB,CAAd;AACA,MAAIsI,KAAK,GAAG,CAAZ,EAAe;AACf,MAAMizB,SAAS,GAAGjzB,KAAK,GAAGulC,MAA1B;AACA,MAAItS,SAAS,GAAG,CAAZ,IAAiBA,SAAS,IAAI0vB,KAAK,CAAC12D,MAAxC,EAAgD;;AAChD,MAAIs5C,MAAM,GAAG,CAAb,EAAgB;AACd,QAAI;AACF1Y,WAAK,CAACJ,QAAN;AACD,KAFD,CAEE,OAAOh8B,CAAP,EAAU;AACV;AACA;AACA;AACA;AACA,UAAM3F,GAAG,GAAGihC,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAZ;AACA,UAAMo1D,MAAM,GAAG,yBAAf;;AACA,UAAI14D,GAAG,CAACmB,MAAJ,GAAa,CAAb,IAAkBnB,GAAG,CAAC,CAAD,CAAH,CAAO2qB,OAAP,CAAeytC,UAAf,CAA0BM,MAA1B,CAAtB,EAAyD;AACvDV,mBAAW,CAAC,UAAD,EAAah4D,GAAG,CAAC,CAAD,CAAH,CAAO2qB,OAAP,CAAe+tC,MAAM,CAACv3D,MAAtB,CAAb,CAAX;AACD;;AACD;AACD;;AACD4gC,SAAK,CAACM,YAAN;AACD;;AACDg2B,gBAAc,CAACR,KAAK,CAAC1vB,SAAD,CAAN,CAAd;AACD,CAvBD;;AAyBA,IAAMwwB,aAAa,GAAG,YAAM;AAC1B,MAAMh3C,SAAS,GAAGi3C,kBAAkB,CAACz0B,MAAM,CAACsN,QAAP,CAAgBwmB,IAAhB,CAAqBtmD,KAArB,CAA2B,CAA3B,CAAD,CAApC;AACA,MAAMgiB,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;;AACA,MAAI,CAACqe,SAAL,EAAgB;AACdq2C,eAAW,CAAC,cAAD,CAAX;AACD,GAFD,MAEO,IAAI,CAACrkC,KAAD,IAAUA,KAAK,CAAChS,SAAN,KAAoBA,SAAlC,EAA6C;AAClDq2C,eAAW,CAAC,UAAD,EAAar2C,SAAb,CAAX;AACD;AACF,CARD;;AAUA,IAAMk3C,UAAU,GAAG,YAAM;AACvB,MAAMllC,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACAqwB,OAAK,CAACD,MAAN,CAAaqO,KAAK,CAACn1B,IAAnB,IAA2B,IAA3B;AACAq0B,SAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4BgwB,KAA5B;AACA0kC,gBAAc,CAACt2B,KAAK,CAACn1B,IAAP,CAAd;AACD,CALD;;AAOA,IAAMksD,QAAQ,GAAG;AACf54D,GAAC,EAAE;AAAA,WAAM83D,WAAW,CAAC,kBAAD,CAAjB;AAAA,GADY;AAEf1wD,GAAC,EAAE;AAAA,WAAM0wD,WAAW,CAAC,4BAAD,CAAjB;AAAA,GAFY;AAGf/1D,GAAC,EAAE;AAAA,WAAM+1D,WAAW,CAAC,0BAAD,CAAjB;AAAA,GAHY;AAIfv0D,GAAC,EAAE;AAAA,WAAMu0D,WAAW,CAAC,cAAD,CAAjB;AAAA,GAJY;AAKfe,GAAC,EAAE;AAAA,WAAMf,WAAW,CAAC,wBAAD,CAAjB;AAAA,GALY;AAMfryD,GAAC,EAAE;AAAA,WAAMqyD,WAAW,CAAC,sBAAD,CAAjB;AAAA,GANY;AAOfn4D,GAAC,EAAEg5D,UAPY;AAQfl6B,GAAC,EAAE;AAAA,WAAM85B,cAAc,CAAC,CAAD,CAApB;AAAA,GARY;AASfl3D,GAAC,EAAE;AAAA,WAAMk3D,cAAc,CAAC,CAAC,CAAF,CAApB;AAAA;AATY,CAAjB,C,CAYA;;AACAz0B,QAAQ,CAACg1B,MAAT,CAAgB90B,MAAhB,CAAuB;AACrB,2BAAyB,UAAS1C,KAAT,EAAgB;AACvCO,SAAK,CAACR,WAAN,CAAkBC,KAAlB,EAAyB,IAAzB;AACAO,SAAK,CAACM,YAAN;AACD;AAJoB,CAAvB;AAOA2B,QAAQ,CAACg1B,MAAT,CAAgBx0B,OAAhB,CAAwB;AACtB7a,OAAK,EAAE;AAAA,WAAMsX,OAAO,CAAC39B,GAAR,CAAY,aAAZ,CAAN;AAAA,GADe;AAEtBiqB,OAAK,EAAE;AAAA,WAAM0T,OAAO,CAAC39B,GAAR,CAAY,aAAZ,CAAN;AAAA,GAFe;AAGtBiR,QAAM,EAAE;AAAA,WAAM0sB,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAN;AAAA,GAHc;AAItBsmB,YAAU,EAAE;AAAA,WAAMqX,OAAO,CAAC39B,GAAR,CAAY,kBAAZ,CAAN;AAAA;AAJU,CAAxB;AAOA0gC,QAAQ,CAAC8R,MAAT,CAAgBtR,OAAhB,CAAwB;AACtBzC,OAAK,EAAE;AAAA,WAAMd,OAAO,CAAC39B,GAAR,CAAY,YAAZ,CAAN;AAAA,GADe;AAEtBm+B,UAAQ,EAAE;AAAA,WAASR,OAAO,CAAC39B,GAAR,CAAY,YAAZ,CAAT;AAAA,GAFY;AAGtBiqB,OAAK,EAAE;AAAA,WAAM0T,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAN;AAAA;AAHe,CAAxB;AAMA8hC,OAAO,CAACC,OAAR,CAAgB,YAAM;AACpB,MAAM1R,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,MAAMiB,IAAI,GAAGujC,IAAI,CAACC,SAAL,CAAepU,KAAf,CAAb;;AACA,MAAI,CAACA,KAAD,IAAUpvB,IAAI,KAAKwzD,SAAvB,EAAkC;AAChC;AACD,GAFD,MAEO,IAAI,CAACD,UAAD,IAAenkC,KAAK,CAAChS,SAAN,KAAoBm2C,UAAU,CAACn2C,SAAlD,EAA6D;AAClE,QAAIs3C,oBAAoB,GAAGpB,KAAK,CAAC,CAAD,CAAhC;AACAA,SAAK,CAAC71C,GAAN,CAAU,UAACze,CAAD,EAAO;AAAE,UAAIowB,KAAK,CAACD,MAAN,CAAanwB,CAAb,CAAJ,EAAqB01D,oBAAoB,GAAG11D,CAAvB;AAA2B,KAAnE;AACA80D,kBAAc,CAACY,oBAAD,CAAd;AACD,GAJM,MAIA;AACLhuC,UAAM,CAAC9nB,IAAP,CAAY,WAAZ,EAAyBwwB,KAAzB,EACY,UAAC/I,KAAD,EAAQ7kB,IAAR,EAAiB;AAAE,UAAI6kB,KAAJ,EAAWlf,OAAO,CAACkf,KAAR,CAAcA,KAAd;AAAsB,KADhE;;AAEA,QAAI,CAACuF,CAAC,CAACqoC,OAAF,CAAU7kC,KAAK,CAACF,QAAhB,EAA0BqkC,UAAU,CAACrkC,QAArC,CAAL,EAAqD;AACnDsO,WAAK,CAACL,SAAN,CAAgB/N,KAAK,CAAChS,SAAtB,EAAiCgS,KAAK,CAACF,QAAvC;AACD;AACF;;AACDqkC,YAAU,GAAGnkC,KAAb;AACAokC,WAAS,GAAGxzD,IAAZ;AACD,CAlBD;AAoBA0mB,MAAM,CAAC+F,OAAP,CAAe,YAAM;AACnBzC,GAAC,CAAC,MAAD,CAAD,CAAU2qC,EAAV,CAAa,UAAb,EAAyB,UAAC13B,KAAD,EAAW;AAClC,QAAMpV,GAAG,GAAGT,MAAM,CAACysB,YAAP,CAAoB5W,KAAK,CAAC23B,KAA1B,CAAZ;;AACA,QAAIL,QAAQ,CAACnpC,cAAT,CAAwBvD,GAAxB,CAAJ,EAAkC;AAChC0sC,cAAQ,CAAC1sC,GAAD,CAAR;AACD,KAFD,MAEO,IAAI,OAAOA,GAAP,IAAcA,GAAG,IAAI,GAAzB,EAA8B;AACnC,UAAMlX,KAAK,GAAGkX,GAAG,CAAC8e,UAAJ,CAAe,CAAf,IAAoB,IAAIA,UAAJ,CAAe,CAAf,CAAlC;AACA,UAAMwG,IAAI,GAAGnjB,CAAC,CAAC,sBAAD,CAAD,CAA0BrZ,KAA1B,EAAiCw8B,IAA9C;AACAvN,YAAM,CAACwR,IAAP,CAAYjE,IAAZ,EAAkB,QAAlB,EAA4B0nB,KAA5B;AACD;AACF,GATD;AAUA7qC,GAAC,CAAC4V,MAAD,CAAD,CAAU+0B,EAAV,CAAa,YAAb,EAA2BP,aAA3B;AACAnsC,QAAM,CAACK,OAAP,CAAegC,IAAf,CAAoB8pC,aAApB,EAAmClnC,KAAnC,CAAyC/lB,OAAO,CAACkf,KAAR,CAAcqG,IAAd,CAAmBvlB,OAAnB,CAAzC;AACD,CAbD,E;;;;;;;;;;;ACtKA2tD,UAAU,CAACC,cAAX,CAA0B,UAA1B,EAAsC,UAACzmC,OAAD,EAAUC,KAAV;AAAA,SACnC;AAACA,SAAK,EAAEA,KAAR;AAAeymC,YAAQ,EAAE1mC,OAAO,KAAKC,KAAZ,GAAoB,UAApB,GAAiCvd;AAA1D,GADmC;AAAA,CAAtC;AAGA8jD,UAAU,CAACC,cAAX,CAA0B,QAA1B,EAAoC,UAACp5D,CAAD,EAAIC,CAAJ;AAAA,SAAUD,CAAC,KAAKC,CAAhB;AAAA,CAApC;AAEAk5D,UAAU,CAACC,cAAX,CAA0B,UAA1B,EAAsC,UAAClsC,KAAD,EAAQ0F,KAAR;AAAA,SACpC,sEACoB1F,KADpB,WAC8B0F,KAD9B,YADoC;AAAA,CAAtC;AAIAkR,QAAQ,CAACw1B,IAAT,CAAct1B,MAAd,CAAqB;AACnB,6CAA2C,UAAS1C,KAAT,EAAgB;AACzD,QAAIjT,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgBmS,IAAhB,GAAuBjhC,MAAvB,KAAkC,CAAtC,EAAyC;AACvC;AACD;;AACD,QAAMs2B,KAAK,GAAGryB,QAAQ,CAACq0D,WAAT,EAAd;AACAhiC,SAAK,CAACiiC,kBAAN,CAAyBl4B,KAAK,CAACvR,MAA/B;AACA,QAAM0pC,SAAS,GAAGx1B,MAAM,CAACC,YAAP,EAAlB;AACAu1B,aAAS,CAACt1B,eAAV;AACAs1B,aAAS,CAACC,QAAV,CAAmBniC,KAAnB;AACD,GAVkB;AAWnB,gDAA8C,UAAS+J,KAAT,EAAgB;AAC5D,QAAIA,KAAK,CAAC23B,KAAN,KAAgB;AAAG;AAAvB,MAAiC;AAC/B5qC,OAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgB4pC,OAAhB,CAAwB,MAAxB;AACAr4B,WAAK,CAACs4B,cAAN;AACD;;AACDt4B,SAAK,CAACu4B,eAAN;AACD;AAjBkB,CAArB,E;;;;;;;;;;;ACTA,IAAI1vC,MAAJ;AAAW3U,MAAM,CAACoQ,IAAP,CAAY,WAAZ,EAAwB;AAACuE,QAAM,EAAC,UAASzqB,CAAT,EAAW;AAACyqB,UAAM,GAACzqB,CAAP;AAAS;AAA7B,CAAxB,EAAuD,CAAvD;AAA0D,IAAI4sB,MAAJ;AAAW9W,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAAC0G,QAAM,EAAC,UAAS5sB,CAAT,EAAW;AAAC4sB,UAAM,GAAC5sB,CAAP;AAAS;AAA7B,CAA1B,EAAyD,CAAzD;AAA4D,IAAIg7B,WAAJ;AAAgBllB,MAAM,CAACoQ,IAAP,CAAY,kBAAZ,EAA+B;AAAC8U,aAAW,EAAC,UAASh7B,CAAT,EAAW;AAACg7B,eAAW,GAACh7B,CAAZ;AAAc;AAAvC,CAA/B,EAAwE,CAAxE;AAI5J,IAAMo6D,OAAO,GAAG,WAAhB;;AAEA,IAAMC,sBAAsB,GAAG,UAAC73B,IAAD,EAAU;AACvC,MAAMhZ,MAAM,GAAG2E,QAAQ,CAACqU,IAAD,EAAO,EAAP,CAAvB;AACA/X,QAAM,CAAC,CAACU,MAAM,CAACpqB,KAAP,CAAayoB,MAAb,CAAF,CAAN;AACA,SAAOA,MAAP;AACD,CAJD;;AAMA,IAAM8wC,WAAW,GAAG,UAAC93B,IAAD,EAAU;AAC5B,MAAM5Q,MAAM,GAAG4Q,IAAI,CAACne,KAAL,CAAW,GAAX,EAAgBjC,GAAhB,CAAoB,UAACze,CAAD;AAAA,WAAOA,CAAC,CAACusC,IAAF,EAAP;AAAA,GAApB,EAAqCjuB,MAArC,CAA4C,UAACte,CAAD;AAAA,WAAOA,CAAC,CAACpC,MAAT;AAAA,GAA5C,CAAf;AACA,SAAOqwB,MAAM,CAACxP,GAAP,CAAW4Y,WAAW,CAACW,0BAAvB,EAAmDjS,IAAnD,CAAwD,IAAxD,CAAP;AACD,CAHD;;AAKA,IAAM6wC,UAAU,GAAG;AACjB3oC,QAAM,EAAE0oC,WADS;AAEjBt4C,SAAO,EAAEq4C;AAFQ,CAAnB,C,CAKA;;AACAj2B,QAAQ,CAACvQ,QAAT,CAAkByQ,MAAlB,CAAyB;AACvB,iBAAe,UAAS1C,KAAT,EAAgB;AAC7B,QAAMY,IAAI,GAAG7T,CAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgBmS,IAAhB,EAAb;AACA,QAAItP,KAAK,GAAIsP,IAAI,IAAIA,IAAI,KAAK43B,OAAjB,GAA2B53B,IAA3B,GAAkC,IAA/C;;AACA,QAAItP,KAAK,IAAIqnC,UAAU,CAACxqC,cAAX,CAA0B,KAAKvC,KAA/B,CAAb,EAAoD;AAClD,UAAI;AACF0F,aAAK,GAAGqnC,UAAU,CAAC,KAAK/sC,KAAN,CAAV,CAAuBgV,IAAvB,CAAR;AACD,OAFD,CAEE,OAAOxX,KAAP,EAAc;AACdlf,eAAO,CAAC1L,GAAR,CAAY4qB,KAAZ;AACAkI,aAAK,GAAG,IAAR;AACD;AACF;;AACD,QAAMa,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,QAAM82D,QAAQ,GAAG5tC,MAAM,CAACW,gBAAP,CAAwBwG,KAAK,CAAChS,SAA9B,CAAjB;;AACA,QAAImR,KAAK,KAAKsnC,QAAQ,CAAC,KAAKhtC,KAAN,CAAtB,EAAoC;AAClC0F,WAAK,GAAG,IAAR;AACD;;AACD,QAAIA,KAAK,KAAKa,KAAK,CAACF,QAAN,CAAe,KAAKrG,KAApB,CAAV,KACC0F,KAAK,IAAIa,KAAK,CAACF,QAAN,CAAe,KAAKrG,KAApB,CADV,CAAJ,EAC2C;AACzCuG,WAAK,CAACF,QAAN,CAAe,KAAKrG,KAApB,IAA6B0F,KAA7B;AACAmO,aAAO,CAACt9B,GAAR,CAAY,cAAZ,EAA4BgwB,KAA5B;AACD,KAJD,MAIO;AACLpF,OAAC,CAACiT,KAAK,CAACvR,MAAP,CAAD,CAAgBmS,IAAhB,CAAqBtP,KAAK,IAAIsnC,QAAQ,CAAC,KAAKhtC,KAAN,CAAjB,IAAiC4sC,OAAtD;AACD;AACF;AAxBsB,CAAzB;AA2BAh2B,QAAQ,CAACvQ,QAAT,CAAkB+Q,OAAlB,CAA0B;AACxB7iB,WADwB,cACZ;AACV,QAAMgS,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,QAAI,CAACqwB,KAAL,EAAY;AACZ,WAAOA,KAAK,CAAChS,SAAb;AACD,GALuB;AAMxB04C,SANwB,cAMd;AACR,WAAOp5B,OAAO,CAAC39B,GAAR,CAAY,YAAZ,MAA8B,OAA9B,GAAwC,MAAxC,GAAiDiS,SAAxD;AACD,GARuB;AASxBuzB,OATwB,cAShB;AACN,QAAMnV,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,QAAI,CAACqwB,KAAL,EAAY;AACZ,QAAMymC,QAAQ,GAAG5tC,MAAM,CAACW,gBAAP,CAAwBwG,KAAK,CAAChS,SAA9B,CAAjB;AACA,QAAM65B,MAAM,GAAG,CAAC,YAAD,EAAe,QAAf,EAAyB,SAAzB,CAAf;AACA,QAAMpyB,MAAM,GAAGoyB,MAAM,CAACx5B,GAAP,CAAW,UAACze,CAAD;AAAA,aAAQ;AAChC6pB,aAAK,EAAE7pB,CADyB;AAEhC8uB,aAAK,OAAK9uB,CAAC,CAAC,CAAD,CAAD,CAAK+2D,WAAL,EAAL,GAA0B/2D,CAAC,CAACyqB,MAAF,CAAS,CAAT,CAA1B,MAF2B;AAGhC8E,aAAK,EAAEa,KAAK,CAACF,QAAN,CAAelwB,CAAf,KAAqB62D,QAAQ,CAAC72D,CAAD,CAA7B,IAAoCy2D;AAHX,OAAR;AAAA,KAAX,CAAf;;AAKA,QAAIxtC,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqC0C,cAArC,CAAoDgE,KAAK,CAAChS,SAA1D,CAAJ,EAA0E;AACxE,UAAMzM,KAAK,GAAGsX,MAAM,CAACM,QAAP,CAAgBG,oBAAhB,CAAqC0G,KAAK,CAAChS,SAA3C,CAAd;AACA,UAAMmP,OAAO,GAAGtE,MAAM,CAACM,QAAP,CAAgBC,eAAhB,CAAgC7X,KAAhC,CAAhB;AACAkU,YAAM,CAAC,CAAD,CAAN,CAAUmxC,SAAV,GAAsB,IAAtB;AACAnxC,YAAM,CAAC,CAAD,CAAN,CAAUoxC,KAAV,uBAAoCtlD,KAApC;;AACA,UAAIye,KAAK,CAAChS,SAAN,KAAoBmP,OAAxB,EAAiC;AAC/B1H,cAAM,CAAC,CAAD,CAAN,CAAUmxC,SAAV,IAAuB,aAAvB;AACAnxC,cAAM,CAAC,CAAD,CAAN,CAAUoxC,KAAV,GAAkB,+BAA0B1pC,OAA1B,YACG1H,MAAM,CAAC,CAAD,CAAN,CAAUoxC,KADb,SACsB1pC,OADtB,UAAlB;AAED;AACF;;AACD,WAAO1H,MAAP;AACD,GA/BuB;AAgCxBqxC,MAhCwB,cAgCjB;AACL,QAAM9mC,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,WAAQqwB,KAAK,IAAIA,KAAK,CAACF,QAAN,CAAenC,SAAzB,IAAuC,GAA9C;AACD,GAnCuB;AAoCxBopC,YApCwB,cAoCX;AACX,QAAM/mC,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,QAAI,CAACqwB,KAAL,EAAY;AACZ,QAAMhS,SAAS,GAAGgS,KAAK,CAAChS,SAAxB;AACA,WAAO,CAAC;AACN+vB,UAAI,EAAE,2EACS/vB,SADT,CADA;AAGN0Q,WAAK,EAAE;AAHD,KAAD,EAIJ;AACDqf,UAAI,EAAE,gFACiB/vB,SADjB,CADL;AAGD0Q,WAAK,EAAE;AAHN,KAJI,EAQJ;AACDqf,UAAI,sCAAoC/vB,SADvC;AAED0Q,WAAK,EAAE;AAFN,KARI,EAWJ;AACDqf,UAAI,EAAE,0EACO/vB,SADP,CADL;AAGD0Q,WAAK,EAAE;AAHN,KAXI,CAAP;AAgBD,GAxDuB;AAyDxBrd,YAzDwB,cAyDX;AACX,QAAM2e,KAAK,GAAGsN,OAAO,CAAC39B,GAAR,CAAY,cAAZ,CAAd;AACA,WAAOqwB,KAAK,IAAIA,KAAK,CAAC3e,UAAtB;AACD;AA5DuB,CAA1B,E;;;;;;;;;;;AClDA;;AAEAgvB,QAAQ,CAAC22B,KAAT,CAAen2B,OAAf,CAAuB;AACrBo2B,SAAO,EAAE,YAAM;AACb,QAAM9nC,KAAK,GAAGmO,OAAO,CAAC39B,GAAR,CAAY,aAAZ,CAAd;AACA,WAAO5D,IAAI,CAAC4jB,KAAL,CAAW,OAAKwP,KAAK,KAAKvd,SAAV,GAAsB,CAAtB,GAA0Bud,KAA/B,CAAX,CAAP;AACD,GAJoB;AAKrBsP,MAAI,EAAE;AAAA,WAAMnB,OAAO,CAAC39B,GAAR,CAAY,YAAZ,CAAN;AAAA;AALe,CAAvB;AAQA8hC,OAAO,CAACC,OAAR,CAAgB,YAAW;AACzB,MAAIpE,OAAO,CAAC39B,GAAR,CAAY,YAAZ,CAAJ,EAA+B;AAC7BirB,KAAC,CAAC,QAAD,CAAD,CAAYosC,KAAZ,CAAkB;AAAChyB,gBAAU,EAAE,QAAb;AAAuBkyB,cAAQ,EAAE;AAAjC,KAAlB;AACD,GAFD,MAEO;AACLtsC,KAAC,CAAC,QAAD,CAAD,CAAYosC,KAAZ,CAAkB,MAAlB;AACD;AACF,CAND;AAQAv1B,OAAO,CAACC,OAAR,CAAgB,YAAW;AACzB,MAAMvS,KAAK,GAAGmO,OAAO,CAAC39B,GAAR,CAAY,aAAZ,CAAd;AACA29B,SAAO,CAACt9B,GAAR,CAAY,YAAZ,EAA0BmvB,KAAK,KAAKvd,SAApC;AACD,CAHD;AAKA0V,MAAM,CAAC+F,OAAP,CAAe,YAAW;AACxBiQ,SAAO,CAACt9B,GAAR,CAAY,YAAZ,EAA0B,KAA1B;AACAs9B,SAAO,CAACt9B,GAAR,CAAY,aAAZ,EAA2B4R,SAA3B;AACD,CAHD,E;;;;;;;;;;;ACvBA,IAAIge,QAAJ;AAAa7d,MAAM,CAACoQ,IAAP,CAAY,aAAZ,EAA0B;AAACyN,UAAQ,EAAC,UAAS3zB,CAAT,EAAW;AAAC2zB,YAAQ,GAAC3zB,CAAT;AAAW;AAAjC,CAA1B,EAA6D,CAA7D;AAEbokC,QAAQ,CAAC82B,MAAT,CAAgB52B,MAAhB,CAAuB;AACrB,mBAAiB,YAAM;AACrB,QAAM62B,QAAQ,GAAGxnC,QAAQ,CAACoB,OAAT,EAAjB;;AACA,QAAI,EAAEomC,QAAQ,IAAIA,QAAQ,CAAC7kC,MAAvB,CAAJ,EAAoC;AAClCjL,YAAM,CAAC9nB,IAAP,CAAY,QAAZ;AACD;AACF;AANoB,CAAvB;AASA6gC,QAAQ,CAAC82B,MAAT,CAAgBt2B,OAAhB,CAAwB;AACtBtO,QADsB,cACb;AACP,QAAM6kC,QAAQ,GAAGxnC,QAAQ,CAACoB,OAAT,EAAjB;AACA,WAAQomC,QAAQ,IAAIA,QAAQ,CAAC7kC,MAAtB,GAAgC,UAAhC,GAA6C3gB,SAApD;AACD,GAJqB;AAKtB0gB,UALsB,cAKX;AACT,QAAM8kC,QAAQ,GAAGxnC,QAAQ,CAACoB,OAAT,EAAjB;AACA,WAAOomC,QAAQ,GAAGA,QAAQ,CAAC9kC,QAAZ,GAAuB,GAAtC;AACD,GARqB;AAStB2kC,SATsB,cASZ;AACR,QAAMG,QAAQ,GAAGxnC,QAAQ,CAACoB,OAAT,EAAjB;AACA,WAAOomC,QAAQ,IAAIA,QAAQ,CAAC/kC,KAArB,GACHt2B,IAAI,CAAC4jB,KAAL,CAAW,MAAIy3C,QAAQ,CAAC9kC,QAAb,GAAsB8kC,QAAQ,CAAC/kC,KAA1C,CADG,GACgD,CADvD;AAED,GAbqB;AActBA,OAdsB,cAcd;AACN,QAAM+kC,QAAQ,GAAGxnC,QAAQ,CAACoB,OAAT,EAAjB;AACA,WAAOomC,QAAQ,GAAGA,QAAQ,CAAC/kC,KAAZ,GAAoB,GAAnC;AACD;AAjBqB,CAAxB;AAoBA/K,MAAM,CAAC+F,OAAP,CAAe;AAAA,SAAM/F,MAAM,CAACqa,SAAP,CAAiB,aAAjB,CAAN;AAAA,CAAf,E","file":"/app.js","sourcesContent":["var convnetjs = convnetjs || { REVISION: 'ALPHA' };\n(function(global) {\n  \"use strict\";\n\n  // Random number utilities\n  var return_v = false;\n  var v_val = 0.0;\n  var gaussRandom = function() {\n    if(return_v) { \n      return_v = false;\n      return v_val; \n    }\n    var u = 2*Math.random()-1;\n    var v = 2*Math.random()-1;\n    var r = u*u + v*v;\n    if(r == 0 || r > 1) return gaussRandom();\n    var c = Math.sqrt(-2*Math.log(r)/r);\n    v_val = v*c; // cache this\n    return_v = true;\n    return u*c;\n  }\n  var randf = function(a, b) { return Math.random()*(b-a)+a; }\n  var randi = function(a, b) { return Math.floor(Math.random()*(b-a)+a); }\n  var randn = function(mu, std){ return mu+gaussRandom()*std; }\n\n  // Array utilities\n  var zeros = function(n) {\n    if(typeof(n)==='undefined' || isNaN(n)) { return []; }\n    if(typeof ArrayBuffer === 'undefined') {\n      // lacking browser support\n      var arr = new Array(n);\n      for(var i=0;i<n;i++) { arr[i]= 0; }\n      return arr;\n    } else {\n      return new Float64Array(n);\n    }\n  }\n\n  var arrContains = function(arr, elt) {\n    for(var i=0,n=arr.length;i<n;i++) {\n      if(arr[i]===elt) return true;\n    }\n    return false;\n  }\n\n  var arrUnique = function(arr) {\n    var b = [];\n    for(var i=0,n=arr.length;i<n;i++) {\n      if(!arrContains(b, arr[i])) {\n        b.push(arr[i]);\n      }\n    }\n    return b;\n  }\n\n  // return max and min of a given non-empty array.\n  var maxmin = function(w) {\n    if(w.length === 0) { return {}; } // ... ;s\n    var maxv = w[0];\n    var minv = w[0];\n    var maxi = 0;\n    var mini = 0;\n    var n = w.length;\n    for(var i=1;i<n;i++) {\n      if(w[i] > maxv) { maxv = w[i]; maxi = i; } \n      if(w[i] < minv) { minv = w[i]; mini = i; } \n    }\n    return {maxi: maxi, maxv: maxv, mini: mini, minv: minv, dv:maxv-minv};\n  }\n\n  // create random permutation of numbers, in range [0...n-1]\n  var randperm = function(n) {\n    var i = n,\n        j = 0,\n        temp;\n    var array = [];\n    for(var q=0;q<n;q++)array[q]=q;\n    while (i--) {\n        j = Math.floor(Math.random() * (i+1));\n        temp = array[i];\n        array[i] = array[j];\n        array[j] = temp;\n    }\n    return array;\n  }\n\n  // sample from list lst according to probabilities in list probs\n  // the two lists are of same size, and probs adds up to 1\n  var weightedSample = function(lst, probs) {\n    var p = randf(0, 1.0);\n    var cumprob = 0.0;\n    for(var k=0,n=lst.length;k<n;k++) {\n      cumprob += probs[k];\n      if(p < cumprob) { return lst[k]; }\n    }\n  }\n\n  // syntactic sugar function for getting default parameter values\n  var getopt = function(opt, field_name, default_value) {\n    return typeof opt[field_name] !== 'undefined' ? opt[field_name] : default_value;\n  }\n\n  global.randf = randf;\n  global.randi = randi;\n  global.randn = randn;\n  global.zeros = zeros;\n  global.maxmin = maxmin;\n  global.randperm = randperm;\n  global.weightedSample = weightedSample;\n  global.arrUnique = arrUnique;\n  global.arrContains = arrContains;\n  global.getopt = getopt;\n  \n})(convnetjs);\n(function(global) {\n  \"use strict\";\n\n  // Vol is the basic building block of all data in a net.\n  // it is essentially just a 3D volume of numbers, with a\n  // width (sx), height (sy), and depth (depth).\n  // it is used to hold data for all filters, all volumes,\n  // all weights, and also stores all gradients w.r.t. \n  // the data. c is optionally a value to initialize the volume\n  // with. If c is missing, fills the Vol with random numbers.\n  var Vol = function(sx, sy, depth, c) {\n    // this is how you check if a variable is an array. Oh, Javascript :)\n    if(Object.prototype.toString.call(sx) === '[object Array]') {\n      // we were given a list in sx, assume 1D volume and fill it up\n      this.sx = 1;\n      this.sy = 1;\n      this.depth = sx.length;\n      // we have to do the following copy because we want to use\n      // fast typed arrays, not an ordinary javascript array\n      this.w = global.zeros(this.depth);\n      this.dw = global.zeros(this.depth);\n      for(var i=0;i<this.depth;i++) {\n        this.w[i] = sx[i];\n      }\n    } else {\n      // we were given dimensions of the vol\n      this.sx = sx;\n      this.sy = sy;\n      this.depth = depth;\n      var n = sx*sy*depth;\n      this.w = global.zeros(n);\n      this.dw = global.zeros(n);\n      if(typeof c === 'undefined') {\n        // weight normalization is done to equalize the output\n        // variance of every neuron, otherwise neurons with a lot\n        // of incoming connections have outputs of larger variance\n        var scale = Math.sqrt(1.0/(sx*sy*depth));\n        for(var i=0;i<n;i++) { \n          this.w[i] = global.randn(0.0, scale);\n        }\n      } else {\n        for(var i=0;i<n;i++) { \n          this.w[i] = c;\n        }\n      }\n    }\n  }\n\n  Vol.prototype = {\n    get: function(x, y, d) { \n      var ix=((this.sx * y)+x)*this.depth+d;\n      return this.w[ix];\n    },\n    set: function(x, y, d, v) { \n      var ix=((this.sx * y)+x)*this.depth+d;\n      this.w[ix] = v; \n    },\n    add: function(x, y, d, v) { \n      var ix=((this.sx * y)+x)*this.depth+d;\n      this.w[ix] += v; \n    },\n    get_grad: function(x, y, d) { \n      var ix = ((this.sx * y)+x)*this.depth+d;\n      return this.dw[ix]; \n    },\n    set_grad: function(x, y, d, v) { \n      var ix = ((this.sx * y)+x)*this.depth+d;\n      this.dw[ix] = v; \n    },\n    add_grad: function(x, y, d, v) { \n      var ix = ((this.sx * y)+x)*this.depth+d;\n      this.dw[ix] += v; \n    },\n    cloneAndZero: function() { return new Vol(this.sx, this.sy, this.depth, 0.0)},\n    clone: function() {\n      var V = new Vol(this.sx, this.sy, this.depth, 0.0);\n      var n = this.w.length;\n      for(var i=0;i<n;i++) { V.w[i] = this.w[i]; }\n      return V;\n    },\n    addFrom: function(V) { for(var k=0;k<this.w.length;k++) { this.w[k] += V.w[k]; }},\n    addFromScaled: function(V, a) { for(var k=0;k<this.w.length;k++) { this.w[k] += a*V.w[k]; }},\n    setConst: function(a) { for(var k=0;k<this.w.length;k++) { this.w[k] = a; }},\n\n    toJSON: function() {\n      // todo: we may want to only save d most significant digits to save space\n      var json = {}\n      json.sx = this.sx; \n      json.sy = this.sy;\n      json.depth = this.depth;\n      json.w = this.w;\n      return json;\n      // we wont back up gradients to save space\n    },\n    fromJSON: function(json) {\n      this.sx = json.sx;\n      this.sy = json.sy;\n      this.depth = json.depth;\n\n      var n = this.sx*this.sy*this.depth;\n      this.w = global.zeros(n);\n      this.dw = global.zeros(n);\n      // copy over the elements.\n      for(var i=0;i<n;i++) {\n        this.w[i] = json.w[i];\n      }\n    }\n  }\n\n  global.Vol = Vol;\n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n\n  // Volume utilities\n  // intended for use with data augmentation\n  // crop is the size of output\n  // dx,dy are offset wrt incoming volume, of the shift\n  // fliplr is boolean on whether we also want to flip left<->right\n  var augment = function(V, crop, dx, dy, fliplr) {\n    // note assumes square outputs of size crop x crop\n    if(typeof(fliplr)==='undefined') var fliplr = false;\n    if(typeof(dx)==='undefined') var dx = global.randi(0, V.sx - crop);\n    if(typeof(dy)==='undefined') var dy = global.randi(0, V.sy - crop);\n    \n    // randomly sample a crop in the input volume\n    var W;\n    if(crop !== V.sx || dx!==0 || dy!==0) {\n      W = new Vol(crop, crop, V.depth, 0.0);\n      for(var x=0;x<crop;x++) {\n        for(var y=0;y<crop;y++) {\n          if(x+dx<0 || x+dx>=V.sx || y+dy<0 || y+dy>=V.sy) continue; // oob\n          for(var d=0;d<V.depth;d++) {\n           W.set(x,y,d,V.get(x+dx,y+dy,d)); // copy data over\n          }\n        }\n      }\n    } else {\n      W = V;\n    }\n\n    if(fliplr) {\n      // flip volume horziontally\n      var W2 = W.cloneAndZero();\n      for(var x=0;x<W.sx;x++) {\n        for(var y=0;y<W.sy;y++) {\n          for(var d=0;d<W.depth;d++) {\n           W2.set(x,y,d,W.get(W.sx - x - 1,y,d)); // copy data over\n          }\n        }\n      }\n      W = W2; //swap\n    }\n    return W;\n  }\n\n  // img is a DOM element that contains a loaded image\n  // returns a Vol of size (W, H, 4). 4 is for RGBA\n  var img_to_vol = function(img, convert_grayscale) {\n\n    if(typeof(convert_grayscale)==='undefined') var convert_grayscale = false;\n\n    var canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    var ctx = canvas.getContext(\"2d\");\n\n    // due to a Firefox bug\n    try {\n      ctx.drawImage(img, 0, 0);\n    } catch (e) {\n      if (e.name === \"NS_ERROR_NOT_AVAILABLE\") {\n        // sometimes happens, lets just abort\n        return false;\n      } else {\n        throw e;\n      }\n    }\n\n    try {\n      var img_data = ctx.getImageData(0, 0, canvas.width, canvas.height);\n    } catch (e) {\n      if(e.name === 'IndexSizeError') {\n        return false; // not sure what causes this sometimes but okay abort\n      } else {\n        throw e;\n      }\n    }\n\n    // prepare the input: get pixels and normalize them\n    var p = img_data.data;\n    var W = img.width;\n    var H = img.height;\n    var pv = []\n    for(var i=0;i<p.length;i++) {\n      pv.push(p[i]/255.0-0.5); // normalize image pixels to [-0.5, 0.5]\n    }\n    var x = new Vol(W, H, 4, 0.0); //input volume (image)\n    x.w = pv;\n\n    if(convert_grayscale) {\n      // flatten into depth=1 array\n      var x1 = new Vol(W, H, 1, 0.0);\n      for(var i=0;i<W;i++) {\n        for(var j=0;j<H;j++) {\n          x1.set(i,j,0,x.get(i,j,0));\n        }\n      }\n      x = x1;\n    }\n\n    return x;\n  }\n  \n  global.augment = augment;\n  global.img_to_vol = img_to_vol;\n\n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n\n  // This file contains all layers that do dot products with input,\n  // but usually in a different connectivity pattern and weight sharing\n  // schemes: \n  // - FullyConn is fully connected dot products \n  // - ConvLayer does convolutions (so weight sharing spatially)\n  // putting them together in one file because they are very similar\n  var ConvLayer = function(opt) {\n    var opt = opt || {};\n\n    // required\n    this.out_depth = opt.filters;\n    this.sx = opt.sx; // filter size. Should be odd if possible, it's cleaner.\n    this.in_depth = opt.in_depth;\n    this.in_sx = opt.in_sx;\n    this.in_sy = opt.in_sy;\n    \n    // optional\n    this.sy = typeof opt.sy !== 'undefined' ? opt.sy : this.sx;\n    this.stride = typeof opt.stride !== 'undefined' ? opt.stride : 1; // stride at which we apply filters to input volume\n    this.pad = typeof opt.pad !== 'undefined' ? opt.pad : 0; // amount of 0 padding to add around borders of input volume\n    this.l1_decay_mul = typeof opt.l1_decay_mul !== 'undefined' ? opt.l1_decay_mul : 0.0;\n    this.l2_decay_mul = typeof opt.l2_decay_mul !== 'undefined' ? opt.l2_decay_mul : 1.0;\n\n    // computed\n    // note we are doing floor, so if the strided convolution of the filter doesnt fit into the input\n    // volume exactly, the output volume will be trimmed and not contain the (incomplete) computed\n    // final application.\n    this.out_sx = Math.floor((this.in_sx + this.pad * 2 - this.sx) / this.stride + 1);\n    this.out_sy = Math.floor((this.in_sy + this.pad * 2 - this.sy) / this.stride + 1);\n    this.layer_type = 'conv';\n\n    // initializations\n    var bias = typeof opt.bias_pref !== 'undefined' ? opt.bias_pref : 0.0;\n    this.filters = [];\n    for(var i=0;i<this.out_depth;i++) { this.filters.push(new Vol(this.sx, this.sy, this.in_depth)); }\n    this.biases = new Vol(1, 1, this.out_depth, bias);\n  }\n  ConvLayer.prototype = {\n    forward: function(V, is_training) {\n      // optimized code by @mdda that achieves 2x speedup over previous version\n\n      this.in_act = V;\n      var A = new Vol(this.out_sx |0, this.out_sy |0, this.out_depth |0, 0.0);\n      \n      var V_sx = V.sx |0;\n      var V_sy = V.sy |0;\n      var xy_stride = this.stride |0;\n\n      for(var d=0;d<this.out_depth;d++) {\n        var f = this.filters[d];\n        var x = -this.pad |0;\n        var y = -this.pad |0;\n        for(var ay=0; ay<this.out_sy; y+=xy_stride,ay++) {  // xy_stride\n          x = -this.pad |0;\n          for(var ax=0; ax<this.out_sx; x+=xy_stride,ax++) {  // xy_stride\n\n            // convolve centered at this particular location\n            var a = 0.0;\n            for(var fy=0;fy<f.sy;fy++) {\n              var oy = y+fy; // coordinates in the original input array coordinates\n              for(var fx=0;fx<f.sx;fx++) {\n                var ox = x+fx;\n                if(oy>=0 && oy<V_sy && ox>=0 && ox<V_sx) {\n                  for(var fd=0;fd<f.depth;fd++) {\n                    // avoid function call overhead (x2) for efficiency, compromise modularity :(\n                    a += f.w[((f.sx * fy)+fx)*f.depth+fd] * V.w[((V_sx * oy)+ox)*V.depth+fd];\n                  }\n                }\n              }\n            }\n            a += this.biases.w[d];\n            A.set(ax, ay, d, a);\n          }\n        }\n      }\n      this.out_act = A;\n      return this.out_act;\n    },\n    backward: function() {\n\n      var V = this.in_act;\n      V.dw = global.zeros(V.w.length); // zero out gradient wrt bottom data, we're about to fill it\n\n      var V_sx = V.sx |0;\n      var V_sy = V.sy |0;\n      var xy_stride = this.stride |0;\n\n      for(var d=0;d<this.out_depth;d++) {\n        var f = this.filters[d];\n        var x = -this.pad |0;\n        var y = -this.pad |0;\n        for(var ay=0; ay<this.out_sy; y+=xy_stride,ay++) {  // xy_stride\n          x = -this.pad |0;\n          for(var ax=0; ax<this.out_sx; x+=xy_stride,ax++) {  // xy_stride\n\n            // convolve centered at this particular location\n            var chain_grad = this.out_act.get_grad(ax,ay,d); // gradient from above, from chain rule\n            for(var fy=0;fy<f.sy;fy++) {\n              var oy = y+fy; // coordinates in the original input array coordinates\n              for(var fx=0;fx<f.sx;fx++) {\n                var ox = x+fx;\n                if(oy>=0 && oy<V_sy && ox>=0 && ox<V_sx) {\n                  for(var fd=0;fd<f.depth;fd++) {\n                    // avoid function call overhead (x2) for efficiency, compromise modularity :(\n                    var ix1 = ((V_sx * oy)+ox)*V.depth+fd;\n                    var ix2 = ((f.sx * fy)+fx)*f.depth+fd;\n                    f.dw[ix2] += V.w[ix1]*chain_grad;\n                    V.dw[ix1] += f.w[ix2]*chain_grad;\n                  }\n                }\n              }\n            }\n            this.biases.dw[d] += chain_grad;\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function() {\n      var response = [];\n      for(var i=0;i<this.out_depth;i++) {\n        response.push({params: this.filters[i].w, grads: this.filters[i].dw, l2_decay_mul: this.l2_decay_mul, l1_decay_mul: this.l1_decay_mul});\n      }\n      response.push({params: this.biases.w, grads: this.biases.dw, l1_decay_mul: 0.0, l2_decay_mul: 0.0});\n      return response;\n    },\n    toJSON: function() {\n      var json = {};\n      json.sx = this.sx; // filter size in x, y dims\n      json.sy = this.sy;\n      json.stride = this.stride;\n      json.in_depth = this.in_depth;\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.l1_decay_mul = this.l1_decay_mul;\n      json.l2_decay_mul = this.l2_decay_mul;\n      json.pad = this.pad;\n      json.filters = [];\n      for(var i=0;i<this.filters.length;i++) {\n        json.filters.push(this.filters[i].toJSON());\n      }\n      json.biases = this.biases.toJSON();\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type;\n      this.sx = json.sx; // filter size in x, y dims\n      this.sy = json.sy;\n      this.stride = json.stride;\n      this.in_depth = json.in_depth; // depth of input volume\n      this.filters = [];\n      this.l1_decay_mul = typeof json.l1_decay_mul !== 'undefined' ? json.l1_decay_mul : 1.0;\n      this.l2_decay_mul = typeof json.l2_decay_mul !== 'undefined' ? json.l2_decay_mul : 1.0;\n      this.pad = typeof json.pad !== 'undefined' ? json.pad : 0;\n      for(var i=0;i<json.filters.length;i++) {\n        var v = new Vol(0,0,0,0);\n        v.fromJSON(json.filters[i]);\n        this.filters.push(v);\n      }\n      this.biases = new Vol(0,0,0,0);\n      this.biases.fromJSON(json.biases);\n    }\n  }\n\n  var FullyConnLayer = function(opt) {\n    var opt = opt || {};\n\n    // required\n    // ok fine we will allow 'filters' as the word as well\n    this.out_depth = typeof opt.num_neurons !== 'undefined' ? opt.num_neurons : opt.filters;\n\n    // optional \n    this.l1_decay_mul = typeof opt.l1_decay_mul !== 'undefined' ? opt.l1_decay_mul : 0.0;\n    this.l2_decay_mul = typeof opt.l2_decay_mul !== 'undefined' ? opt.l2_decay_mul : 1.0;\n\n    // computed\n    this.num_inputs = opt.in_sx * opt.in_sy * opt.in_depth;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = 'fc';\n\n    // initializations\n    var bias = typeof opt.bias_pref !== 'undefined' ? opt.bias_pref : 0.0;\n    this.filters = [];\n    for(var i=0;i<this.out_depth ;i++) { this.filters.push(new Vol(1, 1, this.num_inputs)); }\n    this.biases = new Vol(1, 1, this.out_depth, bias);\n  }\n\n  FullyConnLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      var A = new Vol(1, 1, this.out_depth, 0.0);\n      var Vw = V.w;\n      for(var i=0;i<this.out_depth;i++) {\n        var a = 0.0;\n        var wi = this.filters[i].w;\n        for(var d=0;d<this.num_inputs;d++) {\n          a += Vw[d] * wi[d]; // for efficiency use Vols directly for now\n        }\n        a += this.biases.w[i];\n        A.w[i] = a;\n      }\n      this.out_act = A;\n      return this.out_act;\n    },\n    backward: function() {\n      var V = this.in_act;\n      V.dw = global.zeros(V.w.length); // zero out the gradient in input Vol\n      \n      // compute gradient wrt weights and data\n      for(var i=0;i<this.out_depth;i++) {\n        var tfi = this.filters[i];\n        var chain_grad = this.out_act.dw[i];\n        for(var d=0;d<this.num_inputs;d++) {\n          V.dw[d] += tfi.w[d]*chain_grad; // grad wrt input data\n          tfi.dw[d] += V.w[d]*chain_grad; // grad wrt params\n        }\n        this.biases.dw[i] += chain_grad;\n      }\n    },\n    getParamsAndGrads: function() {\n      var response = [];\n      for(var i=0;i<this.out_depth;i++) {\n        response.push({params: this.filters[i].w, grads: this.filters[i].dw, l1_decay_mul: this.l1_decay_mul, l2_decay_mul: this.l2_decay_mul});\n      }\n      response.push({params: this.biases.w, grads: this.biases.dw, l1_decay_mul: 0.0, l2_decay_mul: 0.0});\n      return response;\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.num_inputs = this.num_inputs;\n      json.l1_decay_mul = this.l1_decay_mul;\n      json.l2_decay_mul = this.l2_decay_mul;\n      json.filters = [];\n      for(var i=0;i<this.filters.length;i++) {\n        json.filters.push(this.filters[i].toJSON());\n      }\n      json.biases = this.biases.toJSON();\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type;\n      this.num_inputs = json.num_inputs;\n      this.l1_decay_mul = typeof json.l1_decay_mul !== 'undefined' ? json.l1_decay_mul : 1.0;\n      this.l2_decay_mul = typeof json.l2_decay_mul !== 'undefined' ? json.l2_decay_mul : 1.0;\n      this.filters = [];\n      for(var i=0;i<json.filters.length;i++) {\n        var v = new Vol(0,0,0,0);\n        v.fromJSON(json.filters[i]);\n        this.filters.push(v);\n      }\n      this.biases = new Vol(0,0,0,0);\n      this.biases.fromJSON(json.biases);\n    }\n  }\n\n  global.ConvLayer = ConvLayer;\n  global.FullyConnLayer = FullyConnLayer;\n  \n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n  \n  var PoolLayer = function(opt) {\n\n    var opt = opt || {};\n\n    // required\n    this.sx = opt.sx; // filter size\n    this.in_depth = opt.in_depth;\n    this.in_sx = opt.in_sx;\n    this.in_sy = opt.in_sy;\n\n    // optional\n    this.sy = typeof opt.sy !== 'undefined' ? opt.sy : this.sx;\n    this.stride = typeof opt.stride !== 'undefined' ? opt.stride : 2;\n    this.pad = typeof opt.pad !== 'undefined' ? opt.pad : 0; // amount of 0 padding to add around borders of input volume\n\n    // computed\n    this.out_depth = this.in_depth;\n    this.out_sx = Math.floor((this.in_sx + this.pad * 2 - this.sx) / this.stride + 1);\n    this.out_sy = Math.floor((this.in_sy + this.pad * 2 - this.sy) / this.stride + 1);\n    this.layer_type = 'pool';\n    // store switches for x,y coordinates for where the max comes from, for each output neuron\n    this.switchx = global.zeros(this.out_sx*this.out_sy*this.out_depth);\n    this.switchy = global.zeros(this.out_sx*this.out_sy*this.out_depth);\n  }\n\n  PoolLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n\n      var A = new Vol(this.out_sx, this.out_sy, this.out_depth, 0.0);\n      \n      var n=0; // a counter for switches\n      for(var d=0;d<this.out_depth;d++) {\n        var x = -this.pad;\n        var y = -this.pad;\n        for(var ax=0; ax<this.out_sx; x+=this.stride,ax++) {\n          y = -this.pad;\n          for(var ay=0; ay<this.out_sy; y+=this.stride,ay++) {\n\n            // convolve centered at this particular location\n            var a = -99999; // hopefully small enough ;\\\n            var winx=-1,winy=-1;\n            for(var fx=0;fx<this.sx;fx++) {\n              for(var fy=0;fy<this.sy;fy++) {\n                var oy = y+fy;\n                var ox = x+fx;\n                if(oy>=0 && oy<V.sy && ox>=0 && ox<V.sx) {\n                  var v = V.get(ox, oy, d);\n                  // perform max pooling and store pointers to where\n                  // the max came from. This will speed up backprop \n                  // and can help make nice visualizations in future\n                  if(v > a) { a = v; winx=ox; winy=oy;}\n                }\n              }\n            }\n            this.switchx[n] = winx;\n            this.switchy[n] = winy;\n            n++;\n            A.set(ax, ay, d, a);\n          }\n        }\n      }\n      this.out_act = A;\n      return this.out_act;\n    },\n    backward: function() { \n      // pooling layers have no parameters, so simply compute \n      // gradient wrt data here\n      var V = this.in_act;\n      V.dw = global.zeros(V.w.length); // zero out gradient wrt data\n      var A = this.out_act; // computed in forward pass \n\n      var n = 0;\n      for(var d=0;d<this.out_depth;d++) {\n        var x = -this.pad;\n        var y = -this.pad;\n        for(var ax=0; ax<this.out_sx; x+=this.stride,ax++) {\n          y = -this.pad;\n          for(var ay=0; ay<this.out_sy; y+=this.stride,ay++) {\n\n            var chain_grad = this.out_act.get_grad(ax,ay,d);\n            V.add_grad(this.switchx[n], this.switchy[n], d, chain_grad);\n            n++;\n\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.sx = this.sx;\n      json.sy = this.sy;\n      json.stride = this.stride;\n      json.in_depth = this.in_depth;\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.pad = this.pad;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type;\n      this.sx = json.sx;\n      this.sy = json.sy;\n      this.stride = json.stride;\n      this.in_depth = json.in_depth;\n      this.pad = typeof json.pad !== 'undefined' ? json.pad : 0; // backwards compatibility\n      this.switchx = global.zeros(this.out_sx*this.out_sy*this.out_depth); // need to re-init these appropriately\n      this.switchy = global.zeros(this.out_sx*this.out_sy*this.out_depth);\n    }\n  }\n\n  global.PoolLayer = PoolLayer;\n\n})(convnetjs);\n\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n  \n  var InputLayer = function(opt) {\n    var opt = opt || {};\n\n    // this is a bit silly but lets allow people to specify either ins or outs\n    this.out_sx = typeof opt.out_sx !== 'undefined' ? opt.out_sx : opt.in_sx;\n    this.out_sy = typeof opt.out_sy !== 'undefined' ? opt.out_sy : opt.in_sy;\n    this.out_depth = typeof opt.out_depth !== 'undefined' ? opt.out_depth : opt.in_depth;\n    this.layer_type = 'input';\n  }\n  InputLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      this.out_act = V;\n      return this.out_act; // dummy identity function for now\n    },\n    backward: function() { },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type; \n    }\n  }\n\n  global.InputLayer = InputLayer;\n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n  \n  // Layers that implement a loss. Currently these are the layers that \n  // can initiate a backward() pass. In future we probably want a more \n  // flexible system that can accomodate multiple losses to do multi-task\n  // learning, and stuff like that. But for now, one of the layers in this\n  // file must be the final layer in a Net.\n\n  // This is a classifier, with N discrete classes from 0 to N-1\n  // it gets a stream of N incoming numbers and computes the softmax\n  // function (exponentiate and normalize to sum to 1 as probabilities should)\n  var SoftmaxLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.num_inputs = opt.in_sx * opt.in_sy * opt.in_depth;\n    this.out_depth = this.num_inputs;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = 'softmax';\n  }\n\n  SoftmaxLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n\n      var A = new Vol(1, 1, this.out_depth, 0.0);\n\n      // compute max activation\n      var as = V.w;\n      var amax = V.w[0];\n      for(var i=1;i<this.out_depth;i++) {\n        if(as[i] > amax) amax = as[i];\n      }\n\n      // compute exponentials (carefully to not blow up)\n      var es = global.zeros(this.out_depth);\n      var esum = 0.0;\n      for(var i=0;i<this.out_depth;i++) {\n        var e = Math.exp(as[i] - amax);\n        esum += e;\n        es[i] = e;\n      }\n\n      // normalize and output to sum to one\n      for(var i=0;i<this.out_depth;i++) {\n        es[i] /= esum;\n        A.w[i] = es[i];\n      }\n\n      this.es = es; // save these for backprop\n      this.out_act = A;\n      return this.out_act;\n    },\n    backward: function(y) {\n\n      // compute and accumulate gradient wrt weights and bias of this layer\n      var x = this.in_act;\n      x.dw = global.zeros(x.w.length); // zero out the gradient of input Vol\n\n      for(var i=0;i<this.out_depth;i++) {\n        var indicator = i === y ? 1.0 : 0.0;\n        var mul = -(indicator - this.es[i]);\n        x.dw[i] = mul;\n      }\n\n      // loss is the class negative log likelihood\n      return -Math.log(this.es[y]);\n    },\n    getParamsAndGrads: function() { \n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.num_inputs = this.num_inputs;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type;\n      this.num_inputs = json.num_inputs;\n    }\n  }\n\n  // implements an L2 regression cost layer,\n  // so penalizes \\sum_i(||x_i - y_i||^2), where x is its input\n  // and y is the user-provided array of \"correct\" values.\n  var RegressionLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.num_inputs = opt.in_sx * opt.in_sy * opt.in_depth;\n    this.out_depth = this.num_inputs;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = 'regression';\n  }\n\n  RegressionLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      this.out_act = V;\n      return V; // identity function\n    },\n    // y is a list here of size num_inputs\n    backward: function(y) { \n\n      // compute and accumulate gradient wrt weights and bias of this layer\n      var x = this.in_act;\n      x.dw = global.zeros(x.w.length); // zero out the gradient of input Vol\n      var loss = 0.0;\n      if(y instanceof Array || y instanceof Float64Array) {\n        for(var i=0;i<this.out_depth;i++) {\n          var dy = x.w[i] - y[i];\n          x.dw[i] = dy;\n          loss += 2*dy*dy;\n        }\n      } else {\n        // assume it is a struct with entries .dim and .val\n        // and we pass gradient only along dimension dim to be equal to val\n        var i = y.dim;\n        var yi = y.val;\n        var dy = x.w[i] - yi;\n        x.dw[i] = dy;\n        loss += 2*dy*dy;\n      }\n      return loss;\n    },\n    getParamsAndGrads: function() { \n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.num_inputs = this.num_inputs;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type;\n      this.num_inputs = json.num_inputs;\n    }\n  }\n\n  var SVMLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.num_inputs = opt.in_sx * opt.in_sy * opt.in_depth;\n    this.out_depth = this.num_inputs;\n    this.out_sx = 1;\n    this.out_sy = 1;\n    this.layer_type = 'svm';\n  }\n\n  SVMLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      this.out_act = V; // nothing to do, output raw scores\n      return V;\n    },\n    backward: function(y) {\n\n      // compute and accumulate gradient wrt weights and bias of this layer\n      var x = this.in_act;\n      x.dw = global.zeros(x.w.length); // zero out the gradient of input Vol\n\n      var yscore = x.w[y]; // score of ground truth\n      var margin = 1.0;\n      var loss = 0.0;\n      for(var i=0;i<this.out_depth;i++) {\n        if(-yscore + x.w[i] + margin > 0) {\n          // violating example, apply loss\n          // I love hinge loss, by the way. Truly.\n          // Seriously, compare this SVM code with Softmax forward AND backprop code above\n          // it's clear which one is superior, not only in code, simplicity\n          // and beauty, but also in practice.\n          x.dw[i] += 1;\n          x.dw[y] -= 1;\n          loss += -yscore + x.w[i] + margin;\n        }\n      }\n\n      return loss;\n    },\n    getParamsAndGrads: function() { \n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.num_inputs = this.num_inputs;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type;\n      this.num_inputs = json.num_inputs;\n    }\n  }\n  \n  global.RegressionLayer = RegressionLayer;\n  global.SoftmaxLayer = SoftmaxLayer;\n  global.SVMLayer = SVMLayer;\n\n})(convnetjs);\n\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n  \n  // Implements ReLU nonlinearity elementwise\n  // x -> max(0, x)\n  // the output is in [0, inf)\n  var ReluLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.out_sx = opt.in_sx;\n    this.out_sy = opt.in_sy;\n    this.out_depth = opt.in_depth;\n    this.layer_type = 'relu';\n  }\n  ReluLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      var V2 = V.clone();\n      var N = V.w.length;\n      var V2w = V2.w;\n      for(var i=0;i<N;i++) { \n        if(V2w[i] < 0) V2w[i] = 0; // threshold at 0\n      }\n      this.out_act = V2;\n      return this.out_act;\n    },\n    backward: function() {\n      var V = this.in_act; // we need to set dw of this\n      var V2 = this.out_act;\n      var N = V.w.length;\n      V.dw = global.zeros(N); // zero out gradient wrt data\n      for(var i=0;i<N;i++) {\n        if(V2.w[i] <= 0) V.dw[i] = 0; // threshold\n        else V.dw[i] = V2.dw[i];\n      }\n    },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type; \n    }\n  }\n\n  // Implements Sigmoid nnonlinearity elementwise\n  // x -> 1/(1+e^(-x))\n  // so the output is between 0 and 1.\n  var SigmoidLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.out_sx = opt.in_sx;\n    this.out_sy = opt.in_sy;\n    this.out_depth = opt.in_depth;\n    this.layer_type = 'sigmoid';\n  }\n  SigmoidLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      var V2 = V.cloneAndZero();\n      var N = V.w.length;\n      var V2w = V2.w;\n      var Vw = V.w;\n      for(var i=0;i<N;i++) { \n        V2w[i] = 1.0/(1.0+Math.exp(-Vw[i]));\n      }\n      this.out_act = V2;\n      return this.out_act;\n    },\n    backward: function() {\n      var V = this.in_act; // we need to set dw of this\n      var V2 = this.out_act;\n      var N = V.w.length;\n      V.dw = global.zeros(N); // zero out gradient wrt data\n      for(var i=0;i<N;i++) {\n        var v2wi = V2.w[i];\n        V.dw[i] =  v2wi * (1.0 - v2wi) * V2.dw[i];\n      }\n    },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type; \n    }\n  }\n\n  // Implements Maxout nnonlinearity that computes\n  // x -> max(x)\n  // where x is a vector of size group_size. Ideally of course,\n  // the input size should be exactly divisible by group_size\n  var MaxoutLayer = function(opt) {\n    var opt = opt || {};\n\n    // required\n    this.group_size = typeof opt.group_size !== 'undefined' ? opt.group_size : 2;\n\n    // computed\n    this.out_sx = opt.in_sx;\n    this.out_sy = opt.in_sy;\n    this.out_depth = Math.floor(opt.in_depth / this.group_size);\n    this.layer_type = 'maxout';\n\n    this.switches = global.zeros(this.out_sx*this.out_sy*this.out_depth); // useful for backprop\n  }\n  MaxoutLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      var N = this.out_depth; \n      var V2 = new Vol(this.out_sx, this.out_sy, this.out_depth, 0.0);\n\n      // optimization branch. If we're operating on 1D arrays we dont have\n      // to worry about keeping track of x,y,d coordinates inside\n      // input volumes. In convnets we do :(\n      if(this.out_sx === 1 && this.out_sy === 1) {\n        for(var i=0;i<N;i++) {\n          var ix = i * this.group_size; // base index offset\n          var a = V.w[ix];\n          var ai = 0;\n          for(var j=1;j<this.group_size;j++) {\n            var a2 = V.w[ix+j];\n            if(a2 > a) {\n              a = a2;\n              ai = j;\n            }\n          }\n          V2.w[i] = a;\n          this.switches[i] = ix + ai;\n        }\n      } else {\n        var n=0; // counter for switches\n        for(var x=0;x<V.sx;x++) {\n          for(var y=0;y<V.sy;y++) {\n            for(var i=0;i<N;i++) {\n              var ix = i * this.group_size;\n              var a = V.get(x, y, ix);\n              var ai = 0;\n              for(var j=1;j<this.group_size;j++) {\n                var a2 = V.get(x, y, ix+j);\n                if(a2 > a) {\n                  a = a2;\n                  ai = j;\n                }\n              }\n              V2.set(x,y,i,a);\n              this.switches[n] = ix + ai;\n              n++;\n            }\n          }\n        }\n\n      }\n      this.out_act = V2;\n      return this.out_act;\n    },\n    backward: function() {\n      var V = this.in_act; // we need to set dw of this\n      var V2 = this.out_act;\n      var N = this.out_depth;\n      V.dw = global.zeros(V.w.length); // zero out gradient wrt data\n\n      // pass the gradient through the appropriate switch\n      if(this.out_sx === 1 && this.out_sy === 1) {\n        for(var i=0;i<N;i++) {\n          var chain_grad = V2.dw[i];\n          V.dw[this.switches[i]] = chain_grad;\n        }\n      } else {\n        // bleh okay, lets do this the hard way\n        var n=0; // counter for switches\n        for(var x=0;x<V2.sx;x++) {\n          for(var y=0;y<V2.sy;y++) {\n            for(var i=0;i<N;i++) {\n              var chain_grad = V2.get_grad(x,y,i);\n              V.set_grad(x,y,this.switches[n],chain_grad);\n              n++;\n            }\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.group_size = this.group_size;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type; \n      this.group_size = json.group_size;\n      this.switches = global.zeros(this.group_size);\n    }\n  }\n\n  // a helper function, since tanh is not yet part of ECMAScript. Will be in v6.\n  function tanh(x) {\n    var y = Math.exp(2 * x);\n    return (y - 1) / (y + 1);\n  }\n  // Implements Tanh nnonlinearity elementwise\n  // x -> tanh(x) \n  // so the output is between -1 and 1.\n  var TanhLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.out_sx = opt.in_sx;\n    this.out_sy = opt.in_sy;\n    this.out_depth = opt.in_depth;\n    this.layer_type = 'tanh';\n  }\n  TanhLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      var V2 = V.cloneAndZero();\n      var N = V.w.length;\n      for(var i=0;i<N;i++) { \n        V2.w[i] = tanh(V.w[i]);\n      }\n      this.out_act = V2;\n      return this.out_act;\n    },\n    backward: function() {\n      var V = this.in_act; // we need to set dw of this\n      var V2 = this.out_act;\n      var N = V.w.length;\n      V.dw = global.zeros(N); // zero out gradient wrt data\n      for(var i=0;i<N;i++) {\n        var v2wi = V2.w[i];\n        V.dw[i] = (1.0 - v2wi * v2wi) * V2.dw[i];\n      }\n    },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type; \n    }\n  }\n  \n  global.TanhLayer = TanhLayer;\n  global.MaxoutLayer = MaxoutLayer;\n  global.ReluLayer = ReluLayer;\n  global.SigmoidLayer = SigmoidLayer;\n\n})(convnetjs);\n\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n\n  // An inefficient dropout layer\n  // Note this is not most efficient implementation since the layer before\n  // computed all these activations and now we're just going to drop them :(\n  // same goes for backward pass. Also, if we wanted to be efficient at test time\n  // we could equivalently be clever and upscale during train and copy pointers during test\n  // todo: make more efficient.\n  var DropoutLayer = function(opt) {\n    var opt = opt || {};\n\n    // computed\n    this.out_sx = opt.in_sx;\n    this.out_sy = opt.in_sy;\n    this.out_depth = opt.in_depth;\n    this.layer_type = 'dropout';\n    this.drop_prob = typeof opt.drop_prob !== 'undefined' ? opt.drop_prob : 0.5;\n    this.dropped = global.zeros(this.out_sx*this.out_sy*this.out_depth);\n  }\n  DropoutLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n      if(typeof(is_training)==='undefined') { is_training = false; } // default is prediction mode\n      var V2 = V.clone();\n      var N = V.w.length;\n      if(is_training) {\n        // do dropout\n        for(var i=0;i<N;i++) {\n          if(Math.random()<this.drop_prob) { V2.w[i]=0; this.dropped[i] = true; } // drop!\n          else {this.dropped[i] = false;}\n        }\n      } else {\n        // scale the activations during prediction\n        for(var i=0;i<N;i++) { V2.w[i]*=this.drop_prob; }\n      }\n      this.out_act = V2;\n      return this.out_act; // dummy identity function for now\n    },\n    backward: function() {\n      var V = this.in_act; // we need to set dw of this\n      var chain_grad = this.out_act;\n      var N = V.w.length;\n      V.dw = global.zeros(N); // zero out gradient wrt data\n      for(var i=0;i<N;i++) {\n        if(!(this.dropped[i])) { \n          V.dw[i] = chain_grad.dw[i]; // copy over the gradient\n        }\n      }\n    },\n    getParamsAndGrads: function() {\n      return [];\n    },\n    toJSON: function() {\n      var json = {};\n      json.out_depth = this.out_depth;\n      json.out_sx = this.out_sx;\n      json.out_sy = this.out_sy;\n      json.layer_type = this.layer_type;\n      json.drop_prob = this.drop_prob;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.out_depth = json.out_depth;\n      this.out_sx = json.out_sx;\n      this.out_sy = json.out_sy;\n      this.layer_type = json.layer_type; \n      this.drop_prob = json.drop_prob;\n    }\n  }\n  \n\n  global.DropoutLayer = DropoutLayer;\n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n  \n  // a bit experimental layer for now. I think it works but I'm not 100%\n  // the gradient check is a bit funky. I'll look into this a bit later.\n  // Local Response Normalization in window, along depths of volumes\n  var LocalResponseNormalizationLayer = function(opt) {\n    var opt = opt || {};\n\n    // required\n    this.k = opt.k;\n    this.n = opt.n;\n    this.alpha = opt.alpha;\n    this.beta = opt.beta;\n\n    // computed\n    this.out_sx = opt.in_sx;\n    this.out_sy = opt.in_sy;\n    this.out_depth = opt.in_depth;\n    this.layer_type = 'lrn';\n\n    // checks\n    if(this.n%2 === 0) { console.log('WARNING n should be odd for LRN layer'); }\n  }\n  LocalResponseNormalizationLayer.prototype = {\n    forward: function(V, is_training) {\n      this.in_act = V;\n\n      var A = V.cloneAndZero();\n      this.S_cache_ = V.cloneAndZero();\n      var n2 = Math.floor(this.n/2);\n      for(var x=0;x<V.sx;x++) {\n        for(var y=0;y<V.sy;y++) {\n          for(var i=0;i<V.depth;i++) {\n\n            var ai = V.get(x,y,i);\n\n            // normalize in a window of size n\n            var den = 0.0;\n            for(var j=Math.max(0,i-n2);j<=Math.min(i+n2,V.depth-1);j++) {\n              var aa = V.get(x,y,j);\n              den += aa*aa;\n            }\n            den *= this.alpha / this.n;\n            den += this.k;\n            this.S_cache_.set(x,y,i,den); // will be useful for backprop\n            den = Math.pow(den, this.beta);\n            A.set(x,y,i,ai/den);\n          }\n        }\n      }\n\n      this.out_act = A;\n      return this.out_act; // dummy identity function for now\n    },\n    backward: function() { \n      // evaluate gradient wrt data\n      var V = this.in_act; // we need to set dw of this\n      V.dw = global.zeros(V.w.length); // zero out gradient wrt data\n      var A = this.out_act; // computed in forward pass \n\n      var n2 = Math.floor(this.n/2);\n      for(var x=0;x<V.sx;x++) {\n        for(var y=0;y<V.sy;y++) {\n          for(var i=0;i<V.depth;i++) {\n\n            var chain_grad = this.out_act.get_grad(x,y,i);\n            var S = this.S_cache_.get(x,y,i);\n            var SB = Math.pow(S, this.beta);\n            var SB2 = SB*SB;\n\n            // normalize in a window of size n\n            for(var j=Math.max(0,i-n2);j<=Math.min(i+n2,V.depth-1);j++) {              \n              var aj = V.get(x,y,j); \n              var g = -aj*this.beta*Math.pow(S,this.beta-1)*this.alpha/this.n*2*aj;\n              if(j===i) g+= SB;\n              g /= SB2;\n              g *= chain_grad;\n              V.add_grad(x,y,j,g);\n            }\n\n          }\n        }\n      }\n    },\n    getParamsAndGrads: function() { return []; },\n    toJSON: function() {\n      var json = {};\n      json.k = this.k;\n      json.n = this.n;\n      json.alpha = this.alpha; // normalize by size\n      json.beta = this.beta;\n      json.out_sx = this.out_sx; \n      json.out_sy = this.out_sy;\n      json.out_depth = this.out_depth;\n      json.layer_type = this.layer_type;\n      return json;\n    },\n    fromJSON: function(json) {\n      this.k = json.k;\n      this.n = json.n;\n      this.alpha = json.alpha; // normalize by size\n      this.beta = json.beta;\n      this.out_sx = json.out_sx; \n      this.out_sy = json.out_sy;\n      this.out_depth = json.out_depth;\n      this.layer_type = json.layer_type;\n    }\n  }\n  \n\n  global.LocalResponseNormalizationLayer = LocalResponseNormalizationLayer;\n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n  \n  // Net manages a set of layers\n  // For now constraints: Simple linear order of layers, first layer input last layer a cost layer\n  var Net = function(options) {\n    this.layers = [];\n  }\n\n  Net.prototype = {\n    \n    // takes a list of layer definitions and creates the network layer objects\n    makeLayers: function(defs) {\n\n      // few checks for now\n      if(defs.length<2) {console.log('ERROR! For now at least have input and softmax layers.');}\n      if(defs[0].type !== 'input') {console.log('ERROR! For now first layer should be input.');}\n\n      // desugar syntactic for adding activations and dropouts\n      var desugar = function() {\n        var new_defs = [];\n        for(var i=0;i<defs.length;i++) {\n          var def = defs[i];\n          \n          if(def.type==='softmax' || def.type==='svm') {\n            // add an fc layer here, there is no reason the user should\n            // have to worry about this and we almost always want to\n            new_defs.push({type:'fc', num_neurons: def.num_classes});\n          }\n\n          if(def.type==='regression') {\n            // add an fc layer here, there is no reason the user should\n            // have to worry about this and we almost always want to\n            new_defs.push({type:'fc', num_neurons: def.num_neurons});\n          }\n\n          if((def.type==='fc' || def.type==='conv') \n              && typeof(def.bias_pref) === 'undefined'){\n            def.bias_pref = 0.0;\n            if(typeof def.activation !== 'undefined' && def.activation === 'relu') {\n              def.bias_pref = 0.1; // relus like a bit of positive bias to get gradients early\n              // otherwise it's technically possible that a relu unit will never turn on (by chance)\n              // and will never get any gradient and never contribute any computation. Dead relu.\n            }\n          }\n          \n          if(typeof def.tensor !== 'undefined') {\n            // apply quadratic transform so that the upcoming multiply will include\n            // quadratic terms, equivalent to doing a tensor product\n            if(def.tensor) {\n              new_defs.push({type: 'quadtransform'});\n            }\n          }\n\n          new_defs.push(def);\n\n          if(typeof def.activation !== 'undefined') {\n            if(def.activation==='relu') { new_defs.push({type:'relu'}); }\n            else if (def.activation==='sigmoid') { new_defs.push({type:'sigmoid'}); }\n            else if (def.activation==='tanh') { new_defs.push({type:'tanh'}); }\n            else if (def.activation==='maxout') {\n              // create maxout activation, and pass along group size, if provided\n              var gs = def.group_size !== 'undefined' ? def.group_size : 2;\n              new_defs.push({type:'maxout', group_size:gs});\n            }\n            else { console.log('ERROR unsupported activation ' + def.activation); }\n          }\n          if(typeof def.drop_prob !== 'undefined' && def.type !== 'dropout') {\n            new_defs.push({type:'dropout', drop_prob: def.drop_prob});\n          }\n\n        }\n        return new_defs;\n      }\n      defs = desugar(defs);\n\n      // create the layers\n      this.layers = [];\n      for(var i=0;i<defs.length;i++) {\n        var def = defs[i];\n        if(i>0) {\n          var prev = this.layers[i-1];\n          def.in_sx = prev.out_sx;\n          def.in_sy = prev.out_sy;\n          def.in_depth = prev.out_depth;\n        }\n\n        switch(def.type) {\n          case 'fc': this.layers.push(new global.FullyConnLayer(def)); break;\n          case 'lrn': this.layers.push(new global.LocalResponseNormalizationLayer(def)); break;\n          case 'dropout': this.layers.push(new global.DropoutLayer(def)); break;\n          case 'input': this.layers.push(new global.InputLayer(def)); break;\n          case 'softmax': this.layers.push(new global.SoftmaxLayer(def)); break;\n          case 'regression': this.layers.push(new global.RegressionLayer(def)); break;\n          case 'conv': this.layers.push(new global.ConvLayer(def)); break;\n          case 'pool': this.layers.push(new global.PoolLayer(def)); break;\n          case 'relu': this.layers.push(new global.ReluLayer(def)); break;\n          case 'sigmoid': this.layers.push(new global.SigmoidLayer(def)); break;\n          case 'tanh': this.layers.push(new global.TanhLayer(def)); break;\n          case 'maxout': this.layers.push(new global.MaxoutLayer(def)); break;\n          case 'quadtransform': this.layers.push(new global.QuadTransformLayer(def)); break;\n          case 'svm': this.layers.push(new global.SVMLayer(def)); break;\n          default: console.log('ERROR: UNRECOGNIZED LAYER TYPE!');\n        }\n      }\n    },\n\n    // forward prop the network. A trainer will pass in is_training = true\n    forward: function(V, is_training) {\n      if(typeof(is_training)==='undefined') is_training = false;\n      var act = this.layers[0].forward(V, is_training);\n      for(var i=1;i<this.layers.length;i++) {\n        act = this.layers[i].forward(act, is_training);\n      }\n      return act;\n    },\n\n    getCostLoss: function(V, y) {\n      this.forward(V, false);\n      var N = this.layers.length;\n      var loss = this.layers[N-1].backward(y);\n      return loss;\n    },\n    \n    // backprop: compute gradients wrt all parameters\n    backward: function(y) {\n      var N = this.layers.length;\n      var loss = this.layers[N-1].backward(y); // last layer assumed softmax\n      for(var i=N-2;i>=0;i--) { // first layer assumed input\n        this.layers[i].backward();\n      }\n      return loss;\n    },\n    getParamsAndGrads: function() {\n      // accumulate parameters and gradients for the entire network\n      var response = [];\n      for(var i=0;i<this.layers.length;i++) {\n        var layer_reponse = this.layers[i].getParamsAndGrads();\n        for(var j=0;j<layer_reponse.length;j++) {\n          response.push(layer_reponse[j]);\n        }\n      }\n      return response;\n    },\n    getPrediction: function() {\n      var S = this.layers[this.layers.length-1]; // softmax layer\n      var p = S.out_act.w;\n      var maxv = p[0];\n      var maxi = 0;\n      for(var i=1;i<p.length;i++) {\n        if(p[i] > maxv) { maxv = p[i]; maxi = i;}\n      }\n      return maxi;\n    },\n    toJSON: function() {\n      var json = {};\n      json.layers = [];\n      for(var i=0;i<this.layers.length;i++) {\n        json.layers.push(this.layers[i].toJSON());\n      }\n      return json;\n    },\n    fromJSON: function(json) {\n      this.layers = [];\n      for(var i=0;i<json.layers.length;i++) {\n        var Lj = json.layers[i]\n        var t = Lj.layer_type;\n        var L;\n        if(t==='input') { L = new global.InputLayer(); }\n        if(t==='relu') { L = new global.ReluLayer(); }\n        if(t==='sigmoid') { L = new global.SigmoidLayer(); }\n        if(t==='tanh') { L = new global.TanhLayer(); }\n        if(t==='dropout') { L = new global.DropoutLayer(); }\n        if(t==='conv') { L = new global.ConvLayer(); }\n        if(t==='pool') { L = new global.PoolLayer(); }\n        if(t==='lrn') { L = new global.LocalResponseNormalizationLayer(); }\n        if(t==='softmax') { L = new global.SoftmaxLayer(); }\n        if(t==='regression') { L = new global.RegressionLayer(); }\n        if(t==='fc') { L = new global.FullyConnLayer(); }\n        if(t==='maxout') { L = new global.MaxoutLayer(); }\n        if(t==='quadtransform') { L = new global.QuadTransformLayer(); }\n        if(t==='svm') { L = new global.SVMLayer(); }\n        L.fromJSON(Lj);\n        this.layers.push(L);\n      }\n    }\n  }\n  \n\n  global.Net = Net;\n})(convnetjs);\n(function(global) {\n  \"use strict\";\n  var Vol = global.Vol; // convenience\n\n  var Trainer = function(net, options) {\n\n    this.net = net;\n\n    var options = options || {};\n    this.learning_rate = typeof options.learning_rate !== 'undefined' ? options.learning_rate : 0.01;\n    this.l1_decay = typeof options.l1_decay !== 'undefined' ? options.l1_decay : 0.0;\n    this.l2_decay = typeof options.l2_decay !== 'undefined' ? options.l2_decay : 0.0;\n    this.batch_size = typeof options.batch_size !== 'undefined' ? options.batch_size : 1;\n    this.method = typeof options.method !== 'undefined' ? options.method : 'sgd'; // sgd/adagrad/adadelta/windowgrad\n\n    this.momentum = typeof options.momentum !== 'undefined' ? options.momentum : 0.9;\n    this.ro = typeof options.ro !== 'undefined' ? options.ro : 0.95; // used in adadelta\n    this.eps = typeof options.eps !== 'undefined' ? options.eps : 1e-6; // used in adadelta\n\n    this.k = 0; // iteration counter\n    this.gsum = []; // last iteration gradients (used for momentum calculations)\n    this.xsum = []; // used in adadelta\n  }\n\n  Trainer.prototype = {\n    train: function(x, y) {\n\n      var start = new Date().getTime();\n      this.net.forward(x, true); // also set the flag that lets the net know we're just training\n      var end = new Date().getTime();\n      var fwd_time = end - start;\n\n      var start = new Date().getTime();\n      var cost_loss = this.net.backward(y);\n      var l2_decay_loss = 0.0;\n      var l1_decay_loss = 0.0;\n      var end = new Date().getTime();\n      var bwd_time = end - start;\n      \n      this.k++;\n      if(this.k % this.batch_size === 0) {\n\n        var pglist = this.net.getParamsAndGrads();\n\n        // initialize lists for accumulators. Will only be done once on first iteration\n        if(this.gsum.length === 0 && (this.method !== 'sgd' || this.momentum > 0.0)) {\n          // only vanilla sgd doesnt need either lists\n          // momentum needs gsum\n          // adagrad needs gsum\n          // adadelta needs gsum and xsum\n          for(var i=0;i<pglist.length;i++) {\n            this.gsum.push(global.zeros(pglist[i].params.length));\n            if(this.method === 'adadelta') {\n              this.xsum.push(global.zeros(pglist[i].params.length));\n            } else {\n              this.xsum.push([]); // conserve memory\n            }\n          }\n        }\n\n        // perform an update for all sets of weights\n        for(var i=0;i<pglist.length;i++) {\n          var pg = pglist[i]; // param, gradient, other options in future (custom learning rate etc)\n          var p = pg.params;\n          var g = pg.grads;\n\n          // learning rate for some parameters.\n          var l2_decay_mul = typeof pg.l2_decay_mul !== 'undefined' ? pg.l2_decay_mul : 1.0;\n          var l1_decay_mul = typeof pg.l1_decay_mul !== 'undefined' ? pg.l1_decay_mul : 1.0;\n          var l2_decay = this.l2_decay * l2_decay_mul;\n          var l1_decay = this.l1_decay * l1_decay_mul;\n\n          var plen = p.length;\n          for(var j=0;j<plen;j++) {\n            l2_decay_loss += l2_decay*p[j]*p[j]/2; // accumulate weight decay loss\n            l1_decay_loss += l1_decay*Math.abs(p[j]);\n            var l1grad = l1_decay * (p[j] > 0 ? 1 : -1);\n            var l2grad = l2_decay * (p[j]);\n\n            var gij = (l2grad + l1grad + g[j]) / this.batch_size; // raw batch gradient\n\n            var gsumi = this.gsum[i];\n            var xsumi = this.xsum[i];\n            if(this.method === 'adagrad') {\n              // adagrad update\n              gsumi[j] = gsumi[j] + gij * gij;\n              var dx = - this.learning_rate / Math.sqrt(gsumi[j] + this.eps) * gij;\n              p[j] += dx;\n            } else if(this.method === 'windowgrad') {\n              // this is adagrad but with a moving window weighted average\n              // so the gradient is not accumulated over the entire history of the run. \n              // it's also referred to as Idea #1 in Zeiler paper on Adadelta. Seems reasonable to me!\n              gsumi[j] = this.ro * gsumi[j] + (1-this.ro) * gij * gij;\n              var dx = - this.learning_rate / Math.sqrt(gsumi[j] + this.eps) * gij; // eps added for better conditioning\n              p[j] += dx;\n            } else if(this.method === 'adadelta') {\n              // assume adadelta if not sgd or adagrad\n              gsumi[j] = this.ro * gsumi[j] + (1-this.ro) * gij * gij;\n              var dx = - Math.sqrt((xsumi[j] + this.eps)/(gsumi[j] + this.eps)) * gij;\n              xsumi[j] = this.ro * xsumi[j] + (1-this.ro) * dx * dx; // yes, xsum lags behind gsum by 1.\n              p[j] += dx;\n            } else {\n              // assume SGD\n              if(this.momentum > 0.0) {\n                // momentum update\n                var dx = this.momentum * gsumi[j] - this.learning_rate * gij; // step\n                gsumi[j] = dx; // back this up for next iteration of momentum\n                p[j] += dx; // apply corrected gradient\n              } else {\n                // vanilla sgd\n                p[j] +=  - this.learning_rate * gij;\n              }\n            }\n            g[j] = 0.0; // zero out gradient so that we can begin accumulating anew\n          }\n        }\n      }\n\n      // appending softmax_loss for backwards compatibility, but from now on we will always use cost_loss\n      // in future, TODO: have to completely redo the way loss is done around the network as currently \n      // loss is a bit of a hack. Ideally, user should specify arbitrary number of loss functions on any layer\n      // and it should all be computed correctly and automatically. \n      return {fwd_time: fwd_time, bwd_time: bwd_time, \n              l2_decay_loss: l2_decay_loss, l1_decay_loss: l1_decay_loss,\n              cost_loss: cost_loss, softmax_loss: cost_loss, \n              loss: cost_loss + l1_decay_loss + l2_decay_loss}\n    }\n  }\n  \n  global.Trainer = Trainer;\n  global.SGDTrainer = Trainer; // backwards compatibility\n})(convnetjs);\n\n(function(global) {\n  \"use strict\";\n\n  // used utilities, make explicit local references\n  var randf = global.randf;\n  var randi = global.randi;\n  var Net = global.Net;\n  var Trainer = global.Trainer;\n  var maxmin = global.maxmin;\n  var randperm = global.randperm;\n  var weightedSample = global.weightedSample;\n  var getopt = global.getopt;\n  var arrUnique = global.arrUnique;\n\n  /*\n  A MagicNet takes data: a list of convnetjs.Vol(), and labels\n  which for now are assumed to be class indeces 0..K. MagicNet then:\n  - creates data folds for cross-validation\n  - samples candidate networks\n  - evaluates candidate networks on all data folds\n  - produces predictions by model-averaging the best networks\n  */\n  var MagicNet = function(data, labels, opt) {\n    var opt = opt || {};\n    if(typeof data === 'undefined') { data = []; }\n    if(typeof labels === 'undefined') { labels = []; }\n\n    // required inputs\n    this.data = data; // store these pointers to data\n    this.labels = labels;\n\n    // optional inputs\n    this.train_ratio = getopt(opt, 'train_ratio', 0.7);\n    this.num_folds = getopt(opt, 'num_folds', 10);\n    this.num_candidates = getopt(opt, 'num_candidates', 50); // we evaluate several in parallel\n    // how many epochs of data to train every network? for every fold?\n    // higher values mean higher accuracy in final results, but more expensive\n    this.num_epochs = getopt(opt, 'num_epochs', 50); \n    // number of best models to average during prediction. Usually higher = better\n    this.ensemble_size = getopt(opt, 'ensemble_size', 10);\n\n    // candidate parameters\n    this.batch_size_min = getopt(opt, 'batch_size_min', 10);\n    this.batch_size_max = getopt(opt, 'batch_size_max', 300);\n    this.l2_decay_min = getopt(opt, 'l2_decay_min', -4);\n    this.l2_decay_max = getopt(opt, 'l2_decay_max', 2);\n    this.learning_rate_min = getopt(opt, 'learning_rate_min', -4);\n    this.learning_rate_max = getopt(opt, 'learning_rate_max', 0);\n    this.momentum_min = getopt(opt, 'momentum_min', 0.9);\n    this.momentum_max = getopt(opt, 'momentum_max', 0.9);\n    this.neurons_min = getopt(opt, 'neurons_min', 5);\n    this.neurons_max = getopt(opt, 'neurons_max', 30);\n\n    // computed\n    this.folds = []; // data fold indices, gets filled by sampleFolds()\n    this.candidates = []; // candidate networks that are being currently evaluated\n    this.evaluated_candidates = []; // history of all candidates that were fully evaluated on all folds\n    this.unique_labels = arrUnique(labels);\n    this.iter = 0; // iteration counter, goes from 0 -> num_epochs * num_training_data\n    this.foldix = 0; // index of active fold\n\n    // callbacks\n    this.finish_fold_callback = null;\n    this.finish_batch_callback = null;\n\n    // initializations\n    if(this.data.length > 0) {\n      this.sampleFolds();\n      this.sampleCandidates();\n    }\n  };\n\n  MagicNet.prototype = {\n\n    // sets this.folds to a sampling of this.num_folds folds\n    sampleFolds: function() {\n      var N = this.data.length;\n      var num_train = Math.floor(this.train_ratio * N);\n      this.folds = []; // flush folds, if any\n      for(var i=0;i<this.num_folds;i++) {\n        var p = randperm(N);\n        this.folds.push({train_ix: p.slice(0, num_train), test_ix: p.slice(num_train, N)});\n      }\n    },\n\n    // returns a random candidate network\n    sampleCandidate: function() {\n      var input_depth = this.data[0].w.length;\n      var num_classes = this.unique_labels.length;\n\n      // sample network topology and hyperparameters\n      var layer_defs = [];\n      layer_defs.push({type:'input', out_sx:1, out_sy:1, out_depth: input_depth});\n      var nl = weightedSample([0,1,2,3], [0.2, 0.3, 0.3, 0.2]); // prefer nets with 1,2 hidden layers\n      for(var q=0;q<nl;q++) {\n        var ni = randi(this.neurons_min, this.neurons_max);\n        var act = ['tanh','maxout','relu'][randi(0,3)];\n        if(randf(0,1)<0.5) {\n          var dp = Math.random();\n          layer_defs.push({type:'fc', num_neurons: ni, activation: act, drop_prob: dp});\n        } else {\n          layer_defs.push({type:'fc', num_neurons: ni, activation: act});\n        }\n      }\n      layer_defs.push({type:'softmax', num_classes: num_classes});\n      var net = new Net();\n      net.makeLayers(layer_defs);\n\n      // sample training hyperparameters\n      var bs = randi(this.batch_size_min, this.batch_size_max); // batch size\n      var l2 = Math.pow(10, randf(this.l2_decay_min, this.l2_decay_max)); // l2 weight decay\n      var lr = Math.pow(10, randf(this.learning_rate_min, this.learning_rate_max)); // learning rate\n      var mom = randf(this.momentum_min, this.momentum_max); // momentum. Lets just use 0.9, works okay usually ;p\n      var tp = randf(0,1); // trainer type\n      var trainer_def;\n      if(tp<0.33) {\n        trainer_def = {method:'adadelta', batch_size:bs, l2_decay:l2};\n      } else if(tp<0.66) {\n        trainer_def = {method:'adagrad', learning_rate: lr, batch_size:bs, l2_decay:l2};\n      } else {\n        trainer_def = {method:'sgd', learning_rate: lr, momentum: mom, batch_size:bs, l2_decay:l2};\n      }\n      \n      var trainer = new Trainer(net, trainer_def);\n\n      var cand = {};\n      cand.acc = [];\n      cand.accv = 0; // this will maintained as sum(acc) for convenience\n      cand.layer_defs = layer_defs;\n      cand.trainer_def = trainer_def;\n      cand.net = net;\n      cand.trainer = trainer;\n      return cand;\n    },\n\n    // sets this.candidates with this.num_candidates candidate nets\n    sampleCandidates: function() {\n      this.candidates = []; // flush, if any\n      for(var i=0;i<this.num_candidates;i++) {\n        var cand = this.sampleCandidate();\n        this.candidates.push(cand);\n      }\n    },\n\n    step: function() {\n      \n      // run an example through current candidate\n      this.iter++;\n\n      // step all candidates on a random data point\n      var fold = this.folds[this.foldix]; // active fold\n      var dataix = fold.train_ix[randi(0, fold.train_ix.length)];\n      for(var k=0;k<this.candidates.length;k++) {\n        var x = this.data[dataix];\n        var l = this.labels[dataix];\n        this.candidates[k].trainer.train(x, l);\n      }\n\n      // process consequences: sample new folds, or candidates\n      var lastiter = this.num_epochs * fold.train_ix.length;\n      if(this.iter >= lastiter) {\n        // finished evaluation of this fold. Get final validation\n        // accuracies, record them, and go on to next fold.\n        var val_acc = this.evalValErrors();\n        for(var k=0;k<this.candidates.length;k++) {\n          var c = this.candidates[k];\n          c.acc.push(val_acc[k]);\n          c.accv += val_acc[k];\n        }\n        this.iter = 0; // reset step number\n        this.foldix++; // increment fold\n\n        if(this.finish_fold_callback !== null) {\n          this.finish_fold_callback();\n        }\n\n        if(this.foldix >= this.folds.length) {\n          // we finished all folds as well! Record these candidates\n          // and sample new ones to evaluate.\n          for(var k=0;k<this.candidates.length;k++) {\n            this.evaluated_candidates.push(this.candidates[k]);\n          }\n          // sort evaluated candidates according to accuracy achieved\n          this.evaluated_candidates.sort(function(a, b) { \n            return (a.accv / a.acc.length) \n                 > (b.accv / b.acc.length) \n                 ? -1 : 1;\n          });\n          // and clip only to the top few ones (lets place limit at 3*ensemble_size)\n          // otherwise there are concerns with keeping these all in memory \n          // if MagicNet is being evaluated for a very long time\n          if(this.evaluated_candidates.length > 3 * this.ensemble_size) {\n            this.evaluated_candidates = this.evaluated_candidates.slice(0, 3 * this.ensemble_size);\n          }\n          if(this.finish_batch_callback !== null) {\n            this.finish_batch_callback();\n          }\n          this.sampleCandidates(); // begin with new candidates\n          this.foldix = 0; // reset this\n        } else {\n          // we will go on to another fold. reset all candidates nets\n          for(var k=0;k<this.candidates.length;k++) {\n            var c = this.candidates[k];\n            var net = new Net();\n            net.makeLayers(c.layer_defs);\n            var trainer = new Trainer(net, c.trainer_def);\n            c.net = net;\n            c.trainer = trainer;\n          }\n        }\n      }\n    },\n\n    evalValErrors: function() {\n      // evaluate candidates on validation data and return performance of current networks\n      // as simple list\n      var vals = [];\n      var fold = this.folds[this.foldix]; // active fold\n      for(var k=0;k<this.candidates.length;k++) {\n        var net = this.candidates[k].net;\n        var v = 0.0;\n        for(var q=0;q<fold.test_ix.length;q++) {\n          var x = this.data[fold.test_ix[q]];\n          var l = this.labels[fold.test_ix[q]];\n          net.forward(x);\n          var yhat = net.getPrediction();\n          v += (yhat === l ? 1.0 : 0.0); // 0 1 loss\n        }\n        v /= fold.test_ix.length; // normalize\n        vals.push(v);\n      }\n      return vals;\n    },\n\n    // returns prediction scores for given test data point, as Vol\n    // uses an averaged prediction from the best ensemble_size models\n    // x is a Vol.\n    predict_soft: function(data) {\n      // forward prop the best networks\n      // and accumulate probabilities at last layer into a an output Vol\n      var nv = Math.min(this.ensemble_size, this.evaluated_candidates.length);\n      if(nv === 0) { return new convnetjs.Vol(0,0,0); } // not sure what to do here? we're not ready yet\n      var xout, n;\n      for(var j=0;j<nv;j++) {\n        var net = this.evaluated_candidates[j].net;\n        var x = net.forward(data);\n        if(j===0) { \n          xout = x; \n          n = x.w.length; \n        } else {\n          // add it on\n          for(var d=0;d<n;d++) {\n            xout.w[d] += x.w[d];\n          }\n        }\n      }\n      // produce average\n      for(var d=0;d<n;d++) {\n        xout.w[d] /= n;\n      }\n      return xout;\n    },\n\n    predict: function(data) {\n      var xout = this.predict_soft(data);\n      if(xout.w.length !== 0) {\n        var stats = maxmin(xout.w);\n        var predicted_label = stats.maxi; \n      } else {\n        var predicted_label = -1; // error out\n      }\n      return predicted_label;\n\n    },\n\n    toJSON: function() {\n      // dump the top ensemble_size networks as a list\n      var nv = Math.min(this.ensemble_size, this.evaluated_candidates.length);\n      var json = {};\n      json.nets = [];\n      for(var i=0;i<nv;i++) {\n        json.nets.push(this.evaluated_candidates[i].net.toJSON());\n      }\n      return json;\n    },\n\n    fromJSON: function(json) {\n      this.ensemble_size = json.nets.length;\n      this.evaluated_candidates = [];\n      for(var i=0;i<this.ensemble_size;i++) {\n        var net = new Net();\n        net.fromJSON(json.nets[i]);\n        var dummy_candidate = {};\n        dummy_candidate.net = net;\n        this.evaluated_candidates.push(dummy_candidate);\n      }\n    },\n\n    // callback functions\n    // called when a fold is finished, while evaluating a batch\n    onFinishFold: function(f) { this.finish_fold_callback = f; },\n    // called when a batch of candidates has finished evaluating\n    onFinishBatch: function(f) { this.finish_batch_callback = f; }\n    \n  };\n\n  global.MagicNet = MagicNet;\n})(convnetjs);\nthis.convnetjs = convnetjs;\n","/*\n (c) 2013, Vladimir Agafonkin\n Simplify.js, a high-performance JS polyline simplification library\n mourner.github.io/simplify-js\n*/\n\nthis.simplify = (function () { 'use strict';\n\n// to suit your point format, run search/replace for '.x' and '.y';\n// for 3D version, see 3d branch (configurability would draw significant performance overhead)\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1.x - p2.x,\n        dy = p1.y - p2.y;\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction getSqSegDist(p, p1, p2) {\n\n    var x = p1.x,\n        y = p1.y,\n        dx = p2.x - x,\n        dy = p2.y - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p.x - x) * dx + (p.y - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2.x;\n            y = p2.y;\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p.x - x;\n    dy = p.y - y;\n\n    return dx * dx + dy * dy;\n}\n// rest of the code doesn't care about point format\n\n// basic distance-based simplification\nfunction simplifyRadialDist(points, sqTolerance) {\n\n    var prevPoint = points[0],\n        newPoints = [prevPoint],\n        point;\n\n    for (var i = 1, len = points.length; i < len; i++) {\n        point = points[i];\n\n        if (getSqDist(point, prevPoint) > sqTolerance) {\n            newPoints.push(point);\n            prevPoint = point;\n        }\n    }\n\n    if (prevPoint !== point) newPoints.push(point);\n\n    return newPoints;\n}\n\nfunction simplifyDPStep(points, first, last, sqTolerance, simplified) {\n    var maxSqDist = sqTolerance,\n        index;\n\n    for (var i = first + 1; i < last; i++) {\n        var sqDist = getSqSegDist(points[i], points[first], points[last]);\n\n        if (sqDist > maxSqDist) {\n            index = i;\n            maxSqDist = sqDist;\n        }\n    }\n\n    if (maxSqDist > sqTolerance) {\n        if (index - first > 1) simplifyDPStep(points, first, index, sqTolerance, simplified);\n        simplified.push(points[index]);\n        if (last - index > 1) simplifyDPStep(points, index, last, sqTolerance, simplified);\n    }\n}\n\n// simplification using Ramer-Douglas-Peucker algorithm\nfunction simplifyDouglasPeucker(points, sqTolerance) {\n    var last = points.length - 1;\n\n    var simplified = [points[0]];\n    simplifyDPStep(points, 0, last, sqTolerance, simplified);\n    simplified.push(points[last]);\n\n    return simplified;\n}\n\n// both algorithms combined for awesome performance\nfunction simplify(points, tolerance, highestQuality) {\n\n    if (points.length <= 2) return points;\n\n    var sqTolerance = tolerance !== undefined ? tolerance * tolerance : 1;\n\n    points = highestQuality ? points : simplifyRadialDist(points, sqTolerance);\n    points = simplifyDouglasPeucker(points, sqTolerance);\n\n    return points;\n}\n\n// export as AMD module / Node module / browser or worker variable\nif (typeof define === 'function' && define.amd) define(function() { return simplify; });\nelse if (typeof module !== 'undefined') module.exports = simplify;\nelse return simplify;\n\n})();\n","/*!\nCopyright (C) 2010-2013 Raymond Hill: https://github.com/gorhill/Javascript-Voronoi\nMIT License: See https://github.com/gorhill/Javascript-Voronoi/LICENSE.md\n*/\n/*\nAuthor: Raymond Hill (rhill@raymondhill.net)\nContributor: Jesse Morgan (morgajel@gmail.com)\nFile: rhill-voronoi-core.js\nVersion: 0.98\nDate: January 21, 2013\nDescription: This is my personal Javascript implementation of\nSteven Fortune's algorithm to compute Voronoi diagrams.\n\nLicense: See https://github.com/gorhill/Javascript-Voronoi/LICENSE.md\nCredits: See https://github.com/gorhill/Javascript-Voronoi/CREDITS.md\nHistory: See https://github.com/gorhill/Javascript-Voronoi/CHANGELOG.md\n\n## Usage:\n\n  var sites = [{x:300,y:300}, {x:100,y:100}, {x:200,y:500}, {x:250,y:450}, {x:600,y:150}];\n  // xl, xr means x left, x right\n  // yt, yb means y top, y bottom\n  var bbox = {xl:0, xr:800, yt:0, yb:600};\n  var voronoi = new Voronoi();\n  // pass an object which exhibits xl, xr, yt, yb properties. The bounding\n  // box will be used to connect unbound edges, and to close open cells\n  result = voronoi.compute(sites, bbox);\n  // render, further analyze, etc.\n\nReturn value:\n  An object with the following properties:\n\n  result.vertices = an array of unordered, unique Voronoi.Vertex objects making\n    up the Voronoi diagram.\n  result.edges = an array of unordered, unique Voronoi.Edge objects making up\n    the Voronoi diagram.\n  result.cells = an array of Voronoi.Cell object making up the Voronoi diagram.\n    A Cell object might have an empty array of halfedges, meaning no Voronoi\n    cell could be computed for a particular cell.\n  result.execTime = the time it took to compute the Voronoi diagram, in\n    milliseconds.\n\nVoronoi.Vertex object:\n  x: The x position of the vertex.\n  y: The y position of the vertex.\n\nVoronoi.Edge object:\n  lSite: the Voronoi site object at the left of this Voronoi.Edge object.\n  rSite: the Voronoi site object at the right of this Voronoi.Edge object (can\n    be null).\n  va: an object with an 'x' and a 'y' property defining the start point\n    (relative to the Voronoi site on the left) of this Voronoi.Edge object.\n  vb: an object with an 'x' and a 'y' property defining the end point\n    (relative to Voronoi site on the left) of this Voronoi.Edge object.\n\n  For edges which are used to close open cells (using the supplied bounding\n  box), the rSite property will be null.\n\nVoronoi.Cell object:\n  site: the Voronoi site object associated with the Voronoi cell.\n  halfedges: an array of Voronoi.Halfedge objects, ordered counterclockwise,\n    defining the polygon for this Voronoi cell.\n\nVoronoi.Halfedge object:\n  site: the Voronoi site object owning this Voronoi.Halfedge object.\n  edge: a reference to the unique Voronoi.Edge object underlying this\n    Voronoi.Halfedge object.\n  getStartpoint(): a method returning an object with an 'x' and a 'y' property\n    for the start point of this halfedge. Keep in mind halfedges are always\n    countercockwise.\n  getEndpoint(): a method returning an object with an 'x' and a 'y' property\n    for the end point of this halfedge. Keep in mind halfedges are always\n    countercockwise.\n\nTODO: Identify opportunities for performance improvement.\n\nTODO: Let the user close the Voronoi cells, do not do it automatically. Not only let\n      him close the cells, but also allow him to close more than once using a different\n      bounding box for the same Voronoi diagram.\n*/\n\n/*global Math */\n\n// ---------------------------------------------------------------------------\n\nfunction Voronoi() {\n    this.vertices = null;\n    this.edges = null;\n    this.cells = null;\n    this.toRecycle = null;\n    this.beachsectionJunkyard = [];\n    this.circleEventJunkyard = [];\n    this.vertexJunkyard = [];\n    this.edgeJunkyard = [];\n    this.cellJunkyard = [];\n    }\n\n// ---------------------------------------------------------------------------\n\nVoronoi.prototype.reset = function() {\n    if (!this.beachline) {\n        this.beachline = new this.RBTree();\n        }\n    // Move leftover beachsections to the beachsection junkyard.\n    if (this.beachline.root) {\n        var beachsection = this.beachline.getFirst(this.beachline.root);\n        while (beachsection) {\n            this.beachsectionJunkyard.push(beachsection); // mark for reuse\n            beachsection = beachsection.rbNext;\n            }\n        }\n    this.beachline.root = null;\n    if (!this.circleEvents) {\n        this.circleEvents = new this.RBTree();\n        }\n    this.circleEvents.root = this.firstCircleEvent = null;\n    this.vertices = [];\n    this.edges = [];\n    this.cells = [];\n    };\n\nVoronoi.prototype.sqrt = Math.sqrt;\nVoronoi.prototype.abs = Math.abs;\nVoronoi.prototype.ε = Voronoi.ε = 1e-9;\nVoronoi.prototype.invε = Voronoi.invε = 1.0 / Voronoi.ε;\nVoronoi.prototype.equalWithEpsilon = function(a,b){return this.abs(a-b)<1e-9;};\nVoronoi.prototype.greaterThanWithEpsilon = function(a,b){return a-b>1e-9;};\nVoronoi.prototype.greaterThanOrEqualWithEpsilon = function(a,b){return b-a<1e-9;};\nVoronoi.prototype.lessThanWithEpsilon = function(a,b){return b-a>1e-9;};\nVoronoi.prototype.lessThanOrEqualWithEpsilon = function(a,b){return a-b<1e-9;};\n\n// ---------------------------------------------------------------------------\n// Red-Black tree code (based on C version of \"rbtree\" by Franck Bui-Huu\n// https://github.com/fbuihuu/libtree/blob/master/rb.c\n\nVoronoi.prototype.RBTree = function() {\n    this.root = null;\n    };\n\nVoronoi.prototype.RBTree.prototype.rbInsertSuccessor = function(node, successor) {\n    var parent;\n    if (node) {\n        // >>> rhill 2011-05-27: Performance: cache previous/next nodes\n        successor.rbPrevious = node;\n        successor.rbNext = node.rbNext;\n        if (node.rbNext) {\n            node.rbNext.rbPrevious = successor;\n            }\n        node.rbNext = successor;\n        // <<<\n        if (node.rbRight) {\n            // in-place expansion of node.rbRight.getFirst();\n            node = node.rbRight;\n            while (node.rbLeft) {node = node.rbLeft;}\n            node.rbLeft = successor;\n            }\n        else {\n            node.rbRight = successor;\n            }\n        parent = node;\n        }\n    // rhill 2011-06-07: if node is null, successor must be inserted\n    // to the left-most part of the tree\n    else if (this.root) {\n        node = this.getFirst(this.root);\n        // >>> Performance: cache previous/next nodes\n        successor.rbPrevious = null;\n        successor.rbNext = node;\n        node.rbPrevious = successor;\n        // <<<\n        node.rbLeft = successor;\n        parent = node;\n        }\n    else {\n        // >>> Performance: cache previous/next nodes\n        successor.rbPrevious = successor.rbNext = null;\n        // <<<\n        this.root = successor;\n        parent = null;\n        }\n    successor.rbLeft = successor.rbRight = null;\n    successor.rbParent = parent;\n    successor.rbRed = true;\n    // Fixup the modified tree by recoloring nodes and performing\n    // rotations (2 at most) hence the red-black tree properties are\n    // preserved.\n    var grandpa, uncle;\n    node = successor;\n    while (parent && parent.rbRed) {\n        grandpa = parent.rbParent;\n        if (parent === grandpa.rbLeft) {\n            uncle = grandpa.rbRight;\n            if (uncle && uncle.rbRed) {\n                parent.rbRed = uncle.rbRed = false;\n                grandpa.rbRed = true;\n                node = grandpa;\n                }\n            else {\n                if (node === parent.rbRight) {\n                    this.rbRotateLeft(parent);\n                    node = parent;\n                    parent = node.rbParent;\n                    }\n                parent.rbRed = false;\n                grandpa.rbRed = true;\n                this.rbRotateRight(grandpa);\n                }\n            }\n        else {\n            uncle = grandpa.rbLeft;\n            if (uncle && uncle.rbRed) {\n                parent.rbRed = uncle.rbRed = false;\n                grandpa.rbRed = true;\n                node = grandpa;\n                }\n            else {\n                if (node === parent.rbLeft) {\n                    this.rbRotateRight(parent);\n                    node = parent;\n                    parent = node.rbParent;\n                    }\n                parent.rbRed = false;\n                grandpa.rbRed = true;\n                this.rbRotateLeft(grandpa);\n                }\n            }\n        parent = node.rbParent;\n        }\n    this.root.rbRed = false;\n    };\n\nVoronoi.prototype.RBTree.prototype.rbRemoveNode = function(node) {\n    // >>> rhill 2011-05-27: Performance: cache previous/next nodes\n    if (node.rbNext) {\n        node.rbNext.rbPrevious = node.rbPrevious;\n        }\n    if (node.rbPrevious) {\n        node.rbPrevious.rbNext = node.rbNext;\n        }\n    node.rbNext = node.rbPrevious = null;\n    // <<<\n    var parent = node.rbParent,\n        left = node.rbLeft,\n        right = node.rbRight,\n        next;\n    if (!left) {\n        next = right;\n        }\n    else if (!right) {\n        next = left;\n        }\n    else {\n        next = this.getFirst(right);\n        }\n    if (parent) {\n        if (parent.rbLeft === node) {\n            parent.rbLeft = next;\n            }\n        else {\n            parent.rbRight = next;\n            }\n        }\n    else {\n        this.root = next;\n        }\n    // enforce red-black rules\n    var isRed;\n    if (left && right) {\n        isRed = next.rbRed;\n        next.rbRed = node.rbRed;\n        next.rbLeft = left;\n        left.rbParent = next;\n        if (next !== right) {\n            parent = next.rbParent;\n            next.rbParent = node.rbParent;\n            node = next.rbRight;\n            parent.rbLeft = node;\n            next.rbRight = right;\n            right.rbParent = next;\n            }\n        else {\n            next.rbParent = parent;\n            parent = next;\n            node = next.rbRight;\n            }\n        }\n    else {\n        isRed = node.rbRed;\n        node = next;\n        }\n    // 'node' is now the sole successor's child and 'parent' its\n    // new parent (since the successor can have been moved)\n    if (node) {\n        node.rbParent = parent;\n        }\n    // the 'easy' cases\n    if (isRed) {return;}\n    if (node && node.rbRed) {\n        node.rbRed = false;\n        return;\n        }\n    // the other cases\n    var sibling;\n    do {\n        if (node === this.root) {\n            break;\n            }\n        if (node === parent.rbLeft) {\n            sibling = parent.rbRight;\n            if (sibling.rbRed) {\n                sibling.rbRed = false;\n                parent.rbRed = true;\n                this.rbRotateLeft(parent);\n                sibling = parent.rbRight;\n                }\n            if ((sibling.rbLeft && sibling.rbLeft.rbRed) || (sibling.rbRight && sibling.rbRight.rbRed)) {\n                if (!sibling.rbRight || !sibling.rbRight.rbRed) {\n                    sibling.rbLeft.rbRed = false;\n                    sibling.rbRed = true;\n                    this.rbRotateRight(sibling);\n                    sibling = parent.rbRight;\n                    }\n                sibling.rbRed = parent.rbRed;\n                parent.rbRed = sibling.rbRight.rbRed = false;\n                this.rbRotateLeft(parent);\n                node = this.root;\n                break;\n                }\n            }\n        else {\n            sibling = parent.rbLeft;\n            if (sibling.rbRed) {\n                sibling.rbRed = false;\n                parent.rbRed = true;\n                this.rbRotateRight(parent);\n                sibling = parent.rbLeft;\n                }\n            if ((sibling.rbLeft && sibling.rbLeft.rbRed) || (sibling.rbRight && sibling.rbRight.rbRed)) {\n                if (!sibling.rbLeft || !sibling.rbLeft.rbRed) {\n                    sibling.rbRight.rbRed = false;\n                    sibling.rbRed = true;\n                    this.rbRotateLeft(sibling);\n                    sibling = parent.rbLeft;\n                    }\n                sibling.rbRed = parent.rbRed;\n                parent.rbRed = sibling.rbLeft.rbRed = false;\n                this.rbRotateRight(parent);\n                node = this.root;\n                break;\n                }\n            }\n        sibling.rbRed = true;\n        node = parent;\n        parent = parent.rbParent;\n    } while (!node.rbRed);\n    if (node) {node.rbRed = false;}\n    };\n\nVoronoi.prototype.RBTree.prototype.rbRotateLeft = function(node) {\n    var p = node,\n        q = node.rbRight, // can't be null\n        parent = p.rbParent;\n    if (parent) {\n        if (parent.rbLeft === p) {\n            parent.rbLeft = q;\n            }\n        else {\n            parent.rbRight = q;\n            }\n        }\n    else {\n        this.root = q;\n        }\n    q.rbParent = parent;\n    p.rbParent = q;\n    p.rbRight = q.rbLeft;\n    if (p.rbRight) {\n        p.rbRight.rbParent = p;\n        }\n    q.rbLeft = p;\n    };\n\nVoronoi.prototype.RBTree.prototype.rbRotateRight = function(node) {\n    var p = node,\n        q = node.rbLeft, // can't be null\n        parent = p.rbParent;\n    if (parent) {\n        if (parent.rbLeft === p) {\n            parent.rbLeft = q;\n            }\n        else {\n            parent.rbRight = q;\n            }\n        }\n    else {\n        this.root = q;\n        }\n    q.rbParent = parent;\n    p.rbParent = q;\n    p.rbLeft = q.rbRight;\n    if (p.rbLeft) {\n        p.rbLeft.rbParent = p;\n        }\n    q.rbRight = p;\n    };\n\nVoronoi.prototype.RBTree.prototype.getFirst = function(node) {\n    while (node.rbLeft) {\n        node = node.rbLeft;\n        }\n    return node;\n    };\n\nVoronoi.prototype.RBTree.prototype.getLast = function(node) {\n    while (node.rbRight) {\n        node = node.rbRight;\n        }\n    return node;\n    };\n\n// ---------------------------------------------------------------------------\n// Diagram methods\n\nVoronoi.prototype.Diagram = function(site) {\n    this.site = site;\n    };\n\n// ---------------------------------------------------------------------------\n// Cell methods\n\nVoronoi.prototype.Cell = function(site) {\n    this.site = site;\n    this.halfedges = [];\n    this.closeMe = false;\n    };\n\nVoronoi.prototype.Cell.prototype.init = function(site) {\n    this.site = site;\n    this.halfedges = [];\n    this.closeMe = false;\n    return this;\n    };\n\nVoronoi.prototype.createCell = function(site) {\n    var cell = this.cellJunkyard.pop();\n    if ( cell ) {\n        return cell.init(site);\n        }\n    return new this.Cell(site);\n    };\n\nVoronoi.prototype.Cell.prototype.prepareHalfedges = function() {\n    var halfedges = this.halfedges,\n        iHalfedge = halfedges.length,\n        edge;\n    // get rid of unused halfedges\n    // rhill 2011-05-27: Keep it simple, no point here in trying\n    // to be fancy: dangling edges are a typically a minority.\n    while (iHalfedge--) {\n        edge = halfedges[iHalfedge].edge;\n        if (!edge.vb || !edge.va) {\n            halfedges.splice(iHalfedge,1);\n            }\n        }\n\n    // rhill 2011-05-26: I tried to use a binary search at insertion\n    // time to keep the array sorted on-the-fly (in Cell.addHalfedge()).\n    // There was no real benefits in doing so, performance on\n    // Firefox 3.6 was improved marginally, while performance on\n    // Opera 11 was penalized marginally.\n    halfedges.sort(function(a,b){return b.angle-a.angle;});\n    return halfedges.length;\n    };\n\n// Return a list of the neighbor Ids\nVoronoi.prototype.Cell.prototype.getNeighborIds = function() {\n    var neighbors = [],\n        iHalfedge = this.halfedges.length,\n        edge;\n    while (iHalfedge--){\n        edge = this.halfedges[iHalfedge].edge;\n        if (edge.lSite !== null && edge.lSite.voronoiId != this.site.voronoiId) {\n            neighbors.push(edge.lSite.voronoiId);\n            }\n        else if (edge.rSite !== null && edge.rSite.voronoiId != this.site.voronoiId){\n            neighbors.push(edge.rSite.voronoiId);\n            }\n        }\n    return neighbors;\n    };\n\n// Compute bounding box\n//\nVoronoi.prototype.Cell.prototype.getBbox = function() {\n    var halfedges = this.halfedges,\n        iHalfedge = halfedges.length,\n        xmin = Infinity,\n        ymin = Infinity,\n        xmax = -Infinity,\n        ymax = -Infinity,\n        v, vx, vy;\n    while (iHalfedge--) {\n        v = halfedges[iHalfedge].getStartpoint();\n        vx = v.x;\n        vy = v.y;\n        if (vx < xmin) {xmin = vx;}\n        if (vy < ymin) {ymin = vy;}\n        if (vx > xmax) {xmax = vx;}\n        if (vy > ymax) {ymax = vy;}\n        // we dont need to take into account end point,\n        // since each end point matches a start point\n        }\n    return {\n        x: xmin,\n        y: ymin,\n        width: xmax-xmin,\n        height: ymax-ymin\n        };\n    };\n\n// Return whether a point is inside, on, or outside the cell:\n//   -1: point is outside the perimeter of the cell\n//    0: point is on the perimeter of the cell\n//    1: point is inside the perimeter of the cell\n//\nVoronoi.prototype.Cell.prototype.pointIntersection = function(x, y) {\n    // Check if point in polygon. Since all polygons of a Voronoi\n    // diagram are convex, then:\n    // http://paulbourke.net/geometry/polygonmesh/\n    // Solution 3 (2D):\n    //   \"If the polygon is convex then one can consider the polygon\n    //   \"as a 'path' from the first vertex. A point is on the interior\n    //   \"of this polygons if it is always on the same side of all the\n    //   \"line segments making up the path. ...\n    //   \"(y - y0) (x1 - x0) - (x - x0) (y1 - y0)\n    //   \"if it is less than 0 then P is to the right of the line segment,\n    //   \"if greater than 0 it is to the left, if equal to 0 then it lies\n    //   \"on the line segment\"\n    var halfedges = this.halfedges,\n        iHalfedge = halfedges.length,\n        halfedge,\n        p0, p1, r;\n    while (iHalfedge--) {\n        halfedge = halfedges[iHalfedge];\n        p0 = halfedge.getStartpoint();\n        p1 = halfedge.getEndpoint();\n        r = (y-p0.y)*(p1.x-p0.x)-(x-p0.x)*(p1.y-p0.y);\n        if (!r) {\n            return 0;\n            }\n        if (r > 0) {\n            return -1;\n            }\n        }\n    return 1;\n    };\n\n// ---------------------------------------------------------------------------\n// Edge methods\n//\n\nVoronoi.prototype.Vertex = function(x, y) {\n    this.x = x;\n    this.y = y;\n    };\n\nVoronoi.prototype.Edge = function(lSite, rSite) {\n    this.lSite = lSite;\n    this.rSite = rSite;\n    this.va = this.vb = null;\n    };\n\nVoronoi.prototype.Halfedge = function(edge, lSite, rSite) {\n    this.site = lSite;\n    this.edge = edge;\n    // 'angle' is a value to be used for properly sorting the\n    // halfsegments counterclockwise. By convention, we will\n    // use the angle of the line defined by the 'site to the left'\n    // to the 'site to the right'.\n    // However, border edges have no 'site to the right': thus we\n    // use the angle of line perpendicular to the halfsegment (the\n    // edge should have both end points defined in such case.)\n    if (rSite) {\n        this.angle = Math.atan2(rSite.y-lSite.y, rSite.x-lSite.x);\n        }\n    else {\n        var va = edge.va,\n            vb = edge.vb;\n        // rhill 2011-05-31: used to call getStartpoint()/getEndpoint(),\n        // but for performance purpose, these are expanded in place here.\n        this.angle = edge.lSite === lSite ?\n            Math.atan2(vb.x-va.x, va.y-vb.y) :\n            Math.atan2(va.x-vb.x, vb.y-va.y);\n        }\n    };\n\nVoronoi.prototype.createHalfedge = function(edge, lSite, rSite) {\n    return new this.Halfedge(edge, lSite, rSite);\n    };\n\nVoronoi.prototype.Halfedge.prototype.getStartpoint = function() {\n    return this.edge.lSite === this.site ? this.edge.va : this.edge.vb;\n    };\n\nVoronoi.prototype.Halfedge.prototype.getEndpoint = function() {\n    return this.edge.lSite === this.site ? this.edge.vb : this.edge.va;\n    };\n\n\n\n// this create and add a vertex to the internal collection\n\nVoronoi.prototype.createVertex = function(x, y) {\n    var v = this.vertexJunkyard.pop();\n    if ( !v ) {\n        v = new this.Vertex(x, y);\n        }\n    else {\n        v.x = x;\n        v.y = y;\n        }\n    this.vertices.push(v);\n    return v;\n    };\n\n// this create and add an edge to internal collection, and also create\n// two halfedges which are added to each site's counterclockwise array\n// of halfedges.\n\nVoronoi.prototype.createEdge = function(lSite, rSite, va, vb) {\n    var edge = this.edgeJunkyard.pop();\n    if ( !edge ) {\n        edge = new this.Edge(lSite, rSite);\n        }\n    else {\n        edge.lSite = lSite;\n        edge.rSite = rSite;\n        edge.va = edge.vb = null;\n        }\n\n    this.edges.push(edge);\n    if (va) {\n        this.setEdgeStartpoint(edge, lSite, rSite, va);\n        }\n    if (vb) {\n        this.setEdgeEndpoint(edge, lSite, rSite, vb);\n        }\n    this.cells[lSite.voronoiId].halfedges.push(this.createHalfedge(edge, lSite, rSite));\n    this.cells[rSite.voronoiId].halfedges.push(this.createHalfedge(edge, rSite, lSite));\n    return edge;\n    };\n\nVoronoi.prototype.createBorderEdge = function(lSite, va, vb) {\n    var edge = this.edgeJunkyard.pop();\n    if ( !edge ) {\n        edge = new this.Edge(lSite, null);\n        }\n    else {\n        edge.lSite = lSite;\n        edge.rSite = null;\n        }\n    edge.va = va;\n    edge.vb = vb;\n    this.edges.push(edge);\n    return edge;\n    };\n\nVoronoi.prototype.setEdgeStartpoint = function(edge, lSite, rSite, vertex) {\n    if (!edge.va && !edge.vb) {\n        edge.va = vertex;\n        edge.lSite = lSite;\n        edge.rSite = rSite;\n        }\n    else if (edge.lSite === rSite) {\n        edge.vb = vertex;\n        }\n    else {\n        edge.va = vertex;\n        }\n    };\n\nVoronoi.prototype.setEdgeEndpoint = function(edge, lSite, rSite, vertex) {\n    this.setEdgeStartpoint(edge, rSite, lSite, vertex);\n    };\n\n// ---------------------------------------------------------------------------\n// Beachline methods\n\n// rhill 2011-06-07: For some reasons, performance suffers significantly\n// when instanciating a literal object instead of an empty ctor\nVoronoi.prototype.Beachsection = function() {\n    };\n\n// rhill 2011-06-02: A lot of Beachsection instanciations\n// occur during the computation of the Voronoi diagram,\n// somewhere between the number of sites and twice the\n// number of sites, while the number of Beachsections on the\n// beachline at any given time is comparatively low. For this\n// reason, we reuse already created Beachsections, in order\n// to avoid new memory allocation. This resulted in a measurable\n// performance gain.\n\nVoronoi.prototype.createBeachsection = function(site) {\n    var beachsection = this.beachsectionJunkyard.pop();\n    if (!beachsection) {\n        beachsection = new this.Beachsection();\n        }\n    beachsection.site = site;\n    return beachsection;\n    };\n\n// calculate the left break point of a particular beach section,\n// given a particular sweep line\nVoronoi.prototype.leftBreakPoint = function(arc, directrix) {\n    // http://en.wikipedia.org/wiki/Parabola\n    // http://en.wikipedia.org/wiki/Quadratic_equation\n    // h1 = x1,\n    // k1 = (y1+directrix)/2,\n    // h2 = x2,\n    // k2 = (y2+directrix)/2,\n    // p1 = k1-directrix,\n    // a1 = 1/(4*p1),\n    // b1 = -h1/(2*p1),\n    // c1 = h1*h1/(4*p1)+k1,\n    // p2 = k2-directrix,\n    // a2 = 1/(4*p2),\n    // b2 = -h2/(2*p2),\n    // c2 = h2*h2/(4*p2)+k2,\n    // x = (-(b2-b1) + Math.sqrt((b2-b1)*(b2-b1) - 4*(a2-a1)*(c2-c1))) / (2*(a2-a1))\n    // When x1 become the x-origin:\n    // h1 = 0,\n    // k1 = (y1+directrix)/2,\n    // h2 = x2-x1,\n    // k2 = (y2+directrix)/2,\n    // p1 = k1-directrix,\n    // a1 = 1/(4*p1),\n    // b1 = 0,\n    // c1 = k1,\n    // p2 = k2-directrix,\n    // a2 = 1/(4*p2),\n    // b2 = -h2/(2*p2),\n    // c2 = h2*h2/(4*p2)+k2,\n    // x = (-b2 + Math.sqrt(b2*b2 - 4*(a2-a1)*(c2-k1))) / (2*(a2-a1)) + x1\n\n    // change code below at your own risk: care has been taken to\n    // reduce errors due to computers' finite arithmetic precision.\n    // Maybe can still be improved, will see if any more of this\n    // kind of errors pop up again.\n    var site = arc.site,\n        rfocx = site.x,\n        rfocy = site.y,\n        pby2 = rfocy-directrix;\n    // parabola in degenerate case where focus is on directrix\n    if (!pby2) {\n        return rfocx;\n        }\n    var lArc = arc.rbPrevious;\n    if (!lArc) {\n        return -Infinity;\n        }\n    site = lArc.site;\n    var lfocx = site.x,\n        lfocy = site.y,\n        plby2 = lfocy-directrix;\n    // parabola in degenerate case where focus is on directrix\n    if (!plby2) {\n        return lfocx;\n        }\n    var hl = lfocx-rfocx,\n        aby2 = 1/pby2-1/plby2,\n        b = hl/plby2;\n    if (aby2) {\n        return (-b+this.sqrt(b*b-2*aby2*(hl*hl/(-2*plby2)-lfocy+plby2/2+rfocy-pby2/2)))/aby2+rfocx;\n        }\n    // both parabolas have same distance to directrix, thus break point is midway\n    return (rfocx+lfocx)/2;\n    };\n\n// calculate the right break point of a particular beach section,\n// given a particular directrix\nVoronoi.prototype.rightBreakPoint = function(arc, directrix) {\n    var rArc = arc.rbNext;\n    if (rArc) {\n        return this.leftBreakPoint(rArc, directrix);\n        }\n    var site = arc.site;\n    return site.y === directrix ? site.x : Infinity;\n    };\n\nVoronoi.prototype.detachBeachsection = function(beachsection) {\n    this.detachCircleEvent(beachsection); // detach potentially attached circle event\n    this.beachline.rbRemoveNode(beachsection); // remove from RB-tree\n    this.beachsectionJunkyard.push(beachsection); // mark for reuse\n    };\n\nVoronoi.prototype.removeBeachsection = function(beachsection) {\n    var circle = beachsection.circleEvent,\n        x = circle.x,\n        y = circle.ycenter,\n        vertex = this.createVertex(x, y),\n        previous = beachsection.rbPrevious,\n        next = beachsection.rbNext,\n        disappearingTransitions = [beachsection],\n        abs_fn = Math.abs;\n\n    // remove collapsed beachsection from beachline\n    this.detachBeachsection(beachsection);\n\n    // there could be more than one empty arc at the deletion point, this\n    // happens when more than two edges are linked by the same vertex,\n    // so we will collect all those edges by looking up both sides of\n    // the deletion point.\n    // by the way, there is *always* a predecessor/successor to any collapsed\n    // beach section, it's just impossible to have a collapsing first/last\n    // beach sections on the beachline, since they obviously are unconstrained\n    // on their left/right side.\n\n    // look left\n    var lArc = previous;\n    while (lArc.circleEvent && abs_fn(x-lArc.circleEvent.x)<1e-9 && abs_fn(y-lArc.circleEvent.ycenter)<1e-9) {\n        previous = lArc.rbPrevious;\n        disappearingTransitions.unshift(lArc);\n        this.detachBeachsection(lArc); // mark for reuse\n        lArc = previous;\n        }\n    // even though it is not disappearing, I will also add the beach section\n    // immediately to the left of the left-most collapsed beach section, for\n    // convenience, since we need to refer to it later as this beach section\n    // is the 'left' site of an edge for which a start point is set.\n    disappearingTransitions.unshift(lArc);\n    this.detachCircleEvent(lArc);\n\n    // look right\n    var rArc = next;\n    while (rArc.circleEvent && abs_fn(x-rArc.circleEvent.x)<1e-9 && abs_fn(y-rArc.circleEvent.ycenter)<1e-9) {\n        next = rArc.rbNext;\n        disappearingTransitions.push(rArc);\n        this.detachBeachsection(rArc); // mark for reuse\n        rArc = next;\n        }\n    // we also have to add the beach section immediately to the right of the\n    // right-most collapsed beach section, since there is also a disappearing\n    // transition representing an edge's start point on its left.\n    disappearingTransitions.push(rArc);\n    this.detachCircleEvent(rArc);\n\n    // walk through all the disappearing transitions between beach sections and\n    // set the start point of their (implied) edge.\n    var nArcs = disappearingTransitions.length,\n        iArc;\n    for (iArc=1; iArc<nArcs; iArc++) {\n        rArc = disappearingTransitions[iArc];\n        lArc = disappearingTransitions[iArc-1];\n        this.setEdgeStartpoint(rArc.edge, lArc.site, rArc.site, vertex);\n        }\n\n    // create a new edge as we have now a new transition between\n    // two beach sections which were previously not adjacent.\n    // since this edge appears as a new vertex is defined, the vertex\n    // actually define an end point of the edge (relative to the site\n    // on the left)\n    lArc = disappearingTransitions[0];\n    rArc = disappearingTransitions[nArcs-1];\n    rArc.edge = this.createEdge(lArc.site, rArc.site, undefined, vertex);\n\n    // create circle events if any for beach sections left in the beachline\n    // adjacent to collapsed sections\n    this.attachCircleEvent(lArc);\n    this.attachCircleEvent(rArc);\n    };\n\nVoronoi.prototype.addBeachsection = function(site) {\n    var x = site.x,\n        directrix = site.y;\n\n    // find the left and right beach sections which will surround the newly\n    // created beach section.\n    // rhill 2011-06-01: This loop is one of the most often executed,\n    // hence we expand in-place the comparison-against-epsilon calls.\n    var lArc, rArc,\n        dxl, dxr,\n        node = this.beachline.root;\n\n    while (node) {\n        dxl = this.leftBreakPoint(node,directrix)-x;\n        // x lessThanWithEpsilon xl => falls somewhere before the left edge of the beachsection\n        if (dxl > 1e-9) {\n            // this case should never happen\n            // if (!node.rbLeft) {\n            //    rArc = node.rbLeft;\n            //    break;\n            //    }\n            node = node.rbLeft;\n            }\n        else {\n            dxr = x-this.rightBreakPoint(node,directrix);\n            // x greaterThanWithEpsilon xr => falls somewhere after the right edge of the beachsection\n            if (dxr > 1e-9) {\n                if (!node.rbRight) {\n                    lArc = node;\n                    break;\n                    }\n                node = node.rbRight;\n                }\n            else {\n                // x equalWithEpsilon xl => falls exactly on the left edge of the beachsection\n                if (dxl > -1e-9) {\n                    lArc = node.rbPrevious;\n                    rArc = node;\n                    }\n                // x equalWithEpsilon xr => falls exactly on the right edge of the beachsection\n                else if (dxr > -1e-9) {\n                    lArc = node;\n                    rArc = node.rbNext;\n                    }\n                // falls exactly somewhere in the middle of the beachsection\n                else {\n                    lArc = rArc = node;\n                    }\n                break;\n                }\n            }\n        }\n    // at this point, keep in mind that lArc and/or rArc could be\n    // undefined or null.\n\n    // create a new beach section object for the site and add it to RB-tree\n    var newArc = this.createBeachsection(site);\n    this.beachline.rbInsertSuccessor(lArc, newArc);\n\n    // cases:\n    //\n\n    // [null,null]\n    // least likely case: new beach section is the first beach section on the\n    // beachline.\n    // This case means:\n    //   no new transition appears\n    //   no collapsing beach section\n    //   new beachsection become root of the RB-tree\n    if (!lArc && !rArc) {\n        return;\n        }\n\n    // [lArc,rArc] where lArc == rArc\n    // most likely case: new beach section split an existing beach\n    // section.\n    // This case means:\n    //   one new transition appears\n    //   the left and right beach section might be collapsing as a result\n    //   two new nodes added to the RB-tree\n    if (lArc === rArc) {\n        // invalidate circle event of split beach section\n        this.detachCircleEvent(lArc);\n\n        // split the beach section into two separate beach sections\n        rArc = this.createBeachsection(lArc.site);\n        this.beachline.rbInsertSuccessor(newArc, rArc);\n\n        // since we have a new transition between two beach sections,\n        // a new edge is born\n        newArc.edge = rArc.edge = this.createEdge(lArc.site, newArc.site);\n\n        // check whether the left and right beach sections are collapsing\n        // and if so create circle events, to be notified when the point of\n        // collapse is reached.\n        this.attachCircleEvent(lArc);\n        this.attachCircleEvent(rArc);\n        return;\n        }\n\n    // [lArc,null]\n    // even less likely case: new beach section is the *last* beach section\n    // on the beachline -- this can happen *only* if *all* the previous beach\n    // sections currently on the beachline share the same y value as\n    // the new beach section.\n    // This case means:\n    //   one new transition appears\n    //   no collapsing beach section as a result\n    //   new beach section become right-most node of the RB-tree\n    if (lArc && !rArc) {\n        newArc.edge = this.createEdge(lArc.site,newArc.site);\n        return;\n        }\n\n    // [null,rArc]\n    // impossible case: because sites are strictly processed from top to bottom,\n    // and left to right, which guarantees that there will always be a beach section\n    // on the left -- except of course when there are no beach section at all on\n    // the beach line, which case was handled above.\n    // rhill 2011-06-02: No point testing in non-debug version\n    //if (!lArc && rArc) {\n    //    throw \"Voronoi.addBeachsection(): What is this I don't even\";\n    //    }\n\n    // [lArc,rArc] where lArc != rArc\n    // somewhat less likely case: new beach section falls *exactly* in between two\n    // existing beach sections\n    // This case means:\n    //   one transition disappears\n    //   two new transitions appear\n    //   the left and right beach section might be collapsing as a result\n    //   only one new node added to the RB-tree\n    if (lArc !== rArc) {\n        // invalidate circle events of left and right sites\n        this.detachCircleEvent(lArc);\n        this.detachCircleEvent(rArc);\n\n        // an existing transition disappears, meaning a vertex is defined at\n        // the disappearance point.\n        // since the disappearance is caused by the new beachsection, the\n        // vertex is at the center of the circumscribed circle of the left,\n        // new and right beachsections.\n        // http://mathforum.org/library/drmath/view/55002.html\n        // Except that I bring the origin at A to simplify\n        // calculation\n        var lSite = lArc.site,\n            ax = lSite.x,\n            ay = lSite.y,\n            bx=site.x-ax,\n            by=site.y-ay,\n            rSite = rArc.site,\n            cx=rSite.x-ax,\n            cy=rSite.y-ay,\n            d=2*(bx*cy-by*cx),\n            hb=bx*bx+by*by,\n            hc=cx*cx+cy*cy,\n            vertex = this.createVertex((cy*hb-by*hc)/d+ax, (bx*hc-cx*hb)/d+ay);\n\n        // one transition disappear\n        this.setEdgeStartpoint(rArc.edge, lSite, rSite, vertex);\n\n        // two new transitions appear at the new vertex location\n        newArc.edge = this.createEdge(lSite, site, undefined, vertex);\n        rArc.edge = this.createEdge(site, rSite, undefined, vertex);\n\n        // check whether the left and right beach sections are collapsing\n        // and if so create circle events, to handle the point of collapse.\n        this.attachCircleEvent(lArc);\n        this.attachCircleEvent(rArc);\n        return;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Circle event methods\n\n// rhill 2011-06-07: For some reasons, performance suffers significantly\n// when instanciating a literal object instead of an empty ctor\nVoronoi.prototype.CircleEvent = function() {\n    // rhill 2013-10-12: it helps to state exactly what we are at ctor time.\n    this.arc = null;\n    this.rbLeft = null;\n    this.rbNext = null;\n    this.rbParent = null;\n    this.rbPrevious = null;\n    this.rbRed = false;\n    this.rbRight = null;\n    this.site = null;\n    this.x = this.y = this.ycenter = 0;\n    };\n\nVoronoi.prototype.attachCircleEvent = function(arc) {\n    var lArc = arc.rbPrevious,\n        rArc = arc.rbNext;\n    if (!lArc || !rArc) {return;} // does that ever happen?\n    var lSite = lArc.site,\n        cSite = arc.site,\n        rSite = rArc.site;\n\n    // If site of left beachsection is same as site of\n    // right beachsection, there can't be convergence\n    if (lSite===rSite) {return;}\n\n    // Find the circumscribed circle for the three sites associated\n    // with the beachsection triplet.\n    // rhill 2011-05-26: It is more efficient to calculate in-place\n    // rather than getting the resulting circumscribed circle from an\n    // object returned by calling Voronoi.circumcircle()\n    // http://mathforum.org/library/drmath/view/55002.html\n    // Except that I bring the origin at cSite to simplify calculations.\n    // The bottom-most part of the circumcircle is our Fortune 'circle\n    // event', and its center is a vertex potentially part of the final\n    // Voronoi diagram.\n    var bx = cSite.x,\n        by = cSite.y,\n        ax = lSite.x-bx,\n        ay = lSite.y-by,\n        cx = rSite.x-bx,\n        cy = rSite.y-by;\n\n    // If points l->c->r are clockwise, then center beach section does not\n    // collapse, hence it can't end up as a vertex (we reuse 'd' here, which\n    // sign is reverse of the orientation, hence we reverse the test.\n    // http://en.wikipedia.org/wiki/Curve_orientation#Orientation_of_a_simple_polygon\n    // rhill 2011-05-21: Nasty finite precision error which caused circumcircle() to\n    // return infinites: 1e-12 seems to fix the problem.\n    var d = 2*(ax*cy-ay*cx);\n    if (d >= -2e-12){return;}\n\n    var ha = ax*ax+ay*ay,\n        hc = cx*cx+cy*cy,\n        x = (cy*ha-ay*hc)/d,\n        y = (ax*hc-cx*ha)/d,\n        ycenter = y+by;\n\n    // Important: ybottom should always be under or at sweep, so no need\n    // to waste CPU cycles by checking\n\n    // recycle circle event object if possible\n    var circleEvent = this.circleEventJunkyard.pop();\n    if (!circleEvent) {\n        circleEvent = new this.CircleEvent();\n        }\n    circleEvent.arc = arc;\n    circleEvent.site = cSite;\n    circleEvent.x = x+bx;\n    circleEvent.y = ycenter+this.sqrt(x*x+y*y); // y bottom\n    circleEvent.ycenter = ycenter;\n    arc.circleEvent = circleEvent;\n\n    // find insertion point in RB-tree: circle events are ordered from\n    // smallest to largest\n    var predecessor = null,\n        node = this.circleEvents.root;\n    while (node) {\n        if (circleEvent.y < node.y || (circleEvent.y === node.y && circleEvent.x <= node.x)) {\n            if (node.rbLeft) {\n                node = node.rbLeft;\n                }\n            else {\n                predecessor = node.rbPrevious;\n                break;\n                }\n            }\n        else {\n            if (node.rbRight) {\n                node = node.rbRight;\n                }\n            else {\n                predecessor = node;\n                break;\n                }\n            }\n        }\n    this.circleEvents.rbInsertSuccessor(predecessor, circleEvent);\n    if (!predecessor) {\n        this.firstCircleEvent = circleEvent;\n        }\n    };\n\nVoronoi.prototype.detachCircleEvent = function(arc) {\n    var circleEvent = arc.circleEvent;\n    if (circleEvent) {\n        if (!circleEvent.rbPrevious) {\n            this.firstCircleEvent = circleEvent.rbNext;\n            }\n        this.circleEvents.rbRemoveNode(circleEvent); // remove from RB-tree\n        this.circleEventJunkyard.push(circleEvent);\n        arc.circleEvent = null;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Diagram completion methods\n\n// connect dangling edges (not if a cursory test tells us\n// it is not going to be visible.\n// return value:\n//   false: the dangling endpoint couldn't be connected\n//   true: the dangling endpoint could be connected\nVoronoi.prototype.connectEdge = function(edge, bbox) {\n    // skip if end point already connected\n    var vb = edge.vb;\n    if (!!vb) {return true;}\n\n    // make local copy for performance purpose\n    var va = edge.va,\n        xl = bbox.xl,\n        xr = bbox.xr,\n        yt = bbox.yt,\n        yb = bbox.yb,\n        lSite = edge.lSite,\n        rSite = edge.rSite,\n        lx = lSite.x,\n        ly = lSite.y,\n        rx = rSite.x,\n        ry = rSite.y,\n        fx = (lx+rx)/2,\n        fy = (ly+ry)/2,\n        fm, fb;\n\n    // if we reach here, this means cells which use this edge will need\n    // to be closed, whether because the edge was removed, or because it\n    // was connected to the bounding box.\n    this.cells[lSite.voronoiId].closeMe = true;\n    this.cells[rSite.voronoiId].closeMe = true;\n\n    // get the line equation of the bisector if line is not vertical\n    if (ry !== ly) {\n        fm = (lx-rx)/(ry-ly);\n        fb = fy-fm*fx;\n        }\n\n    // remember, direction of line (relative to left site):\n    // upward: left.x < right.x\n    // downward: left.x > right.x\n    // horizontal: left.x == right.x\n    // upward: left.x < right.x\n    // rightward: left.y < right.y\n    // leftward: left.y > right.y\n    // vertical: left.y == right.y\n\n    // depending on the direction, find the best side of the\n    // bounding box to use to determine a reasonable start point\n\n    // rhill 2013-12-02:\n    // While at it, since we have the values which define the line,\n    // clip the end of va if it is outside the bbox.\n    // https://github.com/gorhill/Javascript-Voronoi/issues/15\n    // TODO: Do all the clipping here rather than rely on Liang-Barsky\n    // which does not do well sometimes due to loss of arithmetic\n    // precision. The code here doesn't degrade if one of the vertex is\n    // at a huge distance.\n\n    // special case: vertical line\n    if (fm === undefined) {\n        // doesn't intersect with viewport\n        if (fx < xl || fx >= xr) {return false;}\n        // downward\n        if (lx > rx) {\n            if (!va || va.y < yt) {\n                va = this.createVertex(fx, yt);\n                }\n            else if (va.y >= yb) {\n                return false;\n                }\n            vb = this.createVertex(fx, yb);\n            }\n        // upward\n        else {\n            if (!va || va.y > yb) {\n                va = this.createVertex(fx, yb);\n                }\n            else if (va.y < yt) {\n                return false;\n                }\n            vb = this.createVertex(fx, yt);\n            }\n        }\n    // closer to vertical than horizontal, connect start point to the\n    // top or bottom side of the bounding box\n    else if (fm < -1 || fm > 1) {\n        // downward\n        if (lx > rx) {\n            if (!va || va.y < yt) {\n                va = this.createVertex((yt-fb)/fm, yt);\n                }\n            else if (va.y >= yb) {\n                return false;\n                }\n            vb = this.createVertex((yb-fb)/fm, yb);\n            }\n        // upward\n        else {\n            if (!va || va.y > yb) {\n                va = this.createVertex((yb-fb)/fm, yb);\n                }\n            else if (va.y < yt) {\n                return false;\n                }\n            vb = this.createVertex((yt-fb)/fm, yt);\n            }\n        }\n    // closer to horizontal than vertical, connect start point to the\n    // left or right side of the bounding box\n    else {\n        // rightward\n        if (ly < ry) {\n            if (!va || va.x < xl) {\n                va = this.createVertex(xl, fm*xl+fb);\n                }\n            else if (va.x >= xr) {\n                return false;\n                }\n            vb = this.createVertex(xr, fm*xr+fb);\n            }\n        // leftward\n        else {\n            if (!va || va.x > xr) {\n                va = this.createVertex(xr, fm*xr+fb);\n                }\n            else if (va.x < xl) {\n                return false;\n                }\n            vb = this.createVertex(xl, fm*xl+fb);\n            }\n        }\n    edge.va = va;\n    edge.vb = vb;\n\n    return true;\n    };\n\n// line-clipping code taken from:\n//   Liang-Barsky function by Daniel White\n//   http://www.skytopia.com/project/articles/compsci/clipping.html\n// Thanks!\n// A bit modified to minimize code paths\nVoronoi.prototype.clipEdge = function(edge, bbox) {\n    var ax = edge.va.x,\n        ay = edge.va.y,\n        bx = edge.vb.x,\n        by = edge.vb.y,\n        t0 = 0,\n        t1 = 1,\n        dx = bx-ax,\n        dy = by-ay;\n    // left\n    var q = ax-bbox.xl;\n    if (dx===0 && q<0) {return false;}\n    var r = -q/dx;\n    if (dx<0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n    else if (dx>0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    // right\n    q = bbox.xr-ax;\n    if (dx===0 && q<0) {return false;}\n    r = q/dx;\n    if (dx<0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    else if (dx>0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n    // top\n    q = ay-bbox.yt;\n    if (dy===0 && q<0) {return false;}\n    r = -q/dy;\n    if (dy<0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n    else if (dy>0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    // bottom        \n    q = bbox.yb-ay;\n    if (dy===0 && q<0) {return false;}\n    r = q/dy;\n    if (dy<0) {\n        if (r>t1) {return false;}\n        if (r>t0) {t0=r;}\n        }\n    else if (dy>0) {\n        if (r<t0) {return false;}\n        if (r<t1) {t1=r;}\n        }\n\n    // if we reach this point, Voronoi edge is within bbox\n\n    // if t0 > 0, va needs to change\n    // rhill 2011-06-03: we need to create a new vertex rather\n    // than modifying the existing one, since the existing\n    // one is likely shared with at least another edge\n    if (t0 > 0) {\n        edge.va = this.createVertex(ax+t0*dx, ay+t0*dy);\n        }\n\n    // if t1 < 1, vb needs to change\n    // rhill 2011-06-03: we need to create a new vertex rather\n    // than modifying the existing one, since the existing\n    // one is likely shared with at least another edge\n    if (t1 < 1) {\n        edge.vb = this.createVertex(ax+t1*dx, ay+t1*dy);\n        }\n\n    // va and/or vb were clipped, thus we will need to close\n    // cells which use this edge.\n    if ( t0 > 0 || t1 < 1 ) {\n        this.cells[edge.lSite.voronoiId].closeMe = true;\n        this.cells[edge.rSite.voronoiId].closeMe = true;\n    }\n\n    return true;\n    };\n\n// Connect/cut edges at bounding box\nVoronoi.prototype.clipEdges = function(bbox) {\n    // connect all dangling edges to bounding box\n    // or get rid of them if it can't be done\n    var edges = this.edges,\n        iEdge = edges.length,\n        edge,\n        abs_fn = Math.abs;\n\n    // iterate backward so we can splice safely\n    while (iEdge--) {\n        edge = edges[iEdge];\n        // edge is removed if:\n        //   it is wholly outside the bounding box\n        //   it is looking more like a point than a line\n        if (!this.connectEdge(edge, bbox) ||\n            !this.clipEdge(edge, bbox) ||\n            (abs_fn(edge.va.x-edge.vb.x)<1e-9 && abs_fn(edge.va.y-edge.vb.y)<1e-9)) {\n            edge.va = edge.vb = null;\n            edges.splice(iEdge,1);\n            }\n        }\n    };\n\n// Close the cells.\n// The cells are bound by the supplied bounding box.\n// Each cell refers to its associated site, and a list\n// of halfedges ordered counterclockwise.\nVoronoi.prototype.closeCells = function(bbox) {\n    var xl = bbox.xl,\n        xr = bbox.xr,\n        yt = bbox.yt,\n        yb = bbox.yb,\n        cells = this.cells,\n        iCell = cells.length,\n        cell,\n        iLeft,\n        halfedges, nHalfedges,\n        edge,\n        va, vb, vz,\n        lastBorderSegment,\n        abs_fn = Math.abs;\n\n    while (iCell--) {\n        cell = cells[iCell];\n        // prune, order halfedges counterclockwise, then add missing ones\n        // required to close cells\n        if (!cell.prepareHalfedges()) {\n            continue;\n            }\n        if (!cell.closeMe) {\n            continue;\n            }\n        // find first 'unclosed' point.\n        // an 'unclosed' point will be the end point of a halfedge which\n        // does not match the start point of the following halfedge\n        halfedges = cell.halfedges;\n        nHalfedges = halfedges.length;\n        // special case: only one site, in which case, the viewport is the cell\n        // ...\n\n        // all other cases\n        iLeft = 0;\n        while (iLeft < nHalfedges) {\n            va = halfedges[iLeft].getEndpoint();\n            vz = halfedges[(iLeft+1) % nHalfedges].getStartpoint();\n            // if end point is not equal to start point, we need to add the missing\n            // halfedge(s) up to vz\n            if (abs_fn(va.x-vz.x)>=1e-9 || abs_fn(va.y-vz.y)>=1e-9) {\n\n                // rhill 2013-12-02:\n                // \"Holes\" in the halfedges are not necessarily always adjacent.\n                // https://github.com/gorhill/Javascript-Voronoi/issues/16\n\n                // find entry point:\n                switch (true) {\n\n                    // walk downward along left side\n                    case this.equalWithEpsilon(va.x,xl) && this.lessThanWithEpsilon(va.y,yb):\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xl);\n                        vb = this.createVertex(xl, lastBorderSegment ? vz.y : yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                    // walk rightward along bottom side\n                    case this.equalWithEpsilon(va.y,yb) && this.lessThanWithEpsilon(va.x,xr):\n                        lastBorderSegment = this.equalWithEpsilon(vz.y,yb);\n                        vb = this.createVertex(lastBorderSegment ? vz.x : xr, yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                    // walk upward along right side\n                    case this.equalWithEpsilon(va.x,xr) && this.greaterThanWithEpsilon(va.y,yt):\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xr);\n                        vb = this.createVertex(xr, lastBorderSegment ? vz.y : yt);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                    // walk leftward along top side\n                    case this.equalWithEpsilon(va.y,yt) && this.greaterThanWithEpsilon(va.x,xl):\n                        lastBorderSegment = this.equalWithEpsilon(vz.y,yt);\n                        vb = this.createVertex(lastBorderSegment ? vz.x : xl, yt);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                        // walk downward along left side\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xl);\n                        vb = this.createVertex(xl, lastBorderSegment ? vz.y : yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                        // walk rightward along bottom side\n                        lastBorderSegment = this.equalWithEpsilon(vz.y,yb);\n                        vb = this.createVertex(lastBorderSegment ? vz.x : xr, yb);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        va = vb;\n                        // fall through\n\n                        // walk upward along right side\n                        lastBorderSegment = this.equalWithEpsilon(vz.x,xr);\n                        vb = this.createVertex(xr, lastBorderSegment ? vz.y : yt);\n                        edge = this.createBorderEdge(cell.site, va, vb);\n                        iLeft++;\n                        halfedges.splice(iLeft, 0, this.createHalfedge(edge, cell.site, null));\n                        nHalfedges++;\n                        if ( lastBorderSegment ) { break; }\n                        // fall through\n\n                    default:\n                        throw \"Voronoi.closeCells() > this makes no sense!\";\n                    }\n                }\n            iLeft++;\n            }\n        cell.closeMe = false;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Debugging helper\n/*\nVoronoi.prototype.dumpBeachline = function(y) {\n    console.log('Voronoi.dumpBeachline(%f) > Beachsections, from left to right:', y);\n    if ( !this.beachline ) {\n        console.log('  None');\n        }\n    else {\n        var bs = this.beachline.getFirst(this.beachline.root);\n        while ( bs ) {\n            console.log('  site %d: xl: %f, xr: %f', bs.site.voronoiId, this.leftBreakPoint(bs, y), this.rightBreakPoint(bs, y));\n            bs = bs.rbNext;\n            }\n        }\n    };\n*/\n\n// ---------------------------------------------------------------------------\n// Helper: Quantize sites\n\n// rhill 2013-10-12:\n// This is to solve https://github.com/gorhill/Javascript-Voronoi/issues/15\n// Since not all users will end up using the kind of coord values which would\n// cause the issue to arise, I chose to let the user decide whether or not\n// he should sanitize his coord values through this helper. This way, for\n// those users who uses coord values which are known to be fine, no overhead is\n// added.\n\nVoronoi.prototype.quantizeSites = function(sites) {\n    var ε = this.ε,\n        n = sites.length,\n        site;\n    while ( n-- ) {\n        site = sites[n];\n        site.x = Math.floor(site.x / ε) * ε;\n        site.y = Math.floor(site.y / ε) * ε;\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Helper: Recycle diagram: all vertex, edge and cell objects are\n// \"surrendered\" to the Voronoi object for reuse.\n// TODO: rhill-voronoi-core v2: more performance to be gained\n// when I change the semantic of what is returned.\n\nVoronoi.prototype.recycle = function(diagram) {\n    if ( diagram ) {\n        if ( diagram instanceof this.Diagram ) {\n            this.toRecycle = diagram;\n            }\n        else {\n            throw 'Voronoi.recycleDiagram() > Need a Diagram object.';\n            }\n        }\n    };\n\n// ---------------------------------------------------------------------------\n// Top-level Fortune loop\n\n// rhill 2011-05-19:\n//   Voronoi sites are kept client-side now, to allow\n//   user to freely modify content. At compute time,\n//   *references* to sites are copied locally.\n\nVoronoi.prototype.compute = function(sites, bbox) {\n    // to measure execution time\n    var startTime = new Date();\n\n    // init internal state\n    this.reset();\n\n    // any diagram data available for recycling?\n    // I do that here so that this is included in execution time\n    if ( this.toRecycle ) {\n        this.vertexJunkyard = this.vertexJunkyard.concat(this.toRecycle.vertices);\n        this.edgeJunkyard = this.edgeJunkyard.concat(this.toRecycle.edges);\n        this.cellJunkyard = this.cellJunkyard.concat(this.toRecycle.cells);\n        this.toRecycle = null;\n        }\n\n    // Initialize site event queue\n    var siteEvents = sites.slice(0);\n    siteEvents.sort(function(a,b){\n        var r = b.y - a.y;\n        if (r) {return r;}\n        return b.x - a.x;\n        });\n\n    // process queue\n    var site = siteEvents.pop(),\n        siteid = 0,\n        xsitex, // to avoid duplicate sites\n        xsitey,\n        cells = this.cells,\n        circle;\n\n    // main loop\n    for (;;) {\n        // we need to figure whether we handle a site or circle event\n        // for this we find out if there is a site event and it is\n        // 'earlier' than the circle event\n        circle = this.firstCircleEvent;\n\n        // add beach section\n        if (site && (!circle || site.y < circle.y || (site.y === circle.y && site.x < circle.x))) {\n            // only if site is not a duplicate\n            if (site.x !== xsitex || site.y !== xsitey) {\n                // first create cell for new site\n                cells[siteid] = this.createCell(site);\n                site.voronoiId = siteid++;\n                // then create a beachsection for that site\n                this.addBeachsection(site);\n                // remember last site coords to detect duplicate\n                xsitey = site.y;\n                xsitex = site.x;\n                }\n            site = siteEvents.pop();\n            }\n\n        // remove beach section\n        else if (circle) {\n            this.removeBeachsection(circle.arc);\n            }\n\n        // all done, quit\n        else {\n            break;\n            }\n        }\n\n    // wrapping-up:\n    //   connect dangling edges to bounding box\n    //   cut edges as per bounding box\n    //   discard edges completely outside bounding box\n    //   discard edges which are point-like\n    this.clipEdges(bbox);\n\n    //   add missing edges in order to close opened cells\n    this.closeCells(bbox);\n\n    // to measure execution time\n    var stopTime = new Date();\n\n    // prepare return values\n    var diagram = new this.Diagram();\n    diagram.cells = this.cells;\n    diagram.edges = this.edges;\n    diagram.vertices = this.vertices;\n    diagram.execTime = stopTime.getTime()-startTime.getTime();\n\n    // clean up\n    this.reset();\n\n    return diagram;\n    };\n\n/******************************************************************************/\n\nif ( typeof module !== 'undefined' ) {\n    module.exports = Voronoi;\n}\nthis.Voronoi = Voronoi;\n","const {\n  distToPath,\n  getCosSimAroundPoint,\n  getLinesIntersectPoint,\n  getOutlinePoints,\n  extendPointOnLine,\n  estimateTanPoints,\n  roundPathPoints,\n  ptEq,\n  dist,\n} = require('./utils');\n\n\nCLIP_THRESH = 2;\nLOWER_COS_SIM_THRESH = 0.89;\nUPPER_COS_SIM_THRESH = 0.97;\n\n// A bridge is a place in the pathstring where 2 strokes intersect. It can either be 1 stroke clipping\n// another, or it can be strokes passing through each other. In the pathstring from makemeahanzi, any\n// L # # in the pathstring is a\nclass Bridge {\n  constructor(points, pointString, stroke) {\n    this.points = points;\n    this.pointString = pointString;\n    this.stroke = stroke;\n    this.estTanPoints = estimateTanPoints(stroke.outline, points);\n  }\n\n  getClips() {\n    // this clip point is super tiny, it's probably just a glitch, skip it\n    if (dist(this.points[0], this.points[1]) < 3.1) return [];\n    const cosSim0 = getCosSimAroundPoint(this.points[0], this.stroke.outline);\n    const cosSim1 = getCosSimAroundPoint(this.points[1], this.stroke.outline);\n    // If the angle around the bridge points looks flat, it's probably an intersection.\n    if (Math.min(cosSim0, cosSim1) > LOWER_COS_SIM_THRESH && Math.max(cosSim0, cosSim1) > UPPER_COS_SIM_THRESH) {\n      return [];\n    }\n    return this.stroke.character.strokes.filter(stroke => {\n      if (stroke === this.stroke) return false;\n      const dist0 = distToPath(this.points[0], stroke.outline);\n      const dist1 = distToPath(this.points[1], stroke.outline);\n      return dist0 <= CLIP_THRESH && dist1 <= CLIP_THRESH;\n    }).map(clippingStroke => new Clip(this, clippingStroke));\n  }\n}\n\nclass Clip {\n  constructor(bridge, clippingStroke) {\n    this.points = bridge.points;\n    this.estTanPoints = bridge.estTanPoints;\n    this.pointString = bridge.pointString;\n    this.clippedBy = [clippingStroke];\n    this.isDouble = false;\n  }\n\n  canMerge(otherClip) {\n    return ptEq(this.points[1], otherClip.points[0]);\n  }\n\n  mergeIntoDouble(otherClip) {\n    this.isDouble = true;\n    this.clippedBy = this.clippedBy.concat(otherClip.clippedBy);\n    this.middlePoint = otherClip.points[0];\n    this.points[1] = otherClip.points[1];\n    this.estTanPoints[1] = otherClip.estTanPoints[1];\n    this.pointString += otherClip.pointString.replace(/.*L/, ' L');\n  }\n\n  getNewStrokeTip() {\n    const maxControlPoint = getLinesIntersectPoint(\n      this.estTanPoints[0],\n      this.points[0],\n      this.estTanPoints[1],\n      this.points[1],\n    );\n\n    const maxDistControl0 = dist(maxControlPoint, this.points[0]);\n    const maxDistControl1 = dist(maxControlPoint, this.points[1]);\n    let distControl0 = Math.min(maxDistControl0, 30);\n    let distControl1 = Math.min(maxDistControl1, 30);\n\n    // if the 2 lines are parallel, there will be no intersection point. Just use 30 in that case.\n    if (isNaN(distControl0)) distControl0 = 30;\n    if (isNaN(distControl1)) distControl1 = 30;\n\n    if (this.isDouble) {\n      const midDist0 = dist(this.middlePoint, this.points[0]);\n      const midDist1 = dist(this.middlePoint, this.points[1]);\n      distControl0 = Math.max(midDist0 * 1.4, distControl0);\n      distControl1 = Math.max(midDist1 * 1.4, distControl1);\n    }\n\n    const controlPoint0 = extendPointOnLine(this.estTanPoints[0], this.points[0], distControl0);\n    const controlPoint1 = extendPointOnLine(this.estTanPoints[1], this.points[1], distControl1);\n\n    const pString = point => `${Math.round(point.x)} ${Math.round(point.y)}`;\n\n    return `${pString(this.points[0])} C ${pString(controlPoint0)} ${pString(controlPoint1)} ${pString(this.points[1])}`;\n  }\n}\n\nclass Stroke {\n  constructor(pathString, character, strokeNum) {\n    this.pathString = pathString;\n    this.outline = getOutlinePoints(pathString);\n    this.character = character;\n    this.strokeNum = strokeNum;\n  }\n\n  getBridges() {\n    const pointStringParts = this.pathString.match(/-?\\d+(?:\\.\\d+)? -?\\d+(?:\\.\\d+)? L/ig);\n    if (!pointStringParts) return [];\n    return pointStringParts.map(pointStringPart => {\n      const fullPointStringRegex = new RegExp(`${pointStringPart} -?\\\\d+(?:\\\\.\\\\d+)? -?\\\\d+(?:\\\\.\\\\d+)?`);\n      const pointString = this.pathString.match(fullPointStringRegex)[0];\n      const parts = pointString.split(/\\sL?\\s?/).map(num => parseFloat(num));\n      const points = [{x: parts[0], y: parts[1]}, {x: parts[2], y: parts[3]}];\n      return new Bridge(points, pointString, this);\n    });\n  }\n\n  fixPathString() {\n    const bridges = this.getBridges();\n    let clips = [];\n    bridges.forEach(bridge => {\n      bridge.getClips().forEach(clip => {\n        const lastClip = clips[clips.length - 1];\n        if (lastClip && lastClip.canMerge(clip)) {\n          lastClip.mergeIntoDouble(clip);\n        } else {\n          clips.push(clip);\n        }\n      });\n    });\n\n    let modifiedPathString = this.pathString;\n    clips.forEach(clip => {\n      const newTip = clip.getNewStrokeTip();\n      modifiedPathString = roundPathPoints(modifiedPathString.replace(clip.pointString, newTip));\n    });\n\n    return {\n      isModified: clips.length > 0,\n      isDoubleClipped: !!clips.find(clip => clip.isDouble),\n      pathString: modifiedPathString,\n      strokeNum: this.strokeNum,\n    };\n  }\n}\n\nclass Character {\n  constructor(pathStrings) {\n    this.strokes = pathStrings.map((path, i) => new Stroke(path, this, i));\n  }\n}\n\nconst fixStrokesWithDetails = (strokePathStrings) => {\n  const character = new Character(strokePathStrings);\n  const fixedStrokesInfo = character.strokes.map(stroke => stroke.fixPathString());\n\n  return {\n    modified: !!fixedStrokesInfo.find(summary => summary.isModified),\n    hasDoubleClippedStroke: !!fixedStrokesInfo.find(summary => summary.isDoubleClipped),\n    modifiedStrokes: fixedStrokesInfo.filter(summary => summary.isModified).map(summary => summary.strokeNum),\n    strokes: fixedStrokesInfo.map(summary => summary.pathString),\n  };\n};\n\nconst fixStrokesOnce = (strokes) => {\n  const corrected = fixStrokesWithDetails(strokes);\n  return corrected.modified ? corrected.strokes : strokes;\n}\n\nconst fixStrokes = (strokes) => fixStrokesOnce(fixStrokesOnce(strokes));\n\nmodule.exports = {fixStrokes};\n","const svgPathUtils = require('point-at-length');\n\nconst dist = (p1, p2) => Math.sqrt(Math.pow(p1.x - p2.x, 2) + Math.pow(p1.y - p2.y, 2));\nconst norm = (vect) => dist(vect, {x: 0, y: 0});\nconst subtract = (p1, p2) => ({x: p1.x - p2.x, y: p1.y - p2.y});\nconst ptEq = (p1, p2) => p1.x === p2.x && p1.y === p2.y;\n\nconst getOutlinePoints = (pathString, count = 1000) => {\n  const path = svgPathUtils(pathString);\n  const delta = path.length() / count;\n  const outline = [];\n  for (let i = 0; i < count; i += 1) {\n    const svgPoint = path.at(i * delta);\n    outline.push({x: svgPoint[0], y: svgPoint[1]});\n  }\n  return outline;\n};\n\n// get the intersection point of 2 lines defined by 2 points each\n// from https://en.wikipedia.org/wiki/Line%E2%80%93line_intersection\nconst getLinesIntersectPoint = (l1p1, l1p2, l2p1, l2p2) => {\n  const x1 = l1p1.x;\n  const x2 = l1p2.x;\n  const x3 = l2p1.x;\n  const x4 = l2p2.x;\n  const y1 = l1p1.y;\n  const y2 = l1p2.y;\n  const y3 = l2p1.y;\n  const y4 = l2p2.y;\n  const xNumerator = (x1 * y2 - y1 * x2) * (x3 - x4) - (x1 - x2) * (x3 * y4 - y3 * x4);\n  const yNumerator = (x1 * y2 - y1 * x2) * (y3 - y4) - (y1 - y2) * (x3 * y4 - y3 * x4);\n  const denominator = (x1 - x2) * (y3 - y4) - (y1 - y2) * (x3 - x4);\n  return {x: xNumerator / denominator, y: yNumerator / denominator};\n};\n\nconst getPointIndex = (point, pathOutline) => {\n  const dists = pathOutline.map(outlinePoint => dist(point, outlinePoint));\n  const min = Math.min(...dists);\n  return dists.indexOf(min);\n};\n\nconst getIndexAtDelta = (index, delta, pathOutline) => {\n  return (pathOutline.length + index + delta) % pathOutline.length;\n};\n\nconst getCosSimAroundPoint = (point, pathOutline) => {\n  // if this is 1, the point is on a flat line.\n  const pointIndex = getPointIndex(point, pathOutline);\n  const preIndex = getIndexAtDelta(pointIndex, -3, pathOutline);\n  const postIndex = getIndexAtDelta(pointIndex, 3, pathOutline);\n  const vect1 = subtract(pathOutline[pointIndex], pathOutline[preIndex]);\n  const vect2 = subtract(pathOutline[postIndex], pathOutline[pointIndex]);\n  return (vect1.x * vect2.x + vect1.y * vect2.y) / (norm(vect1) * norm(vect2));\n};\n\n// return a new point, p3, which is on the same line as p1 and p2, but distance away\n// from p2. p1, p2, p3 will always lie on the line in that order\nconst extendPointOnLine = (p1, p2, distance) => {\n  const vect = subtract(p2, p1);\n  const mag = distance / norm(vect);\n  return {x: p2.x + mag * vect.x, y: p2.y + mag * vect.y};\n};\n\nconst distToPath = (point, pathOutline) => {\n  const dists = pathOutline.map(outlinePoint => dist(point, outlinePoint));\n  return Math.min(...dists);\n};\n\nconst roundPathPoints = (pathString) => {\n  const floats = pathString.match(/\\d+\\.\\d+/ig);\n  if (!floats) return pathString;\n  let fixedPathString = pathString;\n  floats.forEach(float => {\n    fixedPathString = fixedPathString.replace(float, Math.round(parseFloat(float)));\n  });\n  return fixedPathString;\n};\n\nconst estimateTanPoints = (pathOutline, clipPoints) => {\n  const cpIndex0 = getPointIndex(clipPoints[0], pathOutline);\n  const cpIndex1 = getPointIndex(clipPoints[1], pathOutline);\n  return [\n    pathOutline[getIndexAtDelta(cpIndex0, -15, pathOutline)],\n    pathOutline[getIndexAtDelta(cpIndex1, 15, pathOutline)],\n  ];\n};\n\nmodule.exports = {\n  distToPath,\n  getCosSimAroundPoint,\n  getOutlinePoints,\n  getLinesIntersectPoint,\n  extendPointOnLine,\n  estimateTanPoints,\n  dist,\n  ptEq,\n  roundPathPoints,\n};\n","const kIdPrefix = 'make-me-a-hanzi';\nconst kWidth = 128;\n\nconst distance2 = (point1, point2) => {\n  const diff = [point1[0] - point2[0], point1[1] - point2[1]];\n  return diff[0]*diff[0] + diff[1]*diff[1];\n}\n\nconst getMedianLength = (median) => {\n  let result = 0;\n  for (let i = 0; i < median.length - 1; i++) {\n    result += Math.sqrt(distance2(median[i], median[i + 1]));\n  }\n  return result;\n}\n\nconst getMedianPath = (median) => {\n  const result = [];\n  for (let point of median) {\n    result.push(result.length === 0 ? 'M' : 'L');\n    result.push('' + point[0]);\n    result.push('' + point[1]);\n  }\n  return result.join(' ');\n}\n\n\nconst getAnimationData = (strokes, medians, options) => {\n  options = options || {};\n  const delay = 1024 * (options.delay || 0.3);\n  const speed = 1024 * (options.speed || 0.02);\n\n  const lengths = medians.map((x) => getMedianLength(x) + kWidth)\n                         .map(Math.round);\n  const paths = medians.map(getMedianPath);\n\n  const animations = [];\n  let total_duration = 0;\n  for (let i = 0; i < strokes.length; i++) {\n    const offset = lengths[i] + kWidth;\n    const duration = (delay + offset) / speed / 60;\n    const fraction = Math.round(100 * offset / (delay + offset));\n    animations.push({\n      animation_id: `${kIdPrefix}-animation-${i}`,\n      clip_id: `${kIdPrefix}-clip-${i}`,\n      d: paths[i],\n      delay: `${total_duration}s`,\n      duration: `${duration}s`,\n      fraction: `${fraction}%`,\n      keyframes: `keyframes${i}`,\n      length: lengths[i],\n      offset: offset,\n      spacing: 2 * lengths[i],\n      stroke: strokes[i],\n      width: kWidth,\n    });\n    total_duration += duration;\n  }\n\n  return {animations: animations, strokes: strokes};\n}\n\nexport {getAnimationData};\n","// Prints the message and throws an error if the conditionis false.\nconst assert = (condition, message) => {\n  if (!condition) {\n    console.error(message);\n    throw new Error;\n  }\n}\n\nconst isNumber = (x) => Number.isFinite(x) && !Number.isNaN(x);\n\nconst maybeRequire = (module) => Meteor.isServer ? Npm.require(module) : null;\n\nlet getPWD = null;\n\nif (Meteor.isServer) {\n  Meteor.npmRequire('es6-shim');\n  const path = Npm.require('path');\n\n  getPWD = () => {\n    // TODO(skishore): The next line makes assumptions about the Meteor build\n    // directory's structure. We should replace it with a Meteor-provided API.\n    return process.env && process.env.PWD ?\n        process.env.PWD : path.join(process.cwd(), '../../../..');\n  }\n}\n\n// Returns a list of the unique values in the given array, ordered by their\n// first appearance in the array.\nArray.prototype.unique = function() {\n  const result = [];\n  const seen = {};\n  this.map((x) => {\n    if (!seen[x]) {\n      result.push(x);\n      seen[x] = true;\n    }\n  });\n  return result;\n}\n\n// Given a string and a dict mapping characters to other characters, return a\n// string with that mapping applied to each of its characters.\nString.prototype.applyMapping = function(mapping) {\n  let result = '';\n  for (let i = 0; i < this.length; i++) {\n    result += mapping[this[i]] ? mapping[this[i]] : this[i];\n  }\n  return result;\n}\n\n// Helper methods for use with angles, which are floats in [-pi, pi).\nconst Angle = {\n  subtract: (angle1, angle2) => {\n    var result = angle1 - angle2;\n    if (result < -Math.PI) {\n      result += 2*Math.PI;\n    }\n    if (result >= Math.PI) {\n      result -= 2*Math.PI;\n    }\n    return result;\n  },\n  penalty: (diff) => diff*diff,\n};\n\n// Helper methods for use with \"points\", which are pairs of integers.\nconst Point = {\n  add: (point1, point2) => [point1[0] + point2[0], point1[1] + point2[1]],\n  angle: (point) => Math.atan2(point[1], point[0]),\n  clone: (point) => [point[0], point[1]],\n  distance2(point1, point2) {\n    var diff = Point.subtract(point1, point2);\n    return Math.pow(diff[0], 2) + Math.pow(diff[1], 2);\n  },\n  dot: (point1, point2) => point1[0]*point2[0] + point1[1]*point2[1],\n  equal: (point1, point2) => point1[0] === point2[0] && point1[1] === point2[1],\n  key: (point) => point.join(','),\n  midpoint: (point1, point2) => {\n    return [(point1[0] + point2[0])/2, (point1[1] + point2[1])/2];\n  },\n  subtract: (point1, point2) => [point1[0] - point2[0], point1[1] - point2[1]],\n  valid: (point) => isNumber(point[0]) && isNumber(point[1]),\n};\n\nexport {assert, getPWD, maybeRequire, Angle, Point};\n","import {assert, getPWD, maybeRequire} from '/lib/base';\n\nconst fs = maybeRequire('fs');\nconst path = maybeRequire('path');\n\nconst CHARACTER_FIELDS = ['character', 'decomposition', 'definition',\n                          'frequency', 'kangxi_index', 'pinyin',\n                          'simplified', 'strokes', 'traditional'];\n\nconst cjklib = {\n  characters: {},\n  gb2312: {},\n  promise: undefined,\n  radicals: {\n    primary_radical: {},\n    index_to_radical_map: {},\n    radical_to_index_map: {},\n    radical_to_character_map: {},\n  },\n  getCharacterData(character) {\n    const result = {};\n    CHARACTER_FIELDS.map((field) =>\n        result[field] = cjklib.characters[field][character]);\n    result.character = character;\n    result.traditional = result.traditional || [];\n    return result;\n  },\n};\n\nCHARACTER_FIELDS.map((field) => cjklib.characters[field] = {});\n\n// Input: String contents of a cjklib data file.\n// Output: a list of rows, each of which is a list of String columns.\nconst getCJKLibRows = (data) => {\n  const lines = data.split('\\n');\n  return lines.filter((line) => line.length > 0 && line[0] !== '#')\n              .map((line) => line.split(',').map(\n                  (entry) => entry.replace(/[\"']/g, '')));\n}\n\n// Input: String contents of a TSV data file.\n// Output: a list of rows, each of which is a list of String columns.\nconst getFrequencyRows = (data) => {\n  const lines = data.split('\\n');\n  return lines.filter((line) => line.length > 0 && line[0] !== '#')\n              .map((line) => line.split('\\t'));\n}\n\n// Input: String contents of a Unihan data file.\n// Output: a list of rows, each of which is a list of String columns.\nconst getUnihanRows = (data) => {\n  const lines = data.split('\\n');\n  return lines.filter((line) => line.length > 0 && line[0] !== '#')\n              .map((line) => line.split('\\t'));\n}\n\n// Input: a String of the form 'U+<hex>' representing a Unicode codepoint.\n// Output: the character at that codepoint\nconst parseUnicodeStr =\n    (str) => String.fromCodePoint(parseInt(str.substr(2), 16));\n\n// Input: the path to a Unihan data file, starting from the public directory.\n// Output: Promise that resolves to the String contents of that file.\nconst readFile = (filename) => new Promise((resolve, reject) => {\n  if (Meteor.isServer) {\n    const filepath = path.join(getPWD(), 'public', filename);\n    fs.readFile(filepath, 'utf8', (error, data) => {\n      if (error) throw error;\n      resolve(data);\n    });\n  } else {\n    $.get(filename, (data, code) => {\n      if (code !== 'success') throw new Error(code);\n      resolve(data);\n    });\n  }\n});\n\n// Promises that fill data from specific tables.\n\n// Output: Promise that fills result with a mapping character -> decomposition.\n// The decompositions are formatted using Ideographic Description Sequence\n// symbols - see the Unicode standard for more details.\nconst fillDecompositions = (decompositions, glyphs, result) => {\n  return Promise.all([decompositions, glyphs]).then(([rows, glyphs]) => {\n    rows.filter((row) => parseInt(row[2], 10) === (glyphs[row[0]] || 0))\n        .map((row) => result[row[0]] = row[1]);\n  });\n}\n\n// Output: Promise that fills result with a mapping character -> Pinyin.\nconst fillDefinitions = (readings, result) => {\n  return readings.then((rows) => {\n    rows.filter((row) => row[1] === 'kDefinition')\n        .map((row) => result[parseUnicodeStr(row[0])] = row[2]);\n  });\n}\n\n// Output: Promise that fills result with a mapping character -> frequency rank.\nconst fillFrequencies = (readings, result) => {\n  return readings.then((rows) => {\n    rows.map((row) => result[row[1]] = parseInt(row[0], 10));\n  });\n}\n\n// Output: Promise that fills result with a mapping character -> Kangxi radical-\n// stroke count, which is a pair of integers [radical, extra_strokes].\nconst fillKangxiIndex = (readings, result) => {\n  return readings.then((rows) => {\n    const getIndex = (adotb) => adotb.split('.').map((x) => parseInt(x, 10));\n    rows.filter((row) => row[1] === 'kRSKangXi')\n        .map((row) => result[parseUnicodeStr(row[0])] = getIndex(row[2]));\n  });\n}\n\n// Output: Promise that fills result with a mapping character -> Pinyin.\nconst fillPinyin = (readings, result) => {\n  return readings.then((rows) => {\n    rows.filter((row) => row[1] === 'kMandarin')\n        .map((row) => result[parseUnicodeStr(row[0])] = row[2]);\n  });\n}\n\n// Output: Promise that fills result with a mapping character -> stroke count.\nconst fillStrokeCounts = (dictionary_like_data, result) => {\n  return dictionary_like_data.then((rows) => {\n    rows.filter((row) => row[1] === 'kTotalStrokes')\n        .map((row) => result[parseUnicodeStr(row[0])] = parseInt(row[2], 10));\n  });\n}\n\n// Output: Promise that fills multiple dictionaries in the result:\n//   - index_to_radical_map: Map from index -> list of radicals at that index\n//   - radical_to_index_map: Map from radical -> index of that radical\n//   - primary_radical: Map from index -> primary radical at that index\nconst fillRadicalData = (locale, radicals, result) => {\n  return radicals.then((rows) => {\n    rows.map((row) => {\n      if (!result.index_to_radical_map.hasOwnProperty(row[0])) {\n        result.index_to_radical_map[row[0]] = [];\n      }\n      result.index_to_radical_map[row[0]].push(row[1]);\n      result.radical_to_index_map[row[1]] = row[0];\n      if (row[2] === 'R' && row[3].indexOf(locale) >= 0) {\n        result.primary_radical[row[0]] = row[1];\n      }\n    });\n  });\n}\n\n// Output: Promise that fills result with a map from Unicode radical-codeblock\n// character -> equivalent Unicode CJK-codeblock (hopefully, GB2312) character.\n// There may be Unicode radical characters without a CJK equivalent.\nconst fillRadicalToCharacterMap =\n    (locale, radical_equivalent_characters, result) => {\n  return radical_equivalent_characters.then((rows) => {\n    rows.filter((row) => row[2].indexOf(locale) >= 0)\n        .map((row) => result[row[0]] = row[1]);\n  });\n}\n\n// Output: Promise that fills the two maps with pointers from a given character\n// to its simplified and traditional variants.\nconst fillVariants = (simplified, traditional, variants) => {\n  return variants.then((rows) => {\n    rows.map((row) => {\n      if ((row[1] !== 'kSimplifiedVariant' &&\n           row[1] !== 'kTraditionalVariant') ||\n          row[0] === row[2] || row[0] === 'U+2B5B8') {\n        // Unicode introduced an extra character U+2B5B8 matching U+613F.\n        return;\n      }\n      let source = parseUnicodeStr(row[0]);\n      let target = parseUnicodeStr(row[2]);\n      const split = row[2].split(' ');\n      // A number of characters have multiple simplified variants. Of these,\n      // we should only use one of them, usually the first, but in three cases,\n      // the second.\n      if (split.length === 2 &&\n          ['U+937E', 'U+949F', 'U+9918'].indexOf(row[0]) >= 0) {\n        target = parseUnicodeStr(split[1]);\n      }\n      if (source === target) {\n        return;\n      } else if (row[1] === 'kTraditionalVariant') {\n        const swap = target;\n        target = source;\n        source = swap;\n      }\n      // The mapping from traditional characters to simplified characters is\n      // many to one, so we can only assert that simplified[source] is unique.\n      assert(!simplified[source] || simplified[source] === target);\n      simplified[source] = target;\n      traditional[target] = _.unique(\n          (traditional[target] || []).concat([source]));\n    });\n  });\n}\n\n// Given the data from the GB2312 data file, fills the GB2312 result map.\nconst fillGB2312 = (data, result) => {\n  Array.from(data).map((character) => {\n    if (character === '\\n') return;\n    assert(character.length === 1);\n    const codepoint = character.codePointAt(0);\n    assert(0x4e00 <= codepoint && codepoint <= 0x9fff);\n    result[character] = true;\n  });\n  assert(Object.keys(result).length === 6763);\n}\n\n// Given the rows of the locale-character map from the cjklib data, returns a\n// mapping from characters to the appropriate glyph in that locale.\nconst parseLocaleGlyphMap = (locale, rows) => {\n  const result = {};\n  rows.filter((row) => row[2].indexOf(locale) >= 0)\n      .map((row) => result[row[0]] = parseInt(row[1], 10));\n  return result;\n}\n\n// Methods used for final post-processing of the loaded datasets.\n\nconst cleanupCJKLibData = () => {\n  const characters = cjklib.characters;\n  const radicals = cjklib.radicals;\n  const convert_astral_characters = (x) => x.length === 1 ? x : '？'\n  const radical_to_character = (x) => radicals.radical_to_character_map[x] || x;\n  Object.keys(characters.decomposition).map((character) => {\n    // Convert any 'astral characters' - that is, characters outside the Basic\n    // Multilingual Plane - to wide question marks and replace radicals with an\n    // equivalent character with that character.\n    const decomposition = characters.decomposition[character];\n    characters.decomposition[character] =\n        Array.from(decomposition).map(convert_astral_characters)\n                                 .map(radical_to_character).join('');\n  });\n  for (let i = 1; i <= 214; i++) {\n    // All primary radicals should have an equivalent character form.\n    const primary = radicals.primary_radical[i];\n    assert(radicals.radical_to_character_map.hasOwnProperty(primary));\n    radicals.primary_radical[i] = radicals.radical_to_character_map[primary];\n    radicals.index_to_radical_map[i] =\n        radicals.index_to_radical_map[i].map(radical_to_character).unique();\n  }\n  Object.keys(radicals.radical_to_index_map).map((radical) => {\n    const character = radical_to_character(radical);\n    if (character !== radical) {\n      radicals.radical_to_index_map[character] =\n          radicals.radical_to_index_map[radical];\n      delete radicals.radical_to_index_map[radical];\n    }\n  });\n  delete radicals.radical_to_character_map;\n}\n\nMeteor.startup(() => {\n  // cjklib database data.\n  const locale = 'C';\n  const decomposition =\n      readFile('cjklib/characterdecomposition.csv').then(getCJKLibRows);\n  const glyphs = readFile('cjklib/localecharacterglyph.csv')\n                     .then(getCJKLibRows)\n                     .then(parseLocaleGlyphMap.bind(null, locale));\n  const radicals = readFile('cjklib/kangxiradical.csv').then(getCJKLibRows);\n  const radical_equivalent_characters =\n      readFile('cjklib/radicalequivalentcharacter.csv').then(getCJKLibRows);\n  const radical_isolated_characters =\n      readFile('cjklib/kangxiradicalisolatedcharacter.csv').then(getCJKLibRows);\n\n  // Jun Da's character frequency data, used only for prioritization.\n  const frequencies = readFile('junda/character_frequency.tsv')\n                          .then(getFrequencyRows);\n\n  // Unihan database data.\n  const dictionary_like_data =\n      readFile('unihan/Unihan_DictionaryLikeData.txt').then(getUnihanRows);\n  const radical_stroke_counts =\n      readFile('unihan/Unihan_RadicalStrokeCounts.txt').then(getUnihanRows);\n  const readings = readFile('unihan/Unihan_Readings.txt').then(getUnihanRows);\n  const variants = readFile('unihan/Unihan_Variants.txt').then(getUnihanRows);\n\n  cjklib.promise = Promise.all([\n      // Per-character data.\n      fillDecompositions(decomposition, glyphs,\n                         cjklib.characters.decomposition),\n      fillDefinitions(readings, cjklib.characters.definition),\n      fillFrequencies(frequencies, cjklib.characters.frequency),\n      fillKangxiIndex(radical_stroke_counts, cjklib.characters.kangxi_index),\n      fillPinyin(readings, cjklib.characters.pinyin),\n      fillStrokeCounts(dictionary_like_data, cjklib.characters.strokes),\n      // Per-radical data.\n      fillRadicalData(locale, radicals, cjklib.radicals),\n      fillRadicalData(locale, radical_isolated_characters, cjklib.radicals),\n      fillRadicalToCharacterMap(locale, radical_equivalent_characters,\n                                cjklib.radicals.radical_to_character_map),\n      fillVariants(cjklib.characters.simplified,\n                   cjklib.characters.traditional, variants),\n      // Extract the list of characters in the GB2312 character set.\n      readFile('gb2312').then((data) => fillGB2312(data, cjklib.gb2312)),\n  ]).then(cleanupCJKLibData);\n  cjklib.promise.catch(console.error.bind(console));\n});\n\nexport {cjklib};\n","import {NEURAL_NET_TRAINED_FOR_STROKE_EXTRACTION} from '/lib/net';\nimport {stroke_extractor} from '/lib/stroke_extractor';\n\nMeteor.startup(() => {\n  const input = new convnetjs.Vol(1, 1, 8 /* feature vector dimensions */);\n  const net = new convnetjs.Net();\n  net.fromJSON(NEURAL_NET_TRAINED_FOR_STROKE_EXTRACTION);\n  const weight = 0.8;\n\n  const trainedClassifier = (features) => {\n    input.w = features;\n    const softmax = net.forward(input).w;\n    return softmax[1] - softmax[0];\n  }\n\n  stroke_extractor.combinedClassifier = (features) => {\n    return stroke_extractor.handTunedClassifier(features) +\n           weight*trainedClassifier(features);\n  }\n});\n","import {assert} from '/lib/base';\n\nconst decomposition_util = {};\n\ndecomposition_util.ids_data = {\n  '⿰': {label: 'Left-to-right', arity: 2},\n  '⿱': {label: 'Top-to-bottom', arity: 2},\n  '⿴': {label: 'Surround', arity: 2},\n  '⿵': {label: 'Surround-from-above', arity: 2},\n  '⿶': {label: 'Surround-from-below', arity: 2},\n  '⿷': {label: 'Surround-from-left', arity: 2},\n  '⿸': {label: 'Surround-from-upper-left', arity: 2},\n  '⿹': {label: 'Surround-from-upper-right', arity: 2},\n  '⿺': {label: 'Surround-from-lower-left', arity: 2},\n  '⿻': {label: 'Overlaid', arity: 2},\n  '⿳': {label: 'Top-to-middle-to-bottom', arity: 3},\n  '⿲': {label: 'Left-to-middle-to-right', arity: 3},\n}\ndecomposition_util.ideograph_description_characters =\n    Object.keys(decomposition_util.ids_data);\n\nconst UNKNOWN_COMPONENT = '？';\n\nconst augmentTreeWithPathData = (tree, path) => {\n  tree.path = path;\n  const children = (tree.children || []).length;\n  for (let i = 0; i < children; i++) {\n    augmentTreeWithPathData(tree.children[i], path.concat([i]));\n  }\n  return tree;\n}\n\nconst parseSubtree = (decomposition, index) => {\n  assert(index[0] < decomposition.length,\n         `Not enough characters in ${decomposition}.`);\n  const current = decomposition[index[0]];\n  index[0] += 1;\n  if (decomposition_util.ids_data.hasOwnProperty(current)) {\n    const result = {type: 'compound', value: current, children: []};\n    for (let i = 0; i < decomposition_util.ids_data[current].arity; i++) {\n      result.children.push(parseSubtree(decomposition, index));\n    }\n    return result;\n  } else if (current === UNKNOWN_COMPONENT) {\n    return {type: 'character', value: '?'};\n  }\n  // Characters may be followed by a [x] annotation that records which variant\n  // of the character to use at that position. We ignore these annotations.\n  if (decomposition[index[0]] === '[') {\n    assert('0123456789'.indexOf(decomposition[index[0] + 1]) >= 0);\n    assert(decomposition[index[0] + 2] === ']');\n    index[0] += 3;\n  }\n  return {type: 'character', value: current};\n}\n\nconst serializeSubtree = (subtree, result) => {\n  result[0] += subtree.value === '?' ? UNKNOWN_COMPONENT : subtree.value;\n  const children = subtree.children ? subtree.children.length : 0;\n  for (let i = 0; i < children; i++) {\n    serializeSubtree(subtree.children[i], result);\n  }\n}\n\ndecomposition_util.collectComponents = (tree, result) => {\n  result = result || [];\n  if (tree.type === 'character' && tree.value !== '?') {\n    result.push(tree.value);\n  }\n  for (let child of tree.children || []) {\n    decomposition_util.collectComponents(child, result);\n  }\n  return result;\n}\n\ndecomposition_util.convertDecompositionToTree = (decomposition) => {\n  const index = [0];\n  decomposition = decomposition || UNKNOWN_COMPONENT;\n  const result = parseSubtree(decomposition, index);\n  assert(index[0] === decomposition.length,\n         `Too many characters in ${decomposition}.`);\n  return augmentTreeWithPathData(result, []);\n}\n\ndecomposition_util.convertTreeToDecomposition = (tree) => {\n  const result = [''];\n  serializeSubtree(tree, result);\n  return result[0];\n}\n\ndecomposition_util.getSubtree = (tree, path) => {\n  let subtree = tree;\n  for (let index of path) {\n    assert(0 <= index && index < subtree.children.length);\n    subtree = subtree.children[index];\n  }\n  return subtree;\n}\n\nexport {decomposition_util};\n","import {assert} from '/lib/base';\nimport {cjklib} from '/lib/cjklib';\n\nconst defaultGlyph = (character) => {\n  if (!character) return;\n  assert(character.length === 1);\n  const data = cjklib.getCharacterData(character);\n  const result = {\n    character: character,\n    codepoint: character.codePointAt(0),\n    metadata: {\n      frequency: data.frequency,\n      kangxi_index: data.kangxi_index,\n    },\n    stages: {},\n    simplified: data.simplified,\n    traditional: data.traditional,\n  }\n  if (data.simplified) {\n    const glyph = Glyphs.get(data.simplified);\n    const base = cjklib.getCharacterData(data.simplified);\n    if (glyph.stages.verified) {\n      const metadata = glyph.metadata;\n      result.metadata.definition = metadata.definition || base.definition;\n      result.metadata.pinyin = metadata.pinyin || base.pinyin;\n    }\n  }\n  return result;\n}\n\nconst Glyphs = new Mongo.Collection('glyphs');\nconst Progress = new Mongo.Collection('progress');\n\nGlyphs.clearDependencies = (character) => {\n  const stack = [character];\n  const visited = {};\n  visited[character] = true;\n  while (stack.length > 0) {\n    const current = stack.pop();\n    const dependencies = Glyphs.find({\n      'stages.analysis.decomposition': {$regex: `.*${current}.*`},\n      'stages.order': {$ne: null},\n    }, {character: 1}).fetch();\n    dependencies.map((x) => x.character).filter((x) => !visited[x]).map((x) => {\n      stack.push(x);\n      visited[x] = true;\n    });\n  }\n  delete visited[character];\n  Glyphs.update({character: {$in: Object.keys(visited)}},\n                {$set: {'stages.order': null, 'stages.verified': null}},\n                {multi: true});\n}\n\nGlyphs.get = (character) =>\n    Glyphs.findOne({character: character}) || defaultGlyph(character);\n\nGlyphs.getAll = (characters) => Glyphs.find({character: {$in: characters}});\n\nGlyphs.getNext = (glyph, clause) => {\n  clause = clause || {};\n  const codepoint = glyph ? glyph.codepoint : undefined;\n  const condition = _.extend({codepoint: {$gt: codepoint}}, clause);\n  const next = Glyphs.findOne(condition, {sort: {codepoint: 1}});\n  return next ? next : Glyphs.findOne(clause, {sort: {codepoint: 1}});\n}\n\nGlyphs.getNextUnverified = (glyph) => {\n  return Glyphs.getNext(glyph, {'stages.verified': null});\n}\n\nGlyphs.getNextVerified = (glyph) => {\n  return Glyphs.getNext(glyph, {'stages.verified': {$ne: null}});\n}\n\nGlyphs.getPrevious = (glyph, clause) => {\n  clause = clause || {};\n  const codepoint = glyph ? glyph.codepoint : undefined;\n  const condition = _.extend({codepoint: {$lt: codepoint}}, clause);\n  const previous = Glyphs.findOne(condition, {sort: {codepoint: -1}});\n  return previous ? previous : Glyphs.findOne(clause, {sort: {codepoint: -1}});\n}\n\nGlyphs.getPreviousUnverified = (glyph) => {\n  return Glyphs.getPrevious(glyph, {'stages.verified': null});\n}\n\nGlyphs.getPreviousVerified = (glyph) => {\n  return Glyphs.getPrevious(glyph, {'stages.verified': {$ne: null}});\n}\n\nGlyphs.loadAll = (characters) => {\n  for (let character of characters) {\n    const glyph = Glyphs.get(character);\n    if (!glyph.stages.verified) {\n      Glyphs.upsert({character: glyph.character}, glyph);\n    }\n  }\n  Progress.refresh();\n}\n\nGlyphs.save = (glyph) => {\n  check(glyph.character, String);\n  assert(glyph.character.length === 1);\n  const current = Glyphs.get(glyph.character);\n  if (current && current.stages.verified && !glyph.stages.verified) {\n    Glyphs.clearDependencies(glyph.character);\n  }\n  Glyphs.syncDefinitionAndPinyin(glyph);\n  if (glyph.stages.path && !glyph.stages.path.sentinel) {\n    Glyphs.upsert({character: glyph.character}, glyph);\n  } else {\n    Glyphs.remove({character: glyph.character});\n  }\n  Progress.refresh();\n}\n\nGlyphs.syncDefinitionAndPinyin = (glyph) => {\n  const data = cjklib.getCharacterData(glyph.character);\n  const base = cjklib.getCharacterData(data.simplified || glyph.character);\n  const targets = [base.character].concat(base.traditional);\n  if (targets.length === 1 || '干么着复'.indexOf(targets[0]) >= 0) {\n    return;\n  }\n  const definition = glyph.metadata.definition || data.definition;\n  const pinyin = glyph.metadata.pinyin || data.pinyin;\n  Glyphs.update({character: {$in: targets}}, {$set: {\n    'metadata.definition': definition,\n    'metadata.pinyin': pinyin,\n  }}, {multi: true});\n}\n\nProgress.refresh = () => {\n  const total = Glyphs.find().count();\n  const complete = Glyphs.find({'stages.verified': {$ne: null}}).count();\n  Progress.upsert({}, {total: total, complete: complete, backup: false});\n}\n\nif (Meteor.isServer) {\n  // Construct indices on the Glyphs table.\n  Glyphs._ensureIndex({character: 1}, {unique: true});\n  Glyphs._ensureIndex({codepoint: 1}, {unique: true});\n  Glyphs._ensureIndex({'stages.verified': 1});\n\n  // Refresh the Progress counter.\n  Progress.refresh();\n\n  // Register the methods above so they are available to the client.\n  const methods = {};\n  const method_names = [\n      'get', 'getNext', 'getNextUnverified', 'getNextVerified',\n      'getPrevious', 'getPreviousUnverified', 'getPreviousVerified', 'save'];\n  method_names.map((name) => methods[`${name}Glyph`] = Glyphs[name]);\n  methods.loadAllGlyphs = Glyphs.loadAll;\n  methods.saveGlyphs = (glyphs) => glyphs.map(Glyphs.save);\n  Meteor.methods(methods);\n\n  // Publish accessors that will get all glyphs in a list and get the progress.\n  Meteor.publish('getAllGlyphs', Glyphs.getAll);\n  Meteor.publish('getProgress', Progress.find.bind(Progress));\n}\n\nexport {Glyphs, Progress};\n","// This algorithm was pulled from another one of my projects. -skishore\n//   https://github.com/skishore/tesseract/blob/master/coffee/hungarian.coffee\n\nvar bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };\n\nconst Hungarian = (function() {\n  function Hungarian(cost_matrix) {\n    var i, j, last_matched, len, ref, ref1, results, row, x, y;\n    this.cost_matrix = cost_matrix;\n    this.get_final_score = bind(this.get_final_score, this);\n    this.update_labels = bind(this.update_labels, this);\n    this.find_root_and_slacks = bind(this.find_root_and_slacks, this);\n    this.augment = bind(this.augment, this);\n    this.match = bind(this.match, this);\n    this.cost = bind(this.cost, this);\n    this.find_greedy_solution = bind(this.find_greedy_solution, this);\n    this.reduce_cost_matrix = bind(this.reduce_cost_matrix, this);\n    this.n = this.cost_matrix.length;\n    ref = this.cost_matrix;\n    for (i = 0, len = ref.length; i < len; i++) {\n      row = ref[i];\n      if (row.length !== this.n) {\n        throw new Error(\"Malforrmed cost_matrix: \" + this.cost_matrix);\n      }\n    }\n    this.range = (function() {\n      results = [];\n      for (var j = 0, ref1 = this.n; 0 <= ref1 ? j < ref1 : j > ref1; 0 <= ref1 ? j++ : j--){ results.push(j); }\n      return results;\n    }).apply(this);\n    this.matched = 0;\n    this.x_label = (function() {\n      var k, len1, ref2, results1;\n      ref2 = this.range;\n      results1 = [];\n      for (k = 0, len1 = ref2.length; k < len1; k++) {\n        x = ref2[k];\n        results1.push(0);\n      }\n      return results1;\n    }).call(this);\n    this.y_label = (function() {\n      var k, len1, ref2, results1;\n      ref2 = this.range;\n      results1 = [];\n      for (k = 0, len1 = ref2.length; k < len1; k++) {\n        y = ref2[k];\n        results1.push(0);\n      }\n      return results1;\n    }).call(this);\n    this.x_match = (function() {\n      var k, len1, ref2, results1;\n      ref2 = this.range;\n      results1 = [];\n      for (k = 0, len1 = ref2.length; k < len1; k++) {\n        x = ref2[k];\n        results1.push(-1);\n      }\n      return results1;\n    }).call(this);\n    this.y_match = (function() {\n      var k, len1, ref2, results1;\n      ref2 = this.range;\n      results1 = [];\n      for (k = 0, len1 = ref2.length; k < len1; k++) {\n        y = ref2[k];\n        results1.push(-1);\n      }\n      return results1;\n    }).call(this);\n    this.reduce_cost_matrix();\n    this.find_greedy_solution();\n    while (this.matched < this.n) {\n      last_matched = this.matched;\n      this.augment();\n      if (this.matched <= last_matched) {\n        throw new Error(\"Augmentation round did not increase matched!\");\n      }\n    }\n  }\n\n  Hungarian.prototype.reduce_cost_matrix = function() {\n    var i, j, k, l, len, len1, len2, len3, max_cost, ref, ref1, ref2, ref3, row, x, y;\n    this.cost_matrix = (function() {\n      var i, len, ref, results;\n      ref = this.cost_matrix;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        row = ref[i];\n        results.push(row.slice());\n      }\n      return results;\n    }).call(this);\n    ref = this.range;\n    for (i = 0, len = ref.length; i < len; i++) {\n      x = ref[i];\n      max_cost = Math.max.apply(0, (function() {\n        var j, len1, ref1, results;\n        ref1 = this.range;\n        results = [];\n        for (j = 0, len1 = ref1.length; j < len1; j++) {\n          y = ref1[j];\n          results.push(this.cost_matrix[x][y]);\n        }\n        return results;\n      }).call(this));\n      ref1 = this.range;\n      for (j = 0, len1 = ref1.length; j < len1; j++) {\n        y = ref1[j];\n        this.cost_matrix[x][y] -= max_cost;\n      }\n      this.x_label[x] = 0;\n    }\n    ref2 = this.range;\n    for (k = 0, len2 = ref2.length; k < len2; k++) {\n      y = ref2[k];\n      max_cost = Math.max.apply(0, (function() {\n        var l, len3, ref3, results;\n        ref3 = this.range;\n        results = [];\n        for (l = 0, len3 = ref3.length; l < len3; l++) {\n          x = ref3[l];\n          results.push(this.cost_matrix[x][y]);\n        }\n        return results;\n      }).call(this));\n      ref3 = this.range;\n      for (l = 0, len3 = ref3.length; l < len3; l++) {\n        x = ref3[l];\n        this.cost_matrix[x][y] -= max_cost;\n      }\n      this.y_label[y] = 0;\n    }\n  };\n\n  Hungarian.prototype.find_greedy_solution = function() {\n    var i, len, ref, results, x, y;\n    ref = this.range;\n    results = [];\n    for (i = 0, len = ref.length; i < len; i++) {\n      x = ref[i];\n      results.push((function() {\n        var j, len1, ref1, results1;\n        ref1 = this.range;\n        results1 = [];\n        for (j = 0, len1 = ref1.length; j < len1; j++) {\n          y = ref1[j];\n          if (this.x_match[x] === -1 && this.y_match[y] === -1 && (this.cost(x, y)) === 0) {\n            this.match(x, y);\n            results1.push(this.matched += 1);\n          } else {\n            results1.push(void 0);\n          }\n        }\n        return results1;\n      }).call(this));\n    }\n    return results;\n  };\n\n  Hungarian.prototype.cost = function(x, y) {\n    return this.cost_matrix[x][y] - this.x_label[x] - this.y_label[y];\n  };\n\n  Hungarian.prototype.match = function(x, y) {\n    this.x_match[x] = y;\n    return this.y_match[y] = x;\n  };\n\n  Hungarian.prototype.augment = function() {\n    var cur_x, cur_y, delta, delta_x, delta_y, i, j, len, len1, new_slack, next_y, ref, ref1, ref2, root, slack, slack_x, x, x_in_tree, y, y_parent;\n    x_in_tree = (function() {\n      var i, len, ref, results;\n      ref = this.range;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        x = ref[i];\n        results.push(false);\n      }\n      return results;\n    }).call(this);\n    y_parent = (function() {\n      var i, len, ref, results;\n      ref = this.range;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        y = ref[i];\n        results.push(-1);\n      }\n      return results;\n    }).call(this);\n    ref = this.find_root_and_slacks(), root = ref[0], slack = ref[1], slack_x = ref[2];\n    x_in_tree[root] = true;\n    while (true) {\n      delta = Infinity;\n      ref1 = this.range;\n      for (i = 0, len = ref1.length; i < len; i++) {\n        y = ref1[i];\n        if (y_parent[y] < 0 && slack[y] < delta) {\n          delta = slack[y];\n          delta_x = slack_x[y];\n          delta_y = y;\n        }\n      }\n      this.update_labels(delta, x_in_tree, y_parent, slack);\n      y_parent[delta_y] = delta_x;\n      if (this.y_match[delta_y] < 0) {\n        cur_y = delta_y;\n        while (cur_y >= 0) {\n          cur_x = y_parent[cur_y];\n          next_y = this.x_match[cur_x];\n          this.match(cur_x, cur_y);\n          cur_y = next_y;\n        }\n        this.matched += 1;\n        return;\n      }\n      x = this.y_match[delta_y];\n      x_in_tree[x] = true;\n      ref2 = this.range;\n      for (j = 0, len1 = ref2.length; j < len1; j++) {\n        y = ref2[j];\n        if (y_parent[y] < 0) {\n          new_slack = -(this.cost(x, y));\n          if (slack[y] > new_slack) {\n            slack[y] = new_slack;\n            slack_x[y] = x;\n          }\n        }\n      }\n    }\n  };\n\n  Hungarian.prototype.find_root_and_slacks = function() {\n    var i, len, ref, x, y;\n    ref = this.range;\n    for (i = 0, len = ref.length; i < len; i++) {\n      x = ref[i];\n      if (this.x_match[x] < 0) {\n        return [\n          x, (function() {\n            var j, len1, ref1, results;\n            ref1 = this.range;\n            results = [];\n            for (j = 0, len1 = ref1.length; j < len1; j++) {\n              y = ref1[j];\n              results.push(-(this.cost(x, y)));\n            }\n            return results;\n          }).call(this), (function() {\n            var j, len1, ref1, results;\n            ref1 = this.range;\n            results = [];\n            for (j = 0, len1 = ref1.length; j < len1; j++) {\n              y = ref1[j];\n              results.push(x);\n            }\n            return results;\n          }).call(this)\n        ];\n      }\n    }\n  };\n\n  Hungarian.prototype.update_labels = function(delta, x_in_tree, y_parent, slack) {\n    var i, j, len, len1, ref, ref1, results, x, y;\n    ref = this.range;\n    for (i = 0, len = ref.length; i < len; i++) {\n      x = ref[i];\n      if (x_in_tree[x]) {\n        this.x_label[x] -= delta;\n      }\n    }\n    ref1 = this.range;\n    results = [];\n    for (j = 0, len1 = ref1.length; j < len1; j++) {\n      y = ref1[j];\n      if (y_parent[y] < 0) {\n        results.push(slack[y] -= delta);\n      } else {\n        results.push(this.y_label[y] += delta);\n      }\n    }\n    return results;\n  };\n\n  Hungarian.prototype.get_final_score = function(original_matrix) {\n    var x;\n    return Util.sum((function() {\n      var i, len, ref, results;\n      ref = this.range;\n      results = [];\n      for (i = 0, len = ref.length; i < len; i++) {\n        x = ref[i];\n        results.push(original_matrix[x][this.x_match[x]]);\n      }\n      return results;\n    }).call(this));\n  };\n\n  return Hungarian;\n\n})();\n\nexport {Hungarian};\n","import simplify from '/lib/external/simplify/1.2.2/simplify';\n\nimport {assert, Point} from '/lib/base';\nimport {svg} from '/lib/svg';\n\nconst size = 1024;\nconst rise = 900;\nconst num_to_match = 8;\n\nlet voronoi = undefined;\n\nconst filterMedian = (median, n) => {\n  const distances = _.range(median.length - 1).map(\n      (i) => Math.sqrt(Point.distance2(median[i], median[i + 1])));\n  let total = 0;\n  distances.map((x) => total += x);\n  const result = [];\n  let index = 0;\n  let position = median[0];\n  let total_so_far = 0;\n  for (let i of _.range(n - 1)) {\n    const target = i*total/(n - 1);\n    while (total_so_far < target) {\n      const step = Math.sqrt(Point.distance2(position, median[index + 1]));\n      if (total_so_far + step < target) {\n        index += 1;\n        position = median[index];\n        total_so_far += step;\n      } else {\n        const t = (target - total_so_far)/step;\n        position = [(1 - t)*position[0] + t*median[index + 1][0],\n                    (1 - t)*position[1] + t*median[index + 1][1]];\n        total_so_far = target;\n      }\n    }\n    result.push(Point.clone(position));\n  }\n  result.push(median[median.length - 1]);\n  return result;\n}\n\nconst findLongestShortestPath = (adjacency, vertices, node) => {\n  const path = findPathFromFurthestNode(adjacency, vertices, node);\n  return findPathFromFurthestNode(adjacency, vertices, path[0]);\n}\n\nconst findPathFromFurthestNode = (adjacency, vertices, node, visited) => {\n  visited = visited || {};\n  visited[node] = true;\n  let result = [];\n  result.distance = 0;\n  for (let neighbor of adjacency[node] || []) {\n    if (!visited[neighbor]) {\n      const candidate = findPathFromFurthestNode(\n          adjacency, vertices, neighbor, visited);\n      candidate.distance +=\n          Math.sqrt(Point.distance2(vertices[node], vertices[neighbor]));\n      if (candidate.distance > result.distance) {\n        result = candidate;\n      }\n    }\n  }\n  result.push(node);\n  return result;\n}\n\nconst findStrokeMedian = (stroke) => {\n  const paths = svg.convertSVGPathToPaths(stroke);\n  assert(paths.length === 1, `Got stroke with multiple loops: ${stroke}`);\n\n  let polygon = undefined;\n  let diagram = undefined;\n  for (let approximation of [16, 64]) {\n    polygon = svg.getPolygonApproximation(paths[0], approximation);\n    voronoi = voronoi || new Voronoi;\n    const sites = polygon.map((point) => ({x: point[0], y: point[1]}));\n    const bounding_box = {xl: -size, xr: size, yt: -size, yb: size};\n    try {\n      diagram = voronoi.compute(sites, bounding_box);\n      break;\n    } catch(error) {\n      console.error(`WARNING: Voronoi computation failed at ${approximation}.`);\n    }\n  }\n  assert(diagram, 'Voronoi computation failed completely!');\n\n  diagram.vertices.map((x, i) => {\n    x.include = svg.polygonContainsPoint(polygon, [x.x, x.y]);\n    x.index = i;\n  });\n  const vertices = diagram.vertices.map((x) => [x.x, x.y].map(Math.round));\n  const edges = diagram.edges.map((x) => [x.va.index, x.vb.index]).filter(\n      (x) => diagram.vertices[x[0]].include && diagram.vertices[x[1]].include);\n  voronoi.recycle(diagram);\n\n  assert(edges.length > 0);\n  const adjacency = {};\n  for (let edge of edges) {\n    adjacency[edge[0]] = adjacency[edge[0]] || [];\n    adjacency[edge[0]].push(edge[1]);\n    adjacency[edge[1]] = adjacency[edge[1]] || [];\n    adjacency[edge[1]].push(edge[0]);\n  }\n  const root = edges[0][0];\n  const path = findLongestShortestPath(adjacency, vertices, root);\n  const points = path.map((i) => vertices[i]);\n\n  const tolerance = 4;\n  const simple = simplify(points.map((x) => ({x: x[0], y: x[1]})), tolerance);\n  return simple.map((x) => [x.x, x.y]);\n}\n\nconst normalizeForMatch = (median) => {\n  return filterMedian(median, num_to_match).map(\n      (x) => [x[0]/size, (rise - x[1])/size]);\n}\n\nconst median_util = {\n  findStrokeMedian: findStrokeMedian,\n  normalizeForMatch: normalizeForMatch,\n};\n\nexport {median_util};\n","const NEURAL_NET_TRAINED_FOR_STROKE_EXTRACTION = {\"layers\":[{\"out_depth\":8,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"input\"},{\"out_depth\":8,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"fc\",\"num_inputs\":8,\"l1_decay_mul\":0,\"l2_decay_mul\":1,\"filters\":[{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.3044261605666167,\"1\":-0.14834922423083324,\"2\":0.20219401661574177,\"3\":0.5503522616459873,\"4\":0.45502127328350234,\"5\":0.2625745186594936,\"6\":0.012889731022695689,\"7\":-0.2675923800252626,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":183,\"1\":140,\"2\":235,\"3\":220,\"4\":183,\"5\":123,\"6\":211,\"7\":191,\"8\":214,\"9\":172,\"10\":58,\"11\":125,\"12\":27,\"13\":253,\"14\":194,\"15\":191,\"16\":244,\"17\":222,\"18\":103,\"19\":88,\"20\":126,\"21\":225,\"22\":201,\"23\":63,\"24\":164,\"25\":146,\"26\":161,\"27\":88,\"28\":124,\"29\":156,\"30\":225,\"31\":63,\"32\":183,\"33\":41,\"34\":239,\"35\":139,\"36\":17,\"37\":31,\"38\":221,\"39\":63,\"40\":43,\"41\":243,\"42\":153,\"43\":90,\"44\":5,\"45\":206,\"46\":208,\"47\":63,\"48\":29,\"49\":223,\"50\":146,\"51\":105,\"52\":238,\"53\":101,\"54\":138,\"55\":63,\"56\":243,\"57\":129,\"58\":55,\"59\":202,\"60\":59,\"61\":32,\"62\":209,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.5596639882456166,\"1\":-0.2794084096442046,\"2\":-0.1125698422524117,\"3\":-0.08850676702777903,\"4\":0.06317601682543969,\"5\":-0.18247248453514878,\"6\":0.2940108272454184,\"7\":0.9861821092760742,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":121,\"1\":113,\"2\":200,\"3\":115,\"4\":196,\"5\":232,\"6\":225,\"7\":191,\"8\":251,\"9\":140,\"10\":105,\"11\":207,\"12\":211,\"13\":225,\"14\":209,\"15\":191,\"16\":206,\"17\":111,\"18\":253,\"19\":142,\"20\":96,\"21\":209,\"22\":188,\"23\":191,\"24\":143,\"25\":231,\"26\":219,\"27\":37,\"28\":97,\"29\":168,\"30\":182,\"31\":191,\"32\":166,\"33\":36,\"34\":40,\"35\":174,\"36\":77,\"37\":44,\"38\":176,\"39\":63,\"40\":69,\"41\":201,\"42\":191,\"43\":36,\"44\":66,\"45\":91,\"46\":199,\"47\":191,\"48\":54,\"49\":24,\"50\":236,\"51\":201,\"52\":18,\"53\":209,\"54\":210,\"55\":63,\"56\":147,\"57\":182,\"58\":103,\"59\":200,\"60\":205,\"61\":142,\"62\":239,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.4293240703659736,\"1\":0.48799666353430715,\"2\":-0.011221411170891243,\"3\":0.016759551491042825,\"4\":-0.10178241490300455,\"5\":-0.05938636975897821,\"6\":-0.7140555216543757,\"7\":-0.13033896328056724,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":157,\"1\":224,\"2\":102,\"3\":170,\"4\":11,\"5\":122,\"6\":219,\"7\":191,\"8\":60,\"9\":247,\"10\":155,\"11\":91,\"12\":86,\"13\":59,\"14\":223,\"15\":63,\"16\":118,\"17\":154,\"18\":243,\"19\":79,\"20\":64,\"21\":251,\"22\":134,\"23\":191,\"24\":71,\"25\":217,\"26\":50,\"27\":118,\"28\":106,\"29\":41,\"30\":145,\"31\":63,\"32\":136,\"33\":249,\"34\":80,\"35\":143,\"36\":105,\"37\":14,\"38\":186,\"39\":191,\"40\":152,\"41\":205,\"42\":226,\"43\":231,\"44\":227,\"45\":103,\"46\":174,\"47\":191,\"48\":151,\"49\":20,\"50\":33,\"51\":247,\"52\":138,\"53\":217,\"54\":230,\"55\":191,\"56\":91,\"57\":160,\"58\":87,\"59\":120,\"60\":242,\"61\":174,\"62\":192,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.004132243204399921,\"1\":0.31644328046013015,\"2\":-0.4246219644532225,\"3\":0.021888719524958525,\"4\":-0.5736499683744954,\"5\":-0.1285778687631867,\"6\":-0.17633637428199953,\"7\":-0.09184800562849475,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":192,\"1\":147,\"2\":192,\"3\":150,\"4\":248,\"5\":236,\"6\":112,\"7\":63,\"8\":174,\"9\":95,\"10\":39,\"11\":81,\"12\":155,\"13\":64,\"14\":212,\"15\":63,\"16\":243,\"17\":89,\"18\":159,\"19\":154,\"20\":1,\"21\":45,\"22\":219,\"23\":191,\"24\":33,\"25\":71,\"26\":11,\"27\":26,\"28\":255,\"29\":105,\"30\":150,\"31\":63,\"32\":245,\"33\":162,\"34\":176,\"35\":45,\"36\":87,\"37\":91,\"38\":226,\"39\":191,\"40\":225,\"41\":227,\"42\":169,\"43\":86,\"44\":61,\"45\":117,\"46\":192,\"47\":191,\"48\":171,\"49\":117,\"50\":81,\"51\":184,\"52\":48,\"53\":146,\"54\":198,\"55\":191,\"56\":195,\"57\":144,\"58\":96,\"59\":212,\"60\":89,\"61\":131,\"62\":183,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.09461892805990832,\"1\":-0.6329745552844204,\"2\":-0.7923676394624737,\"3\":-0.08606445900172546,\"4\":0.11603124920286288,\"5\":0.029252054814320392,\"6\":-0.03747907757038657,\"7\":-0.6005289047981558,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":238,\"1\":145,\"2\":153,\"3\":49,\"4\":242,\"5\":56,\"6\":184,\"7\":63,\"8\":2,\"9\":178,\"10\":196,\"11\":218,\"12\":83,\"13\":65,\"14\":228,\"15\":191,\"16\":40,\"17\":205,\"18\":60,\"19\":97,\"20\":19,\"21\":91,\"22\":233,\"23\":191,\"24\":226,\"25\":165,\"26\":194,\"27\":4,\"28\":82,\"29\":8,\"30\":182,\"31\":191,\"32\":39,\"33\":236,\"34\":163,\"35\":84,\"36\":57,\"37\":180,\"38\":189,\"39\":63,\"40\":169,\"41\":190,\"42\":18,\"43\":43,\"44\":64,\"45\":244,\"46\":157,\"47\":63,\"48\":220,\"49\":234,\"50\":229,\"51\":40,\"52\":117,\"53\":48,\"54\":163,\"55\":191,\"56\":21,\"57\":37,\"58\":205,\"59\":100,\"60\":136,\"61\":55,\"62\":227,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.42277438855180405,\"1\":1.4138688143060145,\"2\":-0.3778547415032166,\"3\":-0.012023049493322651,\"4\":0.11825224526479829,\"5\":-0.4434819918251306,\"6\":-0.6772974432572635,\"7\":-0.14741163123927092,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":56,\"1\":166,\"2\":26,\"3\":79,\"4\":188,\"5\":14,\"6\":219,\"7\":63,\"8\":68,\"9\":117,\"10\":228,\"11\":231,\"12\":52,\"13\":159,\"14\":246,\"15\":63,\"16\":53,\"17\":69,\"18\":89,\"19\":167,\"20\":197,\"21\":46,\"22\":216,\"23\":191,\"24\":118,\"25\":224,\"26\":249,\"27\":98,\"28\":138,\"29\":159,\"30\":136,\"31\":191,\"32\":225,\"33\":67,\"34\":23,\"35\":118,\"36\":199,\"37\":69,\"38\":190,\"39\":63,\"40\":126,\"41\":63,\"42\":208,\"43\":74,\"44\":2,\"45\":98,\"46\":220,\"47\":191,\"48\":35,\"49\":138,\"50\":14,\"51\":176,\"52\":107,\"53\":172,\"54\":229,\"55\":191,\"56\":204,\"57\":128,\"58\":156,\"59\":99,\"60\":98,\"61\":222,\"62\":194,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":1.1993670420146874,\"1\":0.3223431096192715,\"2\":-0.36861400047798204,\"3\":-0.08038294233717612,\"4\":0.2711210775205418,\"5\":0.42879169827918595,\"6\":0.6376085656983045,\"7\":0.03756028253259824,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":72,\"1\":167,\"2\":213,\"3\":126,\"4\":155,\"5\":48,\"6\":243,\"7\":63,\"8\":56,\"9\":247,\"10\":121,\"11\":254,\"12\":68,\"13\":161,\"14\":212,\"15\":63,\"16\":111,\"17\":164,\"18\":57,\"19\":45,\"20\":95,\"21\":151,\"22\":215,\"23\":191,\"24\":167,\"25\":146,\"26\":126,\"27\":252,\"28\":249,\"29\":147,\"30\":180,\"31\":191,\"32\":158,\"33\":63,\"34\":77,\"35\":56,\"36\":12,\"37\":90,\"38\":209,\"39\":63,\"40\":32,\"41\":242,\"42\":57,\"43\":188,\"44\":82,\"45\":113,\"46\":219,\"47\":63,\"48\":161,\"49\":91,\"50\":42,\"51\":20,\"52\":74,\"53\":103,\"54\":228,\"55\":63,\"56\":127,\"57\":73,\"58\":54,\"59\":242,\"60\":25,\"61\":59,\"62\":163,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.13967402583430144,\"1\":-0.11357850366802424,\"2\":-0.5746610827627967,\"3\":-0.5717582875884522,\"4\":-0.1898576928922138,\"5\":-0.18657398702306335,\"6\":0.7165884005339106,\"7\":-0.6224249593531741,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":200,\"1\":140,\"2\":135,\"3\":166,\"4\":214,\"5\":224,\"6\":193,\"7\":63,\"8\":72,\"9\":100,\"10\":200,\"11\":22,\"12\":123,\"13\":19,\"14\":189,\"15\":191,\"16\":82,\"17\":1,\"18\":152,\"19\":163,\"20\":159,\"21\":99,\"22\":226,\"23\":191,\"24\":132,\"25\":25,\"26\":77,\"27\":9,\"28\":216,\"29\":75,\"30\":226,\"31\":191,\"32\":97,\"33\":219,\"34\":238,\"35\":194,\"36\":65,\"37\":77,\"38\":200,\"39\":191,\"40\":127,\"41\":49,\"42\":70,\"43\":10,\"44\":168,\"45\":225,\"46\":199,\"47\":191,\"48\":23,\"49\":142,\"50\":31,\"51\":204,\"52\":74,\"53\":238,\"54\":230,\"55\":63,\"56\":54,\"57\":90,\"58\":148,\"59\":191,\"60\":231,\"61\":234,\"62\":227,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}}],\"biases\":{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.2562049254190115,\"1\":-0.5455393081802729,\"2\":0.10903726980643962,\"3\":-0.16355954769541572,\"4\":0.08992117884673975,\"5\":0.5185622512844232,\"6\":-0.46073562437071663,\"7\":0.38509647559811017,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":232,\"1\":235,\"2\":239,\"3\":87,\"4\":169,\"5\":101,\"6\":208,\"7\":63,\"8\":182,\"9\":34,\"10\":234,\"11\":217,\"12\":14,\"13\":117,\"14\":225,\"15\":191,\"16\":27,\"17\":33,\"18\":221,\"19\":211,\"20\":221,\"21\":233,\"22\":187,\"23\":63,\"24\":73,\"25\":114,\"26\":38,\"27\":238,\"28\":132,\"29\":239,\"30\":196,\"31\":191,\"32\":206,\"33\":80,\"34\":93,\"35\":10,\"36\":19,\"37\":5,\"38\":183,\"39\":63,\"40\":140,\"41\":157,\"42\":198,\"43\":220,\"44\":15,\"45\":152,\"46\":224,\"47\":63,\"48\":65,\"49\":143,\"50\":177,\"51\":69,\"52\":177,\"53\":124,\"54\":221,\"55\":191,\"56\":113,\"57\":235,\"58\":31,\"59\":176,\"60\":107,\"61\":165,\"62\":216,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}}},{\"out_depth\":8,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"tanh\"},{\"out_depth\":8,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"fc\",\"num_inputs\":8,\"l1_decay_mul\":0,\"l2_decay_mul\":1,\"filters\":[{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.38832824611419614,\"1\":0.5331207710690121,\"2\":-0.16958013252471874,\"3\":-0.03763800230330026,\"4\":-0.30277152771651167,\"5\":-0.03899235791753754,\"6\":0.4840579241426027,\"7\":-0.5416342032769544,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":208,\"1\":26,\"2\":75,\"3\":183,\"4\":94,\"5\":218,\"6\":216,\"7\":191,\"8\":37,\"9\":233,\"10\":145,\"11\":74,\"12\":83,\"13\":15,\"14\":225,\"15\":63,\"16\":149,\"17\":92,\"18\":159,\"19\":65,\"20\":205,\"21\":180,\"22\":197,\"23\":191,\"24\":29,\"25\":122,\"26\":245,\"27\":201,\"28\":73,\"29\":69,\"30\":163,\"31\":191,\"32\":183,\"33\":243,\"34\":108,\"35\":212,\"36\":155,\"37\":96,\"38\":211,\"39\":191,\"40\":226,\"41\":120,\"42\":25,\"43\":108,\"44\":206,\"45\":246,\"46\":163,\"47\":191,\"48\":229,\"49\":249,\"50\":99,\"51\":22,\"52\":206,\"53\":250,\"54\":222,\"55\":63,\"56\":111,\"57\":6,\"58\":175,\"59\":64,\"60\":17,\"61\":85,\"62\":225,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.11439407632270632,\"1\":-1.2819890886327963,\"2\":0.14634106395136273,\"3\":0.14304395032875164,\"4\":0.2297327647600765,\"5\":0.4348725634157742,\"6\":-0.26416425812412686,\"7\":0.058453811796899485,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":196,\"1\":130,\"2\":169,\"3\":32,\"4\":238,\"5\":72,\"6\":189,\"7\":191,\"8\":119,\"9\":27,\"10\":152,\"11\":253,\"12\":6,\"13\":131,\"14\":244,\"15\":191,\"16\":57,\"17\":209,\"18\":221,\"19\":209,\"20\":77,\"21\":187,\"22\":194,\"23\":63,\"24\":205,\"25\":188,\"26\":70,\"27\":160,\"28\":67,\"29\":79,\"30\":194,\"31\":63,\"32\":147,\"33\":106,\"34\":187,\"35\":27,\"36\":226,\"37\":103,\"38\":205,\"39\":63,\"40\":148,\"41\":25,\"42\":115,\"43\":187,\"44\":243,\"45\":212,\"46\":219,\"47\":63,\"48\":21,\"49\":147,\"50\":90,\"51\":52,\"52\":17,\"53\":232,\"54\":208,\"55\":191,\"56\":180,\"57\":10,\"58\":253,\"59\":115,\"60\":168,\"61\":237,\"62\":173,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.1406881916489247,\"1\":0.9405578660965507,\"2\":0.004901858025518234,\"3\":-0.2326645372062353,\"4\":-0.21448421502002576,\"5\":-1.0893898213683164,\"6\":-0.3778283066766321,\"7\":-0.37747385299064595,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":178,\"1\":98,\"2\":8,\"3\":23,\"4\":18,\"5\":2,\"6\":194,\"7\":191,\"8\":221,\"9\":42,\"10\":92,\"11\":207,\"12\":12,\"13\":25,\"14\":238,\"15\":63,\"16\":254,\"17\":58,\"18\":140,\"19\":126,\"20\":248,\"21\":19,\"22\":116,\"23\":63,\"24\":82,\"25\":176,\"26\":30,\"27\":153,\"28\":243,\"29\":199,\"30\":205,\"31\":191,\"32\":139,\"33\":118,\"34\":130,\"35\":0,\"36\":56,\"37\":116,\"38\":203,\"39\":191,\"40\":137,\"41\":244,\"42\":117,\"43\":5,\"44\":36,\"45\":110,\"46\":241,\"47\":191,\"48\":231,\"49\":119,\"50\":43,\"51\":199,\"52\":86,\"53\":46,\"54\":216,\"55\":191,\"56\":234,\"57\":39,\"58\":108,\"59\":23,\"60\":136,\"61\":40,\"62\":216,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.3710384010689571,\"1\":-0.6190881680177,\"2\":0.41162941225861827,\"3\":-0.543618129725223,\"4\":0.6163330090258718,\"5\":0.7949110806898168,\"6\":-0.7884090007104152,\"7\":0.38478012561877223,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":239,\"1\":174,\"2\":137,\"3\":217,\"4\":23,\"5\":191,\"6\":215,\"7\":63,\"8\":25,\"9\":64,\"10\":95,\"11\":253,\"12\":145,\"13\":207,\"14\":227,\"15\":191,\"16\":230,\"17\":60,\"18\":238,\"19\":227,\"20\":34,\"21\":88,\"22\":218,\"23\":63,\"24\":49,\"25\":215,\"26\":21,\"27\":217,\"28\":81,\"29\":101,\"30\":225,\"31\":191,\"32\":186,\"33\":195,\"34\":166,\"35\":0,\"36\":0,\"37\":185,\"38\":227,\"39\":63,\"40\":18,\"41\":78,\"42\":217,\"43\":92,\"44\":233,\"45\":111,\"46\":233,\"47\":63,\"48\":118,\"49\":139,\"50\":61,\"51\":131,\"52\":165,\"53\":58,\"54\":233,\"55\":191,\"56\":205,\"57\":188,\"58\":235,\"59\":209,\"60\":60,\"61\":160,\"62\":216,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.2740006754893999,\"1\":-0.8544168596508195,\"2\":0.07387149782516346,\"3\":-0.18854684467760982,\"4\":0.5306163852118577,\"5\":0.5217519355682549,\"6\":-0.16672917486486497,\"7\":0.23335567893271977,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":182,\"1\":196,\"2\":19,\"3\":33,\"4\":58,\"5\":137,\"6\":209,\"7\":63,\"8\":200,\"9\":61,\"10\":171,\"11\":6,\"12\":98,\"13\":87,\"14\":235,\"15\":191,\"16\":41,\"17\":255,\"18\":67,\"19\":19,\"20\":62,\"21\":233,\"22\":178,\"23\":63,\"24\":243,\"25\":192,\"26\":211,\"27\":145,\"28\":77,\"29\":34,\"30\":200,\"31\":191,\"32\":4,\"33\":157,\"34\":166,\"35\":54,\"36\":207,\"37\":250,\"38\":224,\"39\":63,\"40\":200,\"41\":125,\"42\":124,\"43\":29,\"44\":49,\"45\":178,\"46\":224,\"47\":63,\"48\":97,\"49\":181,\"50\":170,\"51\":176,\"52\":97,\"53\":87,\"54\":197,\"55\":191,\"56\":79,\"57\":11,\"58\":173,\"59\":80,\"60\":153,\"61\":222,\"62\":205,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.1906626781357325,\"1\":0.4709381707241033,\"2\":0.24160919622692853,\"3\":0.6311757769867091,\"4\":-0.3203913931138507,\"5\":-0.5879387228046364,\"6\":0.39346084678734317,\"7\":-0.3561015790308374,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":78,\"1\":147,\"2\":148,\"3\":119,\"4\":162,\"5\":103,\"6\":200,\"7\":191,\"8\":123,\"9\":173,\"10\":108,\"11\":218,\"12\":217,\"13\":35,\"14\":222,\"15\":63,\"16\":131,\"17\":143,\"18\":26,\"19\":214,\"20\":12,\"21\":237,\"22\":206,\"23\":63,\"24\":5,\"25\":238,\"26\":5,\"27\":139,\"28\":151,\"29\":50,\"30\":228,\"31\":63,\"32\":240,\"33\":1,\"34\":214,\"35\":230,\"36\":74,\"37\":129,\"38\":212,\"39\":191,\"40\":252,\"41\":238,\"42\":79,\"43\":222,\"44\":100,\"45\":208,\"46\":226,\"47\":191,\"48\":154,\"49\":81,\"50\":77,\"51\":103,\"52\":118,\"53\":46,\"54\":217,\"55\":63,\"56\":50,\"57\":115,\"58\":255,\"59\":70,\"60\":94,\"61\":202,\"62\":214,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-0.052332119821916476,\"1\":0.5000167096781711,\"2\":0.26266568911062693,\"3\":0.26506535297601835,\"4\":-0.25463287277049923,\"5\":0.08282611179305391,\"6\":0.9396179911813585,\"7\":-0.5542899781400487,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":102,\"1\":186,\"2\":84,\"3\":142,\"4\":70,\"5\":203,\"6\":170,\"7\":191,\"8\":66,\"9\":174,\"10\":240,\"11\":10,\"12\":35,\"13\":0,\"14\":224,\"15\":63,\"16\":136,\"17\":187,\"18\":32,\"19\":192,\"20\":131,\"21\":207,\"22\":208,\"23\":63,\"24\":165,\"25\":107,\"26\":149,\"27\":171,\"28\":212,\"29\":246,\"30\":208,\"31\":63,\"32\":237,\"33\":74,\"34\":66,\"35\":173,\"36\":231,\"37\":75,\"38\":208,\"39\":191,\"40\":10,\"41\":240,\"42\":103,\"43\":145,\"44\":23,\"45\":52,\"46\":181,\"47\":63,\"48\":200,\"49\":109,\"50\":219,\"51\":191,\"52\":89,\"53\":17,\"54\":238,\"55\":63,\"56\":7,\"57\":150,\"58\":19,\"59\":86,\"60\":190,\"61\":188,\"62\":225,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.5183573300646674,\"1\":-0.8084279309930922,\"2\":0.17564116878772115,\"3\":-0.4120839198806116,\"4\":0.5760434856452349,\"5\":0.35578634913953205,\"6\":-0.3705548599822078,\"7\":0.44300177295886806,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":195,\"1\":160,\"2\":136,\"3\":28,\"4\":98,\"5\":150,\"6\":224,\"7\":63,\"8\":142,\"9\":57,\"10\":153,\"11\":64,\"12\":164,\"13\":222,\"14\":233,\"15\":191,\"16\":27,\"17\":34,\"18\":227,\"19\":233,\"20\":104,\"21\":123,\"22\":198,\"23\":63,\"24\":191,\"25\":15,\"26\":198,\"27\":59,\"28\":149,\"29\":95,\"30\":218,\"31\":191,\"32\":179,\"33\":113,\"34\":125,\"35\":191,\"36\":242,\"37\":110,\"38\":226,\"39\":63,\"40\":199,\"41\":184,\"42\":122,\"43\":27,\"44\":52,\"45\":197,\"46\":214,\"47\":63,\"48\":21,\"49\":214,\"50\":63,\"51\":187,\"52\":43,\"53\":183,\"54\":215,\"55\":191,\"56\":45,\"57\":106,\"58\":187,\"59\":27,\"60\":36,\"61\":90,\"62\":220,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}}],\"biases\":{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":0.013187463476726313,\"1\":-0.007630520124428615,\"2\":-0.27144190488489406,\"3\":-0.30429595726968894,\"4\":-0.05004981783245224,\"5\":0.07003641753819947,\"6\":-0.09093686693747323,\"7\":0.05757614475366814,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":83,\"1\":65,\"2\":204,\"3\":98,\"4\":7,\"5\":2,\"6\":139,\"7\":63,\"8\":200,\"9\":155,\"10\":44,\"11\":38,\"12\":46,\"13\":65,\"14\":127,\"15\":191,\"16\":234,\"17\":166,\"18\":15,\"19\":222,\"20\":77,\"21\":95,\"22\":209,\"23\":191,\"24\":30,\"25\":208,\"26\":49,\"27\":192,\"28\":149,\"29\":121,\"30\":211,\"31\":191,\"32\":36,\"33\":180,\"34\":133,\"35\":53,\"36\":33,\"37\":160,\"38\":169,\"39\":191,\"40\":122,\"41\":6,\"42\":219,\"43\":26,\"44\":232,\"45\":237,\"46\":177,\"47\":63,\"48\":77,\"49\":69,\"50\":127,\"51\":117,\"52\":163,\"53\":71,\"54\":183,\"55\":191,\"56\":50,\"57\":88,\"58\":126,\"59\":213,\"60\":158,\"61\":122,\"62\":173,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}}},{\"out_depth\":8,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"tanh\"},{\"out_depth\":2,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"fc\",\"num_inputs\":8,\"l1_decay_mul\":0,\"l2_decay_mul\":1,\"filters\":[{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":1.0172730016739508,\"1\":-0.13221137581570833,\"2\":0.9395466221657038,\"3\":-1.6251860610880569,\"4\":-1.2388309137808013,\"5\":0.8533890654636394,\"6\":0.7649152131278658,\"7\":-1.7907313802649556,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":167,\"1\":177,\"2\":20,\"3\":14,\"4\":192,\"5\":70,\"6\":240,\"7\":63,\"8\":37,\"9\":209,\"10\":164,\"11\":103,\"12\":77,\"13\":236,\"14\":192,\"15\":191,\"16\":96,\"17\":155,\"18\":232,\"19\":19,\"20\":196,\"21\":16,\"22\":238,\"23\":63,\"24\":185,\"25\":156,\"26\":100,\"27\":25,\"28\":195,\"29\":0,\"30\":250,\"31\":191,\"32\":188,\"33\":101,\"34\":63,\"35\":93,\"36\":64,\"37\":210,\"38\":243,\"39\":191,\"40\":76,\"41\":197,\"42\":221,\"43\":149,\"44\":246,\"45\":78,\"46\":235,\"47\":63,\"48\":16,\"49\":27,\"50\":19,\"51\":120,\"52\":47,\"53\":122,\"54\":232,\"55\":63,\"56\":244,\"57\":138,\"58\":162,\"59\":242,\"60\":213,\"61\":166,\"62\":252,\"63\":191,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}},{\"sx\":1,\"sy\":1,\"depth\":8,\"w\":{\"0\":-1.252270530582403,\"1\":0.7285270999976606,\"2\":0.023798576828390303,\"3\":1.064484519454345,\"4\":0.246286754788085,\"5\":-1.2474340354253382,\"6\":-0.3051491951725839,\"7\":1.4177785201450572,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":43,\"1\":137,\"2\":233,\"3\":210,\"4\":76,\"5\":9,\"6\":244,\"7\":191,\"8\":105,\"9\":171,\"10\":151,\"11\":16,\"12\":24,\"13\":80,\"14\":231,\"15\":63,\"16\":172,\"17\":87,\"18\":173,\"19\":116,\"20\":167,\"21\":94,\"22\":152,\"23\":63,\"24\":154,\"25\":121,\"26\":98,\"27\":235,\"28\":32,\"29\":8,\"30\":241,\"31\":63,\"32\":163,\"33\":91,\"34\":160,\"35\":10,\"36\":83,\"37\":134,\"38\":207,\"39\":63,\"40\":43,\"41\":27,\"42\":33,\"43\":100,\"44\":125,\"45\":245,\"46\":243,\"47\":191,\"48\":158,\"49\":175,\"50\":106,\"51\":125,\"52\":144,\"53\":135,\"54\":211,\"55\":191,\"56\":165,\"57\":232,\"58\":143,\"59\":135,\"60\":56,\"61\":175,\"62\":246,\"63\":63,\"byteLength\":64},\"length\":8,\"byteOffset\":0,\"byteLength\":64}}],\"biases\":{\"sx\":1,\"sy\":1,\"depth\":2,\"w\":{\"0\":-0.008745691297802017,\"1\":0.00874569129780175,\"BYTES_PER_ELEMENT\":8,\"buffer\":{\"0\":71,\"1\":251,\"2\":214,\"3\":208,\"4\":66,\"5\":233,\"6\":129,\"7\":191,\"8\":173,\"9\":250,\"10\":214,\"11\":208,\"12\":66,\"13\":233,\"14\":129,\"15\":63,\"byteLength\":16},\"length\":2,\"byteOffset\":0,\"byteLength\":16}}},{\"out_depth\":2,\"out_sx\":1,\"out_sy\":1,\"layer_type\":\"softmax\",\"num_inputs\":2}]};\n\nexport {NEURAL_NET_TRAINED_FOR_STROKE_EXTRACTION};\n","import {assert} from '/lib/base';\n\nconst vowel_to_tone =\n    {0: \"aeiouü\", 1: \"āēīōūǖ\", 2: \"áéíóúǘ\", 3: \"ǎěǐǒǔǚ\", 4: \"àèìòùǜ\"};\n\nconst tokenSet = (tokens) => {\n  const result = {};\n  tokens.split(' ').map((x) => result[x] = true);\n  return result;\n}\n\nconst consonants = tokenSet('b p m f d t n l g k h j q x zh ch sh r z c s y w');\nconst vowels = tokenSet('a ai an ang ao e ei en eng er i ia ian iang iao ie ' +\n                        'in ing io iong iu o ong ou u ua uai uan uang ue ui ' +\n                        'un uo v van vn');\nconst two_syllables = tokenSet('ia ian iang iao ie io iong iu ua uai uan ' +\n                               'uang ue ui uo van');\n\nconst pinyin_util = {};\n\npinyin_util.dropTones = (pinyin, append_number) => {\n  for (let i = 0; i < pinyin.length; i++) {\n    for (let option = 1; option <= 4; option++) {\n      const index = vowel_to_tone[option].indexOf(pinyin[i]);\n      if (index >= 0) {\n        const toneless = 'aeiouv'[index];\n        pinyin = pinyin.substr(0, i) + toneless + pinyin.substr(i + 1);\n        if (append_number) {\n          return `${pinyin}${option}`;\n        }\n      }\n    }\n  }\n  return pinyin;\n}\n\npinyin_util.numberedPinyinToTonePinyin = (numbered) => {\n  assert(numbered && numbered === numbered.toLowerCase());\n  let tone = 0;\n  if ('01234'.indexOf(numbered[numbered.length - 1]) >= 0) {\n    tone = parseInt(numbered[numbered.length - 1], 10);\n    numbered = numbered.substr(0, numbered.length - 1);\n  }\n  for (let i = 0; i < numbered.length; i++) {\n    for (let option = 1; option <= 4; option++) {\n      const index = vowel_to_tone[option].indexOf(numbered[i]);\n      if (index >= 0) {\n        tone = option;\n        const toneless = 'aeiouv'[index];\n        numbered = numbered.substr(0, i) + toneless + numbered.substr(i + 1);\n      }\n    }\n  }\n  let consonant = '';\n  for (let i = 1; i < numbered.length; i++) {\n    const candidate = numbered.substr(0, i);\n    if (consonants[candidate]) {\n      consonant = candidate;\n    } else {\n      break;\n    }\n  }\n  let vowel = numbered.substr(consonant.length);\n  assert((!consonant || consonants[consonant]) && vowels[vowel]);\n  if (two_syllables[vowel]) {\n    const index = 'aeiouv'.indexOf(vowel[1]);\n    vowel = vowel[0] + vowel_to_tone[tone][index] + vowel.substr(2);\n  } else {\n    const index = 'aeiouv'.indexOf(vowel[0]);\n    assert(index >= 0);\n    vowel = vowel_to_tone[tone][index] + vowel.substr(1);\n  }\n  return consonant + vowel.replace('v', 'ü');\n}\n\npinyin_util.tonePinyinToNumberedPinyin = (tone) => {\n  return pinyin_util.dropTones(tone, true /* append_number */);\n}\n\nexport {pinyin_util};\n","import {assert, Angle, Point} from '/lib/base';\nimport {Hungarian} from '/lib/hungarian';\nimport {svg} from '/lib/svg';\n\nconst MAX_BRIDGE_DISTANCE = 64;\nconst MIN_CORNER_ANGLE = 0.1*Math.PI;\nconst MIN_CORNER_TANGENT_DISTANCE = 4;\nconst REVERSAL_PENALTY = 0.5;\n\n// Errors out if the bridges are invalid in some gross way.\nconst checkBridge = (bridge) => {\n  assert(Point.valid(bridge[0]) && Point.valid(bridge[1]));\n  assert(!Point.equal(bridge[0], bridge[1]));\n}\n\n// Returns the list of bridges on the path with the given endpoints. We strip\n// nearly all of the metadata out of this list to make it easy to hand-correct.\n// The list that we return is simply a list of pairs of points.\nconst getBridges = (endpoints, classifier) => {\n  const result = [];\n  const corners = endpoints.filter((x) => x.corner);\n  const matching = matchCorners(corners, classifier);\n  for (let i = 0; i < corners.length; i++) {\n    const j = matching[i];\n    if (j <= i && matching[j] === i) {\n      continue;\n    }\n    result.push([Point.clone(corners[i].point), Point.clone(corners[j].point)]);\n  }\n  result.map(checkBridge);\n  return result;\n}\n\n// Returns a list of angle and distance features between two corners.\nconst getFeatures = (ins, out) => {\n  const diff = Point.subtract(out.point, ins.point);\n  const trivial = Point.equal(diff, [0, 0]);\n  const angle = Math.atan2(diff[1], diff[0]);\n  const distance = Math.sqrt(Point.distance2(out.point, ins.point));\n  return [\n    Angle.subtract(angle, ins.angles[0]),\n    Angle.subtract(out.angles[1], angle),\n    Angle.subtract(ins.angles[1], angle),\n    Angle.subtract(angle, out.angles[0]),\n    Angle.subtract(ins.angles[1], ins.angles[0]),\n    Angle.subtract(out.angles[1], out.angles[0]),\n    (trivial ? 1 : 0),\n    distance/MAX_BRIDGE_DISTANCE,\n  ];\n}\n\n// A hand-tuned classifier that uses the features above to return a score for\n// connecting two corners by a bridge. This classifier throws out most data.\nconst handTunedClassifier = (features) => {\n  if (features[6] > 0) {\n    return -Angle.penalty(features[4]);\n  }\n  let angle_penalty = Angle.penalty(features[0]) + Angle.penalty(features[1]);\n  const distance_penalty = features[7];\n  if (features[0] > 0 && features[1] > 0 &&\n      features[2] + features[3] < -0.5*Math.PI) {\n    angle_penalty = angle_penalty/16;\n  }\n  return -(angle_penalty + distance_penalty);\n}\n\n// Takes a list of corners and returns a bipartite matching between them.\n// If matching[i] === j, then corners[i] is matched with corners[j] - that is,\n// we should construct a bridge from corners[i].point to corners[j].point.\nconst matchCorners = (corners, classifier) => {\n  const matrix = [];\n  for (let i = 0; i < corners.length; i++) {\n    matrix.push([]);\n    for (let j = 0; j < corners.length; j++) {\n      matrix[i].push(scoreCorners(corners[i], corners[j], classifier));\n    }\n  }\n  for (let i = 0; i < corners.length; i++) {\n    for (let j = 0; j < corners.length; j++) {\n      const reversed_score = matrix[j][i] - REVERSAL_PENALTY;\n      if (reversed_score > matrix[i][j]) {\n        matrix[i][j] = reversed_score;\n      }\n    }\n  }\n  return (new Hungarian(matrix)).x_match;\n}\n\n// Takes two corners and returns the score assigned to constructing a bridge\n// from one corner to the other. The score is directed: the bridge from ins to\n// out may be weighted higher than from out to ins.\nconst scoreCorners = (ins, out, classifier) => {\n  return classifier(getFeatures(ins, out));\n}\n\n// Stores angle and distance metadata around an SVG path segment's start point.\n// This endpoint may be a 'corner', which is true if the path bends sharply in\n// the negative (clockwise) direction at that point.\nfunction Endpoint(paths, index) {\n  this.index = index;\n  const path = paths[index[0]];\n  const n = path.length;\n  this.indices = [[index[0], (index[1] + n - 1) % n], index];\n  this.segments = [path[(index[1] + n - 1) % n], path[index[1]]];\n  this.point = this.segments[0].end;\n  assert(Point.valid(this.point), this.point);\n  assert(Point.equal(this.point, this.segments[1].start), path);\n  this.tangents = [\n    Point.subtract(this.segments[0].end, this.segments[0].start),\n    Point.subtract(this.segments[1].end, this.segments[1].start),\n  ];\n  const threshold = Math.pow(MIN_CORNER_TANGENT_DISTANCE, 2);\n  if (this.segments[0].control !== undefined &&\n      Point.distance2(this.point, this.segments[0].control) > threshold) {\n    this.tangents[0] = Point.subtract(this.point, this.segments[0].control);\n  }\n  if (this.segments[1].control !== undefined &&\n      Point.distance2(this.point, this.segments[1].control) > threshold) {\n    this.tangents[1] = Point.subtract(this.segments[1].control, this.point);\n  }\n  this.angles = this.tangents.map(Point.angle);\n  const diff = Angle.subtract(this.angles[1], this.angles[0]);\n  this.corner = diff < -MIN_CORNER_ANGLE;\n  return this;\n}\n\n// Code for the stroke extraction step follows.\n\nconst addEdgeToAdjacency = (edge, adjacency) => {\n  assert(edge.length === 2);\n  adjacency[edge[0]] = adjacency[edge[0]] || [];\n  if (adjacency[edge[0]].indexOf(edge[1]) < 0) {\n    adjacency[edge[0]].push(edge[1]);\n  }\n}\n\nconst extractStroke = (paths, endpoint_map, bridge_adjacency, log,\n                       extracted_indices, start, attempt_one) => {\n  const result = [];\n  const visited = {};\n  let current = start;\n\n  // A list of line segments that were added to the path but that were not\n  // part of the original stroke data. None of these should intersect.\n  const line_segments = [];\n  let self_intersecting = false;\n\n  const advance = (index) =>\n      [index[0], (index[1] + 1) % paths[index[0]].length];\n\n  const angle = (index1, index2) => {\n    const diff = Point.subtract(endpoint_map[Point.key(index2)].point,\n                                endpoint_map[Point.key(index1)].point);\n    assert(diff[0] !== 0 || diff[1] !== 0);\n    const angle = Math.atan2(diff[1], diff[0]);\n    return Angle.subtract(angle,  endpoint.angles[0]);\n  }\n\n  const getIntersection = (segment1, segment2) => {\n    const diff1 = Point.subtract(segment1[1], segment1[0]);\n    const diff2 = Point.subtract(segment2[1], segment2[0]);\n    const cross = diff1[0]*diff2[1] - diff1[1]*diff2[0];\n    if (cross === 0) {\n      return undefined;\n    }\n    const v = Point.subtract(segment1[0], segment2[0]);\n    const s = (diff1[0]*v[1] - diff1[1]*v[0])/cross;\n    const t = (diff2[0]*v[1] - diff2[1]*v[0])/cross;\n    if (0 < s && s < 1 && 0 < t && t < 1) {\n      return [segment1[0][0] + t*diff1[0], segment1[0][1] + t*diff1[1]];\n    }\n    return undefined;\n  }\n\n  const indexToPoint = (index) => endpoint_map[Point.key(index)].point;\n\n  const pushLineSegments = (points) => {\n    const old_lines = line_segments.length;\n    for (let i = 0; i < points.length - 1; i++) {\n      line_segments.push([points[i], points[i + 1]]);\n      result.push({\n        start: Point.clone(points[i]),\n        end: Point.clone(points[i + 1]),\n        control: undefined,\n      });\n    }\n    // Log an error if this stroke is self-intersecting.\n    if (!self_intersecting) {\n      for (let i = 0; i < old_lines; i++) {\n        for (let j = old_lines; j < line_segments.length; j++) {\n          if (getIntersection(line_segments[i], line_segments[j])) {\n            self_intersecting = true;\n            return;\n          }\n        }\n      }\n    }\n  }\n\n  // Here there be dragons!\n  // TODO(skishore): Document the point of the geometry in this function.\n  const selectBridge = (endpoint, options) => {\n    if (options.length === 1 && extracted_indices[Point.key(options[0])]) {\n      // Handle star-shaped strokes where one stroke ends at the intersection\n      // of the bridges used by two other strokes.\n      const indices1 = [endpoint.index, options[0]];\n      const segment1 = indices1.map(indexToPoint);\n      for (let key in bridge_adjacency) {\n        if (Point.equal(endpoint_map[key].index, indices1[0])) {\n          continue;\n        }\n        for (let i = 0; i < bridge_adjacency[key].length; i++) {\n          if (Point.equal(bridge_adjacency[key][i], segment1[0])) {\n            continue;\n          }\n          // Compute the other bridge segment and check if it intersects.\n          const indices2 = [endpoint_map[key].index, bridge_adjacency[key][i]];\n          const segment2 = indices2.map(indexToPoint);\n          if (Point.equal(indices2[0], indices1[1]) &&\n              !extracted_indices[Point.key(indices2[1])]) {\n            pushLineSegments([segment1[0], segment1[1], segment2[1]]);\n            return indices2[1];\n          } else if (Point.equal(indices2[1], indices1[1]) &&\n                     !extracted_indices[Point.key(indices2[0])]) {\n            pushLineSegments([segment1[0], segment1[1], segment2[0]]);\n            return indices2[0];\n          }\n          const intersection = getIntersection(segment1, segment2);\n          if (intersection !== undefined) {\n            const angle1 = angle(indices1[0], indices1[1]);\n            const angle2 = angle(indices2[0], indices2[1]);\n            if (Angle.subtract(angle2, angle1) < 0) {\n              indices2.reverse();\n              segment2.reverse();\n            }\n            pushLineSegments([segment1[0], intersection, segment2[1]]);\n            return indices2[1];\n          }\n        }\n      }\n    } else {\n      // Handle segments where the correct path is to follow a dead-end bridge,\n      // even if there is another bridge that is more aligned with the stroke.\n      for (let i = 0; i < options.length; i++) {\n        const key = Point.key(options[i]);\n        if (!extracted_indices[key]) {\n          return options[i];\n        }\n      }\n    }\n    return options[0];\n  }\n\n  while (true) {\n    // Add the current path segment to the path.\n    result.push(paths[current[0]][current[1]]);\n    visited[Point.key(current)] = true;\n    current = advance(current);\n    // If there are bridges at the start of the next path segment, follow the\n    // one that makes the largest angle with the current path. The ordering\n    // criterion enforce that we try to cross aligned bridges.\n    const key = Point.key(current);\n    if (bridge_adjacency.hasOwnProperty(key)) {\n      var endpoint = endpoint_map[key];\n      const options = bridge_adjacency[key].sort(\n          (a, b) => angle(endpoint.index, a) - angle(endpoint.index, b));\n      // HACK(skishore): The call to selectBridge may update the result.\n      // When a stroke is formed by computing a bridge intersection, then the\n      // two bridge fragments are added in selectBridge.\n      const result_length = result.length;\n      const next = (attempt_one ? options[0] : selectBridge(endpoint, options));\n      if (result.length === result_length) {\n        pushLineSegments([endpoint.point, endpoint_map[Point.key(next)].point]);\n      }\n      current = next;\n    }\n    // Check if we have either closed the loop or hit an extracted segment.\n    const new_key = Point.key(current);\n    if (Point.equal(current, start)) {\n      if (self_intersecting) {\n        log.push({cls: 'error',\n                  message: 'Extracted a self-intersecting stroke.'});\n      }\n      let num_segments_on_path = 0;\n      for (let index in visited) {\n        extracted_indices[index] = true;\n        num_segments_on_path += 1;\n      }\n      // Single-segment strokes may be due to graphical artifacts in the font.\n      // We drop them to remove these artifacts.\n      if (num_segments_on_path === 1) {\n        log.push({cls: 'success', message: 'Dropping single-segment stroke.'});\n        return undefined;\n      }\n      return result;\n    } else if (extracted_indices[new_key] || visited[new_key]) {\n      return undefined;\n    }\n  }\n}\n\nconst extractStrokes = (paths, endpoints, bridges, log) => {\n  // Build up the necessary hash tables and adjacency lists needed to run the\n  // stroke extraction loop.\n  const endpoint_map = {};\n  const endpoint_position_map = {};\n  for (let endpoint of endpoints) {\n    endpoint_map[Point.key(endpoint.index)] = endpoint;\n    endpoint_position_map[Point.key(endpoint.point)] = endpoint;\n  }\n  bridges.map(checkBridge);\n  const bridge_adjacency = {};\n  for (let bridge of bridges) {\n    const keys = bridge.map(Point.key);\n    assert(endpoint_position_map.hasOwnProperty(keys[0]));\n    assert(endpoint_position_map.hasOwnProperty(keys[1]));\n    const xs = keys.map((x) => endpoint_position_map[x].index);\n    addEdgeToAdjacency([Point.key(xs[0]), xs[1]], bridge_adjacency);\n    addEdgeToAdjacency([Point.key(xs[1]), xs[0]], bridge_adjacency);\n  }\n  // Actually extract strokes. Any given path segment index should appear on\n  // exactly one stroke; if it is not on a stroke, we log a warning.\n  const extracted_indices = {};\n  const strokes = [];\n  for (let attempt = 0; attempt < 3; attempt++) {\n    let missed = false;\n    for (var i = 0; i < paths.length; i++) {\n      for (var j = 0; j < paths[i].length; j++) {\n        const index = [i, j];\n        if (extracted_indices[Point.key(index)]) {\n          continue;\n        }\n        const attempt_one = attempt === 0;\n        const stroke = extractStroke(paths, endpoint_map, bridge_adjacency, log,\n                                     extracted_indices, index, attempt_one);\n        if (stroke === undefined) {\n          missed = true;\n          continue;\n        }\n        strokes.push(stroke);\n      }\n    }\n    if (!missed) {\n      return strokes;\n    }\n  }\n  log.push({cls: 'error',\n            message: 'Stroke extraction missed some path segments.'});\n  return strokes;\n}\n\n// Exports go below this fold.\n\nconst stroke_extractor = {};\n\nstroke_extractor.getBridges = (path, classifier) => {\n  const paths = svg.convertSVGPathToPaths(path);\n  const endpoints = [];\n  for (let i = 0; i < paths.length; i++) {\n    for (let j = 0; j < paths[i].length; j++) {\n      endpoints.push(new Endpoint(paths, [i, j]));\n    }\n  }\n  classifier = classifier || stroke_extractor.combinedClassifier;\n  const bridges = getBridges(endpoints, classifier);\n  return {endpoints: endpoints, bridges: bridges};\n}\n\nstroke_extractor.getStrokes = (path, bridges) => {\n  const paths = svg.convertSVGPathToPaths(path);\n  const endpoints = [];\n  for (let i = 0; i < paths.length; i++) {\n    for (let j = 0; j < paths[i].length; j++) {\n      endpoints.push(new Endpoint(paths, [i, j]));\n    }\n  }\n  const log = [];\n  const stroke_paths = extractStrokes(paths, endpoints, bridges, log);\n  const strokes = stroke_paths.map((x) => svg.convertPathsToSVGPath([x]));\n  return {log: log, strokes: strokes};\n}\n\nstroke_extractor.handTunedClassifier = handTunedClassifier;\n\nexport {stroke_extractor};\n","import {assert, Point} from '/lib/base';\n\nconst svg = {};\n\n// A normal-form SVG path string is a data string with the following properties:\n//   - Every command in the path is in ['L', 'M', 'Q', 'Z'].\n//   - Adjacent tokens in the path are separated by exactly one space.\n//   - There is exactly one 'Z', and it is the last command.\n//\n// A segment is a section of a path, represented as an object that has a start,\n// an end, and possibly a control, all of which are valid Points (that is, pairs\n// of Numbers).\n//\n// A path is a list of segments which is non-empty and closed - that is, the end\n// of the last segment on the path is the start of the first.\n\n// Returns twice the area contained in the polygon. The result is positive iff\n// the polygon winds in the counter-clockwise direction.\nconst get2xArea = (polygon) => {\n  let area = 0;\n  for (var i = 0; i < polygon.length; i++) {\n    const p1 = polygon[i];\n    const p2 = polygon[(i + 1) % polygon.length];\n    area += (p2[0] + p1[0])*(p2[1] - p1[1]);\n  }\n  return area;\n}\n\n// Takes a list of paths and orients them so that exterior contours are oriented\n// counter-clockwise and interior contours clockwise.\nconst orientPaths = (paths, approximation_error) => {\n  const polygons = paths.map(svg.getPolygonApproximation);\n  for (var i = 0; i < paths.length; i++) {\n    const path = paths[i];\n    let contains = 0;\n    for (let j = 0; j < paths.length; j++) {\n      if (j === i) {\n        continue;\n      } else if (svg.polygonContainsPoint(polygons[j], path[0].start)) {\n        contains += 1;\n      }\n    }\n    const area = get2xArea(polygons[i]);\n    // The path is an external path iff it is contained in an even number of\n    // other paths. It is counter-clockwise iff its area is positive. The path\n    // should be reversed if (CCW && internal) || (CW && external).\n    const should_reverse = (area > 0) !== (contains % 2 === 0);\n    if (should_reverse) {\n      for (let segment of path) {\n        [segment.start, segment.end] = [segment.end, segment.start];\n      }\n      path.reverse();\n    }\n  }\n  return paths;\n}\n\n// Takes a normal-form SVG path string and converts it to a list of paths.\nconst splitPath = (path) => {\n  assert(path.length > 0);\n  assert(path[0] === 'M', `Path did not start with M: ${path}`);\n  assert(path[path.length - 1] === 'Z', `Path did not end with Z: ${path}`);\n  const terms = path.split(' ');\n  const result = [];\n  let start = undefined;\n  let current = undefined;\n  for (let i = 0; i < terms.length; i++) {\n    const command = terms[i];\n    assert(command.length > 0, `Path includes empty command: ${path}`);\n    assert('LMQZ'.indexOf(command) >= 0, command);\n    if (command === 'M' || command === 'Z') {\n      if (current !== undefined) {\n        assert(Point.equal(current, start), `Path has open contour: ${path}`);\n        assert(result[result.length - 1].length > 0,\n               `Path has empty contour: ${path}`);\n        if (command === 'Z') {\n          assert(i === terms.length - 1, `Path ended early: ${path}`);\n          return result;\n        }\n      }\n      result.push([]);\n      assert(i < terms.length - 2, `Missing point on path: ${path}`);\n      start = [parseFloat(terms[i + 1], 10), parseFloat(terms[i + 2], 10)];\n      assert(Point.valid(start));\n      i += 2;\n      current = Point.clone(start);\n      continue;\n    }\n    let control = undefined;\n    if (command === 'Q') {\n      assert(i < terms.length - 2, `Missing point on path: ${path}`);\n      control = [parseFloat(terms[i + 1], 10), parseFloat(terms[i + 2], 10)];\n      assert(Point.valid(control));\n      i += 2;\n    }\n    assert(i < terms.length - 2, `Missing point on path: ${path}`);\n    const end = [parseFloat(terms[i + 1], 10), parseFloat(terms[i + 2], 10)];\n    assert(Point.valid(end));\n    i += 2;\n    if (Point.equal(current, end)) {\n      continue;\n    }\n    if (control !== undefined &&\n        (Point.equal(control, current) || Point.equal(control, end))) {\n      control = undefined;\n    }\n    result[result.length - 1].push({\n      start: Point.clone(current),\n      control: control,\n      end: end,\n    });\n    current = Point.clone(end);\n  }\n}\n\n// Takes a TrueType font command list (as provided by opentype.js) and returns\n// a normal-form SVG path string as defined above.\nsvg.convertCommandsToPath = (commands) => {\n  const terms = [];\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    assert('LMQZ'.indexOf(command.type) >= 0, command.type);\n    if (command.type === 'Z') {\n      assert(i === commands.length - 1);\n      break;\n    }\n    terms.push(command.type);\n    assert((command.x1 !== undefined) === (command.type === 'Q'));\n    if (command.x1 !== undefined) {\n      terms.push(command.x1);\n      terms.push(command.y1);\n    }\n    assert(command.x !== undefined);\n    terms.push(command.x);\n    terms.push(command.y);\n  }\n  terms.push('Z');\n  return terms.join(' ');\n}\n\n// Converts a normal-form SVG path string to a list of paths. The paths obey an\n// orientation constraint: the external paths are oriented counter-clockwise,\n// while the internal paths are oriented clockwise.\nsvg.convertSVGPathToPaths = (path) => {\n  return orientPaths(splitPath(path));\n}\n\n// Takes the given list of paths and returns a normal-form SVG path string.\nsvg.convertPathsToSVGPath = (paths) => {\n  const terms = [];\n  for (let path of paths) {\n    assert(path.length > 0);\n    terms.push('M');\n    terms.push(path[0].start[0]);\n    terms.push(path[0].start[1]);\n    for (let segment of path) {\n      if (segment.control === undefined) {\n        terms.push('L');\n      } else {\n        terms.push('Q');\n        terms.push(segment.control[0]);\n        terms.push(segment.control[1]);\n      }\n      terms.push(segment.end[0]);\n      terms.push(segment.end[1]);\n    }\n  }\n  terms.push('Z');\n  return terms.join(' ');\n}\n\n// Takes a path (a list of segments) and returns a polygon approximation to it.\n// The polygon is given as a list of pairs of points.\n//\n// The approximation error is an upper-bound on the distance between consecutive\n// points in the polygon approximation used to compute the area. The default\n// error of 64 is chosen because the glyphs have a total size of 1024x1024.\nsvg.getPolygonApproximation = (path, approximation_error) => {\n  const result = [];\n  approximation_error = approximation_error || 64;\n  for (let x of path) {\n    const control = x.control || Point.midpoint(x.start, x.end);\n    const distance = Math.sqrt(Point.distance2(x.start, x.end));\n    const num_points = Math.floor(distance/approximation_error);\n    for (let i = 0; i < num_points; i++) {\n      const t = (i + 1)/(num_points + 1);\n      const s = 1 - t;\n      result.push([s*s*x.start[0] + 2*s*t*control[0] + t*t*x.end[0],\n                   s*s*x.start[1] + 2*s*t*control[1] + t*t*x.end[1]]);\n    }\n    result.push(x.end);\n  }\n  return result;\n}\n\n// Returns true if the given point is contained inside the given polygon.\nsvg.polygonContainsPoint = (polygon, point) => {\n  const x = point[0];\n  const y = point[1];\n  let crossings = 0;\n  for (let i = 0; i < polygon.length; i++) {\n    const segment = {start: polygon[i], end: polygon[(i + 1) % polygon.length]};\n    if ((segment.start[0] < x && x < segment.end[0]) ||\n        (segment.start[0] > x && x > segment.end[0])) {\n      const t = (x - segment.end[0])/(segment.start[0] - segment.end[0]);\n      const cy = t*segment.start[1] + (1 - t)*segment.end[1];\n      if (y > cy) {\n        crossings += 1;\n      }\n    } else if (segment.start[0] === x && segment.start[1] <= y) {\n      if (segment.end[0] > x) {\n        crossings += 1;\n      }\n      const last = polygon[(i + polygon.length - 1) % (polygon.length)];\n      if (last[0] > x) {\n        crossings += 1;\n      }\n    }\n  }\n  return crossings % 2 === 1;\n}\n\nexport {svg};\n","import {assert} from '/lib/base';\n\n// Each stage is supposed to compute a particular field for the glyph.\n// It computes an initial value for this field based only on previous stages,\n// then exposes a UI for manual correction of its output.\n//\n// NOTE: No stage methods should update the glyph. The framework will do so by\n// calling getStageOutput when appropriate.\nclass AbstractStage {\n  // Initialize this stage's values based only off previous stages. Then, if the\n  // glyph already has a value for this stage's field and it is possible to set\n  // up the internal state of this stage to achieve that value, set that state.\n  // This piece allows the user to resume editing a glyph.\n  //\n  // Typically, a stage will maintain a 'this.original' variable containing the\n  // value without any manual edits and a 'this.adjusted' variable containing\n  // the value with manual edits.\n  constructor(glyph) {\n    // The super constructor should be passed a type, but subclass constructors\n    // will be passed a glyph instead, hence the variable name discrepancy.\n    this.type = glyph;\n    this.colors = ['#0074D9', '#2ECC40', '#FFDC00', '#FF4136', '#7FDBFF',\n                   '#001F3F', '#39CCCC', '#3D9970', '#01FF70', '#FF851B'];\n    // Session variables the interface by which the stage interacts with UI:\n    //   - type - String type of this stage.\n    //   - paths - list of dicts with keys in [cls, d, fill, stroke].\n    //   - lines - list of dicts with keys in [cls, stroke, x1, y1, x2, y2].\n    //   - points - list of dicts with keys in [cls, cx, cy, fill, stroke].\n    //   - status - list of dicts with keys in [cls, message] to log.\n    //\n    // The class name 'selectable' is special for paths, lines, and points.\n    // Including this class in cls for those objects will make them interactive\n    // and will trigger the onClick callback when they are clicked.\n    Session.set('stage.type', this.type);\n    Session.set('stage.paths', undefined);\n    Session.set('stage.lines', undefined);\n    Session.set('stage.points', undefined);\n    Session.set('stage.status', undefined);\n    // Only used for the verified stage. This variable should be a list of\n    // objects with the following keys:\n    //   - clip - a unique id for the given stroke.\n    //   - stroke - the actual stroke path.\n    //   - median - the path along just the median.\n    //   - length - the total length of the median.\n    //   - advance - the length left along the median. 0 when complete.\n    Session.set('stage.animations', undefined);\n  }\n  // Returns true if the difference between the two outputs is significant\n  // enough that the output from all later stages must be erased. By default,\n  // we return true to be safe. We should be very careful when returning false.\n  clearLaterStages(output1, output2) {\n    return true;\n  }\n  // Return this stage's value based on current internal state. The default\n  // implementation works for stages that follow the 'original/adjusted'\n  // convention described in the constructor.\n  getStageOutput() {\n    return this.adjusted;\n  }\n  // Update the stage's internal state based on the event.\n  handleEvent(event, template) {\n    assert(false, 'handleEvent was not implemented!');\n  }\n  // Refresh the stage UI based on the current state of this stage and the\n  // glyph's character and current metadata.\n  refreshUI(character, metadata) {\n    assert(false, 'refresh was not implemented!');\n  }\n  // Throws an error if there is an issue with this stage's output. The default\n  // implementation simply checks that none of the log lines are errors.\n  validate() {\n    const log = Session.get('stage.status');\n    assert(log && log.filter((x) => x.cls === 'error').length === 0);\n  }\n}\n\nexport {AbstractStage};\n","import {AbstractStage} from '/client/lib/abstract';\nimport {assert} from '/lib/base';\nimport {cjklib} from '/lib/cjklib';\nimport {decomposition_util} from '/lib/decomposition_util';\nimport {Glyphs} from '/lib/glyphs';\nimport {pinyin_util} from '/lib/pinyin_util';\n\nlet stage = undefined;\n\nconst etymology_fields = ['hint', 'phonetic', 'semantic']\n\n// Methods for querying and modifying decomposition trees.\n\nconst collectComponents = (subtree) => {\n  return subtree ? decomposition_util.collectComponents(subtree) : [];\n}\n\nconst fixSubtreeChildrenLength = (subtree) => {\n  const data = decomposition_util.ids_data[subtree.value];\n  assert(data, `Invalid ideograph description character: ${subtree.value}`);\n  subtree.children.length = data.arity;\n  for (let i = 0; i < subtree.children.length; i++) {\n    subtree.children[i] =\n        subtree.children[i] || {type: 'character', value: '?'};\n    subtree.children[i].path = subtree.path.concat([i]);\n  }\n}\n\nconst setSubtreeType = (subtree, type) => {\n  if (subtree.type === type) {\n    return;\n  }\n  if (type === 'character') {\n    subtree.value = '?';\n    delete subtree.children;\n  } else if (type === 'compound') {\n    subtree.value = decomposition_util.ideograph_description_characters[0];\n    subtree.children = [];\n    fixSubtreeChildrenLength(subtree);\n  } else {\n    assert(false, `Unexpected subtree type: ${type}`);\n  }\n  subtree.type = type;\n}\n\n// Methods for handling updates to various non-decomposition analysis fields.\n\nconst updateCharacterValue = (target, text, path) => {\n  const subtree = decomposition_util.getSubtree(stage.tree, path);\n  if (text === subtree.value || subtree.type !== 'character') {\n    return;\n  }\n  const value = text.length === 1 ? text : '?';\n  if (value === subtree.value) {\n    target.text(value);\n  } else {\n    subtree.value = text.length === 1 ? text : '?';\n    stage.forceRefresh();\n  }\n}\n\nconst updateEtymology = (target, text, type) => {\n  let value = text && text !== '?' ? text : undefined;\n  const expansion = ' aptp';\n  if (type === 'hint' && value && value.endsWith(expansion)) {\n    const suffix = 'also provides the pronunciation'\n    value = `${value.substr(0, value.length - expansion.length)} ${suffix}`;\n  }\n  if (value === stage.etymology[type]) {\n    target.text(value || '?');\n  } else {\n    stage.etymology[type] = value;\n    stage.forceRefresh();\n  }\n}\n\nconst updateRadicalValue = (target, text) => {\n  const value = text && text !== '?' ? text : undefined;\n  if (value === stage.radical) {\n    target.text(value || '?');\n  } else {\n    stage.radical = value;\n    stage.forceRefresh();\n  }\n}\n\n// Methods for initializing different fields of the analysis.\n\nconst initializeDecompositionTree = (analysis, character) => {\n  const data = cjklib.getCharacterData(character);\n  return decomposition_util.convertDecompositionToTree(\n      analysis.decomposition || data.decomposition);\n}\n\nconst initializeRadical = (character, components) => {\n  if (cjklib.radicals.radical_to_index_map.hasOwnProperty(character)) {\n    return character;\n  }\n  const data = cjklib.getCharacterData(character);\n  if (data.kangxi_index) {\n    const index = data.kangxi_index[0];\n    const radicals = cjklib.radicals.index_to_radical_map[index];\n    const included = radicals.filter((x) => components.indexOf(x) >= 0);\n    return included.length === 1 ? included[0] : radicals.join('');\n  }\n  return undefined;\n}\n\nconst initializeEtymology = (glyph, components) => {\n  const data = cjklib.getCharacterData(glyph.character);\n  const target = pinyin_util.dropTones(\n      glyph.metadata.pinyin || data.pinyin || '');\n  const phonetic_match = (component) => {\n    const component_data = cjklib.getCharacterData(component);\n    const attempt = pinyin_util.dropTones(component_data.pinyin || '');\n    return attempt && attempt === target;\n  }\n  const phonetic = components.filter(phonetic_match);\n  if (phonetic.length === 1) {\n    const result = {type: 'pictophonetic', phonetic: phonetic[0]};\n    const semantic = components.filter((x) => !phonetic_match(x));\n    if (semantic.length === 1) {\n      result.semantic = semantic[0];\n    }\n    return result;\n  }\n  return {type: 'ideographic'};\n}\n\n// Methods for automatically inferring a phonetic-semantic decomposition.\n\nconst doubleAlphabeticCharacters = (pinyin) => {\n  const numbered = pinyin_util.tonePinyinToNumberedPinyin(pinyin);\n  return Array.from(numbered).map((x) => /[a-z]/.test(x) ? x + x : x).join('');\n}\n\nconst guessPhoneticAndSemanticComponents = (glyph, components) => {\n  const data = cjklib.getCharacterData(glyph.character);\n  const target = doubleAlphabeticCharacters(\n      glyph.metadata.pinyin || data.pinyin || '');\n  const distance = (component) => {\n    const component_data = cjklib.getCharacterData(component);\n    const attempt = doubleAlphabeticCharacters(component_data.pinyin || '');\n    return s.levenshtein(attempt, target);\n  }\n  const pairs = components.map((x) => [x, distance(x)]);\n  const sorted = pairs.sort((a, b) => a[1] - b[1]).map((x) => x[0]);\n  const result = {};\n  if (sorted.length > 0) {\n    result.phonetic = sorted[0];\n    if (sorted.length === 2) {\n      result.semantic = sorted[1];\n    }\n  }\n  return result;\n}\n\nclass AnalysisStage extends AbstractStage {\n  constructor(glyph) {\n    super('analysis');\n    this.strokes = glyph.stages.strokes.corrected;\n    const analysis = glyph.stages.analysis || {};\n    this.tree = initializeDecompositionTree(analysis, glyph.character);\n    const components = collectComponents(this.tree);\n    this.radical = analysis.radical ||\n                   initializeRadical(glyph.character, components);\n    this.etymology = analysis.etymology ||\n                     initializeEtymology(glyph, components);\n    this.simplified = cjklib.getCharacterData(glyph.character).simplified;\n    stage = this;\n    updateStatus();\n  }\n  clearLaterStages(output1, output2) {\n    return output1.decomposition !== output2.decomposition;\n  }\n  getStageOutput() {\n    return {\n      decomposition: decomposition_util.convertTreeToDecomposition(this.tree),\n      etymology: _.extend({}, this.etymology),\n      radical: this.radical,\n    }\n  }\n  refreshUI() {\n    const to_path = (x) => ({d: x, fill: 'gray', stroke: 'gray'});\n    Session.set('stage.paths', this.strokes.map(to_path));\n    Session.set('stages.analysis.tree', this.tree);\n    Session.set('stages.analysis.radical', this.radical);\n    Session.set('stages.analysis.etymology', this.etymology);\n    Session.set('stages.analysis.simplified', this.simplified);\n  }\n}\n\nTemplate.analysis_stage.events({\n  'blur .value': function(event) {\n    // This line is not needed for correctness, so we ignore any errors in it.\n    try { window.getSelection().removeAllRanges(); } catch (e) { }\n    const target = $(event.target);\n    const field = target.attr('data-field');\n    const text = target.text();\n    if (field === 'character') {\n      updateCharacterValue(target, text, this.path);\n    } else if (field === 'radical') {\n      updateRadicalValue(target, text);\n    } else if (etymology_fields.indexOf(field) >= 0) {\n      updateEtymology(target, text, field);\n    } else {\n      assert(false, `Unexpected editable field: ${field}`);\n    }\n  },\n  'change .compound-type': function(event) {\n    const type = $(event.target).val();\n    const subtree = decomposition_util.getSubtree(stage.tree, this.path);\n    if (type === subtree.value || subtree.type != 'compound') {\n      return;\n    }\n    subtree.value = type;\n    fixSubtreeChildrenLength(subtree);\n    stage.forceRefresh();\n  },\n  'change .etymology-type': function(event) {\n    const type = $(event.target).val();\n    etymology_fields.map(\n        (x) => { if (x !== 'hint') delete stage.etymology[x]; });\n    if ((type === 'pictophonetic') !==\n        (stage.etymology.type === 'pictophonetic')) {\n      delete stage.etymology.hint;\n    }\n    stage.etymology.type = type;\n    if (type === 'pictophonetic') {\n      _.extend(stage.etymology, guessPhoneticAndSemanticComponents(\n          Session.get('editor.glyph'), collectComponents(stage.tree)));\n    }\n    stage.forceRefresh();\n  },\n  'change .subtree-type': function(event) {\n    const type = $(event.target).val();\n    const subtree = decomposition_util.getSubtree(stage.tree, this.path);\n    setSubtreeType(subtree, type);\n    stage.forceRefresh();\n  },\n});\n\nTemplate.analysis_stage.helpers({\n  decomposition_data: () => {\n    return Session.get('stages.analysis.tree');\n  },\n  etymology_data: () => {\n    const result = Session.get('stages.analysis.etymology') || {};\n    result.hint = result.hint || '?';\n    if (result.type === 'pictophonetic') {\n      result.phonetic = result.phonetic || '?';\n      result.semantic = result.semantic || '?';\n    }\n    return result;\n  },\n  radical: () => {\n    return Session.get('stages.analysis.radical') || '?';\n  },\n});\n\nTemplate.tree.helpers({\n  compounds: (value) => {\n    return decomposition_util.ideograph_description_characters.map( (x) => ({\n      compound: x,\n      label: `${x} - ${decomposition_util.ids_data[x].label}`,\n      value: value,\n    }));\n  },\n  details: (character) => {\n    const glyph = Glyphs.get(character);\n    const data = cjklib.getCharacterData(character);\n    let definition = glyph.metadata.definition || data.definition;\n    let pinyin = glyph.metadata.pinyin || data.pinyin;\n    let radical = '';\n    if (cjklib.radicals.radical_to_index_map.hasOwnProperty(character)) {\n      const index = cjklib.radicals.radical_to_index_map[character];\n      const primary = cjklib.radicals.primary_radical[index];\n      const variant = primary !== character;\n      radical = `; ${variant ? 'variant of ' : ''}` +\n                `Kangxi radical ${index} ${variant ? primary : ''}`;\n      if (variant && Glyphs.get(primary)) {\n        const glyph = Glyphs.get(primary);\n        const data = cjklib.getCharacterData(primary);\n        definition = definition || glyph.definition || data.definition;\n        pinyin = pinyin || glyph.pinyin || data.pinyin;\n      }\n    }\n    definition = definition || '(unknown)';\n    return `${pinyin ? pinyin + ' - ' : ''}${definition}${radical}`;\n  },\n});\n\nconst traditionalEtymologyHack = () => {\n  // Only compute the traditional etymology based on simplified once, and only\n  // if this character does not already have an etymology computed.\n  if (!stage || !stage.simplified ||\n      stage.inferred_etymology_from_simplified_form) {\n    return;\n  }\n  const glyph = Session.get('editor.glyph');\n  const simplified = Glyphs.findOne({character: stage.simplified});\n  if (!glyph || !simplified) {\n    return;\n  }\n  stage.inferred_etymology_from_simplified_form = true;\n  if ((glyph.stages.analysis && glyph.stages.analysis.etymology &&\n       glyph.stages.analysis.etymology.hint) ||\n      !(simplified.stages.analysis && simplified.stages.analysis.etymology &&\n        simplified.stages.analysis.etymology.hint)) {\n    return;\n  }\n  // Try to pull components for the simplified character up to components for\n  // the traditional character.\n  const mapping = {};\n  const analysis = simplified.stages.analysis;\n  const decomposition =\n      decomposition_util.convertTreeToDecomposition(stage.tree);\n  if (decomposition.length === analysis.decomposition.length &&\n      decomposition[0] === analysis.decomposition[0]) {\n    for (let i = 0; i < decomposition.length; i++) {\n      mapping[analysis.decomposition[i]] = decomposition[i];\n    }\n  } else {\n    return;\n  }\n  // Pull the actual etymology.\n  stage.etymology = {};\n  for (let key of _.keys(analysis.etymology)) {\n    const value = analysis.etymology[key];\n    stage.etymology[key] = key === 'type' ? value : value.applyMapping(mapping);\n  }\n  stage.forceRefresh();\n}\n\nconst updateStatus = () => {\n  const components = collectComponents(Session.get('stages.analysis.tree'));\n  if (Session.get('stages.analysis.simplified')) {\n    components.push(Session.get('stages.analysis.simplified'));\n  }\n  const radical = Session.get('stages.analysis.radical');\n  const missing = components.filter((x) => {\n    const glyph = Glyphs.findOne({character: x});\n    return !glyph || !glyph.stages.verified;\n  });\n  const log = [];\n  if (missing.length === 0) {\n    log.push({cls: 'success', message: 'All components ready.'});\n    Meteor.setTimeout(traditionalEtymologyHack, 0);\n  } else {\n    const error = `Incomplete components: ${missing.join(' ')}`;\n    log.push({cls: 'error', message: error});\n  }\n  if (!radical || radical.length === 0) {\n    log.push({cls: 'error', message: 'No radical selected.'});\n  } else if (radical.length > 1) {\n    log.push({cls: 'error', message: 'Multiple radicals selected.'});\n  } else if (components.indexOf(radical) >= 0) {\n    log.push({cls: 'success',\n              message: `Radical ${radical} found in decomposition.`});\n  }\n  const nonradicals = (Array.from(radical || '')).filter(\n      (x) => !cjklib.radicals.radical_to_index_map.hasOwnProperty(x));\n  if (nonradicals.length > 0) {\n    log.push({cls: 'error', message: 'Radical field includes non-radicals: ' +\n                                     nonradicals.join(' ')});\n  }\n  if (Session.get('stage.type') === 'analysis') {\n    Session.set('stage.status', log);\n  }\n}\n\n// We need to add the setTimeout here because client/lib is loaded before lib.\n// TODO(skishore): Find a better way to handle this load-order issue.\nMeteor.startup(() => Meteor.setTimeout(() => {\n  Tracker.autorun(updateStatus);\n  cjklib.promise.then(() => Tracker.autorun(() => {\n    const components = collectComponents(Session.get('stages.analysis.tree'));\n    if (Session.get('stages.analysis.simplified')) {\n      components.push(Session.get('stages.analysis.simplified'));\n    }\n    for (let component of [].concat(components)) {\n      if (cjklib.radicals.radical_to_index_map.hasOwnProperty(component)) {\n        const index = cjklib.radicals.radical_to_index_map[component];\n        const primary = cjklib.radicals.primary_radical[index]\n        if (primary !== component) {\n          components.push(primary);\n        }\n      }\n    }\n    Meteor.subscribe('getAllGlyphs', components);\n  })).catch(console.error.bind(console));\n}, 0));\n\nexport {AnalysisStage};\n","import {AbstractStage} from '/client/lib/abstract';\nimport {Point} from '/lib/base';\nimport {stroke_extractor} from '/lib/stroke_extractor';\n\nconst bridgeKey = (bridge) => bridge.map(Point.key).join('-');\n\nconst removeBridge = (bridges, bridge) => {\n  const keys = {};\n  keys[bridgeKey(bridge)] = true;\n  keys[bridgeKey([bridge[1], bridge[0]])] = true;\n  return bridges.filter((bridge) => !keys[bridgeKey(bridge)]);\n}\n\nclass BridgesStage extends AbstractStage {\n  constructor(glyph) {\n    super('bridges');\n    const bridges = stroke_extractor.getBridges(glyph.stages.path);\n    this.original = bridges.bridges;\n    this.adjusted = glyph.stages.bridges || this.original;\n    this.endpoints = bridges.endpoints.reduce((x, y) => x.concat(y), []);\n    this.path = glyph.stages.path;\n    this.selected_point = undefined;\n  }\n  handleClickOnBridge(bridge) {\n    this.adjusted = removeBridge(this.adjusted, bridge);\n  }\n  handleClickOnPoint(point) {\n    if (this.selected_point === undefined) {\n      this.selected_point = point;\n      return;\n    } else if (Point.equal(point, this.selected_point)) {\n      this.selected_point = undefined;\n      return;\n    }\n    const bridge = [point, this.selected_point];\n    this.selected_point = undefined;\n    const without = removeBridge(this.adjusted, bridge);\n    if (without.length < this.adjusted.length) {\n      return;\n    }\n    this.adjusted.push(bridge);\n  }\n  handleEvent(event, template) {\n    if (template.x1 !== undefined) {\n      const bridge = [[template.x1, template.y1], [template.x2, template.y2]];\n      this.handleClickOnBridge(bridge);\n    } else if (template.cx !== undefined) {\n      this.handleClickOnPoint([template.cx, template.cy]);\n    }\n  }\n  refreshUI() {\n    Session.set('stage.paths', [{d: this.path, fill: 'gray', stroke: 'gray'}]);\n    const keys = {};\n    this.original.map((bridge) => {\n      keys[bridgeKey(bridge)] = true;\n      keys[bridgeKey([bridge[1], bridge[0]])] = true;\n    });\n    Session.set('stage.lines', this.adjusted.map((bridge) => ({\n      cls: 'selectable',\n      stroke: keys[bridgeKey(bridge)] ? 'red' : 'purple',\n      x1: bridge[0][0],\n      y1: bridge[0][1],\n      x2: bridge[1][0],\n      y2: bridge[1][1],\n    })));\n    Session.set('stage.points', this.endpoints.map((endpoint) => {\n      let color = endpoint.corner ? 'red' : 'black';\n      if (this.selected_point &&\n          Point.equal(endpoint.point, this.selected_point)) {\n        color = 'purple';\n      }\n      return {\n        cls: 'selectable',\n        cx: endpoint.point[0],\n        cy: endpoint.point[1],\n        fill: color,\n        stroke: color,\n      }\n    }));\n    const strokes = stroke_extractor.getStrokes(this.path, this.adjusted);\n    const n = strokes.strokes.length;\n    const message = `Extracted ${n} stroke${n == 1 ? '' : 's'}.`;\n    const entry = {cls: 'success', message: message};\n    Session.set('stage.status', strokes.log.concat([entry]));\n  }\n}\n\nexport {BridgesStage};\n","import {AbstractStage} from '/client/lib/abstract';\nimport {assert, Point} from '/lib/base';\nimport {decomposition_util} from '/lib/decomposition_util';\nimport {Glyphs} from '/lib/glyphs';\nimport {Hungarian} from '/lib/hungarian';\nimport {median_util} from '/lib/median_util';\n\nlet stage = undefined;\n\nconst Order = new Mongo.Collection('order')._collection;\n\n// TODO(skishore): Consider using sqrt(1/2) in place of 1/2 here. This constant\n// is used to compute bounds for components that are surrounded.\nconst rad2 = 1/2;\nconst compound_bounds = {\n  '⿰': [[[0, 0], [1/2, 1]], [[1/2, 0], [1/2, 1]]],\n  '⿱': [[[0, 0], [1, 1/2]], [[0, 1/2], [1, 1/2]]],\n  '⿴': [[[0, 0], [1, 1]], [[(1 - rad2)/2, (1 - rad2)/2], [rad2, rad2]]],\n  '⿵': [[[0, 0], [1, 1]], [[(1 - rad2)/2, 1 - rad2], [rad2, rad2]]],\n  '⿶': [[[0, 0], [1, 1]], [[(1 - rad2)/2, 0], [rad2, rad2]]],\n  '⿷': [[[0, 0], [1, 1]], [[1 - rad2, (1 - rad2)/2], [rad2, rad2]]],\n  '⿸': [[[0, 0], [1, 1 - rad2]], [[1 - rad2, 1 - rad2], [rad2, rad2]]],\n  '⿹': [[[0, 0], [1, 1]], [[0, 1 - rad2], [rad2, rad2]]],\n  '⿺': [[[0, 0], [1, 1]], [[1 - rad2, 0], [rad2, rad2]]],\n  '⿻': [[[0, 0], [1, 1]], [[0, 0], [1, 1]]],\n  '⿳': [[[0, 0], [1, 1/3]], [[0, 1/3], [1, 1/3]], [[0, 2/3], [1, 1/3]]],\n  '⿲': [[[0, 0], [1/3, 1]], [[1/3, 0], [1/3, 1]], [[2/3, 0], [1/3, 1]]],\n}\n\nconst augmentTreeWithBoundsData = (tree, bounds) => {\n  tree.bounds = bounds;\n  if (tree.type === 'compound') {\n    const diff = Point.subtract(bounds[1], bounds[0]);\n    const targets = compound_bounds[tree.value];\n    assert(targets && targets.length === tree.children.length);\n    for (let i = 0; i < targets.length; i++) {\n      const target = [targets[i][0], Point.add(targets[i][0], targets[i][1])];\n      const child_bounds = target.map(\n          (x) => [x[0]*diff[0] + bounds[0][0], x[1]*diff[1] + bounds[0][1]]);\n      augmentTreeWithBoundsData(tree.children[i], child_bounds);\n    }\n  } else {\n    assert(!tree.children);\n  }\n  return tree;\n}\n\nconst buildStrokeOrder = (tree, log) => {\n  if (tree.type === 'character') {\n    if (!tree.medians) {\n      log.push(`Missing component: ${tree.value}`);\n      return [];\n    }\n    return tree.medians.map((x) => ({median: x, node: tree}));\n  }\n  const parts = tree.children.map((x) => buildStrokeOrder(x, log));\n  const child = tree.children[0].value;\n  if (tree.value === '⿻') {\n    log.push('Cannot infer stroke order for compound ⿻.');\n  } else if (tree.value === '⿴') {\n    assert(parts.length === 2);\n    if (parts[0].length !== 3) {\n      log.push('Compound ⿴ requires first component 囗. ' +\n               `Got ${child} instead.`);\n    } else {\n      return parts[0].slice(0, 2).concat(parts[1]).concat([parts[0][2]]);\n    }\n  } else if (tree.value === '⿷') {\n    assert(parts.length === 2);\n    if (parts[0].length !== 2) {\n      log.push('Compound ⿷ requires first component ⼕ or ⼖. ' +\n               `Got ${child} instead.`);\n    } else {\n      return parts[0].slice(0, 1).concat(parts[1]).concat([parts[0][1]]);\n    }\n  } else if (tree.value === '⿶' ||\n             (tree.value === '⿺' && '辶廴乙'.indexOf(child) >= 0)) {\n    assert(parts.length === 2);\n    return parts[1].concat(parts[0]);\n  }\n  const result = [];\n  parts.map((x) => x.map((y) => result.push(y)));\n  return result;\n}\n\nconst collectComponentNodes = (tree, result) => {\n  result = result || [];\n  if (tree.type === 'character' && tree.value !== '?') {\n    result.push(tree);\n  }\n  for (let child of tree.children || []) {\n    collectComponentNodes(child, result);\n  }\n  return result;\n}\n\nconst getAffineTransform = (source, target) => {\n  const sdiff = Point.subtract(source[1], source[0]);\n  const tdiff = Point.subtract(target[1], target[0]);\n  const ratio = [tdiff[0]/sdiff[0], tdiff[1]/sdiff[1]];\n  return (point) => [ratio[0]*(point[0] - source[0][0]) + target[0][0],\n                     ratio[1]*(point[1] - source[0][1]) + target[0][1]];\n}\n\nconst matchStrokes = (character, components) => {\n  const normalize = median_util.normalizeForMatch;\n  const sources = character.map(normalize);\n  const targets = [];\n  components.map((x) => {\n    const transform = getAffineTransform([[0, 0], [1, 1]], x.node.bounds);\n    const target = normalize(x.median).map(transform);\n    targets.push(target);\n  });\n\n  const matrix = [];\n  const missing_penalty = 1024;\n  const n = Math.max(sources.length, targets.length);\n  for (let i = 0; i < n; i++) {\n    matrix.push([]);\n    for (let j = 0; j < n; j++) {\n      if (i < sources.length && j < targets.length) {\n        matrix[i].push(scoreStrokes(sources[i], targets[j]));\n      } else {\n        let top_left_penalty = 0;\n        if (j >= targets.length) {\n          // We want strokes that are not matched with components to be sorted\n          // by their proximity to the top-left corner of the glyph. We compute\n          // a penalty which is smaller for strokes closer to this corner,\n          // then multiply the penalty by j so that those strokes come first.\n          const direction = [0.01, 0.02];\n          top_left_penalty = -j*Math.min(\n              Point.dot(direction, sources[i][0]),\n              Point.dot(direction, sources[i][sources[i].length - 1]));\n        }\n        matrix[i].push(-missing_penalty - top_left_penalty);\n      }\n    }\n  }\n  return new Hungarian(matrix).x_match;\n}\n\nconst maybeReverse = (median, match) => {\n  const diff1 = Point.subtract(median[median.length - 1], median[0]);\n  let diff2 = [1, -2]\n  if (match) {\n    const target = match.median;\n    diff2 = Point.subtract(target[target.length - 1], target[0]);\n  }\n  if (Point.dot(diff1, diff2) < 0) {\n    median.reverse();\n  }\n  return median;\n}\n\nconst scoreStrokes = (stroke1, stroke2) => {\n  assert(stroke1.length === stroke2.length);\n  let option1 = 0;\n  let option2 = 0;\n  _.range(stroke1.length).map((i) => {\n    option1 -= Point.distance2(stroke1[i], stroke2[i]);\n    option2 -= Point.distance2(stroke1[i], stroke2[stroke2.length - i - 1]);\n  });\n  return Math.max(option1, option2);\n}\n\nclass OrderStage extends AbstractStage {\n  constructor(glyph) {\n    super('order');\n    this.adjusted = glyph.stages.order;\n    this.medians = glyph.stages.strokes.raw.map(median_util.findStrokeMedian);\n    this.strokes = glyph.stages.strokes.corrected;\n\n    const tree = decomposition_util.convertDecompositionToTree(\n        glyph.stages.analysis.decomposition);\n    this.tree = augmentTreeWithBoundsData(tree, [[0, 0], [1, 1]]);\n\n    this.indices = {null: -1};\n    this.components = [];\n    this.paths = [];\n    collectComponentNodes(this.tree).map((x, i) => {\n      this.indices[JSON.stringify(x.path)] = i;\n      this.components.push(x.value);\n      this.paths.push(x.path);\n    });\n\n    stage = this;\n  }\n  handleEvent(event, template) {\n    const element = this.adjusted.filter(\n        (x) => x.stroke === template.stroke_index)[0];\n    const old_index = this.indices[JSON.stringify(element.match || null)];\n    const new_index = ((old_index + 2) % (this.components.length + 1)) - 1;\n    element.match = this.paths[new_index];\n  }\n  onAllComponentsReady() {\n    if (this.adjusted) {\n      return;\n    }\n    const nodes = collectComponentNodes(this.tree);\n    nodes.map((node) => {\n      const glyph = Glyphs.findOne({character: node.value});\n      node.medians = glyph.stages.order.map((x) => x.median);\n    });\n    const log = [];\n    const order = buildStrokeOrder(this.tree, log);\n    const matching = matchStrokes(this.medians, order);\n    const indices = _.range(this.medians.length).sort(\n        (a, b) => matching[a] - matching[b]);\n    this.adjusted = indices.map((x) => {\n      const match = order[matching[x]];\n      return {\n        match: match ? match.node.path : undefined,\n        median: maybeReverse(this.medians[x], match),\n        stroke: x,\n      };\n    });\n    this.forceRefresh(true /* from_construct_stage */);\n  }\n  onReverseStroke(stroke) {\n    const element = this.adjusted.filter((x) => x.stroke === stroke)[0];\n    element.median.reverse();\n    this.forceRefresh();\n  }\n  onSort(old_index, new_index) {\n    const elements = this.adjusted.splice(old_index, 1);\n    assert(elements.length === 1);\n    this.adjusted.splice(new_index, 0, elements[0]);\n    this.forceRefresh();\n  }\n  refreshUI() {\n    Session.set('stage.status', this.adjusted ? [] : [{\n      cls: 'error',\n      message: 'Loading component data...',\n    }]);\n    Session.set('stages.order.colors', this.colors);\n    Session.set('stages.order.components', this.components);\n    Session.set('stages.order.indices', this.indices);\n    Session.set('stages.order.order', this.adjusted);\n    Order.remove({});\n    (this.adjusted || []).map((x, i) => {\n      const key = JSON.stringify(x.match || null);\n      const color = this.colors[this.indices[key]] || 'lightgray';\n      const glyph = {\n        lines: [{\n          x1: x.median[0][0],\n          y1: x.median[0][1],\n          x2: x.median[x.median.length - 1][0],\n          y2: x.median[x.median.length - 1][1],\n        }],\n        paths: [{d: this.strokes[x.stroke]}],\n      };\n      const lighten = (color, alpha) => {\n        const c = parseInt(color.substr(1), 16);\n        return `rgba(${c >> 16}, ${(c >> 8) & 0xFF}, ${c & 0xFF}, ${alpha})`;\n      };\n      Order.insert({\n        background: lighten(color, 0.1),\n        color: color,\n        glyph: glyph,\n        index: i,\n        stroke_index: x.stroke,\n      });\n    });\n  }\n}\n\nTemplate.order_stage.events({\n  'click .permutation .entry .reverse': function(event) {\n    stage && stage.onReverseStroke(this.stroke_index);\n  },\n});\n\nTemplate.order_stage.helpers({\n  character: () => {\n    const colors = Session.get('stages.order.colors');\n    const indices = Session.get('stages.order.indices');\n    const order = Session.get('stages.order.order');\n    const character = Session.get('editor.glyph');\n    const result = {paths: []};\n    if (!colors || !indices || !order || !character) {\n      return result;\n    }\n    for (let element of order) {\n      const index = indices[JSON.stringify(element.match || null)];\n      const color = colors[index % colors.length];\n      result.paths.push({\n        cls: 'selectable',\n        d: character.stages.strokes.corrected[element.stroke],\n        fill: index < 0 ? 'lightgray' : color,\n        stroke: index < 0 ? 'lightgray' : 'black',\n        stroke_index: element.stroke,\n      });\n    }\n    return result;\n  },\n  components: () => {\n    const colors = Session.get('stages.order.colors');\n    const components = Session.get('stages.order.components');\n    const result = [];\n    if (!colors || !components) {\n      return result;\n    }\n    for (let index = 0; index < components.length; index++) {\n      const color = colors[index % colors.length];\n      const glyph = Glyphs.findOne({character: components[index]});\n      if (!glyph) {\n        continue;\n      }\n      const component = [];\n      for (let stroke of glyph.stages.strokes.corrected) {\n        component.push({d: stroke, fill: color, stroke: 'black'});\n      }\n      result.push({glyph: {paths: component}, top: `${138*index + 8}px`});\n    }\n    return result;\n  },\n  items: () => {\n    const order = Session.get('stages.order.order');\n    return Order.find({}, {limit: (order || []).length});\n  },\n  options: () => {\n    return {\n      onSort: (event) => {\n        // Suppress the two errors that will be printed when the Sortable\n        // plugin tries to persist the sort result to the server.\n        Meteor._suppress_log(2);\n        stage && stage.onSort(event.oldIndex, event.newIndex);\n      },\n    }\n  },\n});\n\nMeteor.startup(() => {\n  Tracker.autorun(() => {\n    const components = Session.get('stages.order.components') || [];\n    Meteor.subscribe('getAllGlyphs', components);\n  });\n  Tracker.autorun(() => {\n    const components = Session.get('stages.order.components') || [];\n    const found = components.filter((x) => Glyphs.findOne({character: x}));\n    if (found.length === components.length &&\n        Session.get('stage.type') === 'order') {\n      stage.onAllComponentsReady();\n    }\n  });\n});\n\nexport {OrderStage};\n","import opentype from '/client/external/opentype/0.4.10/opentype';\n\nimport {AbstractStage} from '/client/lib/abstract';\nimport {assert, Point} from '/lib/base';\nimport {Glyphs} from '/lib/glyphs';\nimport {svg} from '/lib/svg';\n\nlet stage = undefined;\n\nclass PathStage extends AbstractStage {\n  constructor(glyph) {\n    super('path');\n    this.adjusted = glyph.stages.path;\n    this.character = glyph.character;\n    this.alternative = undefined;\n    this.error = 'No path data.';\n    stage = this;\n  }\n  onGetPath(error, path) {\n    Session.set('modal.value', undefined);\n    this.adjusted = path;\n    this.error = error;\n    this.forceRefresh();\n  }\n  refreshUI() {\n    const d = this.adjusted;\n    Session.set('stage.paths', [{d: d, fill: 'gray', stroke: 'gray'}]);\n    Session.set(\n      'stage.status',\n      d ? [{cls: 'success', message: 'Got path data.'}]\n        : [{cls: 'error', message: this.error}]);\n    Session.set('stages.path.alternative', this.alternative);\n  }\n}\n\n// We avoid arrow functions in this map so that this is bound to the template.\nTemplate.path_stage.events({\n  'blur .value': function(event) {\n    const text = $(event.target).text();\n    const value = text.length === 1 && text !== '?' ? text : undefined;\n    if (value === stage.alternative) {\n      $(event.target).text(value || '?');\n    } else {\n      stage.alternative = value;\n      stage.forceRefresh();\n    }\n  },\n  'click .option': function(event) {\n    const label = this.label;\n    const character = stage.character;\n    assert(character.length === 1);\n    Session.set('modal.text', `Loading ${label}...`);\n    Session.set('modal.value', 0);\n    opentype.load(this.font, (error, font) => {\n      stage.alternative = undefined;\n      if (error) {\n        stage.onGetPath(`Error loading ${label}: ${error}`);\n        return;\n      }\n      Session.set('modal.text', `Extracting ${character} from ${label}...`);\n      Session.set('modal.value', 0.5);\n      const index = font.charToGlyphIndex(character);\n      const glyph = font.glyphs.get(index);\n      if (glyph.unicode !== character.codePointAt(0)) {\n        stage.onGetPath(`${character} is not present in ${label}.`);\n        return;\n      }\n      // TODO(skishore): We may want a try/catch around this call.\n      const path = svg.convertCommandsToPath(glyph.path.commands);\n      stage.onGetPath(undefined, path);\n    });\n  },\n});\n\nTemplate.path_stage.helpers({\n  alternative: () => Session.get('stages.path.alternative') || '?',\n  options: () => [{font: 'arphic/gkai00mp.ttf', label: 'AR PL KaitiM GB'},\n                  {font: 'arphic/UKaiCN.ttf', label: 'AR PL UKai'}],\n});\n\nMeteor.startup(() => {\n  Tracker.autorun(() => {\n    const alternative = Session.get('stages.path.alternative');\n    if (alternative) {\n      Meteor.subscribe('getAllGlyphs', [alternative]);\n      const glyph = Glyphs.findOne({character: alternative});\n      if (!glyph) {\n        stage.onGetPath(`Could not find glyph for ${alternative}.`);\n      } else if (!glyph.stages.path) {\n        stage.onGetPath(`No available path for ${alternative}.`);\n      } else {\n        stage.onGetPath(undefined, glyph.stages.path);\n      }\n    }\n  });\n});\n\nexport {PathStage};\n","import {AbstractStage} from '/client/lib/abstract';\nimport {assert} from '/lib/base';\nimport {cjklib} from '/lib/cjklib';\nimport {fixStrokes} from '/lib/stroke_caps/fixStrokes';\nimport {stroke_extractor} from '/lib/stroke_extractor';\n\nconst getStatusLine = (actual, expected) => {\n  const actual_text = `Selected ${actual} stroke${actual === 1 ? '' : 's'}`;\n  if (!expected) {\n    return {cls: 'error', message: `${actual_text}. True number unknown.`};\n  } else if (actual !== expected) {\n    return {cls: 'error', message: `${actual_text}, but need ${expected}.`};\n  }\n  return {cls: 'success', message: `${actual_text}.`};\n}\n\nconst getStrokePaths = (strokes, include, colors) => {\n  const result = [];\n  for (let i = 0; i < strokes.length; i++) {\n    const stroke = strokes[i];\n    const color = include[stroke] ? colors[i % colors.length] : 'gray';\n    result.push({cls: 'selectable', d: stroke, fill: color, stroke: 'black'});\n  }\n  return result;\n}\n\nclass StrokesStage extends AbstractStage {\n  constructor(glyph) {\n    super('strokes');\n    const raw = stroke_extractor.getStrokes(\n        glyph.stages.path, glyph.stages.bridges).strokes;\n    this.include = {};\n    this.original = {corrected: fixStrokes(raw), raw};\n    this.original.corrected.map((x) => this.include[x] = true);\n    if (glyph.stages.strokes) {\n      this.original.corrected.map((x) => this.include[x] = false);\n      glyph.stages.strokes.corrected.map((x) => this.include[x] = true);\n    }\n  }\n  getStageOutput() {\n    const fn = (_, i) => this.include[this.original.corrected[i]];\n    return {\n      raw: this.original.raw.filter(fn),\n      corrected: this.original.corrected.filter(fn),\n    };\n  }\n  handleEvent(event, template) {\n    assert(this.include.hasOwnProperty(template.d));\n    this.include[template.d] = !this.include[template.d];\n  }\n  refreshUI(character, metadata) {\n    const strokes = this.original.corrected;\n    Session.set('stage.paths',\n                getStrokePaths(strokes, this.include, this.colors));\n    const data = cjklib.getCharacterData(character);\n    const actual = this.getStageOutput().corrected.length;\n    const expected = metadata.strokes || data.strokes;\n    Session.set('stage.status', [getStatusLine(actual, expected)]);\n  }\n}\n\nexport {StrokesStage};\n","import {AbstractStage} from '/client/lib/abstract';\nimport {getAnimationData} from '/lib/animation';\n\nclass VerifiedStage extends AbstractStage {\n  constructor(glyph) {\n    super('verified');\n    const strokes = glyph.stages.order.map(\n        (x) => glyph.stages.strokes.corrected[x.stroke]);\n    const medians = glyph.stages.order.map((x) => x.median);\n    this.data = getAnimationData(strokes, medians);\n  }\n  refreshUI() {\n    Session.set('stage.status',\n                [{cls: 'success', message: 'Character analysis complete.'}]);\n    Session.set('stages.verified.data', this.data);\n  }\n}\n\nTemplate.verified_stage.helpers({\n  data: () => Session.get('stages.verified.data'),\n});\n\nexport {VerifiedStage};\n","(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.opentype = f()}})(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n// Run-time checking of preconditions.\n\n'use strict';\n\n// Precondition function that checks if the given predicate is true.\n// If not, it will throw an error.\nexports.argument = function(predicate, message) {\n    if (!predicate) {\n        throw new Error(message);\n    }\n};\n\n// Precondition function that checks if the given assertion is true.\n// If not, it will throw an error.\nexports.assert = exports.argument;\n\n},{}],2:[function(require,module,exports){\n// Drawing utility functions.\n\n'use strict';\n\n// Draw a line on the given context from point `x1,y1` to point `x2,y2`.\nfunction line(ctx, x1, y1, x2, y2) {\n    ctx.beginPath();\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.stroke();\n}\n\nexports.line = line;\n\n},{}],3:[function(require,module,exports){\n// Glyph encoding\n\n'use strict';\n\nvar cffStandardStrings = [\n    '.notdef', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent', 'ampersand', 'quoteright',\n    'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash', 'zero', 'one', 'two',\n    'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less', 'equal', 'greater',\n    'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S',\n    'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright', 'asciicircum', 'underscore',\n    'quoteleft', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde', 'exclamdown', 'cent', 'sterling',\n    'fraction', 'yen', 'florin', 'section', 'currency', 'quotesingle', 'quotedblleft', 'guillemotleft',\n    'guilsinglleft', 'guilsinglright', 'fi', 'fl', 'endash', 'dagger', 'daggerdbl', 'periodcentered', 'paragraph',\n    'bullet', 'quotesinglbase', 'quotedblbase', 'quotedblright', 'guillemotright', 'ellipsis', 'perthousand',\n    'questiondown', 'grave', 'acute', 'circumflex', 'tilde', 'macron', 'breve', 'dotaccent', 'dieresis', 'ring',\n    'cedilla', 'hungarumlaut', 'ogonek', 'caron', 'emdash', 'AE', 'ordfeminine', 'Lslash', 'Oslash', 'OE',\n    'ordmasculine', 'ae', 'dotlessi', 'lslash', 'oslash', 'oe', 'germandbls', 'onesuperior', 'logicalnot', 'mu',\n    'trademark', 'Eth', 'onehalf', 'plusminus', 'Thorn', 'onequarter', 'divide', 'brokenbar', 'degree', 'thorn',\n    'threequarters', 'twosuperior', 'registered', 'minus', 'eth', 'multiply', 'threesuperior', 'copyright',\n    'Aacute', 'Acircumflex', 'Adieresis', 'Agrave', 'Aring', 'Atilde', 'Ccedilla', 'Eacute', 'Ecircumflex',\n    'Edieresis', 'Egrave', 'Iacute', 'Icircumflex', 'Idieresis', 'Igrave', 'Ntilde', 'Oacute', 'Ocircumflex',\n    'Odieresis', 'Ograve', 'Otilde', 'Scaron', 'Uacute', 'Ucircumflex', 'Udieresis', 'Ugrave', 'Yacute',\n    'Ydieresis', 'Zcaron', 'aacute', 'acircumflex', 'adieresis', 'agrave', 'aring', 'atilde', 'ccedilla', 'eacute',\n    'ecircumflex', 'edieresis', 'egrave', 'iacute', 'icircumflex', 'idieresis', 'igrave', 'ntilde', 'oacute',\n    'ocircumflex', 'odieresis', 'ograve', 'otilde', 'scaron', 'uacute', 'ucircumflex', 'udieresis', 'ugrave',\n    'yacute', 'ydieresis', 'zcaron', 'exclamsmall', 'Hungarumlautsmall', 'dollaroldstyle', 'dollarsuperior',\n    'ampersandsmall', 'Acutesmall', 'parenleftsuperior', 'parenrightsuperior', '266 ff', 'onedotenleader',\n    'zerooldstyle', 'oneoldstyle', 'twooldstyle', 'threeoldstyle', 'fouroldstyle', 'fiveoldstyle', 'sixoldstyle',\n    'sevenoldstyle', 'eightoldstyle', 'nineoldstyle', 'commasuperior', 'threequartersemdash', 'periodsuperior',\n    'questionsmall', 'asuperior', 'bsuperior', 'centsuperior', 'dsuperior', 'esuperior', 'isuperior', 'lsuperior',\n    'msuperior', 'nsuperior', 'osuperior', 'rsuperior', 'ssuperior', 'tsuperior', 'ff', 'ffi', 'ffl',\n    'parenleftinferior', 'parenrightinferior', 'Circumflexsmall', 'hyphensuperior', 'Gravesmall', 'Asmall',\n    'Bsmall', 'Csmall', 'Dsmall', 'Esmall', 'Fsmall', 'Gsmall', 'Hsmall', 'Ismall', 'Jsmall', 'Ksmall', 'Lsmall',\n    'Msmall', 'Nsmall', 'Osmall', 'Psmall', 'Qsmall', 'Rsmall', 'Ssmall', 'Tsmall', 'Usmall', 'Vsmall', 'Wsmall',\n    'Xsmall', 'Ysmall', 'Zsmall', 'colonmonetary', 'onefitted', 'rupiah', 'Tildesmall', 'exclamdownsmall',\n    'centoldstyle', 'Lslashsmall', 'Scaronsmall', 'Zcaronsmall', 'Dieresissmall', 'Brevesmall', 'Caronsmall',\n    'Dotaccentsmall', 'Macronsmall', 'figuredash', 'hypheninferior', 'Ogoneksmall', 'Ringsmall', 'Cedillasmall',\n    'questiondownsmall', 'oneeighth', 'threeeighths', 'fiveeighths', 'seveneighths', 'onethird', 'twothirds',\n    'zerosuperior', 'foursuperior', 'fivesuperior', 'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior',\n    'zeroinferior', 'oneinferior', 'twoinferior', 'threeinferior', 'fourinferior', 'fiveinferior', 'sixinferior',\n    'seveninferior', 'eightinferior', 'nineinferior', 'centinferior', 'dollarinferior', 'periodinferior',\n    'commainferior', 'Agravesmall', 'Aacutesmall', 'Acircumflexsmall', 'Atildesmall', 'Adieresissmall',\n    'Aringsmall', 'AEsmall', 'Ccedillasmall', 'Egravesmall', 'Eacutesmall', 'Ecircumflexsmall', 'Edieresissmall',\n    'Igravesmall', 'Iacutesmall', 'Icircumflexsmall', 'Idieresissmall', 'Ethsmall', 'Ntildesmall', 'Ogravesmall',\n    'Oacutesmall', 'Ocircumflexsmall', 'Otildesmall', 'Odieresissmall', 'OEsmall', 'Oslashsmall', 'Ugravesmall',\n    'Uacutesmall', 'Ucircumflexsmall', 'Udieresissmall', 'Yacutesmall', 'Thornsmall', 'Ydieresissmall', '001.000',\n    '001.001', '001.002', '001.003', 'Black', 'Bold', 'Book', 'Light', 'Medium', 'Regular', 'Roman', 'Semibold'];\n\nvar cffStandardEncoding = [\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    '', '', '', '', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent', 'ampersand', 'quoteright',\n    'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash', 'zero', 'one', 'two',\n    'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less', 'equal', 'greater',\n    'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S',\n    'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright', 'asciicircum', 'underscore',\n    'quoteleft', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't',\n    'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde', '', '', '', '', '', '', '', '',\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    'exclamdown', 'cent', 'sterling', 'fraction', 'yen', 'florin', 'section', 'currency', 'quotesingle',\n    'quotedblleft', 'guillemotleft', 'guilsinglleft', 'guilsinglright', 'fi', 'fl', '', 'endash', 'dagger',\n    'daggerdbl', 'periodcentered', '', 'paragraph', 'bullet', 'quotesinglbase', 'quotedblbase', 'quotedblright',\n    'guillemotright', 'ellipsis', 'perthousand', '', 'questiondown', '', 'grave', 'acute', 'circumflex', 'tilde',\n    'macron', 'breve', 'dotaccent', 'dieresis', '', 'ring', 'cedilla', '', 'hungarumlaut', 'ogonek', 'caron',\n    'emdash', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', 'AE', '', 'ordfeminine', '', '', '',\n    '', 'Lslash', 'Oslash', 'OE', 'ordmasculine', '', '', '', '', '', 'ae', '', '', '', 'dotlessi', '', '',\n    'lslash', 'oslash', 'oe', 'germandbls'];\n\nvar cffExpertEncoding = [\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    '', '', '', '', 'space', 'exclamsmall', 'Hungarumlautsmall', '', 'dollaroldstyle', 'dollarsuperior',\n    'ampersandsmall', 'Acutesmall', 'parenleftsuperior', 'parenrightsuperior', 'twodotenleader', 'onedotenleader',\n    'comma', 'hyphen', 'period', 'fraction', 'zerooldstyle', 'oneoldstyle', 'twooldstyle', 'threeoldstyle',\n    'fouroldstyle', 'fiveoldstyle', 'sixoldstyle', 'sevenoldstyle', 'eightoldstyle', 'nineoldstyle', 'colon',\n    'semicolon', 'commasuperior', 'threequartersemdash', 'periodsuperior', 'questionsmall', '', 'asuperior',\n    'bsuperior', 'centsuperior', 'dsuperior', 'esuperior', '', '', 'isuperior', '', '', 'lsuperior', 'msuperior',\n    'nsuperior', 'osuperior', '', '', 'rsuperior', 'ssuperior', 'tsuperior', '', 'ff', 'fi', 'fl', 'ffi', 'ffl',\n    'parenleftinferior', '', 'parenrightinferior', 'Circumflexsmall', 'hyphensuperior', 'Gravesmall', 'Asmall',\n    'Bsmall', 'Csmall', 'Dsmall', 'Esmall', 'Fsmall', 'Gsmall', 'Hsmall', 'Ismall', 'Jsmall', 'Ksmall', 'Lsmall',\n    'Msmall', 'Nsmall', 'Osmall', 'Psmall', 'Qsmall', 'Rsmall', 'Ssmall', 'Tsmall', 'Usmall', 'Vsmall', 'Wsmall',\n    'Xsmall', 'Ysmall', 'Zsmall', 'colonmonetary', 'onefitted', 'rupiah', 'Tildesmall', '', '', '', '', '', '', '',\n    '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '', '',\n    'exclamdownsmall', 'centoldstyle', 'Lslashsmall', '', '', 'Scaronsmall', 'Zcaronsmall', 'Dieresissmall',\n    'Brevesmall', 'Caronsmall', '', 'Dotaccentsmall', '', '', 'Macronsmall', '', '', 'figuredash', 'hypheninferior',\n    '', '', 'Ogoneksmall', 'Ringsmall', 'Cedillasmall', '', '', '', 'onequarter', 'onehalf', 'threequarters',\n    'questiondownsmall', 'oneeighth', 'threeeighths', 'fiveeighths', 'seveneighths', 'onethird', 'twothirds', '',\n    '', 'zerosuperior', 'onesuperior', 'twosuperior', 'threesuperior', 'foursuperior', 'fivesuperior',\n    'sixsuperior', 'sevensuperior', 'eightsuperior', 'ninesuperior', 'zeroinferior', 'oneinferior', 'twoinferior',\n    'threeinferior', 'fourinferior', 'fiveinferior', 'sixinferior', 'seveninferior', 'eightinferior',\n    'nineinferior', 'centinferior', 'dollarinferior', 'periodinferior', 'commainferior', 'Agravesmall',\n    'Aacutesmall', 'Acircumflexsmall', 'Atildesmall', 'Adieresissmall', 'Aringsmall', 'AEsmall', 'Ccedillasmall',\n    'Egravesmall', 'Eacutesmall', 'Ecircumflexsmall', 'Edieresissmall', 'Igravesmall', 'Iacutesmall',\n    'Icircumflexsmall', 'Idieresissmall', 'Ethsmall', 'Ntildesmall', 'Ogravesmall', 'Oacutesmall',\n    'Ocircumflexsmall', 'Otildesmall', 'Odieresissmall', 'OEsmall', 'Oslashsmall', 'Ugravesmall', 'Uacutesmall',\n    'Ucircumflexsmall', 'Udieresissmall', 'Yacutesmall', 'Thornsmall', 'Ydieresissmall'];\n\nvar standardNames = [\n    '.notdef', '.null', 'nonmarkingreturn', 'space', 'exclam', 'quotedbl', 'numbersign', 'dollar', 'percent',\n    'ampersand', 'quotesingle', 'parenleft', 'parenright', 'asterisk', 'plus', 'comma', 'hyphen', 'period', 'slash',\n    'zero', 'one', 'two', 'three', 'four', 'five', 'six', 'seven', 'eight', 'nine', 'colon', 'semicolon', 'less',\n    'equal', 'greater', 'question', 'at', 'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O',\n    'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z', 'bracketleft', 'backslash', 'bracketright',\n    'asciicircum', 'underscore', 'grave', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o',\n    'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 'braceleft', 'bar', 'braceright', 'asciitilde',\n    'Adieresis', 'Aring', 'Ccedilla', 'Eacute', 'Ntilde', 'Odieresis', 'Udieresis', 'aacute', 'agrave',\n    'acircumflex', 'adieresis', 'atilde', 'aring', 'ccedilla', 'eacute', 'egrave', 'ecircumflex', 'edieresis',\n    'iacute', 'igrave', 'icircumflex', 'idieresis', 'ntilde', 'oacute', 'ograve', 'ocircumflex', 'odieresis',\n    'otilde', 'uacute', 'ugrave', 'ucircumflex', 'udieresis', 'dagger', 'degree', 'cent', 'sterling', 'section',\n    'bullet', 'paragraph', 'germandbls', 'registered', 'copyright', 'trademark', 'acute', 'dieresis', 'notequal',\n    'AE', 'Oslash', 'infinity', 'plusminus', 'lessequal', 'greaterequal', 'yen', 'mu', 'partialdiff', 'summation',\n    'product', 'pi', 'integral', 'ordfeminine', 'ordmasculine', 'Omega', 'ae', 'oslash', 'questiondown',\n    'exclamdown', 'logicalnot', 'radical', 'florin', 'approxequal', 'Delta', 'guillemotleft', 'guillemotright',\n    'ellipsis', 'nonbreakingspace', 'Agrave', 'Atilde', 'Otilde', 'OE', 'oe', 'endash', 'emdash', 'quotedblleft',\n    'quotedblright', 'quoteleft', 'quoteright', 'divide', 'lozenge', 'ydieresis', 'Ydieresis', 'fraction',\n    'currency', 'guilsinglleft', 'guilsinglright', 'fi', 'fl', 'daggerdbl', 'periodcentered', 'quotesinglbase',\n    'quotedblbase', 'perthousand', 'Acircumflex', 'Ecircumflex', 'Aacute', 'Edieresis', 'Egrave', 'Iacute',\n    'Icircumflex', 'Idieresis', 'Igrave', 'Oacute', 'Ocircumflex', 'apple', 'Ograve', 'Uacute', 'Ucircumflex',\n    'Ugrave', 'dotlessi', 'circumflex', 'tilde', 'macron', 'breve', 'dotaccent', 'ring', 'cedilla', 'hungarumlaut',\n    'ogonek', 'caron', 'Lslash', 'lslash', 'Scaron', 'scaron', 'Zcaron', 'zcaron', 'brokenbar', 'Eth', 'eth',\n    'Yacute', 'yacute', 'Thorn', 'thorn', 'minus', 'multiply', 'onesuperior', 'twosuperior', 'threesuperior',\n    'onehalf', 'onequarter', 'threequarters', 'franc', 'Gbreve', 'gbreve', 'Idotaccent', 'Scedilla', 'scedilla',\n    'Cacute', 'cacute', 'Ccaron', 'ccaron', 'dcroat'];\n\n// This is the encoding used for fonts created from scratch.\n// It loops through all glyphs and finds the appropriate unicode value.\n// Since it's linear time, other encodings will be faster.\nfunction DefaultEncoding(font) {\n    this.font = font;\n}\n\nDefaultEncoding.prototype.charToGlyphIndex = function(c) {\n    var code = c.charCodeAt(0);\n    var glyphs = this.font.glyphs;\n    if (glyphs) {\n        for (var i = 0; i < glyphs.length; i += 1) {\n            var glyph = glyphs.get(i);\n            for (var j = 0; j < glyph.unicodes.length; j += 1) {\n                if (glyph.unicodes[j] === code) {\n                    return i;\n                }\n            }\n        }\n    } else {\n        return null;\n    }\n};\n\nfunction CmapEncoding(cmap) {\n    this.cmap = cmap;\n}\n\nCmapEncoding.prototype.charToGlyphIndex = function(c) {\n    return this.cmap.glyphIndexMap[c.charCodeAt(0)] || 0;\n};\n\nfunction CffEncoding(encoding, charset) {\n    this.encoding = encoding;\n    this.charset = charset;\n}\n\nCffEncoding.prototype.charToGlyphIndex = function(s) {\n    var code = s.charCodeAt(0);\n    var charName = this.encoding[code];\n    return this.charset.indexOf(charName);\n};\n\nfunction GlyphNames(post) {\n    var i;\n    switch (post.version) {\n    case 1:\n        this.names = exports.standardNames.slice();\n        break;\n    case 2:\n        this.names = new Array(post.numberOfGlyphs);\n        for (i = 0; i < post.numberOfGlyphs; i++) {\n            if (post.glyphNameIndex[i] < exports.standardNames.length) {\n                this.names[i] = exports.standardNames[post.glyphNameIndex[i]];\n            } else {\n                this.names[i] = post.names[post.glyphNameIndex[i] - exports.standardNames.length];\n            }\n        }\n\n        break;\n    case 2.5:\n        this.names = new Array(post.numberOfGlyphs);\n        for (i = 0; i < post.numberOfGlyphs; i++) {\n            this.names[i] = exports.standardNames[i + post.glyphNameIndex[i]];\n        }\n\n        break;\n    case 3:\n        this.names = [];\n        break;\n    }\n}\n\nGlyphNames.prototype.nameToGlyphIndex = function(name) {\n    return this.names.indexOf(name);\n};\n\nGlyphNames.prototype.glyphIndexToName = function(gid) {\n    return this.names[gid];\n};\n\nfunction addGlyphNames(font) {\n    var glyph;\n    var glyphIndexMap = font.tables.cmap.glyphIndexMap;\n    var charCodes = Object.keys(glyphIndexMap);\n\n    for (var i = 0; i < charCodes.length; i += 1) {\n        var c = charCodes[i];\n        var glyphIndex = glyphIndexMap[c];\n        glyph = font.glyphs.get(glyphIndex);\n        glyph.addUnicode(parseInt(c));\n    }\n\n    for (i = 0; i < font.glyphs.length; i += 1) {\n        glyph = font.glyphs.get(i);\n        if (font.cffEncoding) {\n            glyph.name = font.cffEncoding.charset[i];\n        } else {\n            glyph.name = font.glyphNames.glyphIndexToName(i);\n        }\n    }\n}\n\nexports.cffStandardStrings = cffStandardStrings;\nexports.cffStandardEncoding = cffStandardEncoding;\nexports.cffExpertEncoding = cffExpertEncoding;\nexports.standardNames = standardNames;\nexports.DefaultEncoding = DefaultEncoding;\nexports.CmapEncoding = CmapEncoding;\nexports.CffEncoding = CffEncoding;\nexports.GlyphNames = GlyphNames;\nexports.addGlyphNames = addGlyphNames;\n\n},{}],4:[function(require,module,exports){\n// The Font object\n\n'use strict';\n\nvar path = require('./path');\nvar sfnt = require('./tables/sfnt');\nvar encoding = require('./encoding');\nvar glyphset = require('./glyphset');\n\n// A Font represents a loaded OpenType font file.\n// It contains a set of glyphs and methods to draw text on a drawing context,\n// or to get a path representing the text.\nfunction Font(options) {\n    options = options || {};\n\n    // OS X will complain if the names are empty, so we put a single space everywhere by default.\n    this.familyName = options.familyName || ' ';\n    this.styleName = options.styleName || ' ';\n    this.designer = options.designer || ' ';\n    this.designerURL = options.designerURL || ' ';\n    this.manufacturer = options.manufacturer || ' ';\n    this.manufacturerURL = options.manufacturerURL || ' ';\n    this.license = options.license || ' ';\n    this.licenseURL = options.licenseURL || ' ';\n    this.version = options.version || 'Version 0.1';\n    this.description = options.description || ' ';\n    this.copyright = options.copyright || ' ';\n    this.trademark = options.trademark || ' ';\n    this.unitsPerEm = options.unitsPerEm || 1000;\n    this.ascender = options.ascender;\n    this.descender = options.descender;\n    this.supported = true; // Deprecated: parseBuffer will throw an error if font is not supported.\n    this.glyphs = new glyphset.GlyphSet(this, options.glyphs || []);\n    this.encoding = new encoding.DefaultEncoding(this);\n    this.tables = {};\n}\n\n// Check if the font has a glyph for the given character.\nFont.prototype.hasChar = function(c) {\n    return this.encoding.charToGlyphIndex(c) !== null;\n};\n\n// Convert the given character to a single glyph index.\n// Note that this function assumes that there is a one-to-one mapping between\n// the given character and a glyph; for complex scripts this might not be the case.\nFont.prototype.charToGlyphIndex = function(s) {\n    return this.encoding.charToGlyphIndex(s);\n};\n\n// Convert the given character to a single Glyph object.\n// Note that this function assumes that there is a one-to-one mapping between\n// the given character and a glyph; for complex scripts this might not be the case.\nFont.prototype.charToGlyph = function(c) {\n    var glyphIndex = this.charToGlyphIndex(c);\n    var glyph = this.glyphs.get(glyphIndex);\n    if (!glyph) {\n        // .notdef\n        glyph = this.glyphs.get(0);\n    }\n\n    return glyph;\n};\n\n// Convert the given text to a list of Glyph objects.\n// Note that there is no strict one-to-one mapping between characters and\n// glyphs, so the list of returned glyphs can be larger or smaller than the\n// length of the given string.\nFont.prototype.stringToGlyphs = function(s) {\n    var glyphs = [];\n    for (var i = 0; i < s.length; i += 1) {\n        var c = s[i];\n        glyphs.push(this.charToGlyph(c));\n    }\n\n    return glyphs;\n};\n\nFont.prototype.nameToGlyphIndex = function(name) {\n    return this.glyphNames.nameToGlyphIndex(name);\n};\n\nFont.prototype.nameToGlyph = function(name) {\n    var glyphIndex = this.nametoGlyphIndex(name);\n    var glyph = this.glyphs.get(glyphIndex);\n    if (!glyph) {\n        // .notdef\n        glyph = this.glyphs.get(0);\n    }\n\n    return glyph;\n};\n\nFont.prototype.glyphIndexToName = function(gid) {\n    if (!this.glyphNames.glyphIndexToName) {\n        return '';\n    }\n\n    return this.glyphNames.glyphIndexToName(gid);\n};\n\n// Retrieve the value of the kerning pair between the left glyph (or its index)\n// and the right glyph (or its index). If no kerning pair is found, return 0.\n// The kerning value gets added to the advance width when calculating the spacing\n// between glyphs.\nFont.prototype.getKerningValue = function(leftGlyph, rightGlyph) {\n    leftGlyph = leftGlyph.index || leftGlyph;\n    rightGlyph = rightGlyph.index || rightGlyph;\n    var gposKerning = this.getGposKerningValue;\n    return gposKerning ? gposKerning(leftGlyph, rightGlyph) :\n        (this.kerningPairs[leftGlyph + ',' + rightGlyph] || 0);\n};\n\n// Helper function that invokes the given callback for each glyph in the given text.\n// The callback gets `(glyph, x, y, fontSize, options)`.\nFont.prototype.forEachGlyph = function(text, x, y, fontSize, options, callback) {\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 72;\n    options = options || {};\n    var kerning = options.kerning === undefined ? true : options.kerning;\n    var fontScale = 1 / this.unitsPerEm * fontSize;\n    var glyphs = this.stringToGlyphs(text);\n    for (var i = 0; i < glyphs.length; i += 1) {\n        var glyph = glyphs[i];\n        callback(glyph, x, y, fontSize, options);\n        if (glyph.advanceWidth) {\n            x += glyph.advanceWidth * fontScale;\n        }\n\n        if (kerning && i < glyphs.length - 1) {\n            var kerningValue = this.getKerningValue(glyph, glyphs[i + 1]);\n            x += kerningValue * fontScale;\n        }\n    }\n};\n\n// Create a Path object that represents the given text.\n//\n// text - The text to create.\n// x - Horizontal position of the beginning of the text. (default: 0)\n// y - Vertical position of the *baseline* of the text. (default: 0)\n// fontSize - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`. (default: 72)\n// Options is an optional object that contains:\n// - kerning - Whether to take kerning information into account. (default: true)\n//\n// Returns a Path object.\nFont.prototype.getPath = function(text, x, y, fontSize, options) {\n    var fullPath = new path.Path();\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        var glyphPath = glyph.getPath(gX, gY, gFontSize);\n        fullPath.extend(glyphPath);\n    });\n\n    return fullPath;\n};\n\n// Draw the text on the given drawing context.\n//\n// ctx - A 2D drawing context, like Canvas.\n// text - The text to create.\n// x - Horizontal position of the beginning of the text. (default: 0)\n// y - Vertical position of the *baseline* of the text. (default: 0)\n// fontSize - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`. (default: 72)\n// Options is an optional object that contains:\n// - kerning - Whether to take kerning information into account. (default: true)\nFont.prototype.draw = function(ctx, text, x, y, fontSize, options) {\n    this.getPath(text, x, y, fontSize, options).draw(ctx);\n};\n\n// Draw the points of all glyphs in the text.\n// On-curve points will be drawn in blue, off-curve points will be drawn in red.\n//\n// ctx - A 2D drawing context, like Canvas.\n// text - The text to create.\n// x - Horizontal position of the beginning of the text. (default: 0)\n// y - Vertical position of the *baseline* of the text. (default: 0)\n// fontSize - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`. (default: 72)\n// Options is an optional object that contains:\n// - kerning - Whether to take kerning information into account. (default: true)\nFont.prototype.drawPoints = function(ctx, text, x, y, fontSize, options) {\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        glyph.drawPoints(ctx, gX, gY, gFontSize);\n    });\n};\n\n// Draw lines indicating important font measurements for all glyphs in the text.\n// Black lines indicate the origin of the coordinate system (point 0,0).\n// Blue lines indicate the glyph bounding box.\n// Green line indicates the advance width of the glyph.\n//\n// ctx - A 2D drawing context, like Canvas.\n// text - The text to create.\n// x - Horizontal position of the beginning of the text. (default: 0)\n// y - Vertical position of the *baseline* of the text. (default: 0)\n// fontSize - Font size in pixels. We scale the glyph units by `1 / unitsPerEm * fontSize`. (default: 72)\n// Options is an optional object that contains:\n// - kerning - Whether to take kerning information into account. (default: true)\nFont.prototype.drawMetrics = function(ctx, text, x, y, fontSize, options) {\n    this.forEachGlyph(text, x, y, fontSize, options, function(glyph, gX, gY, gFontSize) {\n        glyph.drawMetrics(ctx, gX, gY, gFontSize);\n    });\n};\n\n// Validate\nFont.prototype.validate = function() {\n    var warnings = [];\n    var _this = this;\n\n    function assert(predicate, message) {\n        if (!predicate) {\n            warnings.push(message);\n        }\n    }\n\n    function assertStringAttribute(attrName) {\n        assert(_this[attrName] && _this[attrName].trim().length > 0, 'No ' + attrName + ' specified.');\n    }\n\n    // Identification information\n    assertStringAttribute('familyName');\n    assertStringAttribute('weightName');\n    assertStringAttribute('manufacturer');\n    assertStringAttribute('copyright');\n    assertStringAttribute('version');\n\n    // Dimension information\n    assert(this.unitsPerEm > 0, 'No unitsPerEm specified.');\n};\n\n// Convert the font object to a SFNT data structure.\n// This structure contains all the necessary tables and metadata to create a binary OTF file.\nFont.prototype.toTables = function() {\n    return sfnt.fontToTable(this);\n};\n\nFont.prototype.toBuffer = function() {\n    var sfntTable = this.toTables();\n    var bytes = sfntTable.encode();\n    var buffer = new ArrayBuffer(bytes.length);\n    var intArray = new Uint8Array(buffer);\n    for (var i = 0; i < bytes.length; i++) {\n        intArray[i] = bytes[i];\n    }\n\n    return buffer;\n};\n\n// Initiate a download of the OpenType font.\nFont.prototype.download = function() {\n    var fileName = this.familyName.replace(/\\s/g, '') + '-' + this.styleName + '.otf';\n    var buffer = this.toBuffer();\n\n    window.requestFileSystem = window.requestFileSystem || window.webkitRequestFileSystem;\n    window.requestFileSystem(window.TEMPORARY, buffer.byteLength, function(fs) {\n        fs.root.getFile(fileName, {create: true}, function(fileEntry) {\n            fileEntry.createWriter(function(writer) {\n                var dataView = new DataView(buffer);\n                var blob = new Blob([dataView], {type: 'font/opentype'});\n                writer.write(blob);\n\n                writer.addEventListener('writeend', function() {\n                    // Navigating to the file will download it.\n                    location.href = fileEntry.toURL();\n                }, false);\n            });\n        });\n    },\n\n    function(err) {\n        throw err;\n    });\n};\n\nexports.Font = Font;\n\n},{\"./encoding\":3,\"./glyphset\":6,\"./path\":9,\"./tables/sfnt\":24}],5:[function(require,module,exports){\n// The Glyph object\n\n'use strict';\n\nvar check = require('./check');\nvar draw = require('./draw');\nvar path = require('./path');\n\nfunction getPathDefinition(glyph, path) {\n    var _path = path || { commands: [] };\n    return {\n        configurable: true,\n\n        get: function() {\n            if (typeof _path === 'function') {\n                _path = _path();\n            }\n\n            return _path;\n        },\n\n        set: function(p) {\n            _path = p;\n        }\n    };\n}\n\n// A Glyph is an individual mark that often corresponds to a character.\n// Some glyphs, such as ligatures, are a combination of many characters.\n// Glyphs are the basic building blocks of a font.\n//\n// The `Glyph` class contains utility methods for drawing the path and its points.\nfunction Glyph(options) {\n    // By putting all the code on a prototype function (which is only declared once)\n    // we reduce the memory requirements for larger fonts by some 2%\n    this.bindConstructorValues(options);\n}\n\nGlyph.prototype.bindConstructorValues = function(options) {\n    this.index = options.index || 0;\n\n    // These three values cannnot be deferred for memory optimization:\n    this.name = options.name || null;\n    this.unicode = options.unicode || undefined;\n    this.unicodes = options.unicodes || options.unicode !== undefined ? [options.unicode] : [];\n\n    // But by binding these values only when necessary, we reduce can\n    // the memory requirements by almost 3% for larger fonts.\n    if (options.xMin) {\n        this.xMin = options.xMin;\n    }\n\n    if (options.yMin) {\n        this.yMin = options.yMin;\n    }\n\n    if (options.xMax) {\n        this.xMax = options.xMax;\n    }\n\n    if (options.yMax) {\n        this.yMax = options.yMax;\n    }\n\n    if (options.advanceWidth) {\n        this.advanceWidth = options.advanceWidth;\n    }\n\n    // The path for a glyph is the most memory intensive, and is bound as a value\n    // with a getter/setter to ensure we actually do path parsing only once the\n    // path is actually needed by anything.\n    Object.defineProperty(this, 'path', getPathDefinition(this, options.path));\n};\n\nGlyph.prototype.addUnicode = function(unicode) {\n    if (this.unicodes.length === 0) {\n        this.unicode = unicode;\n    }\n\n    this.unicodes.push(unicode);\n};\n\n// Convert the glyph to a Path we can draw on a drawing context.\n//\n// x - Horizontal position of the glyph. (default: 0)\n// y - Vertical position of the *baseline* of the glyph. (default: 0)\n// fontSize - Font size, in pixels (default: 72).\nGlyph.prototype.getPath = function(x, y, fontSize) {\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 72;\n    var scale = 1 / this.path.unitsPerEm * fontSize;\n    var p = new path.Path();\n    var commands = this.path.commands;\n    for (var i = 0; i < commands.length; i += 1) {\n        var cmd = commands[i];\n        if (cmd.type === 'M') {\n            p.moveTo(x + (cmd.x * scale), y + (-cmd.y * scale));\n        } else if (cmd.type === 'L') {\n            p.lineTo(x + (cmd.x * scale), y + (-cmd.y * scale));\n        } else if (cmd.type === 'Q') {\n            p.quadraticCurveTo(x + (cmd.x1 * scale), y + (-cmd.y1 * scale),\n                               x + (cmd.x * scale), y + (-cmd.y * scale));\n        } else if (cmd.type === 'C') {\n            p.curveTo(x + (cmd.x1 * scale), y + (-cmd.y1 * scale),\n                      x + (cmd.x2 * scale), y + (-cmd.y2 * scale),\n                      x + (cmd.x * scale), y + (-cmd.y * scale));\n        } else if (cmd.type === 'Z') {\n            p.closePath();\n        }\n    }\n\n    return p;\n};\n\n// Split the glyph into contours.\n// This function is here for backwards compatibility, and to\n// provide raw access to the TrueType glyph outlines.\nGlyph.prototype.getContours = function() {\n    if (this.points === undefined) {\n        return [];\n    }\n\n    var contours = [];\n    var currentContour = [];\n    for (var i = 0; i < this.points.length; i += 1) {\n        var pt = this.points[i];\n        currentContour.push(pt);\n        if (pt.lastPointOfContour) {\n            contours.push(currentContour);\n            currentContour = [];\n        }\n    }\n\n    check.argument(currentContour.length === 0, 'There are still points left in the current contour.');\n    return contours;\n};\n\n// Calculate the xMin/yMin/xMax/yMax/lsb/rsb for a Glyph.\nGlyph.prototype.getMetrics = function() {\n    var commands = this.path.commands;\n    var xCoords = [];\n    var yCoords = [];\n    for (var i = 0; i < commands.length; i += 1) {\n        var cmd = commands[i];\n        if (cmd.type !== 'Z') {\n            xCoords.push(cmd.x);\n            yCoords.push(cmd.y);\n        }\n\n        if (cmd.type === 'Q' || cmd.type === 'C') {\n            xCoords.push(cmd.x1);\n            yCoords.push(cmd.y1);\n        }\n\n        if (cmd.type === 'C') {\n            xCoords.push(cmd.x2);\n            yCoords.push(cmd.y2);\n        }\n    }\n\n    var metrics = {\n        xMin: Math.min.apply(null, xCoords),\n        yMin: Math.min.apply(null, yCoords),\n        xMax: Math.max.apply(null, xCoords),\n        yMax: Math.max.apply(null, yCoords),\n        leftSideBearing: 0\n    };\n    metrics.rightSideBearing = this.advanceWidth - metrics.leftSideBearing - (metrics.xMax - metrics.xMin);\n    return metrics;\n};\n\n// Draw the glyph on the given context.\n//\n// ctx - The drawing context.\n// x - Horizontal position of the glyph. (default: 0)\n// y - Vertical position of the *baseline* of the glyph. (default: 0)\n// fontSize - Font size, in pixels (default: 72).\nGlyph.prototype.draw = function(ctx, x, y, fontSize) {\n    this.getPath(x, y, fontSize).draw(ctx);\n};\n\n// Draw the points of the glyph.\n// On-curve points will be drawn in blue, off-curve points will be drawn in red.\n//\n// ctx - The drawing context.\n// x - Horizontal position of the glyph. (default: 0)\n// y - Vertical position of the *baseline* of the glyph. (default: 0)\n// fontSize - Font size, in pixels (default: 72).\nGlyph.prototype.drawPoints = function(ctx, x, y, fontSize) {\n\n    function drawCircles(l, x, y, scale) {\n        var PI_SQ = Math.PI * 2;\n        ctx.beginPath();\n        for (var j = 0; j < l.length; j += 1) {\n            ctx.moveTo(x + (l[j].x * scale), y + (l[j].y * scale));\n            ctx.arc(x + (l[j].x * scale), y + (l[j].y * scale), 2, 0, PI_SQ, false);\n        }\n\n        ctx.closePath();\n        ctx.fill();\n    }\n\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 24;\n    var scale = 1 / this.path.unitsPerEm * fontSize;\n\n    var blueCircles = [];\n    var redCircles = [];\n    var path = this.path;\n    for (var i = 0; i < path.commands.length; i += 1) {\n        var cmd = path.commands[i];\n        if (cmd.x !== undefined) {\n            blueCircles.push({x: cmd.x, y: -cmd.y});\n        }\n\n        if (cmd.x1 !== undefined) {\n            redCircles.push({x: cmd.x1, y: -cmd.y1});\n        }\n\n        if (cmd.x2 !== undefined) {\n            redCircles.push({x: cmd.x2, y: -cmd.y2});\n        }\n    }\n\n    ctx.fillStyle = 'blue';\n    drawCircles(blueCircles, x, y, scale);\n    ctx.fillStyle = 'red';\n    drawCircles(redCircles, x, y, scale);\n};\n\n// Draw lines indicating important font measurements.\n// Black lines indicate the origin of the coordinate system (point 0,0).\n// Blue lines indicate the glyph bounding box.\n// Green line indicates the advance width of the glyph.\n//\n// ctx - The drawing context.\n// x - Horizontal position of the glyph. (default: 0)\n// y - Vertical position of the *baseline* of the glyph. (default: 0)\n// fontSize - Font size, in pixels (default: 72).\nGlyph.prototype.drawMetrics = function(ctx, x, y, fontSize) {\n    var scale;\n    x = x !== undefined ? x : 0;\n    y = y !== undefined ? y : 0;\n    fontSize = fontSize !== undefined ? fontSize : 24;\n    scale = 1 / this.path.unitsPerEm * fontSize;\n    ctx.lineWidth = 1;\n\n    // Draw the origin\n    ctx.strokeStyle = 'black';\n    draw.line(ctx, x, -10000, x, 10000);\n    draw.line(ctx, -10000, y, 10000, y);\n\n    // This code is here due to memory optimization: by not using\n    // defaults in the constructor, we save a notable amount of memory.\n    var xMin = this.xMin || 0;\n    var yMin = this.yMin || 0;\n    var xMax = this.xMax || 0;\n    var yMax = this.yMax || 0;\n    var advanceWidth = this.advanceWidth || 0;\n\n    // Draw the glyph box\n    ctx.strokeStyle = 'blue';\n    draw.line(ctx, x + (xMin * scale), -10000, x + (xMin * scale), 10000);\n    draw.line(ctx, x + (xMax * scale), -10000, x + (xMax * scale), 10000);\n    draw.line(ctx, -10000, y + (-yMin * scale), 10000, y + (-yMin * scale));\n    draw.line(ctx, -10000, y + (-yMax * scale), 10000, y + (-yMax * scale));\n\n    // Draw the advance width\n    ctx.strokeStyle = 'green';\n    draw.line(ctx, x + (advanceWidth * scale), -10000, x + (advanceWidth * scale), 10000);\n};\n\nexports.Glyph = Glyph;\n\n},{\"./check\":1,\"./draw\":2,\"./path\":9}],6:[function(require,module,exports){\n// The GlyphSet object\n\n'use strict';\n\nvar _glyph = require('./glyph');\n\n// A GlyphSet represents all glyphs available in the font, but modelled using\n// a deferred glyph loader, for retrieving glyphs only once they are absolutely\n// necessary, to keep the memory footprint down.\nfunction GlyphSet(font, glyphs) {\n    this.font = font;\n    this.glyphs = {};\n    if (Array.isArray(glyphs)) {\n        for (var i = 0; i < glyphs.length; i++) {\n            this.glyphs[i] = glyphs[i];\n        }\n    }\n\n    this.length = (glyphs && glyphs.length) || 0;\n}\n\nGlyphSet.prototype.get = function(index) {\n    if (typeof this.glyphs[index] === 'function') {\n        this.glyphs[index] = this.glyphs[index]();\n    }\n\n    return this.glyphs[index];\n};\n\nGlyphSet.prototype.push = function(index, loader) {\n    this.glyphs[index] = loader;\n    this.length++;\n};\n\nfunction glyphLoader(font, index) {\n    return new _glyph.Glyph({index: index, font: font});\n}\n\n/**\n * Generate a stub glyph that can be filled with all metadata *except*\n * the \"points\" and \"path\" properties, which must be loaded only once\n * the glyph's path is actually requested for text shaping.\n */\n\nfunction ttfGlyphLoader(font, index, parseGlyph, data, position, buildPath) {\n    return function() {\n        var glyph = new _glyph.Glyph({index: index, font: font});\n\n        glyph.path = function() {\n            parseGlyph(glyph, data, position);\n            var path = buildPath(font.glyphs, glyph);\n            path.unitsPerEm = font.unitsPerEm;\n            return path;\n        };\n\n        return glyph;\n    };\n}\n\nfunction cffGlyphLoader(font, index, parseCFFCharstring, charstring) {\n    return function() {\n        var glyph = new _glyph.Glyph({index: index, font: font});\n\n        glyph.path = function() {\n            var path = parseCFFCharstring(font, glyph, charstring);\n            path.unitsPerEm = font.unitsPerEm;\n            return path;\n        };\n\n        return glyph;\n    };\n}\n\nexports.GlyphSet = GlyphSet;\nexports.glyphLoader = glyphLoader;\nexports.ttfGlyphLoader = ttfGlyphLoader;\nexports.cffGlyphLoader = cffGlyphLoader;\n\n},{\"./glyph\":5}],7:[function(require,module,exports){\n// opentype.js\n// https://github.com/nodebox/opentype.js\n// (c) 2015 Frederik De Bleser\n// opentype.js may be freely distributed under the MIT license.\n\n/* global ArrayBuffer, DataView, Uint8Array, XMLHttpRequest  */\n\n'use strict';\n\nvar encoding = require('./encoding');\nvar _font = require('./font');\nvar glyph = require('./glyph');\nvar parse = require('./parse');\nvar path = require('./path');\n\nvar cmap = require('./tables/cmap');\nvar cff = require('./tables/cff');\nvar glyf = require('./tables/glyf');\nvar gpos = require('./tables/gpos');\nvar head = require('./tables/head');\nvar hhea = require('./tables/hhea');\nvar hmtx = require('./tables/hmtx');\nvar kern = require('./tables/kern');\nvar loca = require('./tables/loca');\nvar maxp = require('./tables/maxp');\nvar _name = require('./tables/name');\nvar os2 = require('./tables/os2');\nvar post = require('./tables/post');\n\n// File loaders /////////////////////////////////////////////////////////\n\n// Convert a Node.js Buffer to an ArrayBuffer\nfunction toArrayBuffer(buffer) {\n    var arrayBuffer = new ArrayBuffer(buffer.length);\n    var data = new Uint8Array(arrayBuffer);\n    for (var i = 0; i < buffer.length; i += 1) {\n        data[i] = buffer[i];\n    }\n\n    return arrayBuffer;\n}\n\nfunction loadFromFile(path, callback) {\n    var fs = require('fs');\n    fs.readFile(path, function(err, buffer) {\n        if (err) {\n            return callback(err.message);\n        }\n\n        callback(null, toArrayBuffer(buffer));\n    });\n}\n\nfunction loadFromUrl(url, callback) {\n    var request = new XMLHttpRequest();\n    request.open('get', url, true);\n    request.responseType = 'arraybuffer';\n    request.onload = function() {\n        if (request.status !== 200) {\n            return callback('Font could not be loaded: ' + request.statusText);\n        }\n\n        return callback(null, request.response);\n    };\n\n    request.send();\n}\n\n// Public API ///////////////////////////////////////////////////////////\n\n// Parse the OpenType file data (as an ArrayBuffer) and return a Font object.\n// Throws an error if the font could not be parsed.\nfunction parseBuffer(buffer) {\n    var indexToLocFormat;\n    var hmtxOffset;\n    var glyfOffset;\n    var locaOffset;\n    var cffOffset;\n    var kernOffset;\n    var gposOffset;\n\n    // OpenType fonts use big endian byte ordering.\n    // We can't rely on typed array view types, because they operate with the endianness of the host computer.\n    // Instead we use DataViews where we can specify endianness.\n\n    var font = new _font.Font();\n    var data = new DataView(buffer, 0);\n\n    var version = parse.getFixed(data, 0);\n    if (version === 1.0) {\n        font.outlinesFormat = 'truetype';\n    } else {\n        version = parse.getTag(data, 0);\n        if (version === 'OTTO') {\n            font.outlinesFormat = 'cff';\n        } else {\n            throw new Error('Unsupported OpenType version ' + version);\n        }\n    }\n\n    var numTables = parse.getUShort(data, 4);\n\n    // Offset into the table records.\n    var p = 12;\n    for (var i = 0; i < numTables; i += 1) {\n        var tag = parse.getTag(data, p);\n        var offset = parse.getULong(data, p + 8);\n        switch (tag) {\n        case 'cmap':\n            font.tables.cmap = cmap.parse(data, offset);\n            font.encoding = new encoding.CmapEncoding(font.tables.cmap);\n            break;\n        case 'head':\n            font.tables.head = head.parse(data, offset);\n            font.unitsPerEm = font.tables.head.unitsPerEm;\n            indexToLocFormat = font.tables.head.indexToLocFormat;\n            break;\n        case 'hhea':\n            font.tables.hhea = hhea.parse(data, offset);\n            font.ascender = font.tables.hhea.ascender;\n            font.descender = font.tables.hhea.descender;\n            font.numberOfHMetrics = font.tables.hhea.numberOfHMetrics;\n            break;\n        case 'hmtx':\n            hmtxOffset = offset;\n            break;\n        case 'maxp':\n            font.tables.maxp = maxp.parse(data, offset);\n            font.numGlyphs = font.tables.maxp.numGlyphs;\n            break;\n        case 'name':\n            font.tables.name = _name.parse(data, offset);\n            font.familyName = font.tables.name.fontFamily;\n            font.styleName = font.tables.name.fontSubfamily;\n            break;\n        case 'OS/2':\n            font.tables.os2 = os2.parse(data, offset);\n            break;\n        case 'post':\n            font.tables.post = post.parse(data, offset);\n            font.glyphNames = new encoding.GlyphNames(font.tables.post);\n            break;\n        case 'glyf':\n            glyfOffset = offset;\n            break;\n        case 'loca':\n            locaOffset = offset;\n            break;\n        case 'CFF ':\n            cffOffset = offset;\n            break;\n        case 'kern':\n            kernOffset = offset;\n            break;\n        case 'GPOS':\n            gposOffset = offset;\n            break;\n        }\n        p += 16;\n    }\n\n    if (glyfOffset && locaOffset) {\n        var shortVersion = indexToLocFormat === 0;\n        var locaTable = loca.parse(data, locaOffset, font.numGlyphs, shortVersion);\n        font.glyphs = glyf.parse(data, glyfOffset, locaTable, font);\n        hmtx.parse(data, hmtxOffset, font.numberOfHMetrics, font.numGlyphs, font.glyphs);\n        encoding.addGlyphNames(font);\n    } else if (cffOffset) {\n        cff.parse(data, cffOffset, font);\n        encoding.addGlyphNames(font);\n    } else {\n        throw new Error('Font doesn\\'t contain TrueType or CFF outlines.');\n    }\n\n    if (kernOffset) {\n        font.kerningPairs = kern.parse(data, kernOffset);\n    } else {\n        font.kerningPairs = {};\n    }\n\n    if (gposOffset) {\n        gpos.parse(data, gposOffset, font);\n    }\n\n    return font;\n}\n\n// Asynchronously load the font from a URL or a filesystem. When done, call the callback\n// with two arguments `(err, font)`. The `err` will be null on success,\n// the `font` is a Font object.\n//\n// We use the node.js callback convention so that\n// opentype.js can integrate with frameworks like async.js.\nfunction load(url, callback) {\n    var isNode = typeof window === 'undefined';\n    var loadFn = isNode ? loadFromFile : loadFromUrl;\n    loadFn(url, function(err, arrayBuffer) {\n        if (err) {\n            return callback(err);\n        }\n\n        var font = parseBuffer(arrayBuffer);\n        return callback(null, font);\n    });\n}\n\n// Syncronously load the font from a URL or file.\n// When done, return the font object or throw an error.\nfunction loadSync(url) {\n    var fs = require('fs');\n    var buffer = fs.readFileSync(url);\n    return parseBuffer(toArrayBuffer(buffer));\n}\n\nexports._parse = parse;\nexports.Font = _font.Font;\nexports.Glyph = glyph.Glyph;\nexports.Path = path.Path;\nexports.parse = parseBuffer;\nexports.load = load;\nexports.loadSync = loadSync;\n\n},{\"./encoding\":3,\"./font\":4,\"./glyph\":5,\"./parse\":8,\"./path\":9,\"./tables/cff\":11,\"./tables/cmap\":12,\"./tables/glyf\":13,\"./tables/gpos\":14,\"./tables/head\":15,\"./tables/hhea\":16,\"./tables/hmtx\":17,\"./tables/kern\":18,\"./tables/loca\":19,\"./tables/maxp\":20,\"./tables/name\":21,\"./tables/os2\":22,\"./tables/post\":23,\"fs\":undefined}],8:[function(require,module,exports){\n// Parsing utility functions\n\n'use strict';\n\n// Retrieve an unsigned byte from the DataView.\nexports.getByte = function getByte(dataView, offset) {\n    return dataView.getUint8(offset);\n};\n\nexports.getCard8 = exports.getByte;\n\n// Retrieve an unsigned 16-bit short from the DataView.\n// The value is stored in big endian.\nexports.getUShort = function(dataView, offset) {\n    return dataView.getUint16(offset, false);\n};\n\nexports.getCard16 = exports.getUShort;\n\n// Retrieve a signed 16-bit short from the DataView.\n// The value is stored in big endian.\nexports.getShort = function(dataView, offset) {\n    return dataView.getInt16(offset, false);\n};\n\n// Retrieve an unsigned 32-bit long from the DataView.\n// The value is stored in big endian.\nexports.getULong = function(dataView, offset) {\n    return dataView.getUint32(offset, false);\n};\n\n// Retrieve a 32-bit signed fixed-point number (16.16) from the DataView.\n// The value is stored in big endian.\nexports.getFixed = function(dataView, offset) {\n    var decimal = dataView.getInt16(offset, false);\n    var fraction = dataView.getUint16(offset + 2, false);\n    return decimal + fraction / 65535;\n};\n\n// Retrieve a 4-character tag from the DataView.\n// Tags are used to identify tables.\nexports.getTag = function(dataView, offset) {\n    var tag = '';\n    for (var i = offset; i < offset + 4; i += 1) {\n        tag += String.fromCharCode(dataView.getInt8(i));\n    }\n\n    return tag;\n};\n\n// Retrieve an offset from the DataView.\n// Offsets are 1 to 4 bytes in length, depending on the offSize argument.\nexports.getOffset = function(dataView, offset, offSize) {\n    var v = 0;\n    for (var i = 0; i < offSize; i += 1) {\n        v <<= 8;\n        v += dataView.getUint8(offset + i);\n    }\n\n    return v;\n};\n\n// Retrieve a number of bytes from start offset to the end offset from the DataView.\nexports.getBytes = function(dataView, startOffset, endOffset) {\n    var bytes = [];\n    for (var i = startOffset; i < endOffset; i += 1) {\n        bytes.push(dataView.getUint8(i));\n    }\n\n    return bytes;\n};\n\n// Convert the list of bytes to a string.\nexports.bytesToString = function(bytes) {\n    var s = '';\n    for (var i = 0; i < bytes.length; i += 1) {\n        s += String.fromCharCode(bytes[i]);\n    }\n\n    return s;\n};\n\nvar typeOffsets = {\n    byte: 1,\n    uShort: 2,\n    short: 2,\n    uLong: 4,\n    fixed: 4,\n    longDateTime: 8,\n    tag: 4\n};\n\n// A stateful parser that changes the offset whenever a value is retrieved.\n// The data is a DataView.\nfunction Parser(data, offset) {\n    this.data = data;\n    this.offset = offset;\n    this.relativeOffset = 0;\n}\n\nParser.prototype.parseByte = function() {\n    var v = this.data.getUint8(this.offset + this.relativeOffset);\n    this.relativeOffset += 1;\n    return v;\n};\n\nParser.prototype.parseChar = function() {\n    var v = this.data.getInt8(this.offset + this.relativeOffset);\n    this.relativeOffset += 1;\n    return v;\n};\n\nParser.prototype.parseCard8 = Parser.prototype.parseByte;\n\nParser.prototype.parseUShort = function() {\n    var v = this.data.getUint16(this.offset + this.relativeOffset);\n    this.relativeOffset += 2;\n    return v;\n};\n\nParser.prototype.parseCard16 = Parser.prototype.parseUShort;\nParser.prototype.parseSID = Parser.prototype.parseUShort;\nParser.prototype.parseOffset16 = Parser.prototype.parseUShort;\n\nParser.prototype.parseShort = function() {\n    var v = this.data.getInt16(this.offset + this.relativeOffset);\n    this.relativeOffset += 2;\n    return v;\n};\n\nParser.prototype.parseF2Dot14 = function() {\n    var v = this.data.getInt16(this.offset + this.relativeOffset) / 16384;\n    this.relativeOffset += 2;\n    return v;\n};\n\nParser.prototype.parseULong = function() {\n    var v = exports.getULong(this.data, this.offset + this.relativeOffset);\n    this.relativeOffset += 4;\n    return v;\n};\n\nParser.prototype.parseFixed = function() {\n    var v = exports.getFixed(this.data, this.offset + this.relativeOffset);\n    this.relativeOffset += 4;\n    return v;\n};\n\nParser.prototype.parseOffset16List =\nParser.prototype.parseUShortList = function(count) {\n    var offsets = new Array(count);\n    var dataView = this.data;\n    var offset = this.offset + this.relativeOffset;\n    for (var i = 0; i < count; i++) {\n        offsets[i] = exports.getUShort(dataView, offset);\n        offset += 2;\n    }\n\n    this.relativeOffset += count * 2;\n    return offsets;\n};\n\nParser.prototype.parseString = function(length) {\n    var dataView = this.data;\n    var offset = this.offset + this.relativeOffset;\n    var string = '';\n    this.relativeOffset += length;\n    for (var i = 0; i < length; i++) {\n        string += String.fromCharCode(dataView.getUint8(offset + i));\n    }\n\n    return string;\n};\n\nParser.prototype.parseTag = function() {\n    return this.parseString(4);\n};\n\n// LONGDATETIME is a 64-bit integer.\n// JavaScript and unix timestamps traditionally use 32 bits, so we\n// only take the last 32 bits.\nParser.prototype.parseLongDateTime = function() {\n    var v = exports.getULong(this.data, this.offset + this.relativeOffset + 4);\n    this.relativeOffset += 8;\n    return v;\n};\n\nParser.prototype.parseFixed = function() {\n    var v = exports.getULong(this.data, this.offset + this.relativeOffset);\n    this.relativeOffset += 4;\n    return v / 65536;\n};\n\nParser.prototype.parseVersion = function() {\n    var major = exports.getUShort(this.data, this.offset + this.relativeOffset);\n\n    // How to interpret the minor version is very vague in the spec. 0x5000 is 5, 0x1000 is 1\n    // This returns the correct number if minor = 0xN000 where N is 0-9\n    var minor = exports.getUShort(this.data, this.offset + this.relativeOffset + 2);\n    this.relativeOffset += 4;\n    return major + minor / 0x1000 / 10;\n};\n\nParser.prototype.skip = function(type, amount) {\n    if (amount === undefined) {\n        amount = 1;\n    }\n\n    this.relativeOffset += typeOffsets[type] * amount;\n};\n\nexports.Parser = Parser;\n\n},{}],9:[function(require,module,exports){\n// Geometric objects\n\n'use strict';\n\n// A bézier path containing a set of path commands similar to a SVG path.\n// Paths can be drawn on a context using `draw`.\nfunction Path() {\n    this.commands = [];\n    this.fill = 'black';\n    this.stroke = null;\n    this.strokeWidth = 1;\n}\n\nPath.prototype.moveTo = function(x, y) {\n    this.commands.push({\n        type: 'M',\n        x: x,\n        y: y\n    });\n};\n\nPath.prototype.lineTo = function(x, y) {\n    this.commands.push({\n        type: 'L',\n        x: x,\n        y: y\n    });\n};\n\nPath.prototype.curveTo = Path.prototype.bezierCurveTo = function(x1, y1, x2, y2, x, y) {\n    this.commands.push({\n        type: 'C',\n        x1: x1,\n        y1: y1,\n        x2: x2,\n        y2: y2,\n        x: x,\n        y: y\n    });\n};\n\nPath.prototype.quadTo = Path.prototype.quadraticCurveTo = function(x1, y1, x, y) {\n    this.commands.push({\n        type: 'Q',\n        x1: x1,\n        y1: y1,\n        x: x,\n        y: y\n    });\n};\n\nPath.prototype.close = Path.prototype.closePath = function() {\n    this.commands.push({\n        type: 'Z'\n    });\n};\n\n// Add the given path or list of commands to the commands of this path.\nPath.prototype.extend = function(pathOrCommands) {\n    if (pathOrCommands.commands) {\n        pathOrCommands = pathOrCommands.commands;\n    }\n\n    Array.prototype.push.apply(this.commands, pathOrCommands);\n};\n\n// Draw the path to a 2D context.\nPath.prototype.draw = function(ctx) {\n    ctx.beginPath();\n    for (var i = 0; i < this.commands.length; i += 1) {\n        var cmd = this.commands[i];\n        if (cmd.type === 'M') {\n            ctx.moveTo(cmd.x, cmd.y);\n        } else if (cmd.type === 'L') {\n            ctx.lineTo(cmd.x, cmd.y);\n        } else if (cmd.type === 'C') {\n            ctx.bezierCurveTo(cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n        } else if (cmd.type === 'Q') {\n            ctx.quadraticCurveTo(cmd.x1, cmd.y1, cmd.x, cmd.y);\n        } else if (cmd.type === 'Z') {\n            ctx.closePath();\n        }\n    }\n\n    if (this.fill) {\n        ctx.fillStyle = this.fill;\n        ctx.fill();\n    }\n\n    if (this.stroke) {\n        ctx.strokeStyle = this.stroke;\n        ctx.lineWidth = this.strokeWidth;\n        ctx.stroke();\n    }\n};\n\n// Convert the Path to a string of path data instructions\n// See http://www.w3.org/TR/SVG/paths.html#PathData\n// Parameters:\n// - decimalPlaces: The amount of decimal places for floating-point values (default: 2)\nPath.prototype.toPathData = function(decimalPlaces) {\n    decimalPlaces = decimalPlaces !== undefined ? decimalPlaces : 2;\n\n    function floatToString(v) {\n        if (Math.round(v) === v) {\n            return '' + Math.round(v);\n        } else {\n            return v.toFixed(decimalPlaces);\n        }\n    }\n\n    function packValues() {\n        var s = '';\n        for (var i = 0; i < arguments.length; i += 1) {\n            var v = arguments[i];\n            if (v >= 0 && i > 0) {\n                s += ' ';\n            }\n\n            s += floatToString(v);\n        }\n\n        return s;\n    }\n\n    var d = '';\n    for (var i = 0; i < this.commands.length; i += 1) {\n        var cmd = this.commands[i];\n        if (cmd.type === 'M') {\n            d += 'M' + packValues(cmd.x, cmd.y);\n        } else if (cmd.type === 'L') {\n            d += 'L' + packValues(cmd.x, cmd.y);\n        } else if (cmd.type === 'C') {\n            d += 'C' + packValues(cmd.x1, cmd.y1, cmd.x2, cmd.y2, cmd.x, cmd.y);\n        } else if (cmd.type === 'Q') {\n            d += 'Q' + packValues(cmd.x1, cmd.y1, cmd.x, cmd.y);\n        } else if (cmd.type === 'Z') {\n            d += 'Z';\n        }\n    }\n\n    return d;\n};\n\n// Convert the path to a SVG <path> element, as a string.\n// Parameters:\n// - decimalPlaces: The amount of decimal places for floating-point values (default: 2)\nPath.prototype.toSVG = function(decimalPlaces) {\n    var svg = '<path d=\"';\n    svg += this.toPathData(decimalPlaces);\n    svg += '\"';\n    if (this.fill & this.fill !== 'black') {\n        if (this.fill === null) {\n            svg += ' fill=\"none\"';\n        } else {\n            svg += ' fill=\"' + this.fill + '\"';\n        }\n    }\n\n    if (this.stroke) {\n        svg += ' stroke=\"' + this.stroke + '\" stroke-width=\"' + this.strokeWidth + '\"';\n    }\n\n    svg += '/>';\n    return svg;\n};\n\nexports.Path = Path;\n\n},{}],10:[function(require,module,exports){\n// Table metadata\n\n'use strict';\n\nvar check = require('./check');\nvar encode = require('./types').encode;\nvar sizeOf = require('./types').sizeOf;\n\nfunction Table(tableName, fields, options) {\n    var i;\n    for (i = 0; i < fields.length; i += 1) {\n        var field = fields[i];\n        this[field.name] = field.value;\n    }\n\n    this.tableName = tableName;\n    this.fields = fields;\n    if (options) {\n        var optionKeys = Object.keys(options);\n        for (i = 0; i < optionKeys.length; i += 1) {\n            var k = optionKeys[i];\n            var v = options[k];\n            if (this[k] !== undefined) {\n                this[k] = v;\n            }\n        }\n    }\n}\n\nTable.prototype.sizeOf = function() {\n    var v = 0;\n    for (var i = 0; i < this.fields.length; i += 1) {\n        var field = this.fields[i];\n        var value = this[field.name];\n        if (value === undefined) {\n            value = field.value;\n        }\n\n        if (typeof value.sizeOf === 'function') {\n            v += value.sizeOf();\n        } else {\n            var sizeOfFunction = sizeOf[field.type];\n            check.assert(typeof sizeOfFunction === 'function', 'Could not find sizeOf function for field' + field.name);\n            v += sizeOfFunction(value);\n        }\n    }\n\n    return v;\n};\n\nTable.prototype.encode = function() {\n    return encode.TABLE(this);\n};\n\nexports.Table = Table;\n\n},{\"./check\":1,\"./types\":25}],11:[function(require,module,exports){\n// The `CFF` table contains the glyph outlines in PostScript format.\n// https://www.microsoft.com/typography/OTSPEC/cff.htm\n// http://download.microsoft.com/download/8/0/1/801a191c-029d-4af3-9642-555f6fe514ee/cff.pdf\n// http://download.microsoft.com/download/8/0/1/801a191c-029d-4af3-9642-555f6fe514ee/type2.pdf\n\n'use strict';\n\nvar encoding = require('../encoding');\nvar glyphset = require('../glyphset');\nvar parse = require('../parse');\nvar path = require('../path');\nvar table = require('../table');\n\n// Custom equals function that can also check lists.\nfunction equals(a, b) {\n    if (a === b) {\n        return true;\n    } else if (Array.isArray(a) && Array.isArray(b)) {\n        if (a.length !== b.length) {\n            return false;\n        }\n\n        for (var i = 0; i < a.length; i += 1) {\n            if (!equals(a[i], b[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    } else {\n        return false;\n    }\n}\n\n// Parse a `CFF` INDEX array.\n// An index array consists of a list of offsets, then a list of objects at those offsets.\nfunction parseCFFIndex(data, start, conversionFn) {\n    //var i, objectOffset, endOffset;\n    var offsets = [];\n    var objects = [];\n    var count = parse.getCard16(data, start);\n    var i;\n    var objectOffset;\n    var endOffset;\n    if (count !== 0) {\n        var offsetSize = parse.getByte(data, start + 2);\n        objectOffset = start + ((count + 1) * offsetSize) + 2;\n        var pos = start + 3;\n        for (i = 0; i < count + 1; i += 1) {\n            offsets.push(parse.getOffset(data, pos, offsetSize));\n            pos += offsetSize;\n        }\n\n        // The total size of the index array is 4 header bytes + the value of the last offset.\n        endOffset = objectOffset + offsets[count];\n    } else {\n        endOffset = start + 2;\n    }\n\n    for (i = 0; i < offsets.length - 1; i += 1) {\n        var value = parse.getBytes(data, objectOffset + offsets[i], objectOffset + offsets[i + 1]);\n        if (conversionFn) {\n            value = conversionFn(value);\n        }\n\n        objects.push(value);\n    }\n\n    return {objects: objects, startOffset: start, endOffset: endOffset};\n}\n\n// Parse a `CFF` DICT real value.\nfunction parseFloatOperand(parser) {\n    var s = '';\n    var eof = 15;\n    var lookup = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '.', 'E', 'E-', null, '-'];\n    while (true) {\n        var b = parser.parseByte();\n        var n1 = b >> 4;\n        var n2 = b & 15;\n\n        if (n1 === eof) {\n            break;\n        }\n\n        s += lookup[n1];\n\n        if (n2 === eof) {\n            break;\n        }\n\n        s += lookup[n2];\n    }\n\n    return parseFloat(s);\n}\n\n// Parse a `CFF` DICT operand.\nfunction parseOperand(parser, b0) {\n    var b1;\n    var b2;\n    var b3;\n    var b4;\n    if (b0 === 28) {\n        b1 = parser.parseByte();\n        b2 = parser.parseByte();\n        return b1 << 8 | b2;\n    }\n\n    if (b0 === 29) {\n        b1 = parser.parseByte();\n        b2 = parser.parseByte();\n        b3 = parser.parseByte();\n        b4 = parser.parseByte();\n        return b1 << 24 | b2 << 16 | b3 << 8 | b4;\n    }\n\n    if (b0 === 30) {\n        return parseFloatOperand(parser);\n    }\n\n    if (b0 >= 32 && b0 <= 246) {\n        return b0 - 139;\n    }\n\n    if (b0 >= 247 && b0 <= 250) {\n        b1 = parser.parseByte();\n        return (b0 - 247) * 256 + b1 + 108;\n    }\n\n    if (b0 >= 251 && b0 <= 254) {\n        b1 = parser.parseByte();\n        return -(b0 - 251) * 256 - b1 - 108;\n    }\n\n    throw new Error('Invalid b0 ' + b0);\n}\n\n// Convert the entries returned by `parseDict` to a proper dictionary.\n// If a value is a list of one, it is unpacked.\nfunction entriesToObject(entries) {\n    var o = {};\n    for (var i = 0; i < entries.length; i += 1) {\n        var key = entries[i][0];\n        var values = entries[i][1];\n        var value;\n        if (values.length === 1) {\n            value = values[0];\n        } else {\n            value = values;\n        }\n\n        if (o.hasOwnProperty(key)) {\n            throw new Error('Object ' + o + ' already has key ' + key);\n        }\n\n        o[key] = value;\n    }\n\n    return o;\n}\n\n// Parse a `CFF` DICT object.\n// A dictionary contains key-value pairs in a compact tokenized format.\nfunction parseCFFDict(data, start, size) {\n    start = start !== undefined ? start : 0;\n    var parser = new parse.Parser(data, start);\n    var entries = [];\n    var operands = [];\n    size = size !== undefined ? size : data.length;\n\n    while (parser.relativeOffset < size) {\n        var op = parser.parseByte();\n\n        // The first byte for each dict item distinguishes between operator (key) and operand (value).\n        // Values <= 21 are operators.\n        if (op <= 21) {\n            // Two-byte operators have an initial escape byte of 12.\n            if (op === 12) {\n                op = 1200 + parser.parseByte();\n            }\n\n            entries.push([op, operands]);\n            operands = [];\n        } else {\n            // Since the operands (values) come before the operators (keys), we store all operands in a list\n            // until we encounter an operator.\n            operands.push(parseOperand(parser, op));\n        }\n    }\n\n    return entriesToObject(entries);\n}\n\n// Given a String Index (SID), return the value of the string.\n// Strings below index 392 are standard CFF strings and are not encoded in the font.\nfunction getCFFString(strings, index) {\n    if (index <= 390) {\n        index = encoding.cffStandardStrings[index];\n    } else {\n        index = strings[index - 391];\n    }\n\n    return index;\n}\n\n// Interpret a dictionary and return a new dictionary with readable keys and values for missing entries.\n// This function takes `meta` which is a list of objects containing `operand`, `name` and `default`.\nfunction interpretDict(dict, meta, strings) {\n    var newDict = {};\n\n    // Because we also want to include missing values, we start out from the meta list\n    // and lookup values in the dict.\n    for (var i = 0; i < meta.length; i += 1) {\n        var m = meta[i];\n        var value = dict[m.op];\n        if (value === undefined) {\n            value = m.value !== undefined ? m.value : null;\n        }\n\n        if (m.type === 'SID') {\n            value = getCFFString(strings, value);\n        }\n\n        newDict[m.name] = value;\n    }\n\n    return newDict;\n}\n\n// Parse the CFF header.\nfunction parseCFFHeader(data, start) {\n    var header = {};\n    header.formatMajor = parse.getCard8(data, start);\n    header.formatMinor = parse.getCard8(data, start + 1);\n    header.size = parse.getCard8(data, start + 2);\n    header.offsetSize = parse.getCard8(data, start + 3);\n    header.startOffset = start;\n    header.endOffset = start + 4;\n    return header;\n}\n\nvar TOP_DICT_META = [\n    {name: 'version', op: 0, type: 'SID'},\n    {name: 'notice', op: 1, type: 'SID'},\n    {name: 'copyright', op: 1200, type: 'SID'},\n    {name: 'fullName', op: 2, type: 'SID'},\n    {name: 'familyName', op: 3, type: 'SID'},\n    {name: 'weight', op: 4, type: 'SID'},\n    {name: 'isFixedPitch', op: 1201, type: 'number', value: 0},\n    {name: 'italicAngle', op: 1202, type: 'number', value: 0},\n    {name: 'underlinePosition', op: 1203, type: 'number', value: -100},\n    {name: 'underlineThickness', op: 1204, type: 'number', value: 50},\n    {name: 'paintType', op: 1205, type: 'number', value: 0},\n    {name: 'charstringType', op: 1206, type: 'number', value: 2},\n    {name: 'fontMatrix', op: 1207, type: ['real', 'real', 'real', 'real', 'real', 'real'], value: [0.001, 0, 0, 0.001, 0, 0]},\n    {name: 'uniqueId', op: 13, type: 'number'},\n    {name: 'fontBBox', op: 5, type: ['number', 'number', 'number', 'number'], value: [0, 0, 0, 0]},\n    {name: 'strokeWidth', op: 1208, type: 'number', value: 0},\n    {name: 'xuid', op: 14, type: [], value: null},\n    {name: 'charset', op: 15, type: 'offset', value: 0},\n    {name: 'encoding', op: 16, type: 'offset', value: 0},\n    {name: 'charStrings', op: 17, type: 'offset', value: 0},\n    {name: 'private', op: 18, type: ['number', 'offset'], value: [0, 0]}\n];\n\nvar PRIVATE_DICT_META = [\n    {name: 'subrs', op: 19, type: 'offset', value: 0},\n    {name: 'defaultWidthX', op: 20, type: 'number', value: 0},\n    {name: 'nominalWidthX', op: 21, type: 'number', value: 0}\n];\n\n// Parse the CFF top dictionary. A CFF table can contain multiple fonts, each with their own top dictionary.\n// The top dictionary contains the essential metadata for the font, together with the private dictionary.\nfunction parseCFFTopDict(data, strings) {\n    var dict = parseCFFDict(data, 0, data.byteLength);\n    return interpretDict(dict, TOP_DICT_META, strings);\n}\n\n// Parse the CFF private dictionary. We don't fully parse out all the values, only the ones we need.\nfunction parseCFFPrivateDict(data, start, size, strings) {\n    var dict = parseCFFDict(data, start, size);\n    return interpretDict(dict, PRIVATE_DICT_META, strings);\n}\n\n// Parse the CFF charset table, which contains internal names for all the glyphs.\n// This function will return a list of glyph names.\n// See Adobe TN #5176 chapter 13, \"Charsets\".\nfunction parseCFFCharset(data, start, nGlyphs, strings) {\n    var i;\n    var sid;\n    var count;\n    var parser = new parse.Parser(data, start);\n\n    // The .notdef glyph is not included, so subtract 1.\n    nGlyphs -= 1;\n    var charset = ['.notdef'];\n\n    var format = parser.parseCard8();\n    if (format === 0) {\n        for (i = 0; i < nGlyphs; i += 1) {\n            sid = parser.parseSID();\n            charset.push(getCFFString(strings, sid));\n        }\n    } else if (format === 1) {\n        while (charset.length <= nGlyphs) {\n            sid = parser.parseSID();\n            count = parser.parseCard8();\n            for (i = 0; i <= count; i += 1) {\n                charset.push(getCFFString(strings, sid));\n                sid += 1;\n            }\n        }\n    } else if (format === 2) {\n        while (charset.length <= nGlyphs) {\n            sid = parser.parseSID();\n            count = parser.parseCard16();\n            for (i = 0; i <= count; i += 1) {\n                charset.push(getCFFString(strings, sid));\n                sid += 1;\n            }\n        }\n    } else {\n        throw new Error('Unknown charset format ' + format);\n    }\n\n    return charset;\n}\n\n// Parse the CFF encoding data. Only one encoding can be specified per font.\n// See Adobe TN #5176 chapter 12, \"Encodings\".\nfunction parseCFFEncoding(data, start, charset) {\n    var i;\n    var code;\n    var enc = {};\n    var parser = new parse.Parser(data, start);\n    var format = parser.parseCard8();\n    if (format === 0) {\n        var nCodes = parser.parseCard8();\n        for (i = 0; i < nCodes; i += 1) {\n            code = parser.parseCard8();\n            enc[code] = i;\n        }\n    } else if (format === 1) {\n        var nRanges = parser.parseCard8();\n        code = 1;\n        for (i = 0; i < nRanges; i += 1) {\n            var first = parser.parseCard8();\n            var nLeft = parser.parseCard8();\n            for (var j = first; j <= first + nLeft; j += 1) {\n                enc[j] = code;\n                code += 1;\n            }\n        }\n    } else {\n        throw new Error('Unknown encoding format ' + format);\n    }\n\n    return new encoding.CffEncoding(enc, charset);\n}\n\n// Take in charstring code and return a Glyph object.\n// The encoding is described in the Type 2 Charstring Format\n// https://www.microsoft.com/typography/OTSPEC/charstr2.htm\nfunction parseCFFCharstring(font, glyph, code) {\n    var c1x;\n    var c1y;\n    var c2x;\n    var c2y;\n    var p = new path.Path();\n    var stack = [];\n    var nStems = 0;\n    var haveWidth = false;\n    var width = font.defaultWidthX;\n    var open = false;\n    var x = 0;\n    var y = 0;\n\n    function newContour(x, y) {\n        if (open) {\n            p.closePath();\n        }\n\n        p.moveTo(x, y);\n        open = true;\n    }\n\n    function parseStems() {\n        var hasWidthArg;\n\n        // The number of stem operators on the stack is always even.\n        // If the value is uneven, that means a width is specified.\n        hasWidthArg = stack.length % 2 !== 0;\n        if (hasWidthArg && !haveWidth) {\n            width = stack.shift() + font.nominalWidthX;\n        }\n\n        nStems += stack.length >> 1;\n        stack.length = 0;\n        haveWidth = true;\n    }\n\n    function parse(code) {\n        var b1;\n        var b2;\n        var b3;\n        var b4;\n        var codeIndex;\n        var subrCode;\n        var jpx;\n        var jpy;\n        var c3x;\n        var c3y;\n        var c4x;\n        var c4y;\n\n        var i = 0;\n        while (i < code.length) {\n            var v = code[i];\n            i += 1;\n            switch (v) {\n            case 1: // hstem\n                parseStems();\n                break;\n            case 3: // vstem\n                parseStems();\n                break;\n            case 4: // vmoveto\n                if (stack.length > 1 && !haveWidth) {\n                    width = stack.shift() + font.nominalWidthX;\n                    haveWidth = true;\n                }\n\n                y += stack.pop();\n                newContour(x, y);\n                break;\n            case 5: // rlineto\n                while (stack.length > 0) {\n                    x += stack.shift();\n                    y += stack.shift();\n                    p.lineTo(x, y);\n                }\n\n                break;\n            case 6: // hlineto\n                while (stack.length > 0) {\n                    x += stack.shift();\n                    p.lineTo(x, y);\n                    if (stack.length === 0) {\n                        break;\n                    }\n\n                    y += stack.shift();\n                    p.lineTo(x, y);\n                }\n\n                break;\n            case 7: // vlineto\n                while (stack.length > 0) {\n                    y += stack.shift();\n                    p.lineTo(x, y);\n                    if (stack.length === 0) {\n                        break;\n                    }\n\n                    x += stack.shift();\n                    p.lineTo(x, y);\n                }\n\n                break;\n            case 8: // rrcurveto\n                while (stack.length > 0) {\n                    c1x = x + stack.shift();\n                    c1y = y + stack.shift();\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x + stack.shift();\n                    y = c2y + stack.shift();\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                }\n\n                break;\n            case 10: // callsubr\n                codeIndex = stack.pop() + font.subrsBias;\n                subrCode = font.subrs[codeIndex];\n                if (subrCode) {\n                    parse(subrCode);\n                }\n\n                break;\n            case 11: // return\n                return;\n            case 12: // flex operators\n                v = code[i];\n                i += 1;\n                switch (v) {\n                case 35: // flex\n                    // |- dx1 dy1 dx2 dy2 dx3 dy3 dx4 dy4 dx5 dy5 dx6 dy6 fd flex (12 35) |-\n                    c1x = x   + stack.shift();    // dx1\n                    c1y = y   + stack.shift();    // dy1\n                    c2x = c1x + stack.shift();    // dx2\n                    c2y = c1y + stack.shift();    // dy2\n                    jpx = c2x + stack.shift();    // dx3\n                    jpy = c2y + stack.shift();    // dy3\n                    c3x = jpx + stack.shift();    // dx4\n                    c3y = jpy + stack.shift();    // dy4\n                    c4x = c3x + stack.shift();    // dx5\n                    c4y = c3y + stack.shift();    // dy5\n                    x = c4x + stack.shift();      // dx6\n                    y = c4y + stack.shift();      // dy6\n                    stack.shift();                // flex depth\n                    p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                    p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                    break;\n                case 34: // hflex\n                    // |- dx1 dx2 dy2 dx3 dx4 dx5 dx6 hflex (12 34) |-\n                    c1x = x   + stack.shift();    // dx1\n                    c1y = y;                      // dy1\n                    c2x = c1x + stack.shift();    // dx2\n                    c2y = c1y + stack.shift();    // dy2\n                    jpx = c2x + stack.shift();    // dx3\n                    jpy = c2y;                    // dy3\n                    c3x = jpx + stack.shift();    // dx4\n                    c3y = c2y;                    // dy4\n                    c4x = c3x + stack.shift();    // dx5\n                    c4y = y;                      // dy5\n                    x = c4x + stack.shift();      // dx6\n                    p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                    p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                    break;\n                case 36: // hflex1\n                    // |- dx1 dy1 dx2 dy2 dx3 dx4 dx5 dy5 dx6 hflex1 (12 36) |-\n                    c1x = x   + stack.shift();    // dx1\n                    c1y = y   + stack.shift();    // dy1\n                    c2x = c1x + stack.shift();    // dx2\n                    c2y = c1y + stack.shift();    // dy2\n                    jpx = c2x + stack.shift();    // dx3\n                    jpy = c2y;                    // dy3\n                    c3x = jpx + stack.shift();    // dx4\n                    c3y = c2y;                    // dy4\n                    c4x = c3x + stack.shift();    // dx5\n                    c4y = c3y + stack.shift();    // dy5\n                    x = c4x + stack.shift();      // dx6\n                    p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                    p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                    break;\n                case 37: // flex1\n                    // |- dx1 dy1 dx2 dy2 dx3 dy3 dx4 dy4 dx5 dy5 d6 flex1 (12 37) |-\n                    c1x = x   + stack.shift();    // dx1\n                    c1y = y   + stack.shift();    // dy1\n                    c2x = c1x + stack.shift();    // dx2\n                    c2y = c1y + stack.shift();    // dy2\n                    jpx = c2x + stack.shift();    // dx3\n                    jpy = c2y + stack.shift();    // dy3\n                    c3x = jpx + stack.shift();    // dx4\n                    c3y = jpy + stack.shift();    // dy4\n                    c4x = c3x + stack.shift();    // dx5\n                    c4y = c3y + stack.shift();    // dy5\n                    if (Math.abs(c4x - x) > Math.abs(c4y - y)) {\n                        x = c4x + stack.shift();\n                    } else {\n                        y = c4y + stack.shift();\n                    }\n\n                    p.curveTo(c1x, c1y, c2x, c2y, jpx, jpy);\n                    p.curveTo(c3x, c3y, c4x, c4y, x, y);\n                    break;\n                default:\n                    console.log('Glyph ' + glyph.index + ': unknown operator ' + 1200 + v);\n                    stack.length = 0;\n                }\n                break;\n            case 14: // endchar\n                if (stack.length > 0 && !haveWidth) {\n                    width = stack.shift() + font.nominalWidthX;\n                    haveWidth = true;\n                }\n\n                if (open) {\n                    p.closePath();\n                    open = false;\n                }\n\n                break;\n            case 18: // hstemhm\n                parseStems();\n                break;\n            case 19: // hintmask\n            case 20: // cntrmask\n                parseStems();\n                i += (nStems + 7) >> 3;\n                break;\n            case 21: // rmoveto\n                if (stack.length > 2 && !haveWidth) {\n                    width = stack.shift() + font.nominalWidthX;\n                    haveWidth = true;\n                }\n\n                y += stack.pop();\n                x += stack.pop();\n                newContour(x, y);\n                break;\n            case 22: // hmoveto\n                if (stack.length > 1 && !haveWidth) {\n                    width = stack.shift() + font.nominalWidthX;\n                    haveWidth = true;\n                }\n\n                x += stack.pop();\n                newContour(x, y);\n                break;\n            case 23: // vstemhm\n                parseStems();\n                break;\n            case 24: // rcurveline\n                while (stack.length > 2) {\n                    c1x = x + stack.shift();\n                    c1y = y + stack.shift();\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x + stack.shift();\n                    y = c2y + stack.shift();\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                }\n\n                x += stack.shift();\n                y += stack.shift();\n                p.lineTo(x, y);\n                break;\n            case 25: // rlinecurve\n                while (stack.length > 6) {\n                    x += stack.shift();\n                    y += stack.shift();\n                    p.lineTo(x, y);\n                }\n\n                c1x = x + stack.shift();\n                c1y = y + stack.shift();\n                c2x = c1x + stack.shift();\n                c2y = c1y + stack.shift();\n                x = c2x + stack.shift();\n                y = c2y + stack.shift();\n                p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                break;\n            case 26: // vvcurveto\n                if (stack.length % 2) {\n                    x += stack.shift();\n                }\n\n                while (stack.length > 0) {\n                    c1x = x;\n                    c1y = y + stack.shift();\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x;\n                    y = c2y + stack.shift();\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                }\n\n                break;\n            case 27: // hhcurveto\n                if (stack.length % 2) {\n                    y += stack.shift();\n                }\n\n                while (stack.length > 0) {\n                    c1x = x + stack.shift();\n                    c1y = y;\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x + stack.shift();\n                    y = c2y;\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                }\n\n                break;\n            case 28: // shortint\n                b1 = code[i];\n                b2 = code[i + 1];\n                stack.push(((b1 << 24) | (b2 << 16)) >> 16);\n                i += 2;\n                break;\n            case 29: // callgsubr\n                codeIndex = stack.pop() + font.gsubrsBias;\n                subrCode = font.gsubrs[codeIndex];\n                if (subrCode) {\n                    parse(subrCode);\n                }\n\n                break;\n            case 30: // vhcurveto\n                while (stack.length > 0) {\n                    c1x = x;\n                    c1y = y + stack.shift();\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x + stack.shift();\n                    y = c2y + (stack.length === 1 ? stack.shift() : 0);\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    if (stack.length === 0) {\n                        break;\n                    }\n\n                    c1x = x + stack.shift();\n                    c1y = y;\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    y = c2y + stack.shift();\n                    x = c2x + (stack.length === 1 ? stack.shift() : 0);\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                }\n\n                break;\n            case 31: // hvcurveto\n                while (stack.length > 0) {\n                    c1x = x + stack.shift();\n                    c1y = y;\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    y = c2y + stack.shift();\n                    x = c2x + (stack.length === 1 ? stack.shift() : 0);\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                    if (stack.length === 0) {\n                        break;\n                    }\n\n                    c1x = x;\n                    c1y = y + stack.shift();\n                    c2x = c1x + stack.shift();\n                    c2y = c1y + stack.shift();\n                    x = c2x + stack.shift();\n                    y = c2y + (stack.length === 1 ? stack.shift() : 0);\n                    p.curveTo(c1x, c1y, c2x, c2y, x, y);\n                }\n\n                break;\n            default:\n                if (v < 32) {\n                    console.log('Glyph ' + glyph.index + ': unknown operator ' + v);\n                } else if (v < 247) {\n                    stack.push(v - 139);\n                } else if (v < 251) {\n                    b1 = code[i];\n                    i += 1;\n                    stack.push((v - 247) * 256 + b1 + 108);\n                } else if (v < 255) {\n                    b1 = code[i];\n                    i += 1;\n                    stack.push(-(v - 251) * 256 - b1 - 108);\n                } else {\n                    b1 = code[i];\n                    b2 = code[i + 1];\n                    b3 = code[i + 2];\n                    b4 = code[i + 3];\n                    i += 4;\n                    stack.push(((b1 << 24) | (b2 << 16) | (b3 << 8) | b4) / 65536);\n                }\n            }\n        }\n    }\n\n    parse(code);\n\n    glyph.advanceWidth = width;\n    return p;\n}\n\n// Subroutines are encoded using the negative half of the number space.\n// See type 2 chapter 4.7 \"Subroutine operators\".\nfunction calcCFFSubroutineBias(subrs) {\n    var bias;\n    if (subrs.length < 1240) {\n        bias = 107;\n    } else if (subrs.length < 33900) {\n        bias = 1131;\n    } else {\n        bias = 32768;\n    }\n\n    return bias;\n}\n\n// Parse the `CFF` table, which contains the glyph outlines in PostScript format.\nfunction parseCFFTable(data, start, font) {\n    font.tables.cff = {};\n    var header = parseCFFHeader(data, start);\n    var nameIndex = parseCFFIndex(data, header.endOffset, parse.bytesToString);\n    var topDictIndex = parseCFFIndex(data, nameIndex.endOffset);\n    var stringIndex = parseCFFIndex(data, topDictIndex.endOffset, parse.bytesToString);\n    var globalSubrIndex = parseCFFIndex(data, stringIndex.endOffset);\n    font.gsubrs = globalSubrIndex.objects;\n    font.gsubrsBias = calcCFFSubroutineBias(font.gsubrs);\n\n    var topDictData = new DataView(new Uint8Array(topDictIndex.objects[0]).buffer);\n    var topDict = parseCFFTopDict(topDictData, stringIndex.objects);\n    font.tables.cff.topDict = topDict;\n\n    var privateDictOffset = start + topDict['private'][1];\n    var privateDict = parseCFFPrivateDict(data, privateDictOffset, topDict['private'][0], stringIndex.objects);\n    font.defaultWidthX = privateDict.defaultWidthX;\n    font.nominalWidthX = privateDict.nominalWidthX;\n\n    if (privateDict.subrs !== 0) {\n        var subrOffset = privateDictOffset + privateDict.subrs;\n        var subrIndex = parseCFFIndex(data, subrOffset);\n        font.subrs = subrIndex.objects;\n        font.subrsBias = calcCFFSubroutineBias(font.subrs);\n    } else {\n        font.subrs = [];\n        font.subrsBias = 0;\n    }\n\n    // Offsets in the top dict are relative to the beginning of the CFF data, so add the CFF start offset.\n    var charStringsIndex = parseCFFIndex(data, start + topDict.charStrings);\n    font.nGlyphs = charStringsIndex.objects.length;\n\n    var charset = parseCFFCharset(data, start + topDict.charset, font.nGlyphs, stringIndex.objects);\n    if (topDict.encoding === 0) { // Standard encoding\n        font.cffEncoding = new encoding.CffEncoding(encoding.cffStandardEncoding, charset);\n    } else if (topDict.encoding === 1) { // Expert encoding\n        font.cffEncoding = new encoding.CffEncoding(encoding.cffExpertEncoding, charset);\n    } else {\n        font.cffEncoding = parseCFFEncoding(data, start + topDict.encoding, charset);\n    }\n\n    // Prefer the CMAP encoding to the CFF encoding.\n    font.encoding = font.encoding || font.cffEncoding;\n\n    font.glyphs = new glyphset.GlyphSet(font);\n    for (var i = 0; i < font.nGlyphs; i += 1) {\n        var charString = charStringsIndex.objects[i];\n        font.glyphs.push(i, glyphset.cffGlyphLoader(font, i, parseCFFCharstring, charString));\n    }\n}\n\n// Convert a string to a String ID (SID).\n// The list of strings is modified in place.\nfunction encodeString(s, strings) {\n    var sid;\n\n    // Is the string in the CFF standard strings?\n    var i = encoding.cffStandardStrings.indexOf(s);\n    if (i >= 0) {\n        sid = i;\n    }\n\n    // Is the string already in the string index?\n    i = strings.indexOf(s);\n    if (i >= 0) {\n        sid = i + encoding.cffStandardStrings.length;\n    } else {\n        sid = encoding.cffStandardStrings.length + strings.length;\n        strings.push(s);\n    }\n\n    return sid;\n}\n\nfunction makeHeader() {\n    return new table.Table('Header', [\n        {name: 'major', type: 'Card8', value: 1},\n        {name: 'minor', type: 'Card8', value: 0},\n        {name: 'hdrSize', type: 'Card8', value: 4},\n        {name: 'major', type: 'Card8', value: 1}\n    ]);\n}\n\nfunction makeNameIndex(fontNames) {\n    var t = new table.Table('Name INDEX', [\n        {name: 'names', type: 'INDEX', value: []}\n    ]);\n    t.names = [];\n    for (var i = 0; i < fontNames.length; i += 1) {\n        t.names.push({name: 'name_' + i, type: 'NAME', value: fontNames[i]});\n    }\n\n    return t;\n}\n\n// Given a dictionary's metadata, create a DICT structure.\nfunction makeDict(meta, attrs, strings) {\n    var m = {};\n    for (var i = 0; i < meta.length; i += 1) {\n        var entry = meta[i];\n        var value = attrs[entry.name];\n        if (value !== undefined && !equals(value, entry.value)) {\n            if (entry.type === 'SID') {\n                value = encodeString(value, strings);\n            }\n\n            m[entry.op] = {name: entry.name, type: entry.type, value: value};\n        }\n    }\n\n    return m;\n}\n\n// The Top DICT houses the global font attributes.\nfunction makeTopDict(attrs, strings) {\n    var t = new table.Table('Top DICT', [\n        {name: 'dict', type: 'DICT', value: {}}\n    ]);\n    t.dict = makeDict(TOP_DICT_META, attrs, strings);\n    return t;\n}\n\nfunction makeTopDictIndex(topDict) {\n    var t = new table.Table('Top DICT INDEX', [\n        {name: 'topDicts', type: 'INDEX', value: []}\n    ]);\n    t.topDicts = [{name: 'topDict_0', type: 'TABLE', value: topDict}];\n    return t;\n}\n\nfunction makeStringIndex(strings) {\n    var t = new table.Table('String INDEX', [\n        {name: 'strings', type: 'INDEX', value: []}\n    ]);\n    t.strings = [];\n    for (var i = 0; i < strings.length; i += 1) {\n        t.strings.push({name: 'string_' + i, type: 'STRING', value: strings[i]});\n    }\n\n    return t;\n}\n\nfunction makeGlobalSubrIndex() {\n    // Currently we don't use subroutines.\n    return new table.Table('Global Subr INDEX', [\n        {name: 'subrs', type: 'INDEX', value: []}\n    ]);\n}\n\nfunction makeCharsets(glyphNames, strings) {\n    var t = new table.Table('Charsets', [\n        {name: 'format', type: 'Card8', value: 0}\n    ]);\n    for (var i = 0; i < glyphNames.length; i += 1) {\n        var glyphName = glyphNames[i];\n        var glyphSID = encodeString(glyphName, strings);\n        t.fields.push({name: 'glyph_' + i, type: 'SID', value: glyphSID});\n    }\n\n    return t;\n}\n\nfunction glyphToOps(glyph) {\n    var ops = [];\n    var path = glyph.path;\n    ops.push({name: 'width', type: 'NUMBER', value: glyph.advanceWidth});\n    var x = 0;\n    var y = 0;\n    for (var i = 0; i < path.commands.length; i += 1) {\n        var dx;\n        var dy;\n        var cmd = path.commands[i];\n        if (cmd.type === 'Q') {\n            // CFF only supports bézier curves, so convert the quad to a bézier.\n            var _13 = 1 / 3;\n            var _23 = 2 / 3;\n\n            // We're going to create a new command so we don't change the original path.\n            cmd = {\n                type: 'C',\n                x: cmd.x,\n                y: cmd.y,\n                x1: _13 * x + _23 * cmd.x1,\n                y1: _13 * y + _23 * cmd.y1,\n                x2: _13 * cmd.x + _23 * cmd.x1,\n                y2: _13 * cmd.y + _23 * cmd.y1\n            };\n        }\n\n        if (cmd.type === 'M') {\n            dx = Math.round(cmd.x - x);\n            dy = Math.round(cmd.y - y);\n            ops.push({name: 'dx', type: 'NUMBER', value: dx});\n            ops.push({name: 'dy', type: 'NUMBER', value: dy});\n            ops.push({name: 'rmoveto', type: 'OP', value: 21});\n            x = Math.round(cmd.x);\n            y = Math.round(cmd.y);\n        } else if (cmd.type === 'L') {\n            dx = Math.round(cmd.x - x);\n            dy = Math.round(cmd.y - y);\n            ops.push({name: 'dx', type: 'NUMBER', value: dx});\n            ops.push({name: 'dy', type: 'NUMBER', value: dy});\n            ops.push({name: 'rlineto', type: 'OP', value: 5});\n            x = Math.round(cmd.x);\n            y = Math.round(cmd.y);\n        } else if (cmd.type === 'C') {\n            var dx1 = Math.round(cmd.x1 - x);\n            var dy1 = Math.round(cmd.y1 - y);\n            var dx2 = Math.round(cmd.x2 - cmd.x1);\n            var dy2 = Math.round(cmd.y2 - cmd.y1);\n            dx = Math.round(cmd.x - cmd.x2);\n            dy = Math.round(cmd.y - cmd.y2);\n            ops.push({name: 'dx1', type: 'NUMBER', value: dx1});\n            ops.push({name: 'dy1', type: 'NUMBER', value: dy1});\n            ops.push({name: 'dx2', type: 'NUMBER', value: dx2});\n            ops.push({name: 'dy2', type: 'NUMBER', value: dy2});\n            ops.push({name: 'dx', type: 'NUMBER', value: dx});\n            ops.push({name: 'dy', type: 'NUMBER', value: dy});\n            ops.push({name: 'rrcurveto', type: 'OP', value: 8});\n            x = Math.round(cmd.x);\n            y = Math.round(cmd.y);\n        }\n\n        // Contours are closed automatically.\n\n    }\n\n    ops.push({name: 'endchar', type: 'OP', value: 14});\n    return ops;\n}\n\nfunction makeCharStringsIndex(glyphs) {\n    var t = new table.Table('CharStrings INDEX', [\n        {name: 'charStrings', type: 'INDEX', value: []}\n    ]);\n\n    for (var i = 0; i < glyphs.length; i += 1) {\n        var glyph = glyphs.get(i);\n        var ops = glyphToOps(glyph);\n        t.charStrings.push({name: glyph.name, type: 'CHARSTRING', value: ops});\n    }\n\n    return t;\n}\n\nfunction makePrivateDict(attrs, strings) {\n    var t = new table.Table('Private DICT', [\n        {name: 'dict', type: 'DICT', value: {}}\n    ]);\n    t.dict = makeDict(PRIVATE_DICT_META, attrs, strings);\n    return t;\n}\n\nfunction makePrivateDictIndex(privateDict) {\n    var t = new table.Table('Private DICT INDEX', [\n        {name: 'privateDicts', type: 'INDEX', value: []}\n    ]);\n    t.privateDicts = [{name: 'privateDict_0', type: 'TABLE', value: privateDict}];\n    return t;\n}\n\nfunction makeCFFTable(glyphs, options) {\n    var t = new table.Table('CFF ', [\n        {name: 'header', type: 'TABLE'},\n        {name: 'nameIndex', type: 'TABLE'},\n        {name: 'topDictIndex', type: 'TABLE'},\n        {name: 'stringIndex', type: 'TABLE'},\n        {name: 'globalSubrIndex', type: 'TABLE'},\n        {name: 'charsets', type: 'TABLE'},\n        {name: 'charStringsIndex', type: 'TABLE'},\n        {name: 'privateDictIndex', type: 'TABLE'}\n    ]);\n\n    var fontScale = 1 / options.unitsPerEm;\n    // We use non-zero values for the offsets so that the DICT encodes them.\n    // This is important because the size of the Top DICT plays a role in offset calculation,\n    // and the size shouldn't change after we've written correct offsets.\n    var attrs = {\n        version: options.version,\n        fullName: options.fullName,\n        familyName: options.familyName,\n        weight: options.weightName,\n        fontMatrix: [fontScale, 0, 0, fontScale, 0, 0],\n        charset: 999,\n        encoding: 0,\n        charStrings: 999,\n        private: [0, 999]\n    };\n\n    var privateAttrs = {};\n\n    var glyphNames = [];\n    var glyph;\n\n    // Skip first glyph (.notdef)\n    for (var i = 1; i < glyphs.length; i += 1) {\n        glyph = glyphs.get(i);\n        glyphNames.push(glyph.name);\n    }\n\n    var strings = [];\n\n    t.header = makeHeader();\n    t.nameIndex = makeNameIndex([options.postScriptName]);\n    var topDict = makeTopDict(attrs, strings);\n    t.topDictIndex = makeTopDictIndex(topDict);\n    t.globalSubrIndex = makeGlobalSubrIndex();\n    t.charsets = makeCharsets(glyphNames, strings);\n    t.charStringsIndex = makeCharStringsIndex(glyphs);\n    var privateDict = makePrivateDict(privateAttrs, strings);\n    t.privateDictIndex = makePrivateDictIndex(privateDict);\n\n    // Needs to come at the end, to encode all custom strings used in the font.\n    t.stringIndex = makeStringIndex(strings);\n\n    var startOffset = t.header.sizeOf() +\n        t.nameIndex.sizeOf() +\n        t.topDictIndex.sizeOf() +\n        t.stringIndex.sizeOf() +\n        t.globalSubrIndex.sizeOf();\n    attrs.charset = startOffset;\n\n    // We use the CFF standard encoding; proper encoding will be handled in cmap.\n    attrs.encoding = 0;\n    attrs.charStrings = attrs.charset + t.charsets.sizeOf();\n    attrs.private[1] = attrs.charStrings + t.charStringsIndex.sizeOf();\n\n    // Recreate the Top DICT INDEX with the correct offsets.\n    topDict = makeTopDict(attrs, strings);\n    t.topDictIndex = makeTopDictIndex(topDict);\n\n    return t;\n}\n\nexports.parse = parseCFFTable;\nexports.make = makeCFFTable;\n\n},{\"../encoding\":3,\"../glyphset\":6,\"../parse\":8,\"../path\":9,\"../table\":10}],12:[function(require,module,exports){\n// The `cmap` table stores the mappings from characters to glyphs.\n// https://www.microsoft.com/typography/OTSPEC/cmap.htm\n\n'use strict';\n\nvar check = require('../check');\nvar parse = require('../parse');\nvar table = require('../table');\n\n// Parse the `cmap` table. This table stores the mappings from characters to glyphs.\n// There are many available formats, but we only support the Windows format 4.\n// This function returns a `CmapEncoding` object or null if no supported format could be found.\nfunction parseCmapTable(data, start) {\n    var i;\n    var cmap = {};\n    cmap.version = parse.getUShort(data, start);\n    check.argument(cmap.version === 0, 'cmap table version should be 0.');\n\n    // The cmap table can contain many sub-tables, each with their own format.\n    // We're only interested in a \"platform 3\" table. This is a Windows format.\n    cmap.numTables = parse.getUShort(data, start + 2);\n    var offset = -1;\n    for (i = 0; i < cmap.numTables; i += 1) {\n        var platformId = parse.getUShort(data, start + 4 + (i * 8));\n        var encodingId = parse.getUShort(data, start + 4 + (i * 8) + 2);\n        if (platformId === 3 && (encodingId === 1 || encodingId === 0)) {\n            offset = parse.getULong(data, start + 4 + (i * 8) + 4);\n            break;\n        }\n    }\n\n    if (offset === -1) {\n        // There is no cmap table in the font that we support, so return null.\n        // This font will be marked as unsupported.\n        return null;\n    }\n\n    var p = new parse.Parser(data, start + offset);\n    cmap.format = p.parseUShort();\n    check.argument(cmap.format === 4, 'Only format 4 cmap tables are supported.');\n\n    // Length in bytes of the sub-tables.\n    cmap.length = p.parseUShort();\n    cmap.language = p.parseUShort();\n\n    // segCount is stored x 2.\n    var segCount;\n    cmap.segCount = segCount = p.parseUShort() >> 1;\n\n    // Skip searchRange, entrySelector, rangeShift.\n    p.skip('uShort', 3);\n\n    // The \"unrolled\" mapping from character codes to glyph indices.\n    cmap.glyphIndexMap = {};\n\n    var endCountParser = new parse.Parser(data, start + offset + 14);\n    var startCountParser = new parse.Parser(data, start + offset + 16 + segCount * 2);\n    var idDeltaParser = new parse.Parser(data, start + offset + 16 + segCount * 4);\n    var idRangeOffsetParser = new parse.Parser(data, start + offset + 16 + segCount * 6);\n    var glyphIndexOffset = start + offset + 16 + segCount * 8;\n    for (i = 0; i < segCount - 1; i += 1) {\n        var glyphIndex;\n        var endCount = endCountParser.parseUShort();\n        var startCount = startCountParser.parseUShort();\n        var idDelta = idDeltaParser.parseShort();\n        var idRangeOffset = idRangeOffsetParser.parseUShort();\n        for (var c = startCount; c <= endCount; c += 1) {\n            if (idRangeOffset !== 0) {\n                // The idRangeOffset is relative to the current position in the idRangeOffset array.\n                // Take the current offset in the idRangeOffset array.\n                glyphIndexOffset = (idRangeOffsetParser.offset + idRangeOffsetParser.relativeOffset - 2);\n\n                // Add the value of the idRangeOffset, which will move us into the glyphIndex array.\n                glyphIndexOffset += idRangeOffset;\n\n                // Then add the character index of the current segment, multiplied by 2 for USHORTs.\n                glyphIndexOffset += (c - startCount) * 2;\n                glyphIndex = parse.getUShort(data, glyphIndexOffset);\n                if (glyphIndex !== 0) {\n                    glyphIndex = (glyphIndex + idDelta) & 0xFFFF;\n                }\n            } else {\n                glyphIndex = (c + idDelta) & 0xFFFF;\n            }\n\n            cmap.glyphIndexMap[c] = glyphIndex;\n        }\n    }\n\n    return cmap;\n}\n\nfunction addSegment(t, code, glyphIndex) {\n    t.segments.push({\n        end: code,\n        start: code,\n        delta: -(code - glyphIndex),\n        offset: 0\n    });\n}\n\nfunction addTerminatorSegment(t) {\n    t.segments.push({\n        end: 0xFFFF,\n        start: 0xFFFF,\n        delta: 1,\n        offset: 0\n    });\n}\n\nfunction makeCmapTable(glyphs) {\n    var i;\n    var t = new table.Table('cmap', [\n        {name: 'version', type: 'USHORT', value: 0},\n        {name: 'numTables', type: 'USHORT', value: 1},\n        {name: 'platformID', type: 'USHORT', value: 3},\n        {name: 'encodingID', type: 'USHORT', value: 1},\n        {name: 'offset', type: 'ULONG', value: 12},\n        {name: 'format', type: 'USHORT', value: 4},\n        {name: 'length', type: 'USHORT', value: 0},\n        {name: 'language', type: 'USHORT', value: 0},\n        {name: 'segCountX2', type: 'USHORT', value: 0},\n        {name: 'searchRange', type: 'USHORT', value: 0},\n        {name: 'entrySelector', type: 'USHORT', value: 0},\n        {name: 'rangeShift', type: 'USHORT', value: 0}\n    ]);\n\n    t.segments = [];\n    for (i = 0; i < glyphs.length; i += 1) {\n        var glyph = glyphs.get(i);\n        for (var j = 0; j < glyph.unicodes.length; j += 1) {\n            addSegment(t, glyph.unicodes[j], i);\n        }\n\n        t.segments = t.segments.sort(function(a, b) {\n            return a.start - b.start;\n        });\n    }\n\n    addTerminatorSegment(t);\n\n    var segCount;\n    segCount = t.segments.length;\n    t.segCountX2 = segCount * 2;\n    t.searchRange = Math.pow(2, Math.floor(Math.log(segCount) / Math.log(2))) * 2;\n    t.entrySelector = Math.log(t.searchRange / 2) / Math.log(2);\n    t.rangeShift = t.segCountX2 - t.searchRange;\n\n    // Set up parallel segment arrays.\n    var endCounts = [];\n    var startCounts = [];\n    var idDeltas = [];\n    var idRangeOffsets = [];\n    var glyphIds = [];\n\n    for (i = 0; i < segCount; i += 1) {\n        var segment = t.segments[i];\n        endCounts = endCounts.concat({name: 'end_' + i, type: 'USHORT', value: segment.end});\n        startCounts = startCounts.concat({name: 'start_' + i, type: 'USHORT', value: segment.start});\n        idDeltas = idDeltas.concat({name: 'idDelta_' + i, type: 'SHORT', value: segment.delta});\n        idRangeOffsets = idRangeOffsets.concat({name: 'idRangeOffset_' + i, type: 'USHORT', value: segment.offset});\n        if (segment.glyphId !== undefined) {\n            glyphIds = glyphIds.concat({name: 'glyph_' + i, type: 'USHORT', value: segment.glyphId});\n        }\n    }\n\n    t.fields = t.fields.concat(endCounts);\n    t.fields.push({name: 'reservedPad', type: 'USHORT', value: 0});\n    t.fields = t.fields.concat(startCounts);\n    t.fields = t.fields.concat(idDeltas);\n    t.fields = t.fields.concat(idRangeOffsets);\n    t.fields = t.fields.concat(glyphIds);\n\n    t.length = 14 + // Subtable header\n        endCounts.length * 2 +\n        2 + // reservedPad\n        startCounts.length * 2 +\n        idDeltas.length * 2 +\n        idRangeOffsets.length * 2 +\n        glyphIds.length * 2;\n\n    return t;\n}\n\nexports.parse = parseCmapTable;\nexports.make = makeCmapTable;\n\n},{\"../check\":1,\"../parse\":8,\"../table\":10}],13:[function(require,module,exports){\n// The `glyf` table describes the glyphs in TrueType outline format.\n// http://www.microsoft.com/typography/otspec/glyf.htm\n\n'use strict';\n\nvar check = require('../check');\nvar glyphset = require('../glyphset');\nvar parse = require('../parse');\nvar path = require('../path');\n\n// Parse the coordinate data for a glyph.\nfunction parseGlyphCoordinate(p, flag, previousValue, shortVectorBitMask, sameBitMask) {\n    var v;\n    if ((flag & shortVectorBitMask) > 0) {\n        // The coordinate is 1 byte long.\n        v = p.parseByte();\n        // The `same` bit is re-used for short values to signify the sign of the value.\n        if ((flag & sameBitMask) === 0) {\n            v = -v;\n        }\n\n        v = previousValue + v;\n    } else {\n        //  The coordinate is 2 bytes long.\n        // If the `same` bit is set, the coordinate is the same as the previous coordinate.\n        if ((flag & sameBitMask) > 0) {\n            v = previousValue;\n        } else {\n            // Parse the coordinate as a signed 16-bit delta value.\n            v = previousValue + p.parseShort();\n        }\n    }\n\n    return v;\n}\n\n// Parse a TrueType glyph.\nfunction parseGlyph(glyph, data, start) {\n    var p = new parse.Parser(data, start);\n    glyph.numberOfContours = p.parseShort();\n    glyph.xMin = p.parseShort();\n    glyph.yMin = p.parseShort();\n    glyph.xMax = p.parseShort();\n    glyph.yMax = p.parseShort();\n    var flags;\n    var flag;\n    if (glyph.numberOfContours > 0) {\n        var i;\n        // This glyph is not a composite.\n        var endPointIndices = glyph.endPointIndices = [];\n        for (i = 0; i < glyph.numberOfContours; i += 1) {\n            endPointIndices.push(p.parseUShort());\n        }\n\n        glyph.instructionLength = p.parseUShort();\n        glyph.instructions = [];\n        for (i = 0; i < glyph.instructionLength; i += 1) {\n            glyph.instructions.push(p.parseByte());\n        }\n\n        var numberOfCoordinates = endPointIndices[endPointIndices.length - 1] + 1;\n        flags = [];\n        for (i = 0; i < numberOfCoordinates; i += 1) {\n            flag = p.parseByte();\n            flags.push(flag);\n            // If bit 3 is set, we repeat this flag n times, where n is the next byte.\n            if ((flag & 8) > 0) {\n                var repeatCount = p.parseByte();\n                for (var j = 0; j < repeatCount; j += 1) {\n                    flags.push(flag);\n                    i += 1;\n                }\n            }\n        }\n\n        check.argument(flags.length === numberOfCoordinates, 'Bad flags.');\n\n        if (endPointIndices.length > 0) {\n            var points = [];\n            var point;\n            // X/Y coordinates are relative to the previous point, except for the first point which is relative to 0,0.\n            if (numberOfCoordinates > 0) {\n                for (i = 0; i < numberOfCoordinates; i += 1) {\n                    flag = flags[i];\n                    point = {};\n                    point.onCurve = !!(flag & 1);\n                    point.lastPointOfContour = endPointIndices.indexOf(i) >= 0;\n                    points.push(point);\n                }\n\n                var px = 0;\n                for (i = 0; i < numberOfCoordinates; i += 1) {\n                    flag = flags[i];\n                    point = points[i];\n                    point.x = parseGlyphCoordinate(p, flag, px, 2, 16);\n                    px = point.x;\n                }\n\n                var py = 0;\n                for (i = 0; i < numberOfCoordinates; i += 1) {\n                    flag = flags[i];\n                    point = points[i];\n                    point.y = parseGlyphCoordinate(p, flag, py, 4, 32);\n                    py = point.y;\n                }\n            }\n\n            glyph.points = points;\n        } else {\n            glyph.points = [];\n        }\n    } else if (glyph.numberOfContours === 0) {\n        glyph.points = [];\n    } else {\n        glyph.isComposite = true;\n        glyph.points = [];\n        glyph.components = [];\n        var moreComponents = true;\n        while (moreComponents) {\n            flags = p.parseUShort();\n            var component = {\n                glyphIndex: p.parseUShort(),\n                xScale: 1,\n                scale01: 0,\n                scale10: 0,\n                yScale: 1,\n                dx: 0,\n                dy: 0\n            };\n            if ((flags & 1) > 0) {\n                // The arguments are words\n                component.dx = p.parseShort();\n                component.dy = p.parseShort();\n            } else {\n                // The arguments are bytes\n                component.dx = p.parseChar();\n                component.dy = p.parseChar();\n            }\n\n            if ((flags & 8) > 0) {\n                // We have a scale\n                component.xScale = component.yScale = p.parseF2Dot14();\n            } else if ((flags & 64) > 0) {\n                // We have an X / Y scale\n                component.xScale = p.parseF2Dot14();\n                component.yScale = p.parseF2Dot14();\n            } else if ((flags & 128) > 0) {\n                // We have a 2x2 transformation\n                component.xScale = p.parseF2Dot14();\n                component.scale01 = p.parseF2Dot14();\n                component.scale10 = p.parseF2Dot14();\n                component.yScale = p.parseF2Dot14();\n            }\n\n            glyph.components.push(component);\n            moreComponents = !!(flags & 32);\n        }\n    }\n}\n\n// Transform an array of points and return a new array.\nfunction transformPoints(points, transform) {\n    var newPoints = [];\n    for (var i = 0; i < points.length; i += 1) {\n        var pt = points[i];\n        var newPt = {\n            x: transform.xScale * pt.x + transform.scale01 * pt.y + transform.dx,\n            y: transform.scale10 * pt.x + transform.yScale * pt.y + transform.dy,\n            onCurve: pt.onCurve,\n            lastPointOfContour: pt.lastPointOfContour\n        };\n        newPoints.push(newPt);\n    }\n\n    return newPoints;\n}\n\nfunction getContours(points) {\n    var contours = [];\n    var currentContour = [];\n    for (var i = 0; i < points.length; i += 1) {\n        var pt = points[i];\n        currentContour.push(pt);\n        if (pt.lastPointOfContour) {\n            contours.push(currentContour);\n            currentContour = [];\n        }\n    }\n\n    check.argument(currentContour.length === 0, 'There are still points left in the current contour.');\n    return contours;\n}\n\n// Convert the TrueType glyph outline to a Path.\nfunction getPath(points) {\n    var p = new path.Path();\n    if (!points) {\n        return p;\n    }\n\n    var contours = getContours(points);\n    for (var i = 0; i < contours.length; i += 1) {\n        var contour = contours[i];\n        var firstPt = contour[0];\n        var lastPt = contour[contour.length - 1];\n        var curvePt;\n        var realFirstPoint;\n        if (firstPt.onCurve) {\n            curvePt = null;\n            // The first point will be consumed by the moveTo command,\n            // so skip it in the loop.\n            realFirstPoint = true;\n        } else {\n            if (lastPt.onCurve) {\n                // If the first point is off-curve and the last point is on-curve,\n                // start at the last point.\n                firstPt = lastPt;\n            } else {\n                // If both first and last points are off-curve, start at their middle.\n                firstPt = { x: (firstPt.x + lastPt.x) / 2, y: (firstPt.y + lastPt.y) / 2 };\n            }\n\n            curvePt = firstPt;\n            // The first point is synthesized, so don't skip the real first point.\n            realFirstPoint = false;\n        }\n\n        p.moveTo(firstPt.x, firstPt.y);\n\n        for (var j = realFirstPoint ? 1 : 0; j < contour.length; j += 1) {\n            var pt = contour[j];\n            var prevPt = j === 0 ? firstPt : contour[j - 1];\n            if (prevPt.onCurve && pt.onCurve) {\n                // This is a straight line.\n                p.lineTo(pt.x, pt.y);\n            } else if (prevPt.onCurve && !pt.onCurve) {\n                curvePt = pt;\n            } else if (!prevPt.onCurve && !pt.onCurve) {\n                var midPt = { x: (prevPt.x + pt.x) / 2, y: (prevPt.y + pt.y) / 2 };\n                p.quadraticCurveTo(prevPt.x, prevPt.y, midPt.x, midPt.y);\n                curvePt = pt;\n            } else if (!prevPt.onCurve && pt.onCurve) {\n                // Previous point off-curve, this point on-curve.\n                p.quadraticCurveTo(curvePt.x, curvePt.y, pt.x, pt.y);\n                curvePt = null;\n            } else {\n                throw new Error('Invalid state.');\n            }\n        }\n\n        if (firstPt !== lastPt) {\n            // Connect the last and first points\n            if (curvePt) {\n                p.quadraticCurveTo(curvePt.x, curvePt.y, firstPt.x, firstPt.y);\n            } else {\n                p.lineTo(firstPt.x, firstPt.y);\n            }\n        }\n    }\n\n    p.closePath();\n    return p;\n}\n\nfunction buildPath(glyphs, glyph) {\n    if (glyph.isComposite) {\n        for (var j = 0; j < glyph.components.length; j += 1) {\n            var component = glyph.components[j];\n            var componentGlyph = glyphs.get(component.glyphIndex);\n            if (componentGlyph.points) {\n                var transformedPoints = transformPoints(componentGlyph.points, component);\n                glyph.points = glyph.points.concat(transformedPoints);\n            }\n        }\n    }\n\n    return getPath(glyph.points);\n}\n\n// Parse all the glyphs according to the offsets from the `loca` table.\nfunction parseGlyfTable(data, start, loca, font) {\n    var glyphs = new glyphset.GlyphSet(font);\n    var i;\n\n    // The last element of the loca table is invalid.\n    for (i = 0; i < loca.length - 1; i += 1) {\n        var offset = loca[i];\n        var nextOffset = loca[i + 1];\n        if (offset !== nextOffset) {\n            glyphs.push(i, glyphset.ttfGlyphLoader(font, i, parseGlyph, data, start + offset, buildPath));\n        } else {\n            glyphs.push(i, glyphset.glyphLoader(font, i));\n        }\n    }\n\n    return glyphs;\n}\n\nexports.parse = parseGlyfTable;\n\n},{\"../check\":1,\"../glyphset\":6,\"../parse\":8,\"../path\":9}],14:[function(require,module,exports){\n// The `GPOS` table contains kerning pairs, among other things.\n// https://www.microsoft.com/typography/OTSPEC/gpos.htm\n\n'use strict';\n\nvar check = require('../check');\nvar parse = require('../parse');\n\n// Parse ScriptList and FeatureList tables of GPOS, GSUB, GDEF, BASE, JSTF tables.\n// These lists are unused by now, this function is just the basis for a real parsing.\nfunction parseTaggedListTable(data, start) {\n    var p = new parse.Parser(data, start);\n    var n = p.parseUShort();\n    var list = [];\n    for (var i = 0; i < n; i++) {\n        list[p.parseTag()] = { offset: p.parseUShort() };\n    }\n\n    return list;\n}\n\n// Parse a coverage table in a GSUB, GPOS or GDEF table.\n// Format 1 is a simple list of glyph ids,\n// Format 2 is a list of ranges. It is expanded in a list of glyphs, maybe not the best idea.\nfunction parseCoverageTable(data, start) {\n    var p = new parse.Parser(data, start);\n    var format = p.parseUShort();\n    var count =  p.parseUShort();\n    if (format === 1) {\n        return p.parseUShortList(count);\n    }\n    else if (format === 2) {\n        var coverage = [];\n        for (; count--;) {\n            var begin = p.parseUShort();\n            var end = p.parseUShort();\n            var index = p.parseUShort();\n            for (var i = begin; i <= end; i++) {\n                coverage[index++] = i;\n            }\n        }\n\n        return coverage;\n    }\n}\n\n// Parse a Class Definition Table in a GSUB, GPOS or GDEF table.\n// Returns a function that gets a class value from a glyph ID.\nfunction parseClassDefTable(data, start) {\n    var p = new parse.Parser(data, start);\n    var format = p.parseUShort();\n    if (format === 1) {\n        // Format 1 specifies a range of consecutive glyph indices, one class per glyph ID.\n        var startGlyph = p.parseUShort();\n        var glyphCount = p.parseUShort();\n        var classes = p.parseUShortList(glyphCount);\n        return function(glyphID) {\n            return classes[glyphID - startGlyph] || 0;\n        };\n    }\n    else if (format === 2) {\n        // Format 2 defines multiple groups of glyph indices that belong to the same class.\n        var rangeCount = p.parseUShort();\n        var startGlyphs = [];\n        var endGlyphs = [];\n        var classValues = [];\n        for (var i = 0; i < rangeCount; i++) {\n            startGlyphs[i] = p.parseUShort();\n            endGlyphs[i] = p.parseUShort();\n            classValues[i] = p.parseUShort();\n        }\n\n        return function(glyphID) {\n            var l = 0;\n            var r = startGlyphs.length - 1;\n            while (l < r) {\n                var c = (l + r + 1) >> 1;\n                if (glyphID < startGlyphs[c]) {\n                    r = c - 1;\n                } else {\n                    l = c;\n                }\n            }\n\n            if (startGlyphs[l] <= glyphID && glyphID <= endGlyphs[l]) {\n                return classValues[l] || 0;\n            }\n\n            return 0;\n        };\n    }\n}\n\n// Parse a pair adjustment positioning subtable, format 1 or format 2\n// The subtable is returned in the form of a lookup function.\nfunction parsePairPosSubTable(data, start) {\n    var p = new parse.Parser(data, start);\n    // This part is common to format 1 and format 2 subtables\n    var format = p.parseUShort();\n    var coverageOffset = p.parseUShort();\n    var coverage = parseCoverageTable(data, start + coverageOffset);\n    // valueFormat 4: XAdvance only, 1: XPlacement only, 0: no ValueRecord for second glyph\n    // Only valueFormat1=4 and valueFormat2=0 is supported.\n    var valueFormat1 = p.parseUShort();\n    var valueFormat2 = p.parseUShort();\n    var value1;\n    var value2;\n    if (valueFormat1 !== 4 || valueFormat2 !== 0) return;\n    var sharedPairSets = {};\n    if (format === 1) {\n        // Pair Positioning Adjustment: Format 1\n        var pairSetCount = p.parseUShort();\n        var pairSet = [];\n        // Array of offsets to PairSet tables-from beginning of PairPos subtable-ordered by Coverage Index\n        var pairSetOffsets = p.parseOffset16List(pairSetCount);\n        for (var firstGlyph = 0; firstGlyph < pairSetCount; firstGlyph++) {\n            var pairSetOffset = pairSetOffsets[firstGlyph];\n            var sharedPairSet = sharedPairSets[pairSetOffset];\n            if (!sharedPairSet) {\n                // Parse a pairset table in a pair adjustment subtable format 1\n                sharedPairSet = {};\n                p.relativeOffset = pairSetOffset;\n                var pairValueCount = p.parseUShort();\n                for (; pairValueCount--;) {\n                    var secondGlyph = p.parseUShort();\n                    if (valueFormat1) value1 = p.parseShort();\n                    if (valueFormat2) value2 = p.parseShort();\n                    // We only support valueFormat1 = 4 and valueFormat2 = 0,\n                    // so value1 is the XAdvance and value2 is empty.\n                    sharedPairSet[secondGlyph] = value1;\n                }\n            }\n\n            pairSet[coverage[firstGlyph]] = sharedPairSet;\n        }\n\n        return function(leftGlyph, rightGlyph) {\n            var pairs = pairSet[leftGlyph];\n            if (pairs) return pairs[rightGlyph];\n        };\n    }\n    else if (format === 2) {\n        // Pair Positioning Adjustment: Format 2\n        var classDef1Offset = p.parseUShort();\n        var classDef2Offset = p.parseUShort();\n        var class1Count = p.parseUShort();\n        var class2Count = p.parseUShort();\n        var getClass1 = parseClassDefTable(data, start + classDef1Offset);\n        var getClass2 = parseClassDefTable(data, start + classDef2Offset);\n\n        // Parse kerning values by class pair.\n        var kerningMatrix = [];\n        for (var i = 0; i < class1Count; i++) {\n            var kerningRow = kerningMatrix[i] = [];\n            for (var j = 0; j < class2Count; j++) {\n                if (valueFormat1) value1 = p.parseShort();\n                if (valueFormat2) value2 = p.parseShort();\n                // We only support valueFormat1 = 4 and valueFormat2 = 0,\n                // so value1 is the XAdvance and value2 is empty.\n                kerningRow[j] = value1;\n            }\n        }\n\n        // Convert coverage list to a hash\n        var covered = {};\n        for (i = 0; i < coverage.length; i++) covered[coverage[i]] = 1;\n\n        // Get the kerning value for a specific glyph pair.\n        return function(leftGlyph, rightGlyph) {\n            if (!covered[leftGlyph]) return;\n            var class1 = getClass1(leftGlyph);\n            var class2 = getClass2(rightGlyph);\n            var kerningRow = kerningMatrix[class1];\n\n            if (kerningRow) {\n                return kerningRow[class2];\n            }\n        };\n    }\n}\n\n// Parse a LookupTable (present in of GPOS, GSUB, GDEF, BASE, JSTF tables).\nfunction parseLookupTable(data, start) {\n    var p = new parse.Parser(data, start);\n    var lookupType = p.parseUShort();\n    var lookupFlag = p.parseUShort();\n    var useMarkFilteringSet = lookupFlag & 0x10;\n    var subTableCount = p.parseUShort();\n    var subTableOffsets = p.parseOffset16List(subTableCount);\n    var table = {\n        lookupType: lookupType,\n        lookupFlag: lookupFlag,\n        markFilteringSet: useMarkFilteringSet ? p.parseUShort() : -1\n    };\n    // LookupType 2, Pair adjustment\n    if (lookupType === 2) {\n        var subtables = [];\n        for (var i = 0; i < subTableCount; i++) {\n            subtables.push(parsePairPosSubTable(data, start + subTableOffsets[i]));\n        }\n        // Return a function which finds the kerning values in the subtables.\n        table.getKerningValue = function(leftGlyph, rightGlyph) {\n            for (var i = subtables.length; i--;) {\n                var value = subtables[i](leftGlyph, rightGlyph);\n                if (value !== undefined) return value;\n            }\n\n            return 0;\n        };\n    }\n\n    return table;\n}\n\n// Parse the `GPOS` table which contains, among other things, kerning pairs.\n// https://www.microsoft.com/typography/OTSPEC/gpos.htm\nfunction parseGposTable(data, start, font) {\n    var p = new parse.Parser(data, start);\n    var tableVersion = p.parseFixed();\n    check.argument(tableVersion === 1, 'Unsupported GPOS table version.');\n\n    // ScriptList and FeatureList - ignored for now\n    parseTaggedListTable(data, start + p.parseUShort());\n    // 'kern' is the feature we are looking for.\n    parseTaggedListTable(data, start + p.parseUShort());\n\n    // LookupList\n    var lookupListOffset = p.parseUShort();\n    p.relativeOffset = lookupListOffset;\n    var lookupCount = p.parseUShort();\n    var lookupTableOffsets = p.parseOffset16List(lookupCount);\n    var lookupListAbsoluteOffset = start + lookupListOffset;\n    for (var i = 0; i < lookupCount; i++) {\n        var table = parseLookupTable(data, lookupListAbsoluteOffset + lookupTableOffsets[i]);\n        if (table.lookupType === 2 && !font.getGposKerningValue) font.getGposKerningValue = table.getKerningValue;\n    }\n}\n\nexports.parse = parseGposTable;\n\n},{\"../check\":1,\"../parse\":8}],15:[function(require,module,exports){\n// The `head` table contains global information about the font.\n// https://www.microsoft.com/typography/OTSPEC/head.htm\n\n'use strict';\n\nvar check = require('../check');\nvar parse = require('../parse');\nvar table = require('../table');\n\n// Parse the header `head` table\nfunction parseHeadTable(data, start) {\n    var head = {};\n    var p = new parse.Parser(data, start);\n    head.version = p.parseVersion();\n    head.fontRevision = Math.round(p.parseFixed() * 1000) / 1000;\n    head.checkSumAdjustment = p.parseULong();\n    head.magicNumber = p.parseULong();\n    check.argument(head.magicNumber === 0x5F0F3CF5, 'Font header has wrong magic number.');\n    head.flags = p.parseUShort();\n    head.unitsPerEm = p.parseUShort();\n    head.created = p.parseLongDateTime();\n    head.modified = p.parseLongDateTime();\n    head.xMin = p.parseShort();\n    head.yMin = p.parseShort();\n    head.xMax = p.parseShort();\n    head.yMax = p.parseShort();\n    head.macStyle = p.parseUShort();\n    head.lowestRecPPEM = p.parseUShort();\n    head.fontDirectionHint = p.parseShort();\n    head.indexToLocFormat = p.parseShort();     // 50\n    head.glyphDataFormat = p.parseShort();\n    return head;\n}\n\nfunction makeHeadTable(options) {\n    return new table.Table('head', [\n        {name: 'version', type: 'FIXED', value: 0x00010000},\n        {name: 'fontRevision', type: 'FIXED', value: 0x00010000},\n        {name: 'checkSumAdjustment', type: 'ULONG', value: 0},\n        {name: 'magicNumber', type: 'ULONG', value: 0x5F0F3CF5},\n        {name: 'flags', type: 'USHORT', value: 0},\n        {name: 'unitsPerEm', type: 'USHORT', value: 1000},\n        {name: 'created', type: 'LONGDATETIME', value: 0},\n        {name: 'modified', type: 'LONGDATETIME', value: 0},\n        {name: 'xMin', type: 'SHORT', value: 0},\n        {name: 'yMin', type: 'SHORT', value: 0},\n        {name: 'xMax', type: 'SHORT', value: 0},\n        {name: 'yMax', type: 'SHORT', value: 0},\n        {name: 'macStyle', type: 'USHORT', value: 0},\n        {name: 'lowestRecPPEM', type: 'USHORT', value: 0},\n        {name: 'fontDirectionHint', type: 'SHORT', value: 2},\n        {name: 'indexToLocFormat', type: 'SHORT', value: 0},\n        {name: 'glyphDataFormat', type: 'SHORT', value: 0}\n    ], options);\n}\n\nexports.parse = parseHeadTable;\nexports.make = makeHeadTable;\n\n},{\"../check\":1,\"../parse\":8,\"../table\":10}],16:[function(require,module,exports){\n// The `hhea` table contains information for horizontal layout.\n// https://www.microsoft.com/typography/OTSPEC/hhea.htm\n\n'use strict';\n\nvar parse = require('../parse');\nvar table = require('../table');\n\n// Parse the horizontal header `hhea` table\nfunction parseHheaTable(data, start) {\n    var hhea = {};\n    var p = new parse.Parser(data, start);\n    hhea.version = p.parseVersion();\n    hhea.ascender = p.parseShort();\n    hhea.descender = p.parseShort();\n    hhea.lineGap = p.parseShort();\n    hhea.advanceWidthMax = p.parseUShort();\n    hhea.minLeftSideBearing = p.parseShort();\n    hhea.minRightSideBearing = p.parseShort();\n    hhea.xMaxExtent = p.parseShort();\n    hhea.caretSlopeRise = p.parseShort();\n    hhea.caretSlopeRun = p.parseShort();\n    hhea.caretOffset = p.parseShort();\n    p.relativeOffset += 8;\n    hhea.metricDataFormat = p.parseShort();\n    hhea.numberOfHMetrics = p.parseUShort();\n    return hhea;\n}\n\nfunction makeHheaTable(options) {\n    return new table.Table('hhea', [\n        {name: 'version', type: 'FIXED', value: 0x00010000},\n        {name: 'ascender', type: 'FWORD', value: 0},\n        {name: 'descender', type: 'FWORD', value: 0},\n        {name: 'lineGap', type: 'FWORD', value: 0},\n        {name: 'advanceWidthMax', type: 'UFWORD', value: 0},\n        {name: 'minLeftSideBearing', type: 'FWORD', value: 0},\n        {name: 'minRightSideBearing', type: 'FWORD', value: 0},\n        {name: 'xMaxExtent', type: 'FWORD', value: 0},\n        {name: 'caretSlopeRise', type: 'SHORT', value: 1},\n        {name: 'caretSlopeRun', type: 'SHORT', value: 0},\n        {name: 'caretOffset', type: 'SHORT', value: 0},\n        {name: 'reserved1', type: 'SHORT', value: 0},\n        {name: 'reserved2', type: 'SHORT', value: 0},\n        {name: 'reserved3', type: 'SHORT', value: 0},\n        {name: 'reserved4', type: 'SHORT', value: 0},\n        {name: 'metricDataFormat', type: 'SHORT', value: 0},\n        {name: 'numberOfHMetrics', type: 'USHORT', value: 0}\n    ], options);\n}\n\nexports.parse = parseHheaTable;\nexports.make = makeHheaTable;\n\n},{\"../parse\":8,\"../table\":10}],17:[function(require,module,exports){\n// The `hmtx` table contains the horizontal metrics for all glyphs.\n// https://www.microsoft.com/typography/OTSPEC/hmtx.htm\n\n'use strict';\n\nvar parse = require('../parse');\nvar table = require('../table');\n\n// Parse the `hmtx` table, which contains the horizontal metrics for all glyphs.\n// This function augments the glyph array, adding the advanceWidth and leftSideBearing to each glyph.\nfunction parseHmtxTable(data, start, numMetrics, numGlyphs, glyphs) {\n    var advanceWidth;\n    var leftSideBearing;\n    var p = new parse.Parser(data, start);\n    for (var i = 0; i < numGlyphs; i += 1) {\n        // If the font is monospaced, only one entry is needed. This last entry applies to all subsequent glyphs.\n        if (i < numMetrics) {\n            advanceWidth = p.parseUShort();\n            leftSideBearing = p.parseShort();\n        }\n\n        var glyph = glyphs.get(i);\n        glyph.advanceWidth = advanceWidth;\n        glyph.leftSideBearing = leftSideBearing;\n    }\n}\n\nfunction makeHmtxTable(glyphs) {\n    var t = new table.Table('hmtx', []);\n    for (var i = 0; i < glyphs.length; i += 1) {\n        var glyph = glyphs.get(i);\n        var advanceWidth = glyph.advanceWidth || 0;\n        var leftSideBearing = glyph.leftSideBearing || 0;\n        t.fields.push({name: 'advanceWidth_' + i, type: 'USHORT', value: advanceWidth});\n        t.fields.push({name: 'leftSideBearing_' + i, type: 'SHORT', value: leftSideBearing});\n    }\n\n    return t;\n}\n\nexports.parse = parseHmtxTable;\nexports.make = makeHmtxTable;\n\n},{\"../parse\":8,\"../table\":10}],18:[function(require,module,exports){\n// The `kern` table contains kerning pairs.\n// Note that some fonts use the GPOS OpenType layout table to specify kerning.\n// https://www.microsoft.com/typography/OTSPEC/kern.htm\n\n'use strict';\n\nvar check = require('../check');\nvar parse = require('../parse');\n\n// Parse the `kern` table which contains kerning pairs.\nfunction parseKernTable(data, start) {\n    var pairs = {};\n    var p = new parse.Parser(data, start);\n    var tableVersion = p.parseUShort();\n    check.argument(tableVersion === 0, 'Unsupported kern table version.');\n    // Skip nTables.\n    p.skip('uShort', 1);\n    var subTableVersion = p.parseUShort();\n    check.argument(subTableVersion === 0, 'Unsupported kern sub-table version.');\n    // Skip subTableLength, subTableCoverage\n    p.skip('uShort', 2);\n    var nPairs = p.parseUShort();\n    // Skip searchRange, entrySelector, rangeShift.\n    p.skip('uShort', 3);\n    for (var i = 0; i < nPairs; i += 1) {\n        var leftIndex = p.parseUShort();\n        var rightIndex = p.parseUShort();\n        var value = p.parseShort();\n        pairs[leftIndex + ',' + rightIndex] = value;\n    }\n\n    return pairs;\n}\n\nexports.parse = parseKernTable;\n\n},{\"../check\":1,\"../parse\":8}],19:[function(require,module,exports){\n// The `loca` table stores the offsets to the locations of the glyphs in the font.\n// https://www.microsoft.com/typography/OTSPEC/loca.htm\n\n'use strict';\n\nvar parse = require('../parse');\n\n// Parse the `loca` table. This table stores the offsets to the locations of the glyphs in the font,\n// relative to the beginning of the glyphData table.\n// The number of glyphs stored in the `loca` table is specified in the `maxp` table (under numGlyphs)\n// The loca table has two versions: a short version where offsets are stored as uShorts, and a long\n// version where offsets are stored as uLongs. The `head` table specifies which version to use\n// (under indexToLocFormat).\nfunction parseLocaTable(data, start, numGlyphs, shortVersion) {\n    var p = new parse.Parser(data, start);\n    var parseFn = shortVersion ? p.parseUShort : p.parseULong;\n    // There is an extra entry after the last index element to compute the length of the last glyph.\n    // That's why we use numGlyphs + 1.\n    var glyphOffsets = [];\n    for (var i = 0; i < numGlyphs + 1; i += 1) {\n        var glyphOffset = parseFn.call(p);\n        if (shortVersion) {\n            // The short table version stores the actual offset divided by 2.\n            glyphOffset *= 2;\n        }\n\n        glyphOffsets.push(glyphOffset);\n    }\n\n    return glyphOffsets;\n}\n\nexports.parse = parseLocaTable;\n\n},{\"../parse\":8}],20:[function(require,module,exports){\n// The `maxp` table establishes the memory requirements for the font.\n// We need it just to get the number of glyphs in the font.\n// https://www.microsoft.com/typography/OTSPEC/maxp.htm\n\n'use strict';\n\nvar parse = require('../parse');\nvar table = require('../table');\n\n// Parse the maximum profile `maxp` table.\nfunction parseMaxpTable(data, start) {\n    var maxp = {};\n    var p = new parse.Parser(data, start);\n    maxp.version = p.parseVersion();\n    maxp.numGlyphs = p.parseUShort();\n    if (maxp.version === 1.0) {\n        maxp.maxPoints = p.parseUShort();\n        maxp.maxContours = p.parseUShort();\n        maxp.maxCompositePoints = p.parseUShort();\n        maxp.maxCompositeContours = p.parseUShort();\n        maxp.maxZones = p.parseUShort();\n        maxp.maxTwilightPoints = p.parseUShort();\n        maxp.maxStorage = p.parseUShort();\n        maxp.maxFunctionDefs = p.parseUShort();\n        maxp.maxInstructionDefs = p.parseUShort();\n        maxp.maxStackElements = p.parseUShort();\n        maxp.maxSizeOfInstructions = p.parseUShort();\n        maxp.maxComponentElements = p.parseUShort();\n        maxp.maxComponentDepth = p.parseUShort();\n    }\n\n    return maxp;\n}\n\nfunction makeMaxpTable(numGlyphs) {\n    return new table.Table('maxp', [\n        {name: 'version', type: 'FIXED', value: 0x00005000},\n        {name: 'numGlyphs', type: 'USHORT', value: numGlyphs}\n    ]);\n}\n\nexports.parse = parseMaxpTable;\nexports.make = makeMaxpTable;\n\n},{\"../parse\":8,\"../table\":10}],21:[function(require,module,exports){\n// The `name` naming table.\n// https://www.microsoft.com/typography/OTSPEC/name.htm\n\n'use strict';\n\nvar encode = require('../types').encode;\nvar parse = require('../parse');\nvar table = require('../table');\n\n// NameIDs for the name table.\nvar nameTableNames = [\n    'copyright',              // 0\n    'fontFamily',             // 1\n    'fontSubfamily',          // 2\n    'uniqueID',               // 3\n    'fullName',               // 4\n    'version',                // 5\n    'postScriptName',         // 6\n    'trademark',              // 7\n    'manufacturer',           // 8\n    'designer',               // 9\n    'description',            // 10\n    'manufacturerURL',        // 11\n    'designerURL',            // 12\n    'licence',                // 13\n    'licenceURL',             // 14\n    'reserved',               // 15\n    'preferredFamily',        // 16\n    'preferredSubfamily',     // 17\n    'compatibleFullName',     // 18\n    'sampleText',             // 19\n    'postScriptFindFontName', // 20\n    'wwsFamily',              // 21\n    'wwsSubfamily'            // 22\n];\n\n// Parse the naming `name` table\n// Only Windows Unicode English names are supported.\n// Format 1 additional fields are not supported\nfunction parseNameTable(data, start) {\n    var name = {};\n    var p = new parse.Parser(data, start);\n    name.format = p.parseUShort();\n    var count = p.parseUShort();\n    var stringOffset = p.offset + p.parseUShort();\n    var unknownCount = 0;\n    for (var i = 0; i < count; i++) {\n        var platformID = p.parseUShort();\n        var encodingID = p.parseUShort();\n        var languageID = p.parseUShort();\n        var nameID = p.parseUShort();\n        var property = nameTableNames[nameID];\n        var byteLength = p.parseUShort();\n        var offset = p.parseUShort();\n        // platformID - encodingID - languageID standard combinations :\n        // 1 - 0 - 0 : Macintosh, Roman, English\n        // 3 - 1 - 0x409 : Windows, Unicode BMP (UCS-2), en-US\n        if (platformID === 3 && encodingID === 1 && languageID === 0x409) {\n            var codePoints = [];\n            var length = byteLength / 2;\n            for (var j = 0; j < length; j++, offset += 2) {\n                codePoints[j] = parse.getShort(data, stringOffset + offset);\n            }\n\n            var str = String.fromCharCode.apply(null, codePoints);\n            if (property) {\n                name[property] = str;\n            }\n            else {\n                unknownCount++;\n                name['unknown' + unknownCount] = str;\n            }\n        }\n\n    }\n\n    if (name.format === 1) {\n        name.langTagCount = p.parseUShort();\n    }\n\n    return name;\n}\n\nfunction makeNameRecord(platformID, encodingID, languageID, nameID, length, offset) {\n    return new table.Table('NameRecord', [\n        {name: 'platformID', type: 'USHORT', value: platformID},\n        {name: 'encodingID', type: 'USHORT', value: encodingID},\n        {name: 'languageID', type: 'USHORT', value: languageID},\n        {name: 'nameID', type: 'USHORT', value: nameID},\n        {name: 'length', type: 'USHORT', value: length},\n        {name: 'offset', type: 'USHORT', value: offset}\n    ]);\n}\n\nfunction addMacintoshNameRecord(t, recordID, s, offset) {\n    // Macintosh, Roman, English\n    var stringBytes = encode.STRING(s);\n    t.records.push(makeNameRecord(1, 0, 0, recordID, stringBytes.length, offset));\n    t.strings.push(stringBytes);\n    offset += stringBytes.length;\n    return offset;\n}\n\nfunction addWindowsNameRecord(t, recordID, s, offset) {\n    // Windows, Unicode BMP (UCS-2), US English\n    var utf16Bytes = encode.UTF16(s);\n    t.records.push(makeNameRecord(3, 1, 0x0409, recordID, utf16Bytes.length, offset));\n    t.strings.push(utf16Bytes);\n    offset += utf16Bytes.length;\n    return offset;\n}\n\nfunction makeNameTable(options) {\n    var t = new table.Table('name', [\n        {name: 'format', type: 'USHORT', value: 0},\n        {name: 'count', type: 'USHORT', value: 0},\n        {name: 'stringOffset', type: 'USHORT', value: 0}\n    ]);\n    t.records = [];\n    t.strings = [];\n    var offset = 0;\n    var i;\n    var s;\n    // Add Macintosh records first\n    for (i = 0; i < nameTableNames.length; i += 1) {\n        if (options[nameTableNames[i]] !== undefined) {\n            s = options[nameTableNames[i]];\n            offset = addMacintoshNameRecord(t, i, s, offset);\n        }\n    }\n    // Then add Windows records\n    for (i = 0; i < nameTableNames.length; i += 1) {\n        if (options[nameTableNames[i]] !== undefined) {\n            s = options[nameTableNames[i]];\n            offset = addWindowsNameRecord(t, i, s, offset);\n        }\n    }\n\n    t.count = t.records.length;\n    t.stringOffset = 6 + t.count * 12;\n    for (i = 0; i < t.records.length; i += 1) {\n        t.fields.push({name: 'record_' + i, type: 'TABLE', value: t.records[i]});\n    }\n\n    for (i = 0; i < t.strings.length; i += 1) {\n        t.fields.push({name: 'string_' + i, type: 'LITERAL', value: t.strings[i]});\n    }\n\n    return t;\n}\n\nexports.parse = parseNameTable;\nexports.make = makeNameTable;\n\n},{\"../parse\":8,\"../table\":10,\"../types\":25}],22:[function(require,module,exports){\n// The `OS/2` table contains metrics required in OpenType fonts.\n// https://www.microsoft.com/typography/OTSPEC/os2.htm\n\n'use strict';\n\nvar parse = require('../parse');\nvar table = require('../table');\n\nvar unicodeRanges = [\n    {begin: 0x0000, end: 0x007F}, // Basic Latin\n    {begin: 0x0080, end: 0x00FF}, // Latin-1 Supplement\n    {begin: 0x0100, end: 0x017F}, // Latin Extended-A\n    {begin: 0x0180, end: 0x024F}, // Latin Extended-B\n    {begin: 0x0250, end: 0x02AF}, // IPA Extensions\n    {begin: 0x02B0, end: 0x02FF}, // Spacing Modifier Letters\n    {begin: 0x0300, end: 0x036F}, // Combining Diacritical Marks\n    {begin: 0x0370, end: 0x03FF}, // Greek and Coptic\n    {begin: 0x2C80, end: 0x2CFF}, // Coptic\n    {begin: 0x0400, end: 0x04FF}, // Cyrillic\n    {begin: 0x0530, end: 0x058F}, // Armenian\n    {begin: 0x0590, end: 0x05FF}, // Hebrew\n    {begin: 0xA500, end: 0xA63F}, // Vai\n    {begin: 0x0600, end: 0x06FF}, // Arabic\n    {begin: 0x07C0, end: 0x07FF}, // NKo\n    {begin: 0x0900, end: 0x097F}, // Devanagari\n    {begin: 0x0980, end: 0x09FF}, // Bengali\n    {begin: 0x0A00, end: 0x0A7F}, // Gurmukhi\n    {begin: 0x0A80, end: 0x0AFF}, // Gujarati\n    {begin: 0x0B00, end: 0x0B7F}, // Oriya\n    {begin: 0x0B80, end: 0x0BFF}, // Tamil\n    {begin: 0x0C00, end: 0x0C7F}, // Telugu\n    {begin: 0x0C80, end: 0x0CFF}, // Kannada\n    {begin: 0x0D00, end: 0x0D7F}, // Malayalam\n    {begin: 0x0E00, end: 0x0E7F}, // Thai\n    {begin: 0x0E80, end: 0x0EFF}, // Lao\n    {begin: 0x10A0, end: 0x10FF}, // Georgian\n    {begin: 0x1B00, end: 0x1B7F}, // Balinese\n    {begin: 0x1100, end: 0x11FF}, // Hangul Jamo\n    {begin: 0x1E00, end: 0x1EFF}, // Latin Extended Additional\n    {begin: 0x1F00, end: 0x1FFF}, // Greek Extended\n    {begin: 0x2000, end: 0x206F}, // General Punctuation\n    {begin: 0x2070, end: 0x209F}, // Superscripts And Subscripts\n    {begin: 0x20A0, end: 0x20CF}, // Currency Symbol\n    {begin: 0x20D0, end: 0x20FF}, // Combining Diacritical Marks For Symbols\n    {begin: 0x2100, end: 0x214F}, // Letterlike Symbols\n    {begin: 0x2150, end: 0x218F}, // Number Forms\n    {begin: 0x2190, end: 0x21FF}, // Arrows\n    {begin: 0x2200, end: 0x22FF}, // Mathematical Operators\n    {begin: 0x2300, end: 0x23FF}, // Miscellaneous Technical\n    {begin: 0x2400, end: 0x243F}, // Control Pictures\n    {begin: 0x2440, end: 0x245F}, // Optical Character Recognition\n    {begin: 0x2460, end: 0x24FF}, // Enclosed Alphanumerics\n    {begin: 0x2500, end: 0x257F}, // Box Drawing\n    {begin: 0x2580, end: 0x259F}, // Block Elements\n    {begin: 0x25A0, end: 0x25FF}, // Geometric Shapes\n    {begin: 0x2600, end: 0x26FF}, // Miscellaneous Symbols\n    {begin: 0x2700, end: 0x27BF}, // Dingbats\n    {begin: 0x3000, end: 0x303F}, // CJK Symbols And Punctuation\n    {begin: 0x3040, end: 0x309F}, // Hiragana\n    {begin: 0x30A0, end: 0x30FF}, // Katakana\n    {begin: 0x3100, end: 0x312F}, // Bopomofo\n    {begin: 0x3130, end: 0x318F}, // Hangul Compatibility Jamo\n    {begin: 0xA840, end: 0xA87F}, // Phags-pa\n    {begin: 0x3200, end: 0x32FF}, // Enclosed CJK Letters And Months\n    {begin: 0x3300, end: 0x33FF}, // CJK Compatibility\n    {begin: 0xAC00, end: 0xD7AF}, // Hangul Syllables\n    {begin: 0xD800, end: 0xDFFF}, // Non-Plane 0 *\n    {begin: 0x10900, end: 0x1091F}, // Phoenicia\n    {begin: 0x4E00, end: 0x9FFF}, // CJK Unified Ideographs\n    {begin: 0xE000, end: 0xF8FF}, // Private Use Area (plane 0)\n    {begin: 0x31C0, end: 0x31EF}, // CJK Strokes\n    {begin: 0xFB00, end: 0xFB4F}, // Alphabetic Presentation Forms\n    {begin: 0xFB50, end: 0xFDFF}, // Arabic Presentation Forms-A\n    {begin: 0xFE20, end: 0xFE2F}, // Combining Half Marks\n    {begin: 0xFE10, end: 0xFE1F}, // Vertical Forms\n    {begin: 0xFE50, end: 0xFE6F}, // Small Form Variants\n    {begin: 0xFE70, end: 0xFEFF}, // Arabic Presentation Forms-B\n    {begin: 0xFF00, end: 0xFFEF}, // Halfwidth And Fullwidth Forms\n    {begin: 0xFFF0, end: 0xFFFF}, // Specials\n    {begin: 0x0F00, end: 0x0FFF}, // Tibetan\n    {begin: 0x0700, end: 0x074F}, // Syriac\n    {begin: 0x0780, end: 0x07BF}, // Thaana\n    {begin: 0x0D80, end: 0x0DFF}, // Sinhala\n    {begin: 0x1000, end: 0x109F}, // Myanmar\n    {begin: 0x1200, end: 0x137F}, // Ethiopic\n    {begin: 0x13A0, end: 0x13FF}, // Cherokee\n    {begin: 0x1400, end: 0x167F}, // Unified Canadian Aboriginal Syllabics\n    {begin: 0x1680, end: 0x169F}, // Ogham\n    {begin: 0x16A0, end: 0x16FF}, // Runic\n    {begin: 0x1780, end: 0x17FF}, // Khmer\n    {begin: 0x1800, end: 0x18AF}, // Mongolian\n    {begin: 0x2800, end: 0x28FF}, // Braille Patterns\n    {begin: 0xA000, end: 0xA48F}, // Yi Syllables\n    {begin: 0x1700, end: 0x171F}, // Tagalog\n    {begin: 0x10300, end: 0x1032F}, // Old Italic\n    {begin: 0x10330, end: 0x1034F}, // Gothic\n    {begin: 0x10400, end: 0x1044F}, // Deseret\n    {begin: 0x1D000, end: 0x1D0FF}, // Byzantine Musical Symbols\n    {begin: 0x1D400, end: 0x1D7FF}, // Mathematical Alphanumeric Symbols\n    {begin: 0xFF000, end: 0xFFFFD}, // Private Use (plane 15)\n    {begin: 0xFE00, end: 0xFE0F}, // Variation Selectors\n    {begin: 0xE0000, end: 0xE007F}, // Tags\n    {begin: 0x1900, end: 0x194F}, // Limbu\n    {begin: 0x1950, end: 0x197F}, // Tai Le\n    {begin: 0x1980, end: 0x19DF}, // New Tai Lue\n    {begin: 0x1A00, end: 0x1A1F}, // Buginese\n    {begin: 0x2C00, end: 0x2C5F}, // Glagolitic\n    {begin: 0x2D30, end: 0x2D7F}, // Tifinagh\n    {begin: 0x4DC0, end: 0x4DFF}, // Yijing Hexagram Symbols\n    {begin: 0xA800, end: 0xA82F}, // Syloti Nagri\n    {begin: 0x10000, end: 0x1007F}, // Linear B Syllabary\n    {begin: 0x10140, end: 0x1018F}, // Ancient Greek Numbers\n    {begin: 0x10380, end: 0x1039F}, // Ugaritic\n    {begin: 0x103A0, end: 0x103DF}, // Old Persian\n    {begin: 0x10450, end: 0x1047F}, // Shavian\n    {begin: 0x10480, end: 0x104AF}, // Osmanya\n    {begin: 0x10800, end: 0x1083F}, // Cypriot Syllabary\n    {begin: 0x10A00, end: 0x10A5F}, // Kharoshthi\n    {begin: 0x1D300, end: 0x1D35F}, // Tai Xuan Jing Symbols\n    {begin: 0x12000, end: 0x123FF}, // Cuneiform\n    {begin: 0x1D360, end: 0x1D37F}, // Counting Rod Numerals\n    {begin: 0x1B80, end: 0x1BBF}, // Sundanese\n    {begin: 0x1C00, end: 0x1C4F}, // Lepcha\n    {begin: 0x1C50, end: 0x1C7F}, // Ol Chiki\n    {begin: 0xA880, end: 0xA8DF}, // Saurashtra\n    {begin: 0xA900, end: 0xA92F}, // Kayah Li\n    {begin: 0xA930, end: 0xA95F}, // Rejang\n    {begin: 0xAA00, end: 0xAA5F}, // Cham\n    {begin: 0x10190, end: 0x101CF}, // Ancient Symbols\n    {begin: 0x101D0, end: 0x101FF}, // Phaistos Disc\n    {begin: 0x102A0, end: 0x102DF}, // Carian\n    {begin: 0x1F030, end: 0x1F09F}  // Domino Tiles\n];\n\nfunction getUnicodeRange(unicode) {\n    for (var i = 0; i < unicodeRanges.length; i += 1) {\n        var range = unicodeRanges[i];\n        if (unicode >= range.begin && unicode < range.end) {\n            return i;\n        }\n    }\n\n    return -1;\n}\n\n// Parse the OS/2 and Windows metrics `OS/2` table\nfunction parseOS2Table(data, start) {\n    var os2 = {};\n    var p = new parse.Parser(data, start);\n    os2.version = p.parseUShort();\n    os2.xAvgCharWidth = p.parseShort();\n    os2.usWeightClass = p.parseUShort();\n    os2.usWidthClass = p.parseUShort();\n    os2.fsType = p.parseUShort();\n    os2.ySubscriptXSize = p.parseShort();\n    os2.ySubscriptYSize = p.parseShort();\n    os2.ySubscriptXOffset = p.parseShort();\n    os2.ySubscriptYOffset = p.parseShort();\n    os2.ySuperscriptXSize = p.parseShort();\n    os2.ySuperscriptYSize = p.parseShort();\n    os2.ySuperscriptXOffset = p.parseShort();\n    os2.ySuperscriptYOffset = p.parseShort();\n    os2.yStrikeoutSize = p.parseShort();\n    os2.yStrikeoutPosition = p.parseShort();\n    os2.sFamilyClass = p.parseShort();\n    os2.panose = [];\n    for (var i = 0; i < 10; i++) {\n        os2.panose[i] = p.parseByte();\n    }\n\n    os2.ulUnicodeRange1 = p.parseULong();\n    os2.ulUnicodeRange2 = p.parseULong();\n    os2.ulUnicodeRange3 = p.parseULong();\n    os2.ulUnicodeRange4 = p.parseULong();\n    os2.achVendID = String.fromCharCode(p.parseByte(), p.parseByte(), p.parseByte(), p.parseByte());\n    os2.fsSelection = p.parseUShort();\n    os2.usFirstCharIndex = p.parseUShort();\n    os2.usLastCharIndex = p.parseUShort();\n    os2.sTypoAscender = p.parseShort();\n    os2.sTypoDescender = p.parseShort();\n    os2.sTypoLineGap = p.parseShort();\n    os2.usWinAscent = p.parseUShort();\n    os2.usWinDescent = p.parseUShort();\n    if (os2.version >= 1) {\n        os2.ulCodePageRange1 = p.parseULong();\n        os2.ulCodePageRange2 = p.parseULong();\n    }\n\n    if (os2.version >= 2) {\n        os2.sxHeight = p.parseShort();\n        os2.sCapHeight = p.parseShort();\n        os2.usDefaultChar = p.parseUShort();\n        os2.usBreakChar = p.parseUShort();\n        os2.usMaxContent = p.parseUShort();\n    }\n\n    return os2;\n}\n\nfunction makeOS2Table(options) {\n    return new table.Table('OS/2', [\n        {name: 'version', type: 'USHORT', value: 0x0003},\n        {name: 'xAvgCharWidth', type: 'SHORT', value: 0},\n        {name: 'usWeightClass', type: 'USHORT', value: 0},\n        {name: 'usWidthClass', type: 'USHORT', value: 0},\n        {name: 'fsType', type: 'USHORT', value: 0},\n        {name: 'ySubscriptXSize', type: 'SHORT', value: 650},\n        {name: 'ySubscriptYSize', type: 'SHORT', value: 699},\n        {name: 'ySubscriptXOffset', type: 'SHORT', value: 0},\n        {name: 'ySubscriptYOffset', type: 'SHORT', value: 140},\n        {name: 'ySuperscriptXSize', type: 'SHORT', value: 650},\n        {name: 'ySuperscriptYSize', type: 'SHORT', value: 699},\n        {name: 'ySuperscriptXOffset', type: 'SHORT', value: 0},\n        {name: 'ySuperscriptYOffset', type: 'SHORT', value: 479},\n        {name: 'yStrikeoutSize', type: 'SHORT', value: 49},\n        {name: 'yStrikeoutPosition', type: 'SHORT', value: 258},\n        {name: 'sFamilyClass', type: 'SHORT', value: 0},\n        {name: 'bFamilyType', type: 'BYTE', value: 0},\n        {name: 'bSerifStyle', type: 'BYTE', value: 0},\n        {name: 'bWeight', type: 'BYTE', value: 0},\n        {name: 'bProportion', type: 'BYTE', value: 0},\n        {name: 'bContrast', type: 'BYTE', value: 0},\n        {name: 'bStrokeVariation', type: 'BYTE', value: 0},\n        {name: 'bArmStyle', type: 'BYTE', value: 0},\n        {name: 'bLetterform', type: 'BYTE', value: 0},\n        {name: 'bMidline', type: 'BYTE', value: 0},\n        {name: 'bXHeight', type: 'BYTE', value: 0},\n        {name: 'ulUnicodeRange1', type: 'ULONG', value: 0},\n        {name: 'ulUnicodeRange2', type: 'ULONG', value: 0},\n        {name: 'ulUnicodeRange3', type: 'ULONG', value: 0},\n        {name: 'ulUnicodeRange4', type: 'ULONG', value: 0},\n        {name: 'achVendID', type: 'CHARARRAY', value: 'XXXX'},\n        {name: 'fsSelection', type: 'USHORT', value: 0},\n        {name: 'usFirstCharIndex', type: 'USHORT', value: 0},\n        {name: 'usLastCharIndex', type: 'USHORT', value: 0},\n        {name: 'sTypoAscender', type: 'SHORT', value: 0},\n        {name: 'sTypoDescender', type: 'SHORT', value: 0},\n        {name: 'sTypoLineGap', type: 'SHORT', value: 0},\n        {name: 'usWinAscent', type: 'USHORT', value: 0},\n        {name: 'usWinDescent', type: 'USHORT', value: 0},\n        {name: 'ulCodePageRange1', type: 'ULONG', value: 0},\n        {name: 'ulCodePageRange2', type: 'ULONG', value: 0},\n        {name: 'sxHeight', type: 'SHORT', value: 0},\n        {name: 'sCapHeight', type: 'SHORT', value: 0},\n        {name: 'usDefaultChar', type: 'USHORT', value: 0},\n        {name: 'usBreakChar', type: 'USHORT', value: 0},\n        {name: 'usMaxContext', type: 'USHORT', value: 0}\n    ], options);\n}\n\nexports.unicodeRanges = unicodeRanges;\nexports.getUnicodeRange = getUnicodeRange;\nexports.parse = parseOS2Table;\nexports.make = makeOS2Table;\n\n},{\"../parse\":8,\"../table\":10}],23:[function(require,module,exports){\n// The `post` table stores additional PostScript information, such as glyph names.\n// https://www.microsoft.com/typography/OTSPEC/post.htm\n\n'use strict';\n\nvar encoding = require('../encoding');\nvar parse = require('../parse');\nvar table = require('../table');\n\n// Parse the PostScript `post` table\nfunction parsePostTable(data, start) {\n    var post = {};\n    var p = new parse.Parser(data, start);\n    var i;\n    post.version = p.parseVersion();\n    post.italicAngle = p.parseFixed();\n    post.underlinePosition = p.parseShort();\n    post.underlineThickness = p.parseShort();\n    post.isFixedPitch = p.parseULong();\n    post.minMemType42 = p.parseULong();\n    post.maxMemType42 = p.parseULong();\n    post.minMemType1 = p.parseULong();\n    post.maxMemType1 = p.parseULong();\n    switch (post.version) {\n    case 1:\n        post.names = encoding.standardNames.slice();\n        break;\n    case 2:\n        post.numberOfGlyphs = p.parseUShort();\n        post.glyphNameIndex = new Array(post.numberOfGlyphs);\n        for (i = 0; i < post.numberOfGlyphs; i++) {\n            post.glyphNameIndex[i] = p.parseUShort();\n        }\n\n        post.names = [];\n        for (i = 0; i < post.numberOfGlyphs; i++) {\n            if (post.glyphNameIndex[i] >= encoding.standardNames.length) {\n                var nameLength = p.parseChar();\n                post.names.push(p.parseString(nameLength));\n            }\n        }\n\n        break;\n    case 2.5:\n        post.numberOfGlyphs = p.parseUShort();\n        post.offset = new Array(post.numberOfGlyphs);\n        for (i = 0; i < post.numberOfGlyphs; i++) {\n            post.offset[i] = p.parseChar();\n        }\n\n        break;\n    }\n    return post;\n}\n\nfunction makePostTable() {\n    return new table.Table('post', [\n        {name: 'version', type: 'FIXED', value: 0x00030000},\n        {name: 'italicAngle', type: 'FIXED', value: 0},\n        {name: 'underlinePosition', type: 'FWORD', value: 0},\n        {name: 'underlineThickness', type: 'FWORD', value: 0},\n        {name: 'isFixedPitch', type: 'ULONG', value: 0},\n        {name: 'minMemType42', type: 'ULONG', value: 0},\n        {name: 'maxMemType42', type: 'ULONG', value: 0},\n        {name: 'minMemType1', type: 'ULONG', value: 0},\n        {name: 'maxMemType1', type: 'ULONG', value: 0}\n    ]);\n}\n\nexports.parse = parsePostTable;\nexports.make = makePostTable;\n\n},{\"../encoding\":3,\"../parse\":8,\"../table\":10}],24:[function(require,module,exports){\n// The `sfnt` wrapper provides organization for the tables in the font.\n// It is the top-level data structure in a font.\n// https://www.microsoft.com/typography/OTSPEC/otff.htm\n// Recommendations for creating OpenType Fonts:\n// http://www.microsoft.com/typography/otspec140/recom.htm\n\n'use strict';\n\nvar check = require('../check');\nvar table = require('../table');\n\nvar cmap = require('./cmap');\nvar cff = require('./cff');\nvar head = require('./head');\nvar hhea = require('./hhea');\nvar hmtx = require('./hmtx');\nvar maxp = require('./maxp');\nvar _name = require('./name');\nvar os2 = require('./os2');\nvar post = require('./post');\n\nfunction log2(v) {\n    return Math.log(v) / Math.log(2) | 0;\n}\n\nfunction computeCheckSum(bytes) {\n    while (bytes.length % 4 !== 0) {\n        bytes.push(0);\n    }\n\n    var sum = 0;\n    for (var i = 0; i < bytes.length; i += 4) {\n        sum += (bytes[i] << 24) +\n            (bytes[i + 1] << 16) +\n            (bytes[i + 2] << 8) +\n            (bytes[i + 3]);\n    }\n\n    sum %= Math.pow(2, 32);\n    return sum;\n}\n\nfunction makeTableRecord(tag, checkSum, offset, length) {\n    return new table.Table('Table Record', [\n        {name: 'tag', type: 'TAG', value: tag !== undefined ? tag : ''},\n        {name: 'checkSum', type: 'ULONG', value: checkSum !== undefined ? checkSum : 0},\n        {name: 'offset', type: 'ULONG', value: offset !== undefined ? offset : 0},\n        {name: 'length', type: 'ULONG', value: length !== undefined ? length : 0}\n    ]);\n}\n\nfunction makeSfntTable(tables) {\n    var sfnt = new table.Table('sfnt', [\n        {name: 'version', type: 'TAG', value: 'OTTO'},\n        {name: 'numTables', type: 'USHORT', value: 0},\n        {name: 'searchRange', type: 'USHORT', value: 0},\n        {name: 'entrySelector', type: 'USHORT', value: 0},\n        {name: 'rangeShift', type: 'USHORT', value: 0}\n    ]);\n    sfnt.tables = tables;\n    sfnt.numTables = tables.length;\n    var highestPowerOf2 = Math.pow(2, log2(sfnt.numTables));\n    sfnt.searchRange = 16 * highestPowerOf2;\n    sfnt.entrySelector = log2(highestPowerOf2);\n    sfnt.rangeShift = sfnt.numTables * 16 - sfnt.searchRange;\n\n    var recordFields = [];\n    var tableFields = [];\n\n    var offset = sfnt.sizeOf() + (makeTableRecord().sizeOf() * sfnt.numTables);\n    while (offset % 4 !== 0) {\n        offset += 1;\n        tableFields.push({name: 'padding', type: 'BYTE', value: 0});\n    }\n\n    for (var i = 0; i < tables.length; i += 1) {\n        var t = tables[i];\n        check.argument(t.tableName.length === 4, 'Table name' + t.tableName + ' is invalid.');\n        var tableLength = t.sizeOf();\n        var tableRecord = makeTableRecord(t.tableName, computeCheckSum(t.encode()), offset, tableLength);\n        recordFields.push({name: tableRecord.tag + ' Table Record', type: 'TABLE', value: tableRecord});\n        tableFields.push({name: t.tableName + ' table', type: 'TABLE', value: t});\n        offset += tableLength;\n        check.argument(!isNaN(offset), 'Something went wrong calculating the offset.');\n        while (offset % 4 !== 0) {\n            offset += 1;\n            tableFields.push({name: 'padding', type: 'BYTE', value: 0});\n        }\n    }\n\n    // Table records need to be sorted alphabetically.\n    recordFields.sort(function(r1, r2) {\n        if (r1.value.tag > r2.value.tag) {\n            return 1;\n        } else {\n            return -1;\n        }\n    });\n\n    sfnt.fields = sfnt.fields.concat(recordFields);\n    sfnt.fields = sfnt.fields.concat(tableFields);\n    return sfnt;\n}\n\n// Get the metrics for a character. If the string has more than one character\n// this function returns metrics for the first available character.\n// You can provide optional fallback metrics if no characters are available.\nfunction metricsForChar(font, chars, notFoundMetrics) {\n    for (var i = 0; i < chars.length; i += 1) {\n        var glyphIndex = font.charToGlyphIndex(chars[i]);\n        if (glyphIndex > 0) {\n            var glyph = font.glyphs.get(glyphIndex);\n            return glyph.getMetrics();\n        }\n    }\n\n    return notFoundMetrics;\n}\n\nfunction average(vs) {\n    var sum = 0;\n    for (var i = 0; i < vs.length; i += 1) {\n        sum += vs[i];\n    }\n\n    return sum / vs.length;\n}\n\n// Convert the font object to a SFNT data structure.\n// This structure contains all the necessary tables and metadata to create a binary OTF file.\nfunction fontToSfntTable(font) {\n    var xMins = [];\n    var yMins = [];\n    var xMaxs = [];\n    var yMaxs = [];\n    var advanceWidths = [];\n    var leftSideBearings = [];\n    var rightSideBearings = [];\n    var firstCharIndex;\n    var lastCharIndex = 0;\n    var ulUnicodeRange1 = 0;\n    var ulUnicodeRange2 = 0;\n    var ulUnicodeRange3 = 0;\n    var ulUnicodeRange4 = 0;\n\n    for (var i = 0; i < font.glyphs.length; i += 1) {\n        var glyph = font.glyphs.get(i);\n        var unicode = glyph.unicode | 0;\n        if (firstCharIndex > unicode || firstCharIndex === null) {\n            firstCharIndex = unicode;\n        }\n\n        if (lastCharIndex < unicode) {\n            lastCharIndex = unicode;\n        }\n\n        var position = os2.getUnicodeRange(unicode);\n        if (position < 32) {\n            ulUnicodeRange1 |= 1 << position;\n        } else if (position < 64) {\n            ulUnicodeRange2 |= 1 << position - 32;\n        } else if (position < 96) {\n            ulUnicodeRange3 |= 1 << position - 64;\n        } else if (position < 123) {\n            ulUnicodeRange4 |= 1 << position - 96;\n        } else {\n            throw new Error('Unicode ranges bits > 123 are reserved for internal usage');\n        }\n        // Skip non-important characters.\n        if (glyph.name === '.notdef') continue;\n        var metrics = glyph.getMetrics();\n        xMins.push(metrics.xMin);\n        yMins.push(metrics.yMin);\n        xMaxs.push(metrics.xMax);\n        yMaxs.push(metrics.yMax);\n        leftSideBearings.push(metrics.leftSideBearing);\n        rightSideBearings.push(metrics.rightSideBearing);\n        advanceWidths.push(glyph.advanceWidth);\n    }\n\n    var globals = {\n        xMin: Math.min.apply(null, xMins),\n        yMin: Math.min.apply(null, yMins),\n        xMax: Math.max.apply(null, xMaxs),\n        yMax: Math.max.apply(null, yMaxs),\n        advanceWidthMax: Math.max.apply(null, advanceWidths),\n        advanceWidthAvg: average(advanceWidths),\n        minLeftSideBearing: Math.min.apply(null, leftSideBearings),\n        maxLeftSideBearing: Math.max.apply(null, leftSideBearings),\n        minRightSideBearing: Math.min.apply(null, rightSideBearings)\n    };\n    globals.ascender = font.ascender !== undefined ? font.ascender : globals.yMax;\n    globals.descender = font.descender !== undefined ? font.descender : globals.yMin;\n\n    var headTable = head.make({\n        unitsPerEm: font.unitsPerEm,\n        xMin: globals.xMin,\n        yMin: globals.yMin,\n        xMax: globals.xMax,\n        yMax: globals.yMax\n    });\n\n    var hheaTable = hhea.make({\n        ascender: globals.ascender,\n        descender: globals.descender,\n        advanceWidthMax: globals.advanceWidthMax,\n        minLeftSideBearing: globals.minLeftSideBearing,\n        minRightSideBearing: globals.minRightSideBearing,\n        xMaxExtent: globals.maxLeftSideBearing + (globals.xMax - globals.xMin),\n        numberOfHMetrics: font.glyphs.length\n    });\n\n    var maxpTable = maxp.make(font.glyphs.length);\n\n    var os2Table = os2.make({\n        xAvgCharWidth: Math.round(globals.advanceWidthAvg),\n        usWeightClass: 500, // Medium FIXME Make this configurable\n        usWidthClass: 5, // Medium (normal) FIXME Make this configurable\n        usFirstCharIndex: firstCharIndex,\n        usLastCharIndex: lastCharIndex,\n        ulUnicodeRange1: ulUnicodeRange1,\n        ulUnicodeRange2: ulUnicodeRange2,\n        ulUnicodeRange3: ulUnicodeRange3,\n        ulUnicodeRange4: ulUnicodeRange4,\n        // See http://typophile.com/node/13081 for more info on vertical metrics.\n        // We get metrics for typical characters (such as \"x\" for xHeight).\n        // We provide some fallback characters if characters are unavailable: their\n        // ordering was chosen experimentally.\n        sTypoAscender: globals.ascender,\n        sTypoDescender: globals.descender,\n        sTypoLineGap: 0,\n        usWinAscent: globals.ascender,\n        usWinDescent: -globals.descender,\n        sxHeight: metricsForChar(font, 'xyvw', {yMax: 0}).yMax,\n        sCapHeight: metricsForChar(font, 'HIKLEFJMNTZBDPRAGOQSUVWXY', globals).yMax,\n        usBreakChar: font.hasChar(' ') ? 32 : 0 // Use space as the break character, if available.\n    });\n\n    var hmtxTable = hmtx.make(font.glyphs);\n    var cmapTable = cmap.make(font.glyphs);\n\n    var fullName = font.familyName + ' ' + font.styleName;\n    var postScriptName = font.familyName.replace(/\\s/g, '') + '-' + font.styleName;\n    var nameTable = _name.make({\n        copyright: font.copyright,\n        fontFamily: font.familyName,\n        fontSubfamily: font.styleName,\n        uniqueID: font.manufacturer + ':' + fullName,\n        fullName: fullName,\n        version: font.version,\n        postScriptName: postScriptName,\n        trademark: font.trademark,\n        manufacturer: font.manufacturer,\n        designer: font.designer,\n        description: font.description,\n        manufacturerURL: font.manufacturerURL,\n        designerURL: font.designerURL,\n        license: font.license,\n        licenseURL: font.licenseURL,\n        preferredFamily: font.familyName,\n        preferredSubfamily: font.styleName\n    });\n    var postTable = post.make();\n    var cffTable = cff.make(font.glyphs, {\n        version: font.version,\n        fullName: fullName,\n        familyName: font.familyName,\n        weightName: font.styleName,\n        postScriptName: postScriptName,\n        unitsPerEm: font.unitsPerEm\n    });\n    // Order the tables according to the the OpenType specification 1.4.\n    var tables = [headTable, hheaTable, maxpTable, os2Table, nameTable, cmapTable, postTable, cffTable, hmtxTable];\n\n    var sfntTable = makeSfntTable(tables);\n\n    // Compute the font's checkSum and store it in head.checkSumAdjustment.\n    var bytes = sfntTable.encode();\n    var checkSum = computeCheckSum(bytes);\n    var tableFields = sfntTable.fields;\n    var checkSumAdjusted = false;\n    for (i = 0; i < tableFields.length; i += 1) {\n        if (tableFields[i].name === 'head table') {\n            tableFields[i].value.checkSumAdjustment = 0xB1B0AFBA - checkSum;\n            checkSumAdjusted = true;\n            break;\n        }\n    }\n\n    if (!checkSumAdjusted) {\n        throw new Error('Could not find head table with checkSum to adjust.');\n    }\n\n    return sfntTable;\n}\n\nexports.computeCheckSum = computeCheckSum;\nexports.make = makeSfntTable;\nexports.fontToTable = fontToSfntTable;\n\n},{\"../check\":1,\"../table\":10,\"./cff\":11,\"./cmap\":12,\"./head\":15,\"./hhea\":16,\"./hmtx\":17,\"./maxp\":20,\"./name\":21,\"./os2\":22,\"./post\":23}],25:[function(require,module,exports){\n// Data types used in the OpenType font file.\n// All OpenType fonts use Motorola-style byte ordering (Big Endian)\n\n/* global WeakMap */\n\n'use strict';\n\nvar check = require('./check');\n\nvar LIMIT16 = 32768; // The limit at which a 16-bit number switches signs == 2^15\nvar LIMIT32 = 2147483648; // The limit at which a 32-bit number switches signs == 2 ^ 31\n\nvar decode = {};\nvar encode = {};\nvar sizeOf = {};\n\n// Return a function that always returns the same value.\nfunction constant(v) {\n    return function() {\n        return v;\n    };\n}\n\n// OpenType data types //////////////////////////////////////////////////////\n\n// Convert an 8-bit unsigned integer to a list of 1 byte.\nencode.BYTE = function(v) {\n    check.argument(v >= 0 && v <= 255, 'Byte value should be between 0 and 255.');\n    return [v];\n};\n\nsizeOf.BYTE = constant(1);\n\n// Convert a 8-bit signed integer to a list of 1 byte.\nencode.CHAR = function(v) {\n    return [v.charCodeAt(0)];\n};\n\nsizeOf.CHAR = constant(1);\n\n// Convert an ASCII string to a list of bytes.\nencode.CHARARRAY = function(v) {\n    var b = [];\n    for (var i = 0; i < v.length; i += 1) {\n        b.push(v.charCodeAt(i));\n    }\n\n    return b;\n};\n\nsizeOf.CHARARRAY = function(v) {\n    return v.length;\n};\n\n// Convert a 16-bit unsigned integer to a list of 2 bytes.\nencode.USHORT = function(v) {\n    return [(v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.USHORT = constant(2);\n\n// Convert a 16-bit signed integer to a list of 2 bytes.\nencode.SHORT = function(v) {\n    // Two's complement\n    if (v >= LIMIT16) {\n        v = -(2 * LIMIT16 - v);\n    }\n\n    return [(v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.SHORT = constant(2);\n\n// Convert a 24-bit unsigned integer to a list of 3 bytes.\nencode.UINT24 = function(v) {\n    return [(v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.UINT24 = constant(3);\n\n// Convert a 32-bit unsigned integer to a list of 4 bytes.\nencode.ULONG = function(v) {\n    return [(v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.ULONG = constant(4);\n\n// Convert a 32-bit unsigned integer to a list of 4 bytes.\nencode.LONG = function(v) {\n    // Two's complement\n    if (v >= LIMIT32) {\n        v = -(2 * LIMIT32 - v);\n    }\n\n    return [(v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.LONG = constant(4);\n\nencode.FIXED = encode.ULONG;\nsizeOf.FIXED = sizeOf.ULONG;\n\nencode.FWORD = encode.SHORT;\nsizeOf.FWORD = sizeOf.SHORT;\n\nencode.UFWORD = encode.USHORT;\nsizeOf.UFWORD = sizeOf.USHORT;\n\n// FIXME Implement LONGDATETIME\nencode.LONGDATETIME = function() {\n    return [0, 0, 0, 0, 0, 0, 0, 0];\n};\n\nsizeOf.LONGDATETIME = constant(8);\n\n// Convert a 4-char tag to a list of 4 bytes.\nencode.TAG = function(v) {\n    check.argument(v.length === 4, 'Tag should be exactly 4 ASCII characters.');\n    return [v.charCodeAt(0),\n            v.charCodeAt(1),\n            v.charCodeAt(2),\n            v.charCodeAt(3)];\n};\n\nsizeOf.TAG = constant(4);\n\n// CFF data types ///////////////////////////////////////////////////////////\n\nencode.Card8 = encode.BYTE;\nsizeOf.Card8 = sizeOf.BYTE;\n\nencode.Card16 = encode.USHORT;\nsizeOf.Card16 = sizeOf.USHORT;\n\nencode.OffSize = encode.BYTE;\nsizeOf.OffSize = sizeOf.BYTE;\n\nencode.SID = encode.USHORT;\nsizeOf.SID = sizeOf.USHORT;\n\n// Convert a numeric operand or charstring number to a variable-size list of bytes.\nencode.NUMBER = function(v) {\n    if (v >= -107 && v <= 107) {\n        return [v + 139];\n    } else if (v >= 108 && v <= 1131) {\n        v = v - 108;\n        return [(v >> 8) + 247, v & 0xFF];\n    } else if (v >= -1131 && v <= -108) {\n        v = -v - 108;\n        return [(v >> 8) + 251, v & 0xFF];\n    } else if (v >= -32768 && v <= 32767) {\n        return encode.NUMBER16(v);\n    } else {\n        return encode.NUMBER32(v);\n    }\n};\n\nsizeOf.NUMBER = function(v) {\n    return encode.NUMBER(v).length;\n};\n\n// Convert a signed number between -32768 and +32767 to a three-byte value.\n// This ensures we always use three bytes, but is not the most compact format.\nencode.NUMBER16 = function(v) {\n    return [28, (v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.NUMBER16 = constant(3);\n\n// Convert a signed number between -(2^31) and +(2^31-1) to a five-byte value.\n// This is useful if you want to be sure you always use four bytes,\n// at the expense of wasting a few bytes for smaller numbers.\nencode.NUMBER32 = function(v) {\n    return [29, (v >> 24) & 0xFF, (v >> 16) & 0xFF, (v >> 8) & 0xFF, v & 0xFF];\n};\n\nsizeOf.NUMBER32 = constant(5);\n\nencode.REAL = function(v) {\n    var value = v.toString();\n\n    // Some numbers use an epsilon to encode the value. (e.g. JavaScript will store 0.0000001 as 1e-7)\n    // This code converts it back to a number without the epsilon.\n    var m = /\\.(\\d*?)(?:9{5,20}|0{5,20})\\d{0,2}(?:e(.+)|$)/.exec(value);\n    if (m) {\n        var epsilon = parseFloat('1e' + ((m[2] ? +m[2] : 0) + m[1].length));\n        value = (Math.round(v * epsilon) / epsilon).toString();\n    }\n\n    var nibbles = '';\n    var i;\n    var ii;\n    for (i = 0, ii = value.length; i < ii; i += 1) {\n        var c = value[i];\n        if (c === 'e') {\n            nibbles += value[++i] === '-' ? 'c' : 'b';\n        } else if (c === '.') {\n            nibbles += 'a';\n        } else if (c === '-') {\n            nibbles += 'e';\n        } else {\n            nibbles += c;\n        }\n    }\n\n    nibbles += (nibbles.length & 1) ? 'f' : 'ff';\n    var out = [30];\n    for (i = 0, ii = nibbles.length; i < ii; i += 2) {\n        out.push(parseInt(nibbles.substr(i, 2), 16));\n    }\n\n    return out;\n};\n\nsizeOf.REAL = function(v) {\n    return encode.REAL(v).length;\n};\n\nencode.NAME = encode.CHARARRAY;\nsizeOf.NAME = sizeOf.CHARARRAY;\n\nencode.STRING = encode.CHARARRAY;\nsizeOf.STRING = sizeOf.CHARARRAY;\n\n// Convert a JavaScript string to UTF16-BE.\nencode.UTF16 = function(v) {\n    var b = [];\n    for (var i = 0; i < v.length; i += 1) {\n        var codepoint = v.charCodeAt(i);\n        b.push((codepoint >> 8) & 0xFF);\n        b.push(codepoint & 0xFF);\n    }\n\n    return b;\n};\n\nsizeOf.UTF16 = function(v) {\n    return v.length * 2;\n};\n\n// Convert a list of values to a CFF INDEX structure.\n// The values should be objects containing name / type / value.\nencode.INDEX = function(l) {\n    var i;\n    //var offset, offsets, offsetEncoder, encodedOffsets, encodedOffset, data,\n    //    dataSize, i, v;\n    // Because we have to know which data type to use to encode the offsets,\n    // we have to go through the values twice: once to encode the data and\n    // calculate the offets, then again to encode the offsets using the fitting data type.\n    var offset = 1; // First offset is always 1.\n    var offsets = [offset];\n    var data = [];\n    var dataSize = 0;\n    for (i = 0; i < l.length; i += 1) {\n        var v = encode.OBJECT(l[i]);\n        Array.prototype.push.apply(data, v);\n        dataSize += v.length;\n        offset += v.length;\n        offsets.push(offset);\n    }\n\n    if (data.length === 0) {\n        return [0, 0];\n    }\n\n    var encodedOffsets = [];\n    var offSize = (1 + Math.floor(Math.log(dataSize) / Math.log(2)) / 8) | 0;\n    var offsetEncoder = [undefined, encode.BYTE, encode.USHORT, encode.UINT24, encode.ULONG][offSize];\n    for (i = 0; i < offsets.length; i += 1) {\n        var encodedOffset = offsetEncoder(offsets[i]);\n        Array.prototype.push.apply(encodedOffsets, encodedOffset);\n    }\n\n    return Array.prototype.concat(encode.Card16(l.length),\n                           encode.OffSize(offSize),\n                           encodedOffsets,\n                           data);\n};\n\nsizeOf.INDEX = function(v) {\n    return encode.INDEX(v).length;\n};\n\n// Convert an object to a CFF DICT structure.\n// The keys should be numeric.\n// The values should be objects containing name / type / value.\nencode.DICT = function(m) {\n    var d = [];\n    var keys = Object.keys(m);\n    var length = keys.length;\n\n    for (var i = 0; i < length; i += 1) {\n        // Object.keys() return string keys, but our keys are always numeric.\n        var k = parseInt(keys[i], 0);\n        var v = m[k];\n        // Value comes before the key.\n        d = d.concat(encode.OPERAND(v.value, v.type));\n        d = d.concat(encode.OPERATOR(k));\n    }\n\n    return d;\n};\n\nsizeOf.DICT = function(m) {\n    return encode.DICT(m).length;\n};\n\nencode.OPERATOR = function(v) {\n    if (v < 1200) {\n        return [v];\n    } else {\n        return [12, v - 1200];\n    }\n};\n\nencode.OPERAND = function(v, type) {\n    var d = [];\n    if (Array.isArray(type)) {\n        for (var i = 0; i < type.length; i += 1) {\n            check.argument(v.length === type.length, 'Not enough arguments given for type' + type);\n            d = d.concat(encode.OPERAND(v[i], type[i]));\n        }\n    } else {\n        if (type === 'SID') {\n            d = d.concat(encode.NUMBER(v));\n        } else if (type === 'offset') {\n            // We make it easy for ourselves and always encode offsets as\n            // 4 bytes. This makes offset calculation for the top dict easier.\n            d = d.concat(encode.NUMBER32(v));\n        } else if (type === 'number') {\n            d = d.concat(encode.NUMBER(v));\n        } else if (type === 'real') {\n            d = d.concat(encode.REAL(v));\n        } else {\n            throw new Error('Unknown operand type ' + type);\n            // FIXME Add support for booleans\n        }\n    }\n\n    return d;\n};\n\nencode.OP = encode.BYTE;\nsizeOf.OP = sizeOf.BYTE;\n\n// memoize charstring encoding using WeakMap if available\nvar wmm = typeof WeakMap === 'function' && new WeakMap();\n// Convert a list of CharString operations to bytes.\nencode.CHARSTRING = function(ops) {\n    if (wmm && wmm.has(ops)) {\n        return wmm.get(ops);\n    }\n\n    var d = [];\n    var length = ops.length;\n\n    for (var i = 0; i < length; i += 1) {\n        var op = ops[i];\n        d = d.concat(encode[op.type](op.value));\n    }\n\n    if (wmm) {\n        wmm.set(ops, d);\n    }\n\n    return d;\n};\n\nsizeOf.CHARSTRING = function(ops) {\n    return encode.CHARSTRING(ops).length;\n};\n\n// Utility functions ////////////////////////////////////////////////////////\n\n// Convert an object containing name / type / value to bytes.\nencode.OBJECT = function(v) {\n    var encodingFunction = encode[v.type];\n    check.argument(encodingFunction !== undefined, 'No encoding function for type ' + v.type);\n    return encodingFunction(v.value);\n};\n\nsizeOf.OBJECT = function(v) {\n    var sizeOfFunction = sizeOf[v.type];\n    check.argument(sizeOfFunction !== undefined, 'No sizeOf function for type ' + v.type);\n    return sizeOfFunction(v.value);\n};\n\n// Convert a table object to bytes.\n// A table contains a list of fields containing the metadata (name, type and default value).\n// The table itself has the field values set as attributes.\nencode.TABLE = function(table) {\n    var d = [];\n    var length = table.fields.length;\n\n    for (var i = 0; i < length; i += 1) {\n        var field = table.fields[i];\n        var encodingFunction = encode[field.type];\n        check.argument(encodingFunction !== undefined, 'No encoding function for field type ' + field.type);\n        var value = table[field.name];\n        if (value === undefined) {\n            value = field.value;\n        }\n\n        var bytes = encodingFunction(value);\n        d = d.concat(bytes);\n    }\n\n    return d;\n};\n\nsizeOf.TABLE = function(table) {\n    var numBytes = 0;\n    var length = table.fields.length;\n\n    for (var i = 0; i < length; i += 1) {\n        var field = table.fields[i];\n        var sizeOfFunction = sizeOf[field.type];\n        check.argument(sizeOfFunction !== undefined, 'No sizeOf function for field type ' + field.type);\n        var value = table[field.name];\n        if (value === undefined) {\n            value = field.value;\n        }\n\n        numBytes += sizeOfFunction(value);\n    }\n\n    return numBytes;\n};\n\n// Merge in a list of bytes.\nencode.LITERAL = function(v) {\n    return v;\n};\n\nsizeOf.LITERAL = function(v) {\n    return v.length;\n};\n\nexports.decode = decode;\nexports.encode = encode;\nexports.sizeOf = sizeOf;\n\n},{\"./check\":1}]},{},[7])(7)\n});","import {AbstractStage} from '/client/lib/abstract';\nimport {AnalysisStage} from '/client/lib/analysis';\nimport {BridgesStage} from '/client/lib/bridges';\nimport {OrderStage} from '/client/lib/order';\nimport {PathStage} from '/client/lib/path';\nimport {StrokesStage} from '/client/lib/strokes';\nimport {VerifiedStage} from '/client/lib/verified';\nimport {assert} from '/lib/base';\nimport {cjklib} from '/lib/cjklib';\n\nSession.set('editor.glyph', undefined);\n\nconst stages = {\n  analysis: AnalysisStage,\n  bridges: BridgesStage,\n  order: OrderStage,\n  path: PathStage,\n  strokes: StrokesStage,\n  verified: VerifiedStage,\n};\nconst types = ['path', 'bridges', 'strokes', 'analysis', 'order', 'verified'];\nlet last_glyph = undefined;\nlet last_json = undefined;\nlet stage = new AbstractStage;\n\nconst changeGlyph = (method, argument) => {\n  argument = argument || Session.get('editor.glyph');\n  Meteor.call(method, argument, function(error, data) {\n    assert(!error, error);\n    Session.set('editor.glyph', data);\n    window.location.hash = encodeURIComponent(data.character);\n  });\n}\n\nconst clearStageSessionKeys = (type) => {\n  Object.keys(Session.keys).filter((x) => x.startsWith(`stages.${type}.`))\n                           .map((x) => Session.set(x, undefined));\n}\n\nconst constructStage = (type) => {\n  const glyph = Session.get('editor.glyph');\n  const current = glyph.stages[type];\n  if (!current || current.sentinel) {\n    glyph.stages[type] = null;\n  }\n  clearStageSessionKeys(stage.type);\n  stage = new stages[type](glyph);\n  assert(stage.type === type);\n  stage.forceRefresh = forceRefresh;\n  stage.forceRefresh(true /* from_construct_stage */);\n}\n\nconst forceRefresh = (from_construct_stage) => {\n  const glyph = Session.get('editor.glyph');\n  stage.refreshUI(glyph.character, glyph.metadata);\n  let output = stage.getStageOutput();\n  const current = glyph.stages[stage.type];\n  if (from_construct_stage && (!current || current.sentinel)) {\n    output = {sentinel: true};\n  }\n  if (!_.isEqual(output, current)) {\n    glyph.stages[stage.type] = output;\n    if (!output || !current || stage.clearLaterStages(output, current)) {\n      for (let i = types.indexOf(stage.type) + 1; i < types.length; i++) {\n        glyph.stages[types[i]] = null;\n      }\n    }\n    Session.set('editor.glyph', glyph);\n  }\n}\n\nconst incrementStage = (amount) => {\n  const index = types.indexOf(stage.type);\n  if (index < 0) return;\n  const new_index = index + amount;\n  if (new_index < 0 || new_index >= types.length) return;\n  if (amount > 0) {\n    try {\n      stage.validate();\n    } catch (e) {\n      // HACK(skishore): The analysis stage may be failing because some\n      // dependency of the current glyph is incomplete. Switch to it. This code\n      // is a terrible hack because it makes use of the string used to render\n      // the incomplete-component message.\n      const log = Session.get('stage.status');\n      const prefix = 'Incomplete components: ';\n      if (log.length > 0 && log[0].message.startsWith(prefix)) {\n        changeGlyph('getGlyph', log[0].message[prefix.length]);\n      }\n      return;\n    }\n    stage.forceRefresh();\n  }\n  constructStage(types[new_index]);\n}\n\nconst loadCharacter = () => {\n  const character = decodeURIComponent(window.location.hash.slice(1));\n  const glyph = Session.get('editor.glyph');\n  if (!character) {\n    changeGlyph('getNextGlyph');\n  } else if (!glyph || glyph.character !== character) {\n    changeGlyph('getGlyph', character);\n  }\n}\n\nconst resetStage = () => {\n  const glyph = Session.get('editor.glyph');\n  glyph.stages[stage.type] = null;\n  Session.set('editor.glyph', glyph);\n  constructStage(stage.type);\n}\n\nconst bindings = {\n  a: () => changeGlyph('getPreviousGlyph'),\n  A: () => changeGlyph('getPreviousUnverifiedGlyph'),\n  q: () => changeGlyph('getPreviousVerifiedGlyph'),\n  d: () => changeGlyph('getNextGlyph'),\n  D: () => changeGlyph('getNextUnverifiedGlyph'),\n  e: () => changeGlyph('getNextVerifiedGlyph'),\n  r: resetStage,\n  s: () => incrementStage(1),\n  w: () => incrementStage(-1),\n};\n\n// We avoid arrow functions in this map so that this is bound to the template.\nTemplate.editor.events({\n  'click svg .selectable': function(event) {\n    stage.handleEvent(event, this);\n    stage.forceRefresh();\n  }\n});\n\nTemplate.editor.helpers({\n  paths: () => Session.get('stage.paths'),\n  lines: () => Session.get('stage.lines'),\n  points: () => Session.get('stage.points'),\n  animations: () => Session.get('stage.animations'),\n});\n\nTemplate.status.helpers({\n  stage: () => Session.get('stage.type'),\n  template: () => `${Session.get('stage.type')}_stage`,\n  lines: () => Session.get('stage.status'),\n});\n\nTracker.autorun(() => {\n  const glyph = Session.get('editor.glyph');\n  const json = JSON.stringify(glyph);\n  if (!glyph || json === last_json) {\n    return;\n  } else if (!last_glyph || glyph.character !== last_glyph.character) {\n    let last_completed_stage = types[0];\n    types.map((x) => { if (glyph.stages[x]) last_completed_stage = x; });\n    constructStage(last_completed_stage);\n  } else {\n    Meteor.call('saveGlyph', glyph,\n                (error, data) => { if (error) console.error(error) });\n    if (!_.isEqual(glyph.metadata, last_glyph.metadata)) {\n      stage.refreshUI(glyph.character, glyph.metadata);\n    }\n  }\n  last_glyph = glyph;\n  last_json = json;\n});\n\nMeteor.startup(() => {\n  $('body').on('keypress', (event) => {\n    const key = String.fromCharCode(event.which);\n    if (bindings.hasOwnProperty(key)) {\n      bindings[key]();\n    } else if ('1' <= key && key <= '9') {\n      const index = key.charCodeAt(0) - '1'.charCodeAt(0);\n      const href = $('.metadata .reference')[index].href;\n      window.open(href, '_blank').focus();\n    }\n  });\n  $(window).on('hashchange', loadCharacter);\n  cjklib.promise.then(loadCharacter).catch(console.error.bind(console));\n});\n","Handlebars.registerHelper('selected', (current, value) =>\n  ({value: value, selected: current === value ? 'selected' : undefined}));\n\nHandlebars.registerHelper('equals', (a, b) => a === b);\n\nHandlebars.registerHelper('editable', (field, value) =>\n  `<div class=\"value\" contenteditable=\"true\" ` +\n       `data-field=\"${field}\">${value}</div>`);\n\nTemplate.body.events({\n  'click div.value[contenteditable=\"true\"]': function(event) {\n    if ($(event.target).text().length !== 1) {\n      return;\n    }\n    const range = document.createRange();\n    range.selectNodeContents(event.target);\n    const selection = window.getSelection();\n    selection.removeAllRanges();\n    selection.addRange(range);\n  },\n  'keypress div.value[contenteditable=\"true\"]': function(event) {\n    if (event.which === 13 /* \\n */) {\n      $(event.target).trigger('blur');\n      event.preventDefault();\n    }\n    event.stopPropagation();\n  },\n});\n","import {assert} from '/lib/base';\nimport {cjklib} from '/lib/cjklib';\nimport {pinyin_util} from '/lib/pinyin_util';\n\nconst unknown = '(unknown)';\n\nconst parseIntWithValidation = (text) => {\n  const result = parseInt(text, 10);\n  assert(!Number.isNaN(result));\n  return result;\n}\n\nconst parsePinyin = (text) => {\n  const pinyin = text.split(',').map((x) => x.trim()).filter((x) => x.length);\n  return pinyin.map(pinyin_util.numberedPinyinToTonePinyin).join(', ');\n}\n\nconst validators = {\n  pinyin: parsePinyin,\n  strokes: parseIntWithValidation,\n};\n\n// We avoid arrow functions in this map so that this is bound to the template.\nTemplate.metadata.events({\n  'blur .value': function(event) {\n    const text = $(event.target).text();\n    let value = (text && text !== unknown ? text : null);\n    if (value && validators.hasOwnProperty(this.field)) {\n      try {\n        value = validators[this.field](text);\n      } catch (error) {\n        console.log(error);\n        value = null;\n      }\n    }\n    const glyph = Session.get('editor.glyph');\n    const defaults = cjklib.getCharacterData(glyph.character);\n    if (value === defaults[this.field]) {\n      value = null;\n    }\n    if (value !== glyph.metadata[this.field] &&\n        (value || glyph.metadata[this.field])) {\n      glyph.metadata[this.field] = value;\n      Session.set('editor.glyph', glyph);\n    } else {\n      $(event.target).text(value || defaults[this.field] || unknown);\n    }\n  },\n});\n\nTemplate.metadata.helpers({\n  character() {\n    const glyph = Session.get('editor.glyph');\n    if (!glyph) return;\n    return glyph.character;\n  },\n  display() {\n    return Session.get('stage.type') === 'order' ? 'none' : undefined;\n  },\n  items() {\n    const glyph = Session.get('editor.glyph');\n    if (!glyph) return;\n    const defaults = cjklib.getCharacterData(glyph.character);\n    const fields = ['definition', 'pinyin', 'strokes']\n    const result = fields.map((x) => ({\n      field: x,\n      label: `${x[0].toUpperCase()}${x.substr(1)}:`,\n      value: glyph.metadata[x] || defaults[x] || unknown,\n    }));\n    if (cjklib.radicals.radical_to_index_map.hasOwnProperty(glyph.character)) {\n      const index = cjklib.radicals.radical_to_index_map[glyph.character];\n      const primary = cjklib.radicals.primary_radical[index];\n      result[0].separator = '; ';\n      result[0].extra = `Kangxi radical ${index}`;\n      if (glyph.character !== primary) {\n        result[0].separator += 'variant of ';\n        result[0].extra = `<a class=\"link\" href=\"#${primary}\">` +\n                          `${result[0].extra} ${primary}</a>`;\n      }\n    }\n    return result;\n  },\n  rank() {\n    const glyph = Session.get('editor.glyph');\n    return (glyph && glyph.metadata.frequency) || '?';\n  },\n  references() {\n    const glyph = Session.get('editor.glyph');\n    if (!glyph) return;\n    const character = glyph.character;\n    return [{\n      href: 'http://www.archchinese.com/chinese_english_dictionary.html' +\n            `?find=${character}`,\n      label: 'Arch Chinese',\n    }, {\n      href: 'http://www.mdbg.net/chindict/chindict.php?page=worddict' +\n            `&wdrst=0&wdqb=${character}`,\n      label: 'MDBG',\n    }, {\n      href: `https://en.wiktionary.org/wiki/${character}`,\n      label: 'Wiktionary',\n    }, {\n      href: 'http://www.yellowbridge.com/chinese/character-etymology.php' +\n            `?zi=${character}`,\n      label: 'YellowBridge',\n    }];\n  },\n  simplified() {\n    const glyph = Session.get('editor.glyph');\n    return glyph && glyph.simplified;\n  },\n});\n","\"use strict\";\n\nTemplate.modal.helpers({\n  percent: () => {\n    const value = Session.get('modal.value');\n    return Math.round(100*(value === undefined ? 1 : value));\n  },\n  text: () => Session.get('modal.text'),\n});\n\nTracker.autorun(function() {\n  if (Session.get('modal.show')) {\n    $('#modal').modal({background: 'static', keyboard: false});\n  } else {\n    $('#modal').modal('hide');\n  }\n});\n\nTracker.autorun(function() {\n  const value = Session.get('modal.value');\n  Session.set('modal.show', value !== undefined);\n});\n\nMeteor.startup(function() {\n  Session.set('modal.show', false);\n  Session.set('modal.value', undefined);\n});\n","import {Progress} from '/lib/glyphs';\n\nTemplate.navbar.events({\n  'click .backup': () => {\n    const progress = Progress.findOne();\n    if (!(progress && progress.backup)) {\n      Meteor.call('backup');\n    }\n  },\n});\n\nTemplate.navbar.helpers({\n  backup() {\n    const progress = Progress.findOne();\n    return (progress && progress.backup) ? 'disabled' : undefined;\n  },\n  complete() {\n    const progress = Progress.findOne();\n    return progress ? progress.complete : '?';\n  },\n  percent() {\n    const progress = Progress.findOne();\n    return progress && progress.total ?\n        Math.round(100*progress.complete/progress.total) : 0;\n  },\n  total() {\n    const progress = Progress.findOne();\n    return progress ? progress.total : '?';\n  },\n});\n\nMeteor.startup(() => Meteor.subscribe('getProgress'));\n"]}